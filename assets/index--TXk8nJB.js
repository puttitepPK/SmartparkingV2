var GX=Object.defineProperty;var yX=(A,g,e)=>g in A?GX(A,g,{enumerable:!0,configurable:!0,writable:!0,value:e}):A[g]=e;var fA=(A,g,e)=>yX(A,typeof g!="symbol"?g+"":g,e);function fX(A,g){for(var e=0;e<g.length;e++){const t=g[e];if(typeof t!="string"&&!Array.isArray(t)){for(const I in t)if(I!=="default"&&!(I in A)){const n=Object.getOwnPropertyDescriptor(t,I);n&&Object.defineProperty(A,I,n.get?n:{enumerable:!0,get:()=>t[I]})}}}return Object.freeze(Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))t(I);new MutationObserver(I=>{for(const n of I)if(n.type==="childList")for(const C of n.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&t(C)}).observe(document,{childList:!0,subtree:!0});function e(I){const n={};return I.integrity&&(n.integrity=I.integrity),I.referrerPolicy&&(n.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?n.credentials="include":I.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(I){if(I.ep)return;I.ep=!0;const n=e(I);fetch(I.href,n)}})();var SX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ea(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Xy={exports:{}},La={},Jy={exports:{}},hA={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),VX=Symbol.for("react.portal"),WX=Symbol.for("react.fragment"),RX=Symbol.for("react.strict_mode"),vX=Symbol.for("react.profiler"),wX=Symbol.for("react.provider"),XX=Symbol.for("react.context"),JX=Symbol.for("react.forward_ref"),FX=Symbol.for("react.suspense"),kX=Symbol.for("react.memo"),HX=Symbol.for("react.lazy"),i0=Symbol.iterator;function YX(A){return A===null||typeof A!="object"?null:(A=i0&&A[i0]||A["@@iterator"],typeof A=="function"?A:null)}var Fy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ky=Object.assign,Hy={};function TC(A,g,e){this.props=A,this.context=g,this.refs=Hy,this.updater=e||Fy}TC.prototype.isReactComponent={};TC.prototype.setState=function(A,g){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,g,"setState")};TC.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function Yy(){}Yy.prototype=TC.prototype;function Lm(A,g,e){this.props=A,this.context=g,this.refs=Hy,this.updater=e||Fy}var Mm=Lm.prototype=new Yy;Mm.constructor=Lm;ky(Mm,TC.prototype);Mm.isPureReactComponent=!0;var o0=Array.isArray,Qy=Object.prototype.hasOwnProperty,Dm={current:null},Ky={key:!0,ref:!0,__self:!0,__source:!0};function Ny(A,g,e){var t,I={},n=null,C=null;if(g!=null)for(t in g.ref!==void 0&&(C=g.ref),g.key!==void 0&&(n=""+g.key),g)Qy.call(g,t)&&!Ky.hasOwnProperty(t)&&(I[t]=g[t]);var l=arguments.length-2;if(l===1)I.children=e;else if(1<l){for(var s=Array(l),i=0;i<l;i++)s[i]=arguments[i+2];I.children=s}if(A&&A.defaultProps)for(t in l=A.defaultProps,l)I[t]===void 0&&(I[t]=l[t]);return{$$typeof:Ks,type:A,key:n,ref:C,props:I,_owner:Dm.current}}function QX(A,g){return{$$typeof:Ks,type:A.type,key:g,ref:A.ref,props:A.props,_owner:A._owner}}function zm(A){return typeof A=="object"&&A!==null&&A.$$typeof===Ks}function KX(A){var g={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(e){return g[e]})}var a0=/\/+/g;function Sc(A,g){return typeof A=="object"&&A!==null&&A.key!=null?KX(""+A.key):g.toString(36)}function Go(A,g,e,t,I){var n=typeof A;(n==="undefined"||n==="boolean")&&(A=null);var C=!1;if(A===null)C=!0;else switch(n){case"string":case"number":C=!0;break;case"object":switch(A.$$typeof){case Ks:case VX:C=!0}}if(C)return C=A,I=I(C),A=t===""?"."+Sc(C,0):t,o0(I)?(e="",A!=null&&(e=A.replace(a0,"$&/")+"/"),Go(I,g,e,"",function(i){return i})):I!=null&&(zm(I)&&(I=QX(I,e+(!I.key||C&&C.key===I.key?"":(""+I.key).replace(a0,"$&/")+"/")+A)),g.push(I)),1;if(C=0,t=t===""?".":t+":",o0(A))for(var l=0;l<A.length;l++){n=A[l];var s=t+Sc(n,l);C+=Go(n,g,e,s,I)}else if(s=YX(A),typeof s=="function")for(A=s.call(A),l=0;!(n=A.next()).done;)n=n.value,s=t+Sc(n,l++),C+=Go(n,g,e,s,I);else if(n==="object")throw g=String(A),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return C}function mi(A,g,e){if(A==null)return A;var t=[],I=0;return Go(A,t,"","",function(n){return g.call(e,n,I++)}),t}function NX(A){if(A._status===-1){var g=A._result;g=g(),g.then(function(e){(A._status===0||A._status===-1)&&(A._status=1,A._result=e)},function(e){(A._status===0||A._status===-1)&&(A._status=2,A._result=e)}),A._status===-1&&(A._status=0,A._result=g)}if(A._status===1)return A._result.default;throw A._result}var Og={current:null},yo={transition:null},UX={ReactCurrentDispatcher:Og,ReactCurrentBatchConfig:yo,ReactCurrentOwner:Dm};function Uy(){throw Error("act(...) is not supported in production builds of React.")}hA.Children={map:mi,forEach:function(A,g,e){mi(A,function(){g.apply(this,arguments)},e)},count:function(A){var g=0;return mi(A,function(){g++}),g},toArray:function(A){return mi(A,function(g){return g})||[]},only:function(A){if(!zm(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};hA.Component=TC;hA.Fragment=WX;hA.Profiler=vX;hA.PureComponent=Lm;hA.StrictMode=RX;hA.Suspense=FX;hA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UX;hA.act=Uy;hA.cloneElement=function(A,g,e){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var t=ky({},A.props),I=A.key,n=A.ref,C=A._owner;if(g!=null){if(g.ref!==void 0&&(n=g.ref,C=Dm.current),g.key!==void 0&&(I=""+g.key),A.type&&A.type.defaultProps)var l=A.type.defaultProps;for(s in g)Qy.call(g,s)&&!Ky.hasOwnProperty(s)&&(t[s]=g[s]===void 0&&l!==void 0?l[s]:g[s])}var s=arguments.length-2;if(s===1)t.children=e;else if(1<s){l=Array(s);for(var i=0;i<s;i++)l[i]=arguments[i+2];t.children=l}return{$$typeof:Ks,type:A.type,key:I,ref:n,props:t,_owner:C}};hA.createContext=function(A){return A={$$typeof:XX,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:wX,_context:A},A.Consumer=A};hA.createElement=Ny;hA.createFactory=function(A){var g=Ny.bind(null,A);return g.type=A,g};hA.createRef=function(){return{current:null}};hA.forwardRef=function(A){return{$$typeof:JX,render:A}};hA.isValidElement=zm;hA.lazy=function(A){return{$$typeof:HX,_payload:{_status:-1,_result:A},_init:NX}};hA.memo=function(A,g){return{$$typeof:kX,type:A,compare:g===void 0?null:g}};hA.startTransition=function(A){var g=yo.transition;yo.transition={};try{A()}finally{yo.transition=g}};hA.unstable_act=Uy;hA.useCallback=function(A,g){return Og.current.useCallback(A,g)};hA.useContext=function(A){return Og.current.useContext(A)};hA.useDebugValue=function(){};hA.useDeferredValue=function(A){return Og.current.useDeferredValue(A)};hA.useEffect=function(A,g){return Og.current.useEffect(A,g)};hA.useId=function(){return Og.current.useId()};hA.useImperativeHandle=function(A,g,e){return Og.current.useImperativeHandle(A,g,e)};hA.useInsertionEffect=function(A,g){return Og.current.useInsertionEffect(A,g)};hA.useLayoutEffect=function(A,g){return Og.current.useLayoutEffect(A,g)};hA.useMemo=function(A,g){return Og.current.useMemo(A,g)};hA.useReducer=function(A,g,e){return Og.current.useReducer(A,g,e)};hA.useRef=function(A){return Og.current.useRef(A)};hA.useState=function(A){return Og.current.useState(A)};hA.useSyncExternalStore=function(A,g,e){return Og.current.useSyncExternalStore(A,g,e)};hA.useTransition=function(){return Og.current.useTransition()};hA.version="18.3.1";Jy.exports=hA;var f=Jy.exports;const rg=Ea(f),xX=fX({__proto__:null,default:rg},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EX=f,LX=Symbol.for("react.element"),MX=Symbol.for("react.fragment"),DX=Object.prototype.hasOwnProperty,zX=EX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TX={key:!0,ref:!0,__self:!0,__source:!0};function xy(A,g,e){var t,I={},n=null,C=null;e!==void 0&&(n=""+e),g.key!==void 0&&(n=""+g.key),g.ref!==void 0&&(C=g.ref);for(t in g)DX.call(g,t)&&!TX.hasOwnProperty(t)&&(I[t]=g[t]);if(A&&A.defaultProps)for(t in g=A.defaultProps,g)I[t]===void 0&&(I[t]=g[t]);return{$$typeof:LX,type:A,key:n,ref:C,props:I,_owner:zX.current}}La.Fragment=MX;La.jsx=xy;La.jsxs=xy;Xy.exports=La;var o=Xy.exports,Ey={exports:{}},Be={},Ly={exports:{}},My={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(A){function g(Q,P){var J=Q.length;Q.push(P);A:for(;0<J;){var IA=J-1>>>1,iA=Q[IA];if(0<I(iA,P))Q[IA]=P,Q[J]=iA,J=IA;else break A}}function e(Q){return Q.length===0?null:Q[0]}function t(Q){if(Q.length===0)return null;var P=Q[0],J=Q.pop();if(J!==P){Q[0]=J;A:for(var IA=0,iA=Q.length,ZA=iA>>>1;IA<ZA;){var aA=2*(IA+1)-1,SA=Q[aA],mA=aA+1,dg=Q[mA];if(0>I(SA,J))mA<iA&&0>I(dg,SA)?(Q[IA]=dg,Q[mA]=J,IA=mA):(Q[IA]=SA,Q[aA]=J,IA=aA);else if(mA<iA&&0>I(dg,J))Q[IA]=dg,Q[mA]=J,IA=mA;else break A}}return P}function I(Q,P){var J=Q.sortIndex-P.sortIndex;return J!==0?J:Q.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;A.unstable_now=function(){return n.now()}}else{var C=Date,l=C.now();A.unstable_now=function(){return C.now()-l}}var s=[],i=[],r=1,c=null,d=3,h=!1,Z=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Q){for(var P=e(i);P!==null;){if(P.callback===null)t(i);else if(P.startTime<=Q)t(i),P.sortIndex=P.expirationTime,g(s,P);else break;P=e(i)}}function V(Q){if(y=!1,G(Q),!Z)if(e(s)!==null)Z=!0,tA(W);else{var P=e(i);P!==null&&oA(V,P.startTime-Q)}}function W(Q,P){Z=!1,y&&(y=!1,b(F),F=-1),h=!0;var J=d;try{for(G(P),c=e(s);c!==null&&(!(c.expirationTime>P)||Q&&!_());){var IA=c.callback;if(typeof IA=="function"){c.callback=null,d=c.priorityLevel;var iA=IA(c.expirationTime<=P);P=A.unstable_now(),typeof iA=="function"?c.callback=iA:c===e(s)&&t(s),G(P)}else t(s);c=e(s)}if(c!==null)var ZA=!0;else{var aA=e(i);aA!==null&&oA(V,aA.startTime-P),ZA=!1}return ZA}finally{c=null,d=J,h=!1}}var R=!1,X=null,F=-1,H=5,K=-1;function _(){return!(A.unstable_now()-K<H)}function gA(){if(X!==null){var Q=A.unstable_now();K=Q;var P=!0;try{P=X(!0,Q)}finally{P?AA():(R=!1,X=null)}}else R=!1}var AA;if(typeof m=="function")AA=function(){m(gA)};else if(typeof MessageChannel<"u"){var rA=new MessageChannel,uA=rA.port2;rA.port1.onmessage=gA,AA=function(){uA.postMessage(null)}}else AA=function(){S(gA,0)};function tA(Q){X=Q,R||(R=!0,AA())}function oA(Q,P){F=S(function(){Q(A.unstable_now())},P)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(Q){Q.callback=null},A.unstable_continueExecution=function(){Z||h||(Z=!0,tA(W))},A.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Q?Math.floor(1e3/Q):5},A.unstable_getCurrentPriorityLevel=function(){return d},A.unstable_getFirstCallbackNode=function(){return e(s)},A.unstable_next=function(Q){switch(d){case 1:case 2:case 3:var P=3;break;default:P=d}var J=d;d=P;try{return Q()}finally{d=J}},A.unstable_pauseExecution=function(){},A.unstable_requestPaint=function(){},A.unstable_runWithPriority=function(Q,P){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var J=d;d=Q;try{return P()}finally{d=J}},A.unstable_scheduleCallback=function(Q,P,J){var IA=A.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?IA+J:IA):J=IA,Q){case 1:var iA=-1;break;case 2:iA=250;break;case 5:iA=1073741823;break;case 4:iA=1e4;break;default:iA=5e3}return iA=J+iA,Q={id:r++,callback:P,priorityLevel:Q,startTime:J,expirationTime:iA,sortIndex:-1},J>IA?(Q.sortIndex=J,g(i,Q),e(s)===null&&Q===e(i)&&(y?(b(F),F=-1):y=!0,oA(V,J-IA))):(Q.sortIndex=iA,g(s,Q),Z||h||(Z=!0,tA(W))),Q},A.unstable_shouldYield=_,A.unstable_wrapCallback=function(Q){var P=d;return function(){var J=d;d=P;try{return Q.apply(this,arguments)}finally{d=J}}}})(My);Ly.exports=My;var jX=Ly.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OX=f,me=jX;function U(A){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+A,e=1;e<arguments.length;e++)g+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dy=new Set,ss={};function kn(A,g){YC(A,g),YC(A+"Capture",g)}function YC(A,g){for(ss[A]=g,A=0;A<g.length;A++)Dy.add(g[A])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ld=Object.prototype.hasOwnProperty,PX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r0={},c0={};function _X(A){return Ld.call(c0,A)?!0:Ld.call(r0,A)?!1:PX.test(A)?c0[A]=!0:(r0[A]=!0,!1)}function qX(A,g,e,t){if(e!==null&&e.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return t?!1:e!==null?!e.acceptsBooleans:(A=A.toLowerCase().slice(0,5),A!=="data-"&&A!=="aria-");default:return!1}}function $X(A,g,e,t){if(g===null||typeof g>"u"||qX(A,g,e,t))return!0;if(t)return!1;if(e!==null)switch(e.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function Pg(A,g,e,t,I,n,C){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=t,this.attributeNamespace=I,this.mustUseProperty=e,this.propertyName=A,this.type=g,this.sanitizeURL=n,this.removeEmptyString=C}var wg={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(A){wg[A]=new Pg(A,0,!1,A,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(A){var g=A[0];wg[g]=new Pg(g,1,!1,A[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(A){wg[A]=new Pg(A,2,!1,A.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(A){wg[A]=new Pg(A,2,!1,A,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(A){wg[A]=new Pg(A,3,!1,A.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(A){wg[A]=new Pg(A,3,!0,A,null,!1,!1)});["capture","download"].forEach(function(A){wg[A]=new Pg(A,4,!1,A,null,!1,!1)});["cols","rows","size","span"].forEach(function(A){wg[A]=new Pg(A,6,!1,A,null,!1,!1)});["rowSpan","start"].forEach(function(A){wg[A]=new Pg(A,5,!1,A.toLowerCase(),null,!1,!1)});var Tm=/[\-:]([a-z])/g;function jm(A){return A[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(A){var g=A.replace(Tm,jm);wg[g]=new Pg(g,1,!1,A,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(A){var g=A.replace(Tm,jm);wg[g]=new Pg(g,1,!1,A,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(A){var g=A.replace(Tm,jm);wg[g]=new Pg(g,1,!1,A,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(A){wg[A]=new Pg(A,1,!1,A.toLowerCase(),null,!1,!1)});wg.xlinkHref=new Pg("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(A){wg[A]=new Pg(A,1,!1,A.toLowerCase(),null,!0,!0)});function Om(A,g,e,t){var I=wg.hasOwnProperty(g)?wg[g]:null;(I!==null?I.type!==0:t||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&($X(g,e,I,t)&&(e=null),t||I===null?_X(g)&&(e===null?A.removeAttribute(g):A.setAttribute(g,""+e)):I.mustUseProperty?A[I.propertyName]=e===null?I.type===3?!1:"":e:(g=I.attributeName,t=I.attributeNamespace,e===null?A.removeAttribute(g):(I=I.type,e=I===3||I===4&&e===!0?"":""+e,t?A.setAttributeNS(t,g,e):A.setAttribute(g,e))))}var Dt=OX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bi=Symbol.for("react.element"),aC=Symbol.for("react.portal"),rC=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),zy=Symbol.for("react.provider"),Ty=Symbol.for("react.context"),_m=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),tI=Symbol.for("react.lazy"),jy=Symbol.for("react.offscreen"),d0=Symbol.iterator;function ol(A){return A===null||typeof A!="object"?null:(A=d0&&A[d0]||A["@@iterator"],typeof A=="function"?A:null)}var _A=Object.assign,Vc;function Wl(A){if(Vc===void 0)try{throw Error()}catch(e){var g=e.stack.trim().match(/\n( *(at )?)/);Vc=g&&g[1]||""}return`
`+Vc+A}var Wc=!1;function Rc(A,g){if(!A||Wc)return"";Wc=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(i){var t=i}Reflect.construct(A,[],g)}else{try{g.call()}catch(i){t=i}A.call(g.prototype)}else{try{throw Error()}catch(i){t=i}A()}}catch(i){if(i&&t&&typeof i.stack=="string"){for(var I=i.stack.split(`
`),n=t.stack.split(`
`),C=I.length-1,l=n.length-1;1<=C&&0<=l&&I[C]!==n[l];)l--;for(;1<=C&&0<=l;C--,l--)if(I[C]!==n[l]){if(C!==1||l!==1)do if(C--,l--,0>l||I[C]!==n[l]){var s=`
`+I[C].replace(" at new "," at ");return A.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",A.displayName)),s}while(1<=C&&0<=l);break}}}finally{Wc=!1,Error.prepareStackTrace=e}return(A=A?A.displayName||A.name:"")?Wl(A):""}function A2(A){switch(A.tag){case 5:return Wl(A.type);case 16:return Wl("Lazy");case 13:return Wl("Suspense");case 19:return Wl("SuspenseList");case 0:case 2:case 15:return A=Rc(A.type,!1),A;case 11:return A=Rc(A.type.render,!1),A;case 1:return A=Rc(A.type,!0),A;default:return""}}function Td(A){if(A==null)return null;if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case rC:return"Fragment";case aC:return"Portal";case Md:return"Profiler";case Pm:return"StrictMode";case Dd:return"Suspense";case zd:return"SuspenseList"}if(typeof A=="object")switch(A.$$typeof){case Ty:return(A.displayName||"Context")+".Consumer";case zy:return(A._context.displayName||"Context")+".Provider";case _m:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case qm:return g=A.displayName||null,g!==null?g:Td(A.type)||"Memo";case tI:g=A._payload,A=A._init;try{return Td(A(g))}catch{}}return null}function g2(A){var g=A.type;switch(A.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return A=g.render,A=A.displayName||A.name||"",g.displayName||(A!==""?"ForwardRef("+A+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Td(g);case 8:return g===Pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function wI(A){switch(typeof A){case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Oy(A){var g=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function e2(A){var g=Oy(A)?"checked":"value",e=Object.getOwnPropertyDescriptor(A.constructor.prototype,g),t=""+A[g];if(!A.hasOwnProperty(g)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var I=e.get,n=e.set;return Object.defineProperty(A,g,{configurable:!0,get:function(){return I.call(this)},set:function(C){t=""+C,n.call(this,C)}}),Object.defineProperty(A,g,{enumerable:e.enumerable}),{getValue:function(){return t},setValue:function(C){t=""+C},stopTracking:function(){A._valueTracker=null,delete A[g]}}}}function hi(A){A._valueTracker||(A._valueTracker=e2(A))}function Py(A){if(!A)return!1;var g=A._valueTracker;if(!g)return!0;var e=g.getValue(),t="";return A&&(t=Oy(A)?A.checked?"true":"false":A.value),A=t,A!==e?(g.setValue(A),!0):!1}function Do(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}function jd(A,g){var e=g.checked;return _A({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??A._wrapperState.initialChecked})}function u0(A,g){var e=g.defaultValue==null?"":g.defaultValue,t=g.checked!=null?g.checked:g.defaultChecked;e=wI(g.value!=null?g.value:e),A._wrapperState={initialChecked:t,initialValue:e,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function _y(A,g){g=g.checked,g!=null&&Om(A,"checked",g,!1)}function Od(A,g){_y(A,g);var e=wI(g.value),t=g.type;if(e!=null)t==="number"?(e===0&&A.value===""||A.value!=e)&&(A.value=""+e):A.value!==""+e&&(A.value=""+e);else if(t==="submit"||t==="reset"){A.removeAttribute("value");return}g.hasOwnProperty("value")?Pd(A,g.type,e):g.hasOwnProperty("defaultValue")&&Pd(A,g.type,wI(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(A.defaultChecked=!!g.defaultChecked)}function m0(A,g,e){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var t=g.type;if(!(t!=="submit"&&t!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+A._wrapperState.initialValue,e||g===A.value||(A.value=g),A.defaultValue=g}e=A.name,e!==""&&(A.name=""),A.defaultChecked=!!A._wrapperState.initialChecked,e!==""&&(A.name=e)}function Pd(A,g,e){(g!=="number"||Do(A.ownerDocument)!==A)&&(e==null?A.defaultValue=""+A._wrapperState.initialValue:A.defaultValue!==""+e&&(A.defaultValue=""+e))}var Rl=Array.isArray;function WC(A,g,e,t){if(A=A.options,g){g={};for(var I=0;I<e.length;I++)g["$"+e[I]]=!0;for(e=0;e<A.length;e++)I=g.hasOwnProperty("$"+A[e].value),A[e].selected!==I&&(A[e].selected=I),I&&t&&(A[e].defaultSelected=!0)}else{for(e=""+wI(e),g=null,I=0;I<A.length;I++){if(A[I].value===e){A[I].selected=!0,t&&(A[I].defaultSelected=!0);return}g!==null||A[I].disabled||(g=A[I])}g!==null&&(g.selected=!0)}}function _d(A,g){if(g.dangerouslySetInnerHTML!=null)throw Error(U(91));return _A({},g,{value:void 0,defaultValue:void 0,children:""+A._wrapperState.initialValue})}function B0(A,g){var e=g.value;if(e==null){if(e=g.children,g=g.defaultValue,e!=null){if(g!=null)throw Error(U(92));if(Rl(e)){if(1<e.length)throw Error(U(93));e=e[0]}g=e}g==null&&(g=""),e=g}A._wrapperState={initialValue:wI(e)}}function qy(A,g){var e=wI(g.value),t=wI(g.defaultValue);e!=null&&(e=""+e,e!==A.value&&(A.value=e),g.defaultValue==null&&A.defaultValue!==e&&(A.defaultValue=e)),t!=null&&(A.defaultValue=""+t)}function h0(A){var g=A.textContent;g===A._wrapperState.initialValue&&g!==""&&g!==null&&(A.value=g)}function $y(A){switch(A){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qd(A,g){return A==null||A==="http://www.w3.org/1999/xhtml"?$y(g):A==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":A}var bi,Af=function(A){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,e,t,I){MSApp.execUnsafeLocalFunction(function(){return A(g,e,t,I)})}:A}(function(A,g){if(A.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in A)A.innerHTML=g;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=bi.firstChild;A.firstChild;)A.removeChild(A.firstChild);for(;g.firstChild;)A.appendChild(g.firstChild)}});function is(A,g){if(g){var e=A.firstChild;if(e&&e===A.lastChild&&e.nodeType===3){e.nodeValue=g;return}}A.textContent=g}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t2=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(A){t2.forEach(function(g){g=g+A.charAt(0).toUpperCase()+A.substring(1),El[g]=El[A]})});function gf(A,g,e){return g==null||typeof g=="boolean"||g===""?"":e||typeof g!="number"||g===0||El.hasOwnProperty(A)&&El[A]?(""+g).trim():g+"px"}function ef(A,g){A=A.style;for(var e in g)if(g.hasOwnProperty(e)){var t=e.indexOf("--")===0,I=gf(e,g[e],t);e==="float"&&(e="cssFloat"),t?A.setProperty(e,I):A[e]=I}}var I2=_A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $d(A,g){if(g){if(I2[A]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(U(137,A));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(U(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(U(61))}if(g.style!=null&&typeof g.style!="object")throw Error(U(62))}}function Au(A,g){if(A.indexOf("-")===-1)return typeof g.is=="string";switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=null;function $m(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var eu=null,RC=null,vC=null;function b0(A){if(A=xs(A)){if(typeof eu!="function")throw Error(U(280));var g=A.stateNode;g&&(g=ja(g),eu(A.stateNode,A.type,g))}}function tf(A){RC?vC?vC.push(A):vC=[A]:RC=A}function If(){if(RC){var A=RC,g=vC;if(vC=RC=null,b0(A),g)for(A=0;A<g.length;A++)b0(g[A])}}function nf(A,g){return A(g)}function Cf(){}var vc=!1;function lf(A,g,e){if(vc)return A(g,e);vc=!0;try{return nf(A,g,e)}finally{vc=!1,(RC!==null||vC!==null)&&(Cf(),If())}}function os(A,g){var e=A.stateNode;if(e===null)return null;var t=ja(e);if(t===null)return null;e=t[g];A:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(A=A.type,t=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!t;break A;default:A=!1}if(A)return null;if(e&&typeof e!="function")throw Error(U(231,g,typeof e));return e}var tu=!1;if(Qt)try{var al={};Object.defineProperty(al,"passive",{get:function(){tu=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{tu=!1}function n2(A,g,e,t,I,n,C,l,s){var i=Array.prototype.slice.call(arguments,3);try{g.apply(e,i)}catch(r){this.onError(r)}}var Ll=!1,zo=null,To=!1,Iu=null,C2={onError:function(A){Ll=!0,zo=A}};function l2(A,g,e,t,I,n,C,l,s){Ll=!1,zo=null,n2.apply(C2,arguments)}function s2(A,g,e,t,I,n,C,l,s){if(l2.apply(this,arguments),Ll){if(Ll){var i=zo;Ll=!1,zo=null}else throw Error(U(198));To||(To=!0,Iu=i)}}function Hn(A){var g=A,e=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,g.flags&4098&&(e=g.return),A=g.return;while(A)}return g.tag===3?e:null}function sf(A){if(A.tag===13){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function Z0(A){if(Hn(A)!==A)throw Error(U(188))}function i2(A){var g=A.alternate;if(!g){if(g=Hn(A),g===null)throw Error(U(188));return g!==A?null:A}for(var e=A,t=g;;){var I=e.return;if(I===null)break;var n=I.alternate;if(n===null){if(t=I.return,t!==null){e=t;continue}break}if(I.child===n.child){for(n=I.child;n;){if(n===e)return Z0(I),A;if(n===t)return Z0(I),g;n=n.sibling}throw Error(U(188))}if(e.return!==t.return)e=I,t=n;else{for(var C=!1,l=I.child;l;){if(l===e){C=!0,e=I,t=n;break}if(l===t){C=!0,t=I,e=n;break}l=l.sibling}if(!C){for(l=n.child;l;){if(l===e){C=!0,e=n,t=I;break}if(l===t){C=!0,t=n,e=I;break}l=l.sibling}if(!C)throw Error(U(189))}}if(e.alternate!==t)throw Error(U(190))}if(e.tag!==3)throw Error(U(188));return e.stateNode.current===e?A:g}function of(A){return A=i2(A),A!==null?af(A):null}function af(A){if(A.tag===5||A.tag===6)return A;for(A=A.child;A!==null;){var g=af(A);if(g!==null)return g;A=A.sibling}return null}var rf=me.unstable_scheduleCallback,p0=me.unstable_cancelCallback,o2=me.unstable_shouldYield,a2=me.unstable_requestPaint,lg=me.unstable_now,r2=me.unstable_getCurrentPriorityLevel,AB=me.unstable_ImmediatePriority,cf=me.unstable_UserBlockingPriority,jo=me.unstable_NormalPriority,c2=me.unstable_LowPriority,df=me.unstable_IdlePriority,Ma=null,ut=null;function d2(A){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Ma,A,void 0,(A.current.flags&128)===128)}catch{}}var Oe=Math.clz32?Math.clz32:B2,u2=Math.log,m2=Math.LN2;function B2(A){return A>>>=0,A===0?32:31-(u2(A)/m2|0)|0}var Zi=64,pi=4194304;function vl(A){switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return A&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return A}}function Oo(A,g){var e=A.pendingLanes;if(e===0)return 0;var t=0,I=A.suspendedLanes,n=A.pingedLanes,C=e&268435455;if(C!==0){var l=C&~I;l!==0?t=vl(l):(n&=C,n!==0&&(t=vl(n)))}else C=e&~I,C!==0?t=vl(C):n!==0&&(t=vl(n));if(t===0)return 0;if(g!==0&&g!==t&&!(g&I)&&(I=t&-t,n=g&-g,I>=n||I===16&&(n&4194240)!==0))return g;if(t&4&&(t|=e&16),g=A.entangledLanes,g!==0)for(A=A.entanglements,g&=t;0<g;)e=31-Oe(g),I=1<<e,t|=A[e],g&=~I;return t}function h2(A,g){switch(A){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b2(A,g){for(var e=A.suspendedLanes,t=A.pingedLanes,I=A.expirationTimes,n=A.pendingLanes;0<n;){var C=31-Oe(n),l=1<<C,s=I[C];s===-1?(!(l&e)||l&t)&&(I[C]=h2(l,g)):s<=g&&(A.expiredLanes|=l),n&=~l}}function nu(A){return A=A.pendingLanes&-1073741825,A!==0?A:A&1073741824?1073741824:0}function uf(){var A=Zi;return Zi<<=1,!(Zi&4194240)&&(Zi=64),A}function wc(A){for(var g=[],e=0;31>e;e++)g.push(A);return g}function Ns(A,g,e){A.pendingLanes|=g,g!==536870912&&(A.suspendedLanes=0,A.pingedLanes=0),A=A.eventTimes,g=31-Oe(g),A[g]=e}function Z2(A,g){var e=A.pendingLanes&~g;A.pendingLanes=g,A.suspendedLanes=0,A.pingedLanes=0,A.expiredLanes&=g,A.mutableReadLanes&=g,A.entangledLanes&=g,g=A.entanglements;var t=A.eventTimes;for(A=A.expirationTimes;0<e;){var I=31-Oe(e),n=1<<I;g[I]=0,t[I]=-1,A[I]=-1,e&=~n}}function gB(A,g){var e=A.entangledLanes|=g;for(A=A.entanglements;e;){var t=31-Oe(e),I=1<<t;I&g|A[t]&g&&(A[t]|=g),e&=~I}}var FA=0;function mf(A){return A&=-A,1<A?4<A?A&268435455?16:536870912:4:1}var Bf,eB,hf,bf,Zf,Cu=!1,Gi=[],BI=null,hI=null,bI=null,as=new Map,rs=new Map,lI=[],p2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(A,g){switch(A){case"focusin":case"focusout":BI=null;break;case"dragenter":case"dragleave":hI=null;break;case"mouseover":case"mouseout":bI=null;break;case"pointerover":case"pointerout":as.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(g.pointerId)}}function rl(A,g,e,t,I,n){return A===null||A.nativeEvent!==n?(A={blockedOn:g,domEventName:e,eventSystemFlags:t,nativeEvent:n,targetContainers:[I]},g!==null&&(g=xs(g),g!==null&&eB(g)),A):(A.eventSystemFlags|=t,g=A.targetContainers,I!==null&&g.indexOf(I)===-1&&g.push(I),A)}function G2(A,g,e,t,I){switch(g){case"focusin":return BI=rl(BI,A,g,e,t,I),!0;case"dragenter":return hI=rl(hI,A,g,e,t,I),!0;case"mouseover":return bI=rl(bI,A,g,e,t,I),!0;case"pointerover":var n=I.pointerId;return as.set(n,rl(as.get(n)||null,A,g,e,t,I)),!0;case"gotpointercapture":return n=I.pointerId,rs.set(n,rl(rs.get(n)||null,A,g,e,t,I)),!0}return!1}function pf(A){var g=cn(A.target);if(g!==null){var e=Hn(g);if(e!==null){if(g=e.tag,g===13){if(g=sf(e),g!==null){A.blockedOn=g,Zf(A.priority,function(){hf(e)});return}}else if(g===3&&e.stateNode.current.memoizedState.isDehydrated){A.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}A.blockedOn=null}function fo(A){if(A.blockedOn!==null)return!1;for(var g=A.targetContainers;0<g.length;){var e=lu(A.domEventName,A.eventSystemFlags,g[0],A.nativeEvent);if(e===null){e=A.nativeEvent;var t=new e.constructor(e.type,e);gu=t,e.target.dispatchEvent(t),gu=null}else return g=xs(e),g!==null&&eB(g),A.blockedOn=e,!1;g.shift()}return!0}function y0(A,g,e){fo(A)&&e.delete(g)}function y2(){Cu=!1,BI!==null&&fo(BI)&&(BI=null),hI!==null&&fo(hI)&&(hI=null),bI!==null&&fo(bI)&&(bI=null),as.forEach(y0),rs.forEach(y0)}function cl(A,g){A.blockedOn===g&&(A.blockedOn=null,Cu||(Cu=!0,me.unstable_scheduleCallback(me.unstable_NormalPriority,y2)))}function cs(A){function g(I){return cl(I,A)}if(0<Gi.length){cl(Gi[0],A);for(var e=1;e<Gi.length;e++){var t=Gi[e];t.blockedOn===A&&(t.blockedOn=null)}}for(BI!==null&&cl(BI,A),hI!==null&&cl(hI,A),bI!==null&&cl(bI,A),as.forEach(g),rs.forEach(g),e=0;e<lI.length;e++)t=lI[e],t.blockedOn===A&&(t.blockedOn=null);for(;0<lI.length&&(e=lI[0],e.blockedOn===null);)pf(e),e.blockedOn===null&&lI.shift()}var wC=Dt.ReactCurrentBatchConfig,Po=!0;function f2(A,g,e,t){var I=FA,n=wC.transition;wC.transition=null;try{FA=1,tB(A,g,e,t)}finally{FA=I,wC.transition=n}}function S2(A,g,e,t){var I=FA,n=wC.transition;wC.transition=null;try{FA=4,tB(A,g,e,t)}finally{FA=I,wC.transition=n}}function tB(A,g,e,t){if(Po){var I=lu(A,g,e,t);if(I===null)Uc(A,g,t,_o,e),G0(A,t);else if(G2(I,A,g,e,t))t.stopPropagation();else if(G0(A,t),g&4&&-1<p2.indexOf(A)){for(;I!==null;){var n=xs(I);if(n!==null&&Bf(n),n=lu(A,g,e,t),n===null&&Uc(A,g,t,_o,e),n===I)break;I=n}I!==null&&t.stopPropagation()}else Uc(A,g,t,null,e)}}var _o=null;function lu(A,g,e,t){if(_o=null,A=$m(t),A=cn(A),A!==null)if(g=Hn(A),g===null)A=null;else if(e=g.tag,e===13){if(A=sf(g),A!==null)return A;A=null}else if(e===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;A=null}else g!==A&&(A=null);return _o=A,null}function Gf(A){switch(A){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r2()){case AB:return 1;case cf:return 4;case jo:case c2:return 16;case df:return 536870912;default:return 16}default:return 16}}var iI=null,IB=null,So=null;function yf(){if(So)return So;var A,g=IB,e=g.length,t,I="value"in iI?iI.value:iI.textContent,n=I.length;for(A=0;A<e&&g[A]===I[A];A++);var C=e-A;for(t=1;t<=C&&g[e-t]===I[n-t];t++);return So=I.slice(A,1<t?1-t:void 0)}function Vo(A){var g=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&g===13&&(A=13)):A=g,A===10&&(A=13),32<=A||A===13?A:0}function yi(){return!0}function f0(){return!1}function he(A){function g(e,t,I,n,C){this._reactName=e,this._targetInst=I,this.type=t,this.nativeEvent=n,this.target=C,this.currentTarget=null;for(var l in A)A.hasOwnProperty(l)&&(e=A[l],this[l]=e?e(n):n[l]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?yi:f0,this.isPropagationStopped=f0,this}return _A(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),g}var jC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nB=he(jC),Us=_A({},jC,{view:0,detail:0}),V2=he(Us),Xc,Jc,dl,Da=_A({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CB,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==dl&&(dl&&A.type==="mousemove"?(Xc=A.screenX-dl.screenX,Jc=A.screenY-dl.screenY):Jc=Xc=0,dl=A),Xc)},movementY:function(A){return"movementY"in A?A.movementY:Jc}}),S0=he(Da),W2=_A({},Da,{dataTransfer:0}),R2=he(W2),v2=_A({},Us,{relatedTarget:0}),Fc=he(v2),w2=_A({},jC,{animationName:0,elapsedTime:0,pseudoElement:0}),X2=he(w2),J2=_A({},jC,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),F2=he(J2),k2=_A({},jC,{data:0}),V0=he(k2),H2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K2(A){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(A):(A=Q2[A])?!!g[A]:!1}function CB(){return K2}var N2=_A({},Us,{key:function(A){if(A.key){var g=H2[A.key]||A.key;if(g!=="Unidentified")return g}return A.type==="keypress"?(A=Vo(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Y2[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CB,charCode:function(A){return A.type==="keypress"?Vo(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Vo(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),U2=he(N2),x2=_A({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W0=he(x2),E2=_A({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CB}),L2=he(E2),M2=_A({},jC,{propertyName:0,elapsedTime:0,pseudoElement:0}),D2=he(M2),z2=_A({},Da,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),T2=he(z2),j2=[9,13,27,32],lB=Qt&&"CompositionEvent"in window,Ml=null;Qt&&"documentMode"in document&&(Ml=document.documentMode);var O2=Qt&&"TextEvent"in window&&!Ml,ff=Qt&&(!lB||Ml&&8<Ml&&11>=Ml),R0=" ",v0=!1;function Sf(A,g){switch(A){case"keyup":return j2.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var cC=!1;function P2(A,g){switch(A){case"compositionend":return Vf(g);case"keypress":return g.which!==32?null:(v0=!0,R0);case"textInput":return A=g.data,A===R0&&v0?null:A;default:return null}}function _2(A,g){if(cC)return A==="compositionend"||!lB&&Sf(A,g)?(A=yf(),So=IB=iI=null,cC=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return ff&&g.locale!=="ko"?null:g.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w0(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g==="input"?!!q2[A.type]:g==="textarea"}function Wf(A,g,e,t){tf(t),g=qo(g,"onChange"),0<g.length&&(e=new nB("onChange","change",null,e,t),A.push({event:e,listeners:g}))}var Dl=null,ds=null;function $2(A){Kf(A,0)}function za(A){var g=mC(A);if(Py(g))return A}function AJ(A,g){if(A==="change")return g}var Rf=!1;if(Qt){var kc;if(Qt){var Hc="oninput"in document;if(!Hc){var X0=document.createElement("div");X0.setAttribute("oninput","return;"),Hc=typeof X0.oninput=="function"}kc=Hc}else kc=!1;Rf=kc&&(!document.documentMode||9<document.documentMode)}function J0(){Dl&&(Dl.detachEvent("onpropertychange",vf),ds=Dl=null)}function vf(A){if(A.propertyName==="value"&&za(ds)){var g=[];Wf(g,ds,A,$m(A)),lf($2,g)}}function gJ(A,g,e){A==="focusin"?(J0(),Dl=g,ds=e,Dl.attachEvent("onpropertychange",vf)):A==="focusout"&&J0()}function eJ(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return za(ds)}function tJ(A,g){if(A==="click")return za(g)}function IJ(A,g){if(A==="input"||A==="change")return za(g)}function nJ(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}var _e=typeof Object.is=="function"?Object.is:nJ;function us(A,g){if(_e(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var e=Object.keys(A),t=Object.keys(g);if(e.length!==t.length)return!1;for(t=0;t<e.length;t++){var I=e[t];if(!Ld.call(g,I)||!_e(A[I],g[I]))return!1}return!0}function F0(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function k0(A,g){var e=F0(A);A=0;for(var t;e;){if(e.nodeType===3){if(t=A+e.textContent.length,A<=g&&t>=g)return{node:e,offset:g-A};A=t}A:{for(;e;){if(e.nextSibling){e=e.nextSibling;break A}e=e.parentNode}e=void 0}e=F0(e)}}function wf(A,g){return A&&g?A===g?!0:A&&A.nodeType===3?!1:g&&g.nodeType===3?wf(A,g.parentNode):"contains"in A?A.contains(g):A.compareDocumentPosition?!!(A.compareDocumentPosition(g)&16):!1:!1}function Xf(){for(var A=window,g=Do();g instanceof A.HTMLIFrameElement;){try{var e=typeof g.contentWindow.location.href=="string"}catch{e=!1}if(e)A=g.contentWindow;else break;g=Do(A.document)}return g}function sB(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g&&(g==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||g==="textarea"||A.contentEditable==="true")}function CJ(A){var g=Xf(),e=A.focusedElem,t=A.selectionRange;if(g!==e&&e&&e.ownerDocument&&wf(e.ownerDocument.documentElement,e)){if(t!==null&&sB(e)){if(g=t.start,A=t.end,A===void 0&&(A=g),"selectionStart"in e)e.selectionStart=g,e.selectionEnd=Math.min(A,e.value.length);else if(A=(g=e.ownerDocument||document)&&g.defaultView||window,A.getSelection){A=A.getSelection();var I=e.textContent.length,n=Math.min(t.start,I);t=t.end===void 0?n:Math.min(t.end,I),!A.extend&&n>t&&(I=t,t=n,n=I),I=k0(e,n);var C=k0(e,t);I&&C&&(A.rangeCount!==1||A.anchorNode!==I.node||A.anchorOffset!==I.offset||A.focusNode!==C.node||A.focusOffset!==C.offset)&&(g=g.createRange(),g.setStart(I.node,I.offset),A.removeAllRanges(),n>t?(A.addRange(g),A.extend(C.node,C.offset)):(g.setEnd(C.node,C.offset),A.addRange(g)))}}for(g=[],A=e;A=A.parentNode;)A.nodeType===1&&g.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<g.length;e++)A=g[e],A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}var lJ=Qt&&"documentMode"in document&&11>=document.documentMode,dC=null,su=null,zl=null,iu=!1;function H0(A,g,e){var t=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;iu||dC==null||dC!==Do(t)||(t=dC,"selectionStart"in t&&sB(t)?t={start:t.selectionStart,end:t.selectionEnd}:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection(),t={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}),zl&&us(zl,t)||(zl=t,t=qo(su,"onSelect"),0<t.length&&(g=new nB("onSelect","select",null,g,e),A.push({event:g,listeners:t}),g.target=dC)))}function fi(A,g){var e={};return e[A.toLowerCase()]=g.toLowerCase(),e["Webkit"+A]="webkit"+g,e["Moz"+A]="moz"+g,e}var uC={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},Yc={},Jf={};Qt&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete uC.animationend.animation,delete uC.animationiteration.animation,delete uC.animationstart.animation),"TransitionEvent"in window||delete uC.transitionend.transition);function Ta(A){if(Yc[A])return Yc[A];if(!uC[A])return A;var g=uC[A],e;for(e in g)if(g.hasOwnProperty(e)&&e in Jf)return Yc[A]=g[e];return A}var Ff=Ta("animationend"),kf=Ta("animationiteration"),Hf=Ta("animationstart"),Yf=Ta("transitionend"),Qf=new Map,Y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function QI(A,g){Qf.set(A,g),kn(g,[A])}for(var Qc=0;Qc<Y0.length;Qc++){var Kc=Y0[Qc],sJ=Kc.toLowerCase(),iJ=Kc[0].toUpperCase()+Kc.slice(1);QI(sJ,"on"+iJ)}QI(Ff,"onAnimationEnd");QI(kf,"onAnimationIteration");QI(Hf,"onAnimationStart");QI("dblclick","onDoubleClick");QI("focusin","onFocus");QI("focusout","onBlur");QI(Yf,"onTransitionEnd");YC("onMouseEnter",["mouseout","mouseover"]);YC("onMouseLeave",["mouseout","mouseover"]);YC("onPointerEnter",["pointerout","pointerover"]);YC("onPointerLeave",["pointerout","pointerover"]);kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(wl));function Q0(A,g,e){var t=A.type||"unknown-event";A.currentTarget=e,s2(t,g,void 0,A),A.currentTarget=null}function Kf(A,g){g=(g&4)!==0;for(var e=0;e<A.length;e++){var t=A[e],I=t.event;t=t.listeners;A:{var n=void 0;if(g)for(var C=t.length-1;0<=C;C--){var l=t[C],s=l.instance,i=l.currentTarget;if(l=l.listener,s!==n&&I.isPropagationStopped())break A;Q0(I,l,i),n=s}else for(C=0;C<t.length;C++){if(l=t[C],s=l.instance,i=l.currentTarget,l=l.listener,s!==n&&I.isPropagationStopped())break A;Q0(I,l,i),n=s}}}if(To)throw A=Iu,To=!1,Iu=null,A}function LA(A,g){var e=g[du];e===void 0&&(e=g[du]=new Set);var t=A+"__bubble";e.has(t)||(Nf(g,A,2,!1),e.add(t))}function Nc(A,g,e){var t=0;g&&(t|=4),Nf(e,A,t,g)}var Si="_reactListening"+Math.random().toString(36).slice(2);function ms(A){if(!A[Si]){A[Si]=!0,Dy.forEach(function(e){e!=="selectionchange"&&(oJ.has(e)||Nc(e,!1,A),Nc(e,!0,A))});var g=A.nodeType===9?A:A.ownerDocument;g===null||g[Si]||(g[Si]=!0,Nc("selectionchange",!1,g))}}function Nf(A,g,e,t){switch(Gf(g)){case 1:var I=f2;break;case 4:I=S2;break;default:I=tB}e=I.bind(null,g,e,A),I=void 0,!tu||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(I=!0),t?I!==void 0?A.addEventListener(g,e,{capture:!0,passive:I}):A.addEventListener(g,e,!0):I!==void 0?A.addEventListener(g,e,{passive:I}):A.addEventListener(g,e,!1)}function Uc(A,g,e,t,I){var n=t;if(!(g&1)&&!(g&2)&&t!==null)A:for(;;){if(t===null)return;var C=t.tag;if(C===3||C===4){var l=t.stateNode.containerInfo;if(l===I||l.nodeType===8&&l.parentNode===I)break;if(C===4)for(C=t.return;C!==null;){var s=C.tag;if((s===3||s===4)&&(s=C.stateNode.containerInfo,s===I||s.nodeType===8&&s.parentNode===I))return;C=C.return}for(;l!==null;){if(C=cn(l),C===null)return;if(s=C.tag,s===5||s===6){t=n=C;continue A}l=l.parentNode}}t=t.return}lf(function(){var i=n,r=$m(e),c=[];A:{var d=Qf.get(A);if(d!==void 0){var h=nB,Z=A;switch(A){case"keypress":if(Vo(e)===0)break A;case"keydown":case"keyup":h=U2;break;case"focusin":Z="focus",h=Fc;break;case"focusout":Z="blur",h=Fc;break;case"beforeblur":case"afterblur":h=Fc;break;case"click":if(e.button===2)break A;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=R2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=L2;break;case Ff:case kf:case Hf:h=X2;break;case Yf:h=D2;break;case"scroll":h=V2;break;case"wheel":h=T2;break;case"copy":case"cut":case"paste":h=F2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=W0}var y=(g&4)!==0,S=!y&&A==="scroll",b=y?d!==null?d+"Capture":null:d;y=[];for(var m=i,G;m!==null;){G=m;var V=G.stateNode;if(G.tag===5&&V!==null&&(G=V,b!==null&&(V=os(m,b),V!=null&&y.push(Bs(m,V,G)))),S)break;m=m.return}0<y.length&&(d=new h(d,Z,null,e,r),c.push({event:d,listeners:y}))}}if(!(g&7)){A:{if(d=A==="mouseover"||A==="pointerover",h=A==="mouseout"||A==="pointerout",d&&e!==gu&&(Z=e.relatedTarget||e.fromElement)&&(cn(Z)||Z[Kt]))break A;if((h||d)&&(d=r.window===r?r:(d=r.ownerDocument)?d.defaultView||d.parentWindow:window,h?(Z=e.relatedTarget||e.toElement,h=i,Z=Z?cn(Z):null,Z!==null&&(S=Hn(Z),Z!==S||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(h=null,Z=i),h!==Z)){if(y=S0,V="onMouseLeave",b="onMouseEnter",m="mouse",(A==="pointerout"||A==="pointerover")&&(y=W0,V="onPointerLeave",b="onPointerEnter",m="pointer"),S=h==null?d:mC(h),G=Z==null?d:mC(Z),d=new y(V,m+"leave",h,e,r),d.target=S,d.relatedTarget=G,V=null,cn(r)===i&&(y=new y(b,m+"enter",Z,e,r),y.target=G,y.relatedTarget=S,V=y),S=V,h&&Z)g:{for(y=h,b=Z,m=0,G=y;G;G=qn(G))m++;for(G=0,V=b;V;V=qn(V))G++;for(;0<m-G;)y=qn(y),m--;for(;0<G-m;)b=qn(b),G--;for(;m--;){if(y===b||b!==null&&y===b.alternate)break g;y=qn(y),b=qn(b)}y=null}else y=null;h!==null&&K0(c,d,h,y,!1),Z!==null&&S!==null&&K0(c,S,Z,y,!0)}}A:{if(d=i?mC(i):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var W=AJ;else if(w0(d))if(Rf)W=IJ;else{W=eJ;var R=gJ}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(W=tJ);if(W&&(W=W(A,i))){Wf(c,W,e,r);break A}R&&R(A,d,i),A==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&Pd(d,"number",d.value)}switch(R=i?mC(i):window,A){case"focusin":(w0(R)||R.contentEditable==="true")&&(dC=R,su=i,zl=null);break;case"focusout":zl=su=dC=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,H0(c,e,r);break;case"selectionchange":if(lJ)break;case"keydown":case"keyup":H0(c,e,r)}var X;if(lB)A:{switch(A){case"compositionstart":var F="onCompositionStart";break A;case"compositionend":F="onCompositionEnd";break A;case"compositionupdate":F="onCompositionUpdate";break A}F=void 0}else cC?Sf(A,e)&&(F="onCompositionEnd"):A==="keydown"&&e.keyCode===229&&(F="onCompositionStart");F&&(ff&&e.locale!=="ko"&&(cC||F!=="onCompositionStart"?F==="onCompositionEnd"&&cC&&(X=yf()):(iI=r,IB="value"in iI?iI.value:iI.textContent,cC=!0)),R=qo(i,F),0<R.length&&(F=new V0(F,A,null,e,r),c.push({event:F,listeners:R}),X?F.data=X:(X=Vf(e),X!==null&&(F.data=X)))),(X=O2?P2(A,e):_2(A,e))&&(i=qo(i,"onBeforeInput"),0<i.length&&(r=new V0("onBeforeInput","beforeinput",null,e,r),c.push({event:r,listeners:i}),r.data=X))}Kf(c,g)})}function Bs(A,g,e){return{instance:A,listener:g,currentTarget:e}}function qo(A,g){for(var e=g+"Capture",t=[];A!==null;){var I=A,n=I.stateNode;I.tag===5&&n!==null&&(I=n,n=os(A,e),n!=null&&t.unshift(Bs(A,n,I)),n=os(A,g),n!=null&&t.push(Bs(A,n,I))),A=A.return}return t}function qn(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5);return A||null}function K0(A,g,e,t,I){for(var n=g._reactName,C=[];e!==null&&e!==t;){var l=e,s=l.alternate,i=l.stateNode;if(s!==null&&s===t)break;l.tag===5&&i!==null&&(l=i,I?(s=os(e,n),s!=null&&C.unshift(Bs(e,s,l))):I||(s=os(e,n),s!=null&&C.push(Bs(e,s,l)))),e=e.return}C.length!==0&&A.push({event:g,listeners:C})}var aJ=/\r\n?/g,rJ=/\u0000|\uFFFD/g;function N0(A){return(typeof A=="string"?A:""+A).replace(aJ,`
`).replace(rJ,"")}function Vi(A,g,e){if(g=N0(g),N0(A)!==g&&e)throw Error(U(425))}function $o(){}var ou=null,au=null;function ru(A,g){return A==="textarea"||A==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var cu=typeof setTimeout=="function"?setTimeout:void 0,cJ=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,dJ=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(A){return U0.resolve(null).then(A).catch(uJ)}:cu;function uJ(A){setTimeout(function(){throw A})}function xc(A,g){var e=g,t=0;do{var I=e.nextSibling;if(A.removeChild(e),I&&I.nodeType===8)if(e=I.data,e==="/$"){if(t===0){A.removeChild(I),cs(g);return}t--}else e!=="$"&&e!=="$?"&&e!=="$!"||t++;e=I}while(e);cs(g)}function ZI(A){for(;A!=null;A=A.nextSibling){var g=A.nodeType;if(g===1||g===3)break;if(g===8){if(g=A.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return A}function x0(A){A=A.previousSibling;for(var g=0;A;){if(A.nodeType===8){var e=A.data;if(e==="$"||e==="$!"||e==="$?"){if(g===0)return A;g--}else e==="/$"&&g++}A=A.previousSibling}return null}var OC=Math.random().toString(36).slice(2),rt="__reactFiber$"+OC,hs="__reactProps$"+OC,Kt="__reactContainer$"+OC,du="__reactEvents$"+OC,mJ="__reactListeners$"+OC,BJ="__reactHandles$"+OC;function cn(A){var g=A[rt];if(g)return g;for(var e=A.parentNode;e;){if(g=e[Kt]||e[rt]){if(e=g.alternate,g.child!==null||e!==null&&e.child!==null)for(A=x0(A);A!==null;){if(e=A[rt])return e;A=x0(A)}return g}A=e,e=A.parentNode}return null}function xs(A){return A=A[rt]||A[Kt],!A||A.tag!==5&&A.tag!==6&&A.tag!==13&&A.tag!==3?null:A}function mC(A){if(A.tag===5||A.tag===6)return A.stateNode;throw Error(U(33))}function ja(A){return A[hs]||null}var uu=[],BC=-1;function KI(A){return{current:A}}function MA(A){0>BC||(A.current=uu[BC],uu[BC]=null,BC--)}function EA(A,g){BC++,uu[BC]=A.current,A.current=g}var XI={},Kg=KI(XI),ge=KI(!1),Vn=XI;function QC(A,g){var e=A.type.contextTypes;if(!e)return XI;var t=A.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===g)return t.__reactInternalMemoizedMaskedChildContext;var I={},n;for(n in e)I[n]=g[n];return t&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=g,A.__reactInternalMemoizedMaskedChildContext=I),I}function ee(A){return A=A.childContextTypes,A!=null}function Aa(){MA(ge),MA(Kg)}function E0(A,g,e){if(Kg.current!==XI)throw Error(U(168));EA(Kg,g),EA(ge,e)}function Uf(A,g,e){var t=A.stateNode;if(g=g.childContextTypes,typeof t.getChildContext!="function")return e;t=t.getChildContext();for(var I in t)if(!(I in g))throw Error(U(108,g2(A)||"Unknown",I));return _A({},e,t)}function ga(A){return A=(A=A.stateNode)&&A.__reactInternalMemoizedMergedChildContext||XI,Vn=Kg.current,EA(Kg,A),EA(ge,ge.current),!0}function L0(A,g,e){var t=A.stateNode;if(!t)throw Error(U(169));e?(A=Uf(A,g,Vn),t.__reactInternalMemoizedMergedChildContext=A,MA(ge),MA(Kg),EA(Kg,A)):MA(ge),EA(ge,e)}var vt=null,Oa=!1,Ec=!1;function xf(A){vt===null?vt=[A]:vt.push(A)}function hJ(A){Oa=!0,xf(A)}function NI(){if(!Ec&&vt!==null){Ec=!0;var A=0,g=FA;try{var e=vt;for(FA=1;A<e.length;A++){var t=e[A];do t=t(!0);while(t!==null)}vt=null,Oa=!1}catch(I){throw vt!==null&&(vt=vt.slice(A+1)),rf(AB,NI),I}finally{FA=g,Ec=!1}}return null}var hC=[],bC=0,ea=null,ta=0,ve=[],we=0,Wn=null,Xt=1,Jt="";function nn(A,g){hC[bC++]=ta,hC[bC++]=ea,ea=A,ta=g}function Ef(A,g,e){ve[we++]=Xt,ve[we++]=Jt,ve[we++]=Wn,Wn=A;var t=Xt;A=Jt;var I=32-Oe(t)-1;t&=~(1<<I),e+=1;var n=32-Oe(g)+I;if(30<n){var C=I-I%5;n=(t&(1<<C)-1).toString(32),t>>=C,I-=C,Xt=1<<32-Oe(g)+I|e<<I|t,Jt=n+A}else Xt=1<<n|e<<I|t,Jt=A}function iB(A){A.return!==null&&(nn(A,1),Ef(A,1,0))}function oB(A){for(;A===ea;)ea=hC[--bC],hC[bC]=null,ta=hC[--bC],hC[bC]=null;for(;A===Wn;)Wn=ve[--we],ve[we]=null,Jt=ve[--we],ve[we]=null,Xt=ve[--we],ve[we]=null}var de=null,ce=null,TA=!1,je=null;function Lf(A,g){var e=Fe(5,null,null,0);e.elementType="DELETED",e.stateNode=g,e.return=A,g=A.deletions,g===null?(A.deletions=[e],A.flags|=16):g.push(e)}function M0(A,g){switch(A.tag){case 5:var e=A.type;return g=g.nodeType!==1||e.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(A.stateNode=g,de=A,ce=ZI(g.firstChild),!0):!1;case 6:return g=A.pendingProps===""||g.nodeType!==3?null:g,g!==null?(A.stateNode=g,de=A,ce=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(e=Wn!==null?{id:Xt,overflow:Jt}:null,A.memoizedState={dehydrated:g,treeContext:e,retryLane:1073741824},e=Fe(18,null,null,0),e.stateNode=g,e.return=A,A.child=e,de=A,ce=null,!0):!1;default:return!1}}function mu(A){return(A.mode&1)!==0&&(A.flags&128)===0}function Bu(A){if(TA){var g=ce;if(g){var e=g;if(!M0(A,g)){if(mu(A))throw Error(U(418));g=ZI(e.nextSibling);var t=de;g&&M0(A,g)?Lf(t,e):(A.flags=A.flags&-4097|2,TA=!1,de=A)}}else{if(mu(A))throw Error(U(418));A.flags=A.flags&-4097|2,TA=!1,de=A}}}function D0(A){for(A=A.return;A!==null&&A.tag!==5&&A.tag!==3&&A.tag!==13;)A=A.return;de=A}function Wi(A){if(A!==de)return!1;if(!TA)return D0(A),TA=!0,!1;var g;if((g=A.tag!==3)&&!(g=A.tag!==5)&&(g=A.type,g=g!=="head"&&g!=="body"&&!ru(A.type,A.memoizedProps)),g&&(g=ce)){if(mu(A))throw Mf(),Error(U(418));for(;g;)Lf(A,g),g=ZI(g.nextSibling)}if(D0(A),A.tag===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(U(317));A:{for(A=A.nextSibling,g=0;A;){if(A.nodeType===8){var e=A.data;if(e==="/$"){if(g===0){ce=ZI(A.nextSibling);break A}g--}else e!=="$"&&e!=="$!"&&e!=="$?"||g++}A=A.nextSibling}ce=null}}else ce=de?ZI(A.stateNode.nextSibling):null;return!0}function Mf(){for(var A=ce;A;)A=ZI(A.nextSibling)}function KC(){ce=de=null,TA=!1}function aB(A){je===null?je=[A]:je.push(A)}var bJ=Dt.ReactCurrentBatchConfig;function ul(A,g,e){if(A=e.ref,A!==null&&typeof A!="function"&&typeof A!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(U(309));var t=e.stateNode}if(!t)throw Error(U(147,A));var I=t,n=""+A;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===n?g.ref:(g=function(C){var l=I.refs;C===null?delete l[n]:l[n]=C},g._stringRef=n,g)}if(typeof A!="string")throw Error(U(284));if(!e._owner)throw Error(U(290,A))}return A}function Ri(A,g){throw A=Object.prototype.toString.call(g),Error(U(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A))}function z0(A){var g=A._init;return g(A._payload)}function Df(A){function g(b,m){if(A){var G=b.deletions;G===null?(b.deletions=[m],b.flags|=16):G.push(m)}}function e(b,m){if(!A)return null;for(;m!==null;)g(b,m),m=m.sibling;return null}function t(b,m){for(b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function I(b,m){return b=fI(b,m),b.index=0,b.sibling=null,b}function n(b,m,G){return b.index=G,A?(G=b.alternate,G!==null?(G=G.index,G<m?(b.flags|=2,m):G):(b.flags|=2,m)):(b.flags|=1048576,m)}function C(b){return A&&b.alternate===null&&(b.flags|=2),b}function l(b,m,G,V){return m===null||m.tag!==6?(m=Oc(G,b.mode,V),m.return=b,m):(m=I(m,G),m.return=b,m)}function s(b,m,G,V){var W=G.type;return W===rC?r(b,m,G.props.children,V,G.key):m!==null&&(m.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===tI&&z0(W)===m.type)?(V=I(m,G.props),V.ref=ul(b,m,G),V.return=b,V):(V=Fo(G.type,G.key,G.props,null,b.mode,V),V.ref=ul(b,m,G),V.return=b,V)}function i(b,m,G,V){return m===null||m.tag!==4||m.stateNode.containerInfo!==G.containerInfo||m.stateNode.implementation!==G.implementation?(m=Pc(G,b.mode,V),m.return=b,m):(m=I(m,G.children||[]),m.return=b,m)}function r(b,m,G,V,W){return m===null||m.tag!==7?(m=Zn(G,b.mode,V,W),m.return=b,m):(m=I(m,G),m.return=b,m)}function c(b,m,G){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Oc(""+m,b.mode,G),m.return=b,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bi:return G=Fo(m.type,m.key,m.props,null,b.mode,G),G.ref=ul(b,null,m),G.return=b,G;case aC:return m=Pc(m,b.mode,G),m.return=b,m;case tI:var V=m._init;return c(b,V(m._payload),G)}if(Rl(m)||ol(m))return m=Zn(m,b.mode,G,null),m.return=b,m;Ri(b,m)}return null}function d(b,m,G,V){var W=m!==null?m.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return W!==null?null:l(b,m,""+G,V);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Bi:return G.key===W?s(b,m,G,V):null;case aC:return G.key===W?i(b,m,G,V):null;case tI:return W=G._init,d(b,m,W(G._payload),V)}if(Rl(G)||ol(G))return W!==null?null:r(b,m,G,V,null);Ri(b,G)}return null}function h(b,m,G,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return b=b.get(G)||null,l(m,b,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Bi:return b=b.get(V.key===null?G:V.key)||null,s(m,b,V,W);case aC:return b=b.get(V.key===null?G:V.key)||null,i(m,b,V,W);case tI:var R=V._init;return h(b,m,G,R(V._payload),W)}if(Rl(V)||ol(V))return b=b.get(G)||null,r(m,b,V,W,null);Ri(m,V)}return null}function Z(b,m,G,V){for(var W=null,R=null,X=m,F=m=0,H=null;X!==null&&F<G.length;F++){X.index>F?(H=X,X=null):H=X.sibling;var K=d(b,X,G[F],V);if(K===null){X===null&&(X=H);break}A&&X&&K.alternate===null&&g(b,X),m=n(K,m,F),R===null?W=K:R.sibling=K,R=K,X=H}if(F===G.length)return e(b,X),TA&&nn(b,F),W;if(X===null){for(;F<G.length;F++)X=c(b,G[F],V),X!==null&&(m=n(X,m,F),R===null?W=X:R.sibling=X,R=X);return TA&&nn(b,F),W}for(X=t(b,X);F<G.length;F++)H=h(X,b,F,G[F],V),H!==null&&(A&&H.alternate!==null&&X.delete(H.key===null?F:H.key),m=n(H,m,F),R===null?W=H:R.sibling=H,R=H);return A&&X.forEach(function(_){return g(b,_)}),TA&&nn(b,F),W}function y(b,m,G,V){var W=ol(G);if(typeof W!="function")throw Error(U(150));if(G=W.call(G),G==null)throw Error(U(151));for(var R=W=null,X=m,F=m=0,H=null,K=G.next();X!==null&&!K.done;F++,K=G.next()){X.index>F?(H=X,X=null):H=X.sibling;var _=d(b,X,K.value,V);if(_===null){X===null&&(X=H);break}A&&X&&_.alternate===null&&g(b,X),m=n(_,m,F),R===null?W=_:R.sibling=_,R=_,X=H}if(K.done)return e(b,X),TA&&nn(b,F),W;if(X===null){for(;!K.done;F++,K=G.next())K=c(b,K.value,V),K!==null&&(m=n(K,m,F),R===null?W=K:R.sibling=K,R=K);return TA&&nn(b,F),W}for(X=t(b,X);!K.done;F++,K=G.next())K=h(X,b,F,K.value,V),K!==null&&(A&&K.alternate!==null&&X.delete(K.key===null?F:K.key),m=n(K,m,F),R===null?W=K:R.sibling=K,R=K);return A&&X.forEach(function(gA){return g(b,gA)}),TA&&nn(b,F),W}function S(b,m,G,V){if(typeof G=="object"&&G!==null&&G.type===rC&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Bi:A:{for(var W=G.key,R=m;R!==null;){if(R.key===W){if(W=G.type,W===rC){if(R.tag===7){e(b,R.sibling),m=I(R,G.props.children),m.return=b,b=m;break A}}else if(R.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===tI&&z0(W)===R.type){e(b,R.sibling),m=I(R,G.props),m.ref=ul(b,R,G),m.return=b,b=m;break A}e(b,R);break}else g(b,R);R=R.sibling}G.type===rC?(m=Zn(G.props.children,b.mode,V,G.key),m.return=b,b=m):(V=Fo(G.type,G.key,G.props,null,b.mode,V),V.ref=ul(b,m,G),V.return=b,b=V)}return C(b);case aC:A:{for(R=G.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===G.containerInfo&&m.stateNode.implementation===G.implementation){e(b,m.sibling),m=I(m,G.children||[]),m.return=b,b=m;break A}else{e(b,m);break}else g(b,m);m=m.sibling}m=Pc(G,b.mode,V),m.return=b,b=m}return C(b);case tI:return R=G._init,S(b,m,R(G._payload),V)}if(Rl(G))return Z(b,m,G,V);if(ol(G))return y(b,m,G,V);Ri(b,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,m!==null&&m.tag===6?(e(b,m.sibling),m=I(m,G),m.return=b,b=m):(e(b,m),m=Oc(G,b.mode,V),m.return=b,b=m),C(b)):e(b,m)}return S}var NC=Df(!0),zf=Df(!1),Ia=KI(null),na=null,ZC=null,rB=null;function cB(){rB=ZC=na=null}function dB(A){var g=Ia.current;MA(Ia),A._currentValue=g}function hu(A,g,e){for(;A!==null;){var t=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,t!==null&&(t.childLanes|=g)):t!==null&&(t.childLanes&g)!==g&&(t.childLanes|=g),A===e)break;A=A.return}}function XC(A,g){na=A,rB=ZC=null,A=A.dependencies,A!==null&&A.firstContext!==null&&(A.lanes&g&&(Ae=!0),A.firstContext=null)}function Qe(A){var g=A._currentValue;if(rB!==A)if(A={context:A,memoizedValue:g,next:null},ZC===null){if(na===null)throw Error(U(308));ZC=A,na.dependencies={lanes:0,firstContext:A}}else ZC=ZC.next=A;return g}var dn=null;function uB(A){dn===null?dn=[A]:dn.push(A)}function Tf(A,g,e,t){var I=g.interleaved;return I===null?(e.next=e,uB(g)):(e.next=I.next,I.next=e),g.interleaved=e,Nt(A,t)}function Nt(A,g){A.lanes|=g;var e=A.alternate;for(e!==null&&(e.lanes|=g),e=A,A=A.return;A!==null;)A.childLanes|=g,e=A.alternate,e!==null&&(e.childLanes|=g),e=A,A=A.return;return e.tag===3?e.stateNode:null}var II=!1;function mB(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jf(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,effects:A.effects})}function kt(A,g){return{eventTime:A,lane:g,tag:0,payload:null,callback:null,next:null}}function pI(A,g,e){var t=A.updateQueue;if(t===null)return null;if(t=t.shared,yA&2){var I=t.pending;return I===null?g.next=g:(g.next=I.next,I.next=g),t.pending=g,Nt(A,e)}return I=t.interleaved,I===null?(g.next=g,uB(t)):(g.next=I.next,I.next=g),t.interleaved=g,Nt(A,e)}function Wo(A,g,e){if(g=g.updateQueue,g!==null&&(g=g.shared,(e&4194240)!==0)){var t=g.lanes;t&=A.pendingLanes,e|=t,g.lanes=e,gB(A,e)}}function T0(A,g){var e=A.updateQueue,t=A.alternate;if(t!==null&&(t=t.updateQueue,e===t)){var I=null,n=null;if(e=e.firstBaseUpdate,e!==null){do{var C={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};n===null?I=n=C:n=n.next=C,e=e.next}while(e!==null);n===null?I=n=g:n=n.next=g}else I=n=g;e={baseState:t.baseState,firstBaseUpdate:I,lastBaseUpdate:n,shared:t.shared,effects:t.effects},A.updateQueue=e;return}A=e.lastBaseUpdate,A===null?e.firstBaseUpdate=g:A.next=g,e.lastBaseUpdate=g}function Ca(A,g,e,t){var I=A.updateQueue;II=!1;var n=I.firstBaseUpdate,C=I.lastBaseUpdate,l=I.shared.pending;if(l!==null){I.shared.pending=null;var s=l,i=s.next;s.next=null,C===null?n=i:C.next=i,C=s;var r=A.alternate;r!==null&&(r=r.updateQueue,l=r.lastBaseUpdate,l!==C&&(l===null?r.firstBaseUpdate=i:l.next=i,r.lastBaseUpdate=s))}if(n!==null){var c=I.baseState;C=0,r=i=s=null,l=n;do{var d=l.lane,h=l.eventTime;if((t&d)===d){r!==null&&(r=r.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});A:{var Z=A,y=l;switch(d=g,h=e,y.tag){case 1:if(Z=y.payload,typeof Z=="function"){c=Z.call(h,c,d);break A}c=Z;break A;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=y.payload,d=typeof Z=="function"?Z.call(h,c,d):Z,d==null)break A;c=_A({},c,d);break A;case 2:II=!0}}l.callback!==null&&l.lane!==0&&(A.flags|=64,d=I.effects,d===null?I.effects=[l]:d.push(l))}else h={eventTime:h,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},r===null?(i=r=h,s=c):r=r.next=h,C|=d;if(l=l.next,l===null){if(l=I.shared.pending,l===null)break;d=l,l=d.next,d.next=null,I.lastBaseUpdate=d,I.shared.pending=null}}while(!0);if(r===null&&(s=c),I.baseState=s,I.firstBaseUpdate=i,I.lastBaseUpdate=r,g=I.shared.interleaved,g!==null){I=g;do C|=I.lane,I=I.next;while(I!==g)}else n===null&&(I.shared.lanes=0);vn|=C,A.lanes=C,A.memoizedState=c}}function j0(A,g,e){if(A=g.effects,g.effects=null,A!==null)for(g=0;g<A.length;g++){var t=A[g],I=t.callback;if(I!==null){if(t.callback=null,t=e,typeof I!="function")throw Error(U(191,I));I.call(t)}}}var Es={},mt=KI(Es),bs=KI(Es),Zs=KI(Es);function un(A){if(A===Es)throw Error(U(174));return A}function BB(A,g){switch(EA(Zs,g),EA(bs,A),EA(mt,Es),A=g.nodeType,A){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:qd(null,"");break;default:A=A===8?g.parentNode:g,g=A.namespaceURI||null,A=A.tagName,g=qd(g,A)}MA(mt),EA(mt,g)}function UC(){MA(mt),MA(bs),MA(Zs)}function Of(A){un(Zs.current);var g=un(mt.current),e=qd(g,A.type);g!==e&&(EA(bs,A),EA(mt,e))}function hB(A){bs.current===A&&(MA(mt),MA(bs))}var OA=KI(0);function la(A){for(var g=A;g!==null;){if(g.tag===13){var e=g.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Lc=[];function bB(){for(var A=0;A<Lc.length;A++)Lc[A]._workInProgressVersionPrimary=null;Lc.length=0}var Ro=Dt.ReactCurrentDispatcher,Mc=Dt.ReactCurrentBatchConfig,Rn=0,PA=null,ug=null,pg=null,sa=!1,Tl=!1,ps=0,ZJ=0;function Xg(){throw Error(U(321))}function ZB(A,g){if(g===null)return!1;for(var e=0;e<g.length&&e<A.length;e++)if(!_e(A[e],g[e]))return!1;return!0}function pB(A,g,e,t,I,n){if(Rn=n,PA=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ro.current=A===null||A.memoizedState===null?fJ:SJ,A=e(t,I),Tl){n=0;do{if(Tl=!1,ps=0,25<=n)throw Error(U(301));n+=1,pg=ug=null,g.updateQueue=null,Ro.current=VJ,A=e(t,I)}while(Tl)}if(Ro.current=ia,g=ug!==null&&ug.next!==null,Rn=0,pg=ug=PA=null,sa=!1,g)throw Error(U(300));return A}function GB(){var A=ps!==0;return ps=0,A}function it(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pg===null?PA.memoizedState=pg=A:pg=pg.next=A,pg}function Ke(){if(ug===null){var A=PA.alternate;A=A!==null?A.memoizedState:null}else A=ug.next;var g=pg===null?PA.memoizedState:pg.next;if(g!==null)pg=g,ug=A;else{if(A===null)throw Error(U(310));ug=A,A={memoizedState:ug.memoizedState,baseState:ug.baseState,baseQueue:ug.baseQueue,queue:ug.queue,next:null},pg===null?PA.memoizedState=pg=A:pg=pg.next=A}return pg}function Gs(A,g){return typeof g=="function"?g(A):g}function Dc(A){var g=Ke(),e=g.queue;if(e===null)throw Error(U(311));e.lastRenderedReducer=A;var t=ug,I=t.baseQueue,n=e.pending;if(n!==null){if(I!==null){var C=I.next;I.next=n.next,n.next=C}t.baseQueue=I=n,e.pending=null}if(I!==null){n=I.next,t=t.baseState;var l=C=null,s=null,i=n;do{var r=i.lane;if((Rn&r)===r)s!==null&&(s=s.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),t=i.hasEagerState?i.eagerState:A(t,i.action);else{var c={lane:r,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};s===null?(l=s=c,C=t):s=s.next=c,PA.lanes|=r,vn|=r}i=i.next}while(i!==null&&i!==n);s===null?C=t:s.next=l,_e(t,g.memoizedState)||(Ae=!0),g.memoizedState=t,g.baseState=C,g.baseQueue=s,e.lastRenderedState=t}if(A=e.interleaved,A!==null){I=A;do n=I.lane,PA.lanes|=n,vn|=n,I=I.next;while(I!==A)}else I===null&&(e.lanes=0);return[g.memoizedState,e.dispatch]}function zc(A){var g=Ke(),e=g.queue;if(e===null)throw Error(U(311));e.lastRenderedReducer=A;var t=e.dispatch,I=e.pending,n=g.memoizedState;if(I!==null){e.pending=null;var C=I=I.next;do n=A(n,C.action),C=C.next;while(C!==I);_e(n,g.memoizedState)||(Ae=!0),g.memoizedState=n,g.baseQueue===null&&(g.baseState=n),e.lastRenderedState=n}return[n,t]}function Pf(){}function _f(A,g){var e=PA,t=Ke(),I=g(),n=!_e(t.memoizedState,I);if(n&&(t.memoizedState=I,Ae=!0),t=t.queue,yB(AS.bind(null,e,t,A),[A]),t.getSnapshot!==g||n||pg!==null&&pg.memoizedState.tag&1){if(e.flags|=2048,ys(9,$f.bind(null,e,t,I,g),void 0,null),Gg===null)throw Error(U(349));Rn&30||qf(e,g,I)}return I}function qf(A,g,e){A.flags|=16384,A={getSnapshot:g,value:e},g=PA.updateQueue,g===null?(g={lastEffect:null,stores:null},PA.updateQueue=g,g.stores=[A]):(e=g.stores,e===null?g.stores=[A]:e.push(A))}function $f(A,g,e,t){g.value=e,g.getSnapshot=t,gS(g)&&eS(A)}function AS(A,g,e){return e(function(){gS(g)&&eS(A)})}function gS(A){var g=A.getSnapshot;A=A.value;try{var e=g();return!_e(A,e)}catch{return!0}}function eS(A){var g=Nt(A,1);g!==null&&Pe(g,A,1,-1)}function O0(A){var g=it();return typeof A=="function"&&(A=A()),g.memoizedState=g.baseState=A,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:A},g.queue=A,A=A.dispatch=yJ.bind(null,PA,A),[g.memoizedState,A]}function ys(A,g,e,t){return A={tag:A,create:g,destroy:e,deps:t,next:null},g=PA.updateQueue,g===null?(g={lastEffect:null,stores:null},PA.updateQueue=g,g.lastEffect=A.next=A):(e=g.lastEffect,e===null?g.lastEffect=A.next=A:(t=e.next,e.next=A,A.next=t,g.lastEffect=A)),A}function tS(){return Ke().memoizedState}function vo(A,g,e,t){var I=it();PA.flags|=A,I.memoizedState=ys(1|g,e,void 0,t===void 0?null:t)}function Pa(A,g,e,t){var I=Ke();t=t===void 0?null:t;var n=void 0;if(ug!==null){var C=ug.memoizedState;if(n=C.destroy,t!==null&&ZB(t,C.deps)){I.memoizedState=ys(g,e,n,t);return}}PA.flags|=A,I.memoizedState=ys(1|g,e,n,t)}function P0(A,g){return vo(8390656,8,A,g)}function yB(A,g){return Pa(2048,8,A,g)}function IS(A,g){return Pa(4,2,A,g)}function nS(A,g){return Pa(4,4,A,g)}function CS(A,g){if(typeof g=="function")return A=A(),g(A),function(){g(null)};if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function lS(A,g,e){return e=e!=null?e.concat([A]):null,Pa(4,4,CS.bind(null,g,A),e)}function fB(){}function sS(A,g){var e=Ke();g=g===void 0?null:g;var t=e.memoizedState;return t!==null&&g!==null&&ZB(g,t[1])?t[0]:(e.memoizedState=[A,g],A)}function iS(A,g){var e=Ke();g=g===void 0?null:g;var t=e.memoizedState;return t!==null&&g!==null&&ZB(g,t[1])?t[0]:(A=A(),e.memoizedState=[A,g],A)}function oS(A,g,e){return Rn&21?(_e(e,g)||(e=uf(),PA.lanes|=e,vn|=e,A.baseState=!0),g):(A.baseState&&(A.baseState=!1,Ae=!0),A.memoizedState=e)}function pJ(A,g){var e=FA;FA=e!==0&&4>e?e:4,A(!0);var t=Mc.transition;Mc.transition={};try{A(!1),g()}finally{FA=e,Mc.transition=t}}function aS(){return Ke().memoizedState}function GJ(A,g,e){var t=yI(A);if(e={lane:t,action:e,hasEagerState:!1,eagerState:null,next:null},rS(A))cS(g,e);else if(e=Tf(A,g,e,t),e!==null){var I=Tg();Pe(e,A,t,I),dS(e,g,t)}}function yJ(A,g,e){var t=yI(A),I={lane:t,action:e,hasEagerState:!1,eagerState:null,next:null};if(rS(A))cS(g,I);else{var n=A.alternate;if(A.lanes===0&&(n===null||n.lanes===0)&&(n=g.lastRenderedReducer,n!==null))try{var C=g.lastRenderedState,l=n(C,e);if(I.hasEagerState=!0,I.eagerState=l,_e(l,C)){var s=g.interleaved;s===null?(I.next=I,uB(g)):(I.next=s.next,s.next=I),g.interleaved=I;return}}catch{}finally{}e=Tf(A,g,I,t),e!==null&&(I=Tg(),Pe(e,A,t,I),dS(e,g,t))}}function rS(A){var g=A.alternate;return A===PA||g!==null&&g===PA}function cS(A,g){Tl=sa=!0;var e=A.pending;e===null?g.next=g:(g.next=e.next,e.next=g),A.pending=g}function dS(A,g,e){if(e&4194240){var t=g.lanes;t&=A.pendingLanes,e|=t,g.lanes=e,gB(A,e)}}var ia={readContext:Qe,useCallback:Xg,useContext:Xg,useEffect:Xg,useImperativeHandle:Xg,useInsertionEffect:Xg,useLayoutEffect:Xg,useMemo:Xg,useReducer:Xg,useRef:Xg,useState:Xg,useDebugValue:Xg,useDeferredValue:Xg,useTransition:Xg,useMutableSource:Xg,useSyncExternalStore:Xg,useId:Xg,unstable_isNewReconciler:!1},fJ={readContext:Qe,useCallback:function(A,g){return it().memoizedState=[A,g===void 0?null:g],A},useContext:Qe,useEffect:P0,useImperativeHandle:function(A,g,e){return e=e!=null?e.concat([A]):null,vo(4194308,4,CS.bind(null,g,A),e)},useLayoutEffect:function(A,g){return vo(4194308,4,A,g)},useInsertionEffect:function(A,g){return vo(4,2,A,g)},useMemo:function(A,g){var e=it();return g=g===void 0?null:g,A=A(),e.memoizedState=[A,g],A},useReducer:function(A,g,e){var t=it();return g=e!==void 0?e(g):g,t.memoizedState=t.baseState=g,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:g},t.queue=A,A=A.dispatch=GJ.bind(null,PA,A),[t.memoizedState,A]},useRef:function(A){var g=it();return A={current:A},g.memoizedState=A},useState:O0,useDebugValue:fB,useDeferredValue:function(A){return it().memoizedState=A},useTransition:function(){var A=O0(!1),g=A[0];return A=pJ.bind(null,A[1]),it().memoizedState=A,[g,A]},useMutableSource:function(){},useSyncExternalStore:function(A,g,e){var t=PA,I=it();if(TA){if(e===void 0)throw Error(U(407));e=e()}else{if(e=g(),Gg===null)throw Error(U(349));Rn&30||qf(t,g,e)}I.memoizedState=e;var n={value:e,getSnapshot:g};return I.queue=n,P0(AS.bind(null,t,n,A),[A]),t.flags|=2048,ys(9,$f.bind(null,t,n,e,g),void 0,null),e},useId:function(){var A=it(),g=Gg.identifierPrefix;if(TA){var e=Jt,t=Xt;e=(t&~(1<<32-Oe(t)-1)).toString(32)+e,g=":"+g+"R"+e,e=ps++,0<e&&(g+="H"+e.toString(32)),g+=":"}else e=ZJ++,g=":"+g+"r"+e.toString(32)+":";return A.memoizedState=g},unstable_isNewReconciler:!1},SJ={readContext:Qe,useCallback:sS,useContext:Qe,useEffect:yB,useImperativeHandle:lS,useInsertionEffect:IS,useLayoutEffect:nS,useMemo:iS,useReducer:Dc,useRef:tS,useState:function(){return Dc(Gs)},useDebugValue:fB,useDeferredValue:function(A){var g=Ke();return oS(g,ug.memoizedState,A)},useTransition:function(){var A=Dc(Gs)[0],g=Ke().memoizedState;return[A,g]},useMutableSource:Pf,useSyncExternalStore:_f,useId:aS,unstable_isNewReconciler:!1},VJ={readContext:Qe,useCallback:sS,useContext:Qe,useEffect:yB,useImperativeHandle:lS,useInsertionEffect:IS,useLayoutEffect:nS,useMemo:iS,useReducer:zc,useRef:tS,useState:function(){return zc(Gs)},useDebugValue:fB,useDeferredValue:function(A){var g=Ke();return ug===null?g.memoizedState=A:oS(g,ug.memoizedState,A)},useTransition:function(){var A=zc(Gs)[0],g=Ke().memoizedState;return[A,g]},useMutableSource:Pf,useSyncExternalStore:_f,useId:aS,unstable_isNewReconciler:!1};function ze(A,g){if(A&&A.defaultProps){g=_A({},g),A=A.defaultProps;for(var e in A)g[e]===void 0&&(g[e]=A[e]);return g}return g}function bu(A,g,e,t){g=A.memoizedState,e=e(t,g),e=e==null?g:_A({},g,e),A.memoizedState=e,A.lanes===0&&(A.updateQueue.baseState=e)}var _a={isMounted:function(A){return(A=A._reactInternals)?Hn(A)===A:!1},enqueueSetState:function(A,g,e){A=A._reactInternals;var t=Tg(),I=yI(A),n=kt(t,I);n.payload=g,e!=null&&(n.callback=e),g=pI(A,n,I),g!==null&&(Pe(g,A,I,t),Wo(g,A,I))},enqueueReplaceState:function(A,g,e){A=A._reactInternals;var t=Tg(),I=yI(A),n=kt(t,I);n.tag=1,n.payload=g,e!=null&&(n.callback=e),g=pI(A,n,I),g!==null&&(Pe(g,A,I,t),Wo(g,A,I))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var e=Tg(),t=yI(A),I=kt(e,t);I.tag=2,g!=null&&(I.callback=g),g=pI(A,I,t),g!==null&&(Pe(g,A,t,e),Wo(g,A,t))}};function _0(A,g,e,t,I,n,C){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(t,n,C):g.prototype&&g.prototype.isPureReactComponent?!us(e,t)||!us(I,n):!0}function uS(A,g,e){var t=!1,I=XI,n=g.contextType;return typeof n=="object"&&n!==null?n=Qe(n):(I=ee(g)?Vn:Kg.current,t=g.contextTypes,n=(t=t!=null)?QC(A,I):XI),g=new g(e,n),A.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=_a,A.stateNode=g,g._reactInternals=A,t&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=I,A.__reactInternalMemoizedMaskedChildContext=n),g}function q0(A,g,e,t){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(e,t),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(e,t),g.state!==A&&_a.enqueueReplaceState(g,g.state,null)}function Zu(A,g,e,t){var I=A.stateNode;I.props=e,I.state=A.memoizedState,I.refs={},mB(A);var n=g.contextType;typeof n=="object"&&n!==null?I.context=Qe(n):(n=ee(g)?Vn:Kg.current,I.context=QC(A,n)),I.state=A.memoizedState,n=g.getDerivedStateFromProps,typeof n=="function"&&(bu(A,g,n,e),I.state=A.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(g=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),g!==I.state&&_a.enqueueReplaceState(I,I.state,null),Ca(A,e,I,t),I.state=A.memoizedState),typeof I.componentDidMount=="function"&&(A.flags|=4194308)}function xC(A,g){try{var e="",t=g;do e+=A2(t),t=t.return;while(t);var I=e}catch(n){I=`
Error generating stack: `+n.message+`
`+n.stack}return{value:A,source:g,stack:I,digest:null}}function Tc(A,g,e){return{value:A,source:null,stack:e??null,digest:g??null}}function pu(A,g){try{console.error(g.value)}catch(e){setTimeout(function(){throw e})}}var WJ=typeof WeakMap=="function"?WeakMap:Map;function mS(A,g,e){e=kt(-1,e),e.tag=3,e.payload={element:null};var t=g.value;return e.callback=function(){aa||(aa=!0,Xu=t),pu(A,g)},e}function BS(A,g,e){e=kt(-1,e),e.tag=3;var t=A.type.getDerivedStateFromError;if(typeof t=="function"){var I=g.value;e.payload=function(){return t(I)},e.callback=function(){pu(A,g)}}var n=A.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(e.callback=function(){pu(A,g),typeof t!="function"&&(GI===null?GI=new Set([this]):GI.add(this));var C=g.stack;this.componentDidCatch(g.value,{componentStack:C!==null?C:""})}),e}function $0(A,g,e){var t=A.pingCache;if(t===null){t=A.pingCache=new WJ;var I=new Set;t.set(g,I)}else I=t.get(g),I===void 0&&(I=new Set,t.set(g,I));I.has(e)||(I.add(e),A=xJ.bind(null,A,g,e),g.then(A,A))}function AZ(A){do{var g;if((g=A.tag===13)&&(g=A.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return A;A=A.return}while(A!==null);return null}function gZ(A,g,e,t,I){return A.mode&1?(A.flags|=65536,A.lanes=I,A):(A===g?A.flags|=65536:(A.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(g=kt(-1,1),g.tag=2,pI(e,g,1))),e.lanes|=1),A)}var RJ=Dt.ReactCurrentOwner,Ae=!1;function zg(A,g,e,t){g.child=A===null?zf(g,null,e,t):NC(g,A.child,e,t)}function eZ(A,g,e,t,I){e=e.render;var n=g.ref;return XC(g,I),t=pB(A,g,e,t,n,I),e=GB(),A!==null&&!Ae?(g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~I,Ut(A,g,I)):(TA&&e&&iB(g),g.flags|=1,zg(A,g,t,I),g.child)}function tZ(A,g,e,t,I){if(A===null){var n=e.type;return typeof n=="function"&&!JB(n)&&n.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(g.tag=15,g.type=n,hS(A,g,n,t,I)):(A=Fo(e.type,null,t,g,g.mode,I),A.ref=g.ref,A.return=g,g.child=A)}if(n=A.child,!(A.lanes&I)){var C=n.memoizedProps;if(e=e.compare,e=e!==null?e:us,e(C,t)&&A.ref===g.ref)return Ut(A,g,I)}return g.flags|=1,A=fI(n,t),A.ref=g.ref,A.return=g,g.child=A}function hS(A,g,e,t,I){if(A!==null){var n=A.memoizedProps;if(us(n,t)&&A.ref===g.ref)if(Ae=!1,g.pendingProps=t=n,(A.lanes&I)!==0)A.flags&131072&&(Ae=!0);else return g.lanes=A.lanes,Ut(A,g,I)}return Gu(A,g,e,t,I)}function bS(A,g,e){var t=g.pendingProps,I=t.children,n=A!==null?A.memoizedState:null;if(t.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},EA(GC,re),re|=e;else{if(!(e&1073741824))return A=n!==null?n.baseLanes|e:e,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:A,cachePool:null,transitions:null},g.updateQueue=null,EA(GC,re),re|=A,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=n!==null?n.baseLanes:e,EA(GC,re),re|=t}else n!==null?(t=n.baseLanes|e,g.memoizedState=null):t=e,EA(GC,re),re|=t;return zg(A,g,I,e),g.child}function ZS(A,g){var e=g.ref;(A===null&&e!==null||A!==null&&A.ref!==e)&&(g.flags|=512,g.flags|=2097152)}function Gu(A,g,e,t,I){var n=ee(e)?Vn:Kg.current;return n=QC(g,n),XC(g,I),e=pB(A,g,e,t,n,I),t=GB(),A!==null&&!Ae?(g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~I,Ut(A,g,I)):(TA&&t&&iB(g),g.flags|=1,zg(A,g,e,I),g.child)}function IZ(A,g,e,t,I){if(ee(e)){var n=!0;ga(g)}else n=!1;if(XC(g,I),g.stateNode===null)wo(A,g),uS(g,e,t),Zu(g,e,t,I),t=!0;else if(A===null){var C=g.stateNode,l=g.memoizedProps;C.props=l;var s=C.context,i=e.contextType;typeof i=="object"&&i!==null?i=Qe(i):(i=ee(e)?Vn:Kg.current,i=QC(g,i));var r=e.getDerivedStateFromProps,c=typeof r=="function"||typeof C.getSnapshotBeforeUpdate=="function";c||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(l!==t||s!==i)&&q0(g,C,t,i),II=!1;var d=g.memoizedState;C.state=d,Ca(g,t,C,I),s=g.memoizedState,l!==t||d!==s||ge.current||II?(typeof r=="function"&&(bu(g,e,r,t),s=g.memoizedState),(l=II||_0(g,e,l,t,d,s,i))?(c||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(g.flags|=4194308)):(typeof C.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=t,g.memoizedState=s),C.props=t,C.state=s,C.context=i,t=l):(typeof C.componentDidMount=="function"&&(g.flags|=4194308),t=!1)}else{C=g.stateNode,jf(A,g),l=g.memoizedProps,i=g.type===g.elementType?l:ze(g.type,l),C.props=i,c=g.pendingProps,d=C.context,s=e.contextType,typeof s=="object"&&s!==null?s=Qe(s):(s=ee(e)?Vn:Kg.current,s=QC(g,s));var h=e.getDerivedStateFromProps;(r=typeof h=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(l!==c||d!==s)&&q0(g,C,t,s),II=!1,d=g.memoizedState,C.state=d,Ca(g,t,C,I);var Z=g.memoizedState;l!==c||d!==Z||ge.current||II?(typeof h=="function"&&(bu(g,e,h,t),Z=g.memoizedState),(i=II||_0(g,e,i,t,d,Z,s)||!1)?(r||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(t,Z,s),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(t,Z,s)),typeof C.componentDidUpdate=="function"&&(g.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof C.componentDidUpdate!="function"||l===A.memoizedProps&&d===A.memoizedState||(g.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||l===A.memoizedProps&&d===A.memoizedState||(g.flags|=1024),g.memoizedProps=t,g.memoizedState=Z),C.props=t,C.state=Z,C.context=s,t=i):(typeof C.componentDidUpdate!="function"||l===A.memoizedProps&&d===A.memoizedState||(g.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||l===A.memoizedProps&&d===A.memoizedState||(g.flags|=1024),t=!1)}return yu(A,g,e,t,n,I)}function yu(A,g,e,t,I,n){ZS(A,g);var C=(g.flags&128)!==0;if(!t&&!C)return I&&L0(g,e,!1),Ut(A,g,n);t=g.stateNode,RJ.current=g;var l=C&&typeof e.getDerivedStateFromError!="function"?null:t.render();return g.flags|=1,A!==null&&C?(g.child=NC(g,A.child,null,n),g.child=NC(g,null,l,n)):zg(A,g,l,n),g.memoizedState=t.state,I&&L0(g,e,!0),g.child}function pS(A){var g=A.stateNode;g.pendingContext?E0(A,g.pendingContext,g.pendingContext!==g.context):g.context&&E0(A,g.context,!1),BB(A,g.containerInfo)}function nZ(A,g,e,t,I){return KC(),aB(I),g.flags|=256,zg(A,g,e,t),g.child}var fu={dehydrated:null,treeContext:null,retryLane:0};function Su(A){return{baseLanes:A,cachePool:null,transitions:null}}function GS(A,g,e){var t=g.pendingProps,I=OA.current,n=!1,C=(g.flags&128)!==0,l;if((l=C)||(l=A!==null&&A.memoizedState===null?!1:(I&2)!==0),l?(n=!0,g.flags&=-129):(A===null||A.memoizedState!==null)&&(I|=1),EA(OA,I&1),A===null)return Bu(g),A=g.memoizedState,A!==null&&(A=A.dehydrated,A!==null)?(g.mode&1?A.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(C=t.children,A=t.fallback,n?(t=g.mode,n=g.child,C={mode:"hidden",children:C},!(t&1)&&n!==null?(n.childLanes=0,n.pendingProps=C):n=Ar(C,t,0,null),A=Zn(A,t,e,null),n.return=g,A.return=g,n.sibling=A,g.child=n,g.child.memoizedState=Su(e),g.memoizedState=fu,A):SB(g,C));if(I=A.memoizedState,I!==null&&(l=I.dehydrated,l!==null))return vJ(A,g,C,t,l,I,e);if(n){n=t.fallback,C=g.mode,I=A.child,l=I.sibling;var s={mode:"hidden",children:t.children};return!(C&1)&&g.child!==I?(t=g.child,t.childLanes=0,t.pendingProps=s,g.deletions=null):(t=fI(I,s),t.subtreeFlags=I.subtreeFlags&14680064),l!==null?n=fI(l,n):(n=Zn(n,C,e,null),n.flags|=2),n.return=g,t.return=g,t.sibling=n,g.child=t,t=n,n=g.child,C=A.child.memoizedState,C=C===null?Su(e):{baseLanes:C.baseLanes|e,cachePool:null,transitions:C.transitions},n.memoizedState=C,n.childLanes=A.childLanes&~e,g.memoizedState=fu,t}return n=A.child,A=n.sibling,t=fI(n,{mode:"visible",children:t.children}),!(g.mode&1)&&(t.lanes=e),t.return=g,t.sibling=null,A!==null&&(e=g.deletions,e===null?(g.deletions=[A],g.flags|=16):e.push(A)),g.child=t,g.memoizedState=null,t}function SB(A,g){return g=Ar({mode:"visible",children:g},A.mode,0,null),g.return=A,A.child=g}function vi(A,g,e,t){return t!==null&&aB(t),NC(g,A.child,null,e),A=SB(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function vJ(A,g,e,t,I,n,C){if(e)return g.flags&256?(g.flags&=-257,t=Tc(Error(U(422))),vi(A,g,C,t)):g.memoizedState!==null?(g.child=A.child,g.flags|=128,null):(n=t.fallback,I=g.mode,t=Ar({mode:"visible",children:t.children},I,0,null),n=Zn(n,I,C,null),n.flags|=2,t.return=g,n.return=g,t.sibling=n,g.child=t,g.mode&1&&NC(g,A.child,null,C),g.child.memoizedState=Su(C),g.memoizedState=fu,n);if(!(g.mode&1))return vi(A,g,C,null);if(I.data==="$!"){if(t=I.nextSibling&&I.nextSibling.dataset,t)var l=t.dgst;return t=l,n=Error(U(419)),t=Tc(n,t,void 0),vi(A,g,C,t)}if(l=(C&A.childLanes)!==0,Ae||l){if(t=Gg,t!==null){switch(C&-C){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=I&(t.suspendedLanes|C)?0:I,I!==0&&I!==n.retryLane&&(n.retryLane=I,Nt(A,I),Pe(t,A,I,-1))}return XB(),t=Tc(Error(U(421))),vi(A,g,C,t)}return I.data==="$?"?(g.flags|=128,g.child=A.child,g=EJ.bind(null,A),I._reactRetry=g,null):(A=n.treeContext,ce=ZI(I.nextSibling),de=g,TA=!0,je=null,A!==null&&(ve[we++]=Xt,ve[we++]=Jt,ve[we++]=Wn,Xt=A.id,Jt=A.overflow,Wn=g),g=SB(g,t.children),g.flags|=4096,g)}function CZ(A,g,e){A.lanes|=g;var t=A.alternate;t!==null&&(t.lanes|=g),hu(A.return,g,e)}function jc(A,g,e,t,I){var n=A.memoizedState;n===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:t,tail:e,tailMode:I}:(n.isBackwards=g,n.rendering=null,n.renderingStartTime=0,n.last=t,n.tail=e,n.tailMode=I)}function yS(A,g,e){var t=g.pendingProps,I=t.revealOrder,n=t.tail;if(zg(A,g,t.children,e),t=OA.current,t&2)t=t&1|2,g.flags|=128;else{if(A!==null&&A.flags&128)A:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&CZ(A,e,g);else if(A.tag===19)CZ(A,e,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break A;for(;A.sibling===null;){if(A.return===null||A.return===g)break A;A=A.return}A.sibling.return=A.return,A=A.sibling}t&=1}if(EA(OA,t),!(g.mode&1))g.memoizedState=null;else switch(I){case"forwards":for(e=g.child,I=null;e!==null;)A=e.alternate,A!==null&&la(A)===null&&(I=e),e=e.sibling;e=I,e===null?(I=g.child,g.child=null):(I=e.sibling,e.sibling=null),jc(g,!1,I,e,n);break;case"backwards":for(e=null,I=g.child,g.child=null;I!==null;){if(A=I.alternate,A!==null&&la(A)===null){g.child=I;break}A=I.sibling,I.sibling=e,e=I,I=A}jc(g,!0,e,null,n);break;case"together":jc(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function wo(A,g){!(g.mode&1)&&A!==null&&(A.alternate=null,g.alternate=null,g.flags|=2)}function Ut(A,g,e){if(A!==null&&(g.dependencies=A.dependencies),vn|=g.lanes,!(e&g.childLanes))return null;if(A!==null&&g.child!==A.child)throw Error(U(153));if(g.child!==null){for(A=g.child,e=fI(A,A.pendingProps),g.child=e,e.return=g;A.sibling!==null;)A=A.sibling,e=e.sibling=fI(A,A.pendingProps),e.return=g;e.sibling=null}return g.child}function wJ(A,g,e){switch(g.tag){case 3:pS(g),KC();break;case 5:Of(g);break;case 1:ee(g.type)&&ga(g);break;case 4:BB(g,g.stateNode.containerInfo);break;case 10:var t=g.type._context,I=g.memoizedProps.value;EA(Ia,t._currentValue),t._currentValue=I;break;case 13:if(t=g.memoizedState,t!==null)return t.dehydrated!==null?(EA(OA,OA.current&1),g.flags|=128,null):e&g.child.childLanes?GS(A,g,e):(EA(OA,OA.current&1),A=Ut(A,g,e),A!==null?A.sibling:null);EA(OA,OA.current&1);break;case 19:if(t=(e&g.childLanes)!==0,A.flags&128){if(t)return yS(A,g,e);g.flags|=128}if(I=g.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),EA(OA,OA.current),t)break;return null;case 22:case 23:return g.lanes=0,bS(A,g,e)}return Ut(A,g,e)}var fS,Vu,SS,VS;fS=function(A,g){for(var e=g.child;e!==null;){if(e.tag===5||e.tag===6)A.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===g)break;for(;e.sibling===null;){if(e.return===null||e.return===g)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Vu=function(){};SS=function(A,g,e,t){var I=A.memoizedProps;if(I!==t){A=g.stateNode,un(mt.current);var n=null;switch(e){case"input":I=jd(A,I),t=jd(A,t),n=[];break;case"select":I=_A({},I,{value:void 0}),t=_A({},t,{value:void 0}),n=[];break;case"textarea":I=_d(A,I),t=_d(A,t),n=[];break;default:typeof I.onClick!="function"&&typeof t.onClick=="function"&&(A.onclick=$o)}$d(e,t);var C;e=null;for(i in I)if(!t.hasOwnProperty(i)&&I.hasOwnProperty(i)&&I[i]!=null)if(i==="style"){var l=I[i];for(C in l)l.hasOwnProperty(C)&&(e||(e={}),e[C]="")}else i!=="dangerouslySetInnerHTML"&&i!=="children"&&i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ss.hasOwnProperty(i)?n||(n=[]):(n=n||[]).push(i,null));for(i in t){var s=t[i];if(l=I!=null?I[i]:void 0,t.hasOwnProperty(i)&&s!==l&&(s!=null||l!=null))if(i==="style")if(l){for(C in l)!l.hasOwnProperty(C)||s&&s.hasOwnProperty(C)||(e||(e={}),e[C]="");for(C in s)s.hasOwnProperty(C)&&l[C]!==s[C]&&(e||(e={}),e[C]=s[C])}else e||(n||(n=[]),n.push(i,e)),e=s;else i==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,l=l?l.__html:void 0,s!=null&&l!==s&&(n=n||[]).push(i,s)):i==="children"?typeof s!="string"&&typeof s!="number"||(n=n||[]).push(i,""+s):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&(ss.hasOwnProperty(i)?(s!=null&&i==="onScroll"&&LA("scroll",A),n||l===s||(n=[])):(n=n||[]).push(i,s))}e&&(n=n||[]).push("style",e);var i=n;(g.updateQueue=i)&&(g.flags|=4)}};VS=function(A,g,e,t){e!==t&&(g.flags|=4)};function ml(A,g){if(!TA)switch(A.tailMode){case"hidden":g=A.tail;for(var e=null;g!==null;)g.alternate!==null&&(e=g),g=g.sibling;e===null?A.tail=null:e.sibling=null;break;case"collapsed":e=A.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:t.sibling=null}}function Jg(A){var g=A.alternate!==null&&A.alternate.child===A.child,e=0,t=0;if(g)for(var I=A.child;I!==null;)e|=I.lanes|I.childLanes,t|=I.subtreeFlags&14680064,t|=I.flags&14680064,I.return=A,I=I.sibling;else for(I=A.child;I!==null;)e|=I.lanes|I.childLanes,t|=I.subtreeFlags,t|=I.flags,I.return=A,I=I.sibling;return A.subtreeFlags|=t,A.childLanes=e,g}function XJ(A,g,e){var t=g.pendingProps;switch(oB(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jg(g),null;case 1:return ee(g.type)&&Aa(),Jg(g),null;case 3:return t=g.stateNode,UC(),MA(ge),MA(Kg),bB(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(A===null||A.child===null)&&(Wi(g)?g.flags|=4:A===null||A.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,je!==null&&(ku(je),je=null))),Vu(A,g),Jg(g),null;case 5:hB(g);var I=un(Zs.current);if(e=g.type,A!==null&&g.stateNode!=null)SS(A,g,e,t,I),A.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!t){if(g.stateNode===null)throw Error(U(166));return Jg(g),null}if(A=un(mt.current),Wi(g)){t=g.stateNode,e=g.type;var n=g.memoizedProps;switch(t[rt]=g,t[hs]=n,A=(g.mode&1)!==0,e){case"dialog":LA("cancel",t),LA("close",t);break;case"iframe":case"object":case"embed":LA("load",t);break;case"video":case"audio":for(I=0;I<wl.length;I++)LA(wl[I],t);break;case"source":LA("error",t);break;case"img":case"image":case"link":LA("error",t),LA("load",t);break;case"details":LA("toggle",t);break;case"input":u0(t,n),LA("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},LA("invalid",t);break;case"textarea":B0(t,n),LA("invalid",t)}$d(e,n),I=null;for(var C in n)if(n.hasOwnProperty(C)){var l=n[C];C==="children"?typeof l=="string"?t.textContent!==l&&(n.suppressHydrationWarning!==!0&&Vi(t.textContent,l,A),I=["children",l]):typeof l=="number"&&t.textContent!==""+l&&(n.suppressHydrationWarning!==!0&&Vi(t.textContent,l,A),I=["children",""+l]):ss.hasOwnProperty(C)&&l!=null&&C==="onScroll"&&LA("scroll",t)}switch(e){case"input":hi(t),m0(t,n,!0);break;case"textarea":hi(t),h0(t);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(t.onclick=$o)}t=I,g.updateQueue=t,t!==null&&(g.flags|=4)}else{C=I.nodeType===9?I:I.ownerDocument,A==="http://www.w3.org/1999/xhtml"&&(A=$y(e)),A==="http://www.w3.org/1999/xhtml"?e==="script"?(A=C.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild)):typeof t.is=="string"?A=C.createElement(e,{is:t.is}):(A=C.createElement(e),e==="select"&&(C=A,t.multiple?C.multiple=!0:t.size&&(C.size=t.size))):A=C.createElementNS(A,e),A[rt]=g,A[hs]=t,fS(A,g,!1,!1),g.stateNode=A;A:{switch(C=Au(e,t),e){case"dialog":LA("cancel",A),LA("close",A),I=t;break;case"iframe":case"object":case"embed":LA("load",A),I=t;break;case"video":case"audio":for(I=0;I<wl.length;I++)LA(wl[I],A);I=t;break;case"source":LA("error",A),I=t;break;case"img":case"image":case"link":LA("error",A),LA("load",A),I=t;break;case"details":LA("toggle",A),I=t;break;case"input":u0(A,t),I=jd(A,t),LA("invalid",A);break;case"option":I=t;break;case"select":A._wrapperState={wasMultiple:!!t.multiple},I=_A({},t,{value:void 0}),LA("invalid",A);break;case"textarea":B0(A,t),I=_d(A,t),LA("invalid",A);break;default:I=t}$d(e,I),l=I;for(n in l)if(l.hasOwnProperty(n)){var s=l[n];n==="style"?ef(A,s):n==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&Af(A,s)):n==="children"?typeof s=="string"?(e!=="textarea"||s!=="")&&is(A,s):typeof s=="number"&&is(A,""+s):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(ss.hasOwnProperty(n)?s!=null&&n==="onScroll"&&LA("scroll",A):s!=null&&Om(A,n,s,C))}switch(e){case"input":hi(A),m0(A,t,!1);break;case"textarea":hi(A),h0(A);break;case"option":t.value!=null&&A.setAttribute("value",""+wI(t.value));break;case"select":A.multiple=!!t.multiple,n=t.value,n!=null?WC(A,!!t.multiple,n,!1):t.defaultValue!=null&&WC(A,!!t.multiple,t.defaultValue,!0);break;default:typeof I.onClick=="function"&&(A.onclick=$o)}switch(e){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break A;case"img":t=!0;break A;default:t=!1}}t&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Jg(g),null;case 6:if(A&&g.stateNode!=null)VS(A,g,A.memoizedProps,t);else{if(typeof t!="string"&&g.stateNode===null)throw Error(U(166));if(e=un(Zs.current),un(mt.current),Wi(g)){if(t=g.stateNode,e=g.memoizedProps,t[rt]=g,(n=t.nodeValue!==e)&&(A=de,A!==null))switch(A.tag){case 3:Vi(t.nodeValue,e,(A.mode&1)!==0);break;case 5:A.memoizedProps.suppressHydrationWarning!==!0&&Vi(t.nodeValue,e,(A.mode&1)!==0)}n&&(g.flags|=4)}else t=(e.nodeType===9?e:e.ownerDocument).createTextNode(t),t[rt]=g,g.stateNode=t}return Jg(g),null;case 13:if(MA(OA),t=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(TA&&ce!==null&&g.mode&1&&!(g.flags&128))Mf(),KC(),g.flags|=98560,n=!1;else if(n=Wi(g),t!==null&&t.dehydrated!==null){if(A===null){if(!n)throw Error(U(318));if(n=g.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(U(317));n[rt]=g}else KC(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;Jg(g),n=!1}else je!==null&&(ku(je),je=null),n=!0;if(!n)return g.flags&65536?g:null}return g.flags&128?(g.lanes=e,g):(t=t!==null,t!==(A!==null&&A.memoizedState!==null)&&t&&(g.child.flags|=8192,g.mode&1&&(A===null||OA.current&1?Bg===0&&(Bg=3):XB())),g.updateQueue!==null&&(g.flags|=4),Jg(g),null);case 4:return UC(),Vu(A,g),A===null&&ms(g.stateNode.containerInfo),Jg(g),null;case 10:return dB(g.type._context),Jg(g),null;case 17:return ee(g.type)&&Aa(),Jg(g),null;case 19:if(MA(OA),n=g.memoizedState,n===null)return Jg(g),null;if(t=(g.flags&128)!==0,C=n.rendering,C===null)if(t)ml(n,!1);else{if(Bg!==0||A!==null&&A.flags&128)for(A=g.child;A!==null;){if(C=la(A),C!==null){for(g.flags|=128,ml(n,!1),t=C.updateQueue,t!==null&&(g.updateQueue=t,g.flags|=4),g.subtreeFlags=0,t=e,e=g.child;e!==null;)n=e,A=t,n.flags&=14680066,C=n.alternate,C===null?(n.childLanes=0,n.lanes=A,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=C.childLanes,n.lanes=C.lanes,n.child=C.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=C.memoizedProps,n.memoizedState=C.memoizedState,n.updateQueue=C.updateQueue,n.type=C.type,A=C.dependencies,n.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),e=e.sibling;return EA(OA,OA.current&1|2),g.child}A=A.sibling}n.tail!==null&&lg()>EC&&(g.flags|=128,t=!0,ml(n,!1),g.lanes=4194304)}else{if(!t)if(A=la(C),A!==null){if(g.flags|=128,t=!0,e=A.updateQueue,e!==null&&(g.updateQueue=e,g.flags|=4),ml(n,!0),n.tail===null&&n.tailMode==="hidden"&&!C.alternate&&!TA)return Jg(g),null}else 2*lg()-n.renderingStartTime>EC&&e!==1073741824&&(g.flags|=128,t=!0,ml(n,!1),g.lanes=4194304);n.isBackwards?(C.sibling=g.child,g.child=C):(e=n.last,e!==null?e.sibling=C:g.child=C,n.last=C)}return n.tail!==null?(g=n.tail,n.rendering=g,n.tail=g.sibling,n.renderingStartTime=lg(),g.sibling=null,e=OA.current,EA(OA,t?e&1|2:e&1),g):(Jg(g),null);case 22:case 23:return wB(),t=g.memoizedState!==null,A!==null&&A.memoizedState!==null!==t&&(g.flags|=8192),t&&g.mode&1?re&1073741824&&(Jg(g),g.subtreeFlags&6&&(g.flags|=8192)):Jg(g),null;case 24:return null;case 25:return null}throw Error(U(156,g.tag))}function JJ(A,g){switch(oB(g),g.tag){case 1:return ee(g.type)&&Aa(),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return UC(),MA(ge),MA(Kg),bB(),A=g.flags,A&65536&&!(A&128)?(g.flags=A&-65537|128,g):null;case 5:return hB(g),null;case 13:if(MA(OA),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(U(340));KC()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return MA(OA),null;case 4:return UC(),null;case 10:return dB(g.type._context),null;case 22:case 23:return wB(),null;case 24:return null;default:return null}}var wi=!1,Qg=!1,FJ=typeof WeakSet=="function"?WeakSet:Set,T=null;function pC(A,g){var e=A.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){Ag(A,g,t)}else e.current=null}function Wu(A,g,e){try{e()}catch(t){Ag(A,g,t)}}var lZ=!1;function kJ(A,g){if(ou=Po,A=Xf(),sB(A)){if("selectionStart"in A)var e={start:A.selectionStart,end:A.selectionEnd};else A:{e=(e=A.ownerDocument)&&e.defaultView||window;var t=e.getSelection&&e.getSelection();if(t&&t.rangeCount!==0){e=t.anchorNode;var I=t.anchorOffset,n=t.focusNode;t=t.focusOffset;try{e.nodeType,n.nodeType}catch{e=null;break A}var C=0,l=-1,s=-1,i=0,r=0,c=A,d=null;g:for(;;){for(var h;c!==e||I!==0&&c.nodeType!==3||(l=C+I),c!==n||t!==0&&c.nodeType!==3||(s=C+t),c.nodeType===3&&(C+=c.nodeValue.length),(h=c.firstChild)!==null;)d=c,c=h;for(;;){if(c===A)break g;if(d===e&&++i===I&&(l=C),d===n&&++r===t&&(s=C),(h=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=h}e=l===-1||s===-1?null:{start:l,end:s}}else e=null}e=e||{start:0,end:0}}else e=null;for(au={focusedElem:A,selectionRange:e},Po=!1,T=g;T!==null;)if(g=T,A=g.child,(g.subtreeFlags&1028)!==0&&A!==null)A.return=g,T=A;else for(;T!==null;){g=T;try{var Z=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var y=Z.memoizedProps,S=Z.memoizedState,b=g.stateNode,m=b.getSnapshotBeforeUpdate(g.elementType===g.type?y:ze(g.type,y),S);b.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var G=g.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(V){Ag(g,g.return,V)}if(A=g.sibling,A!==null){A.return=g.return,T=A;break}T=g.return}return Z=lZ,lZ=!1,Z}function jl(A,g,e){var t=g.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var I=t=t.next;do{if((I.tag&A)===A){var n=I.destroy;I.destroy=void 0,n!==void 0&&Wu(g,e,n)}I=I.next}while(I!==t)}}function qa(A,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var e=g=g.next;do{if((e.tag&A)===A){var t=e.create;e.destroy=t()}e=e.next}while(e!==g)}}function Ru(A){var g=A.ref;if(g!==null){var e=A.stateNode;switch(A.tag){case 5:A=e;break;default:A=e}typeof g=="function"?g(A):g.current=A}}function WS(A){var g=A.alternate;g!==null&&(A.alternate=null,WS(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&(delete g[rt],delete g[hs],delete g[du],delete g[mJ],delete g[BJ])),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function RS(A){return A.tag===5||A.tag===3||A.tag===4}function sZ(A){A:for(;;){for(;A.sibling===null;){if(A.return===null||RS(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.flags&2||A.child===null||A.tag===4)continue A;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function vu(A,g,e){var t=A.tag;if(t===5||t===6)A=A.stateNode,g?e.nodeType===8?e.parentNode.insertBefore(A,g):e.insertBefore(A,g):(e.nodeType===8?(g=e.parentNode,g.insertBefore(A,e)):(g=e,g.appendChild(A)),e=e._reactRootContainer,e!=null||g.onclick!==null||(g.onclick=$o));else if(t!==4&&(A=A.child,A!==null))for(vu(A,g,e),A=A.sibling;A!==null;)vu(A,g,e),A=A.sibling}function wu(A,g,e){var t=A.tag;if(t===5||t===6)A=A.stateNode,g?e.insertBefore(A,g):e.appendChild(A);else if(t!==4&&(A=A.child,A!==null))for(wu(A,g,e),A=A.sibling;A!==null;)wu(A,g,e),A=A.sibling}var fg=null,Te=!1;function qt(A,g,e){for(e=e.child;e!==null;)vS(A,g,e),e=e.sibling}function vS(A,g,e){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Ma,e)}catch{}switch(e.tag){case 5:Qg||pC(e,g);case 6:var t=fg,I=Te;fg=null,qt(A,g,e),fg=t,Te=I,fg!==null&&(Te?(A=fg,e=e.stateNode,A.nodeType===8?A.parentNode.removeChild(e):A.removeChild(e)):fg.removeChild(e.stateNode));break;case 18:fg!==null&&(Te?(A=fg,e=e.stateNode,A.nodeType===8?xc(A.parentNode,e):A.nodeType===1&&xc(A,e),cs(A)):xc(fg,e.stateNode));break;case 4:t=fg,I=Te,fg=e.stateNode.containerInfo,Te=!0,qt(A,g,e),fg=t,Te=I;break;case 0:case 11:case 14:case 15:if(!Qg&&(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null))){I=t=t.next;do{var n=I,C=n.destroy;n=n.tag,C!==void 0&&(n&2||n&4)&&Wu(e,g,C),I=I.next}while(I!==t)}qt(A,g,e);break;case 1:if(!Qg&&(pC(e,g),t=e.stateNode,typeof t.componentWillUnmount=="function"))try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(l){Ag(e,g,l)}qt(A,g,e);break;case 21:qt(A,g,e);break;case 22:e.mode&1?(Qg=(t=Qg)||e.memoizedState!==null,qt(A,g,e),Qg=t):qt(A,g,e);break;default:qt(A,g,e)}}function iZ(A){var g=A.updateQueue;if(g!==null){A.updateQueue=null;var e=A.stateNode;e===null&&(e=A.stateNode=new FJ),g.forEach(function(t){var I=LJ.bind(null,A,t);e.has(t)||(e.add(t),t.then(I,I))})}}function Me(A,g){var e=g.deletions;if(e!==null)for(var t=0;t<e.length;t++){var I=e[t];try{var n=A,C=g,l=C;A:for(;l!==null;){switch(l.tag){case 5:fg=l.stateNode,Te=!1;break A;case 3:fg=l.stateNode.containerInfo,Te=!0;break A;case 4:fg=l.stateNode.containerInfo,Te=!0;break A}l=l.return}if(fg===null)throw Error(U(160));vS(n,C,I),fg=null,Te=!1;var s=I.alternate;s!==null&&(s.return=null),I.return=null}catch(i){Ag(I,g,i)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)wS(g,A),g=g.sibling}function wS(A,g){var e=A.alternate,t=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:if(Me(g,A),Ct(A),t&4){try{jl(3,A,A.return),qa(3,A)}catch(y){Ag(A,A.return,y)}try{jl(5,A,A.return)}catch(y){Ag(A,A.return,y)}}break;case 1:Me(g,A),Ct(A),t&512&&e!==null&&pC(e,e.return);break;case 5:if(Me(g,A),Ct(A),t&512&&e!==null&&pC(e,e.return),A.flags&32){var I=A.stateNode;try{is(I,"")}catch(y){Ag(A,A.return,y)}}if(t&4&&(I=A.stateNode,I!=null)){var n=A.memoizedProps,C=e!==null?e.memoizedProps:n,l=A.type,s=A.updateQueue;if(A.updateQueue=null,s!==null)try{l==="input"&&n.type==="radio"&&n.name!=null&&_y(I,n),Au(l,C);var i=Au(l,n);for(C=0;C<s.length;C+=2){var r=s[C],c=s[C+1];r==="style"?ef(I,c):r==="dangerouslySetInnerHTML"?Af(I,c):r==="children"?is(I,c):Om(I,r,c,i)}switch(l){case"input":Od(I,n);break;case"textarea":qy(I,n);break;case"select":var d=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!n.multiple;var h=n.value;h!=null?WC(I,!!n.multiple,h,!1):d!==!!n.multiple&&(n.defaultValue!=null?WC(I,!!n.multiple,n.defaultValue,!0):WC(I,!!n.multiple,n.multiple?[]:"",!1))}I[hs]=n}catch(y){Ag(A,A.return,y)}}break;case 6:if(Me(g,A),Ct(A),t&4){if(A.stateNode===null)throw Error(U(162));I=A.stateNode,n=A.memoizedProps;try{I.nodeValue=n}catch(y){Ag(A,A.return,y)}}break;case 3:if(Me(g,A),Ct(A),t&4&&e!==null&&e.memoizedState.isDehydrated)try{cs(g.containerInfo)}catch(y){Ag(A,A.return,y)}break;case 4:Me(g,A),Ct(A);break;case 13:Me(g,A),Ct(A),I=A.child,I.flags&8192&&(n=I.memoizedState!==null,I.stateNode.isHidden=n,!n||I.alternate!==null&&I.alternate.memoizedState!==null||(RB=lg())),t&4&&iZ(A);break;case 22:if(r=e!==null&&e.memoizedState!==null,A.mode&1?(Qg=(i=Qg)||r,Me(g,A),Qg=i):Me(g,A),Ct(A),t&8192){if(i=A.memoizedState!==null,(A.stateNode.isHidden=i)&&!r&&A.mode&1)for(T=A,r=A.child;r!==null;){for(c=T=r;T!==null;){switch(d=T,h=d.child,d.tag){case 0:case 11:case 14:case 15:jl(4,d,d.return);break;case 1:pC(d,d.return);var Z=d.stateNode;if(typeof Z.componentWillUnmount=="function"){t=d,e=d.return;try{g=t,Z.props=g.memoizedProps,Z.state=g.memoizedState,Z.componentWillUnmount()}catch(y){Ag(t,e,y)}}break;case 5:pC(d,d.return);break;case 22:if(d.memoizedState!==null){aZ(c);continue}}h!==null?(h.return=d,T=h):aZ(c)}r=r.sibling}A:for(r=null,c=A;;){if(c.tag===5){if(r===null){r=c;try{I=c.stateNode,i?(n=I.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(l=c.stateNode,s=c.memoizedProps.style,C=s!=null&&s.hasOwnProperty("display")?s.display:null,l.style.display=gf("display",C))}catch(y){Ag(A,A.return,y)}}}else if(c.tag===6){if(r===null)try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(y){Ag(A,A.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===A)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===A)break A;for(;c.sibling===null;){if(c.return===null||c.return===A)break A;r===c&&(r=null),c=c.return}r===c&&(r=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Me(g,A),Ct(A),t&4&&iZ(A);break;case 21:break;default:Me(g,A),Ct(A)}}function Ct(A){var g=A.flags;if(g&2){try{A:{for(var e=A.return;e!==null;){if(RS(e)){var t=e;break A}e=e.return}throw Error(U(160))}switch(t.tag){case 5:var I=t.stateNode;t.flags&32&&(is(I,""),t.flags&=-33);var n=sZ(A);wu(A,n,I);break;case 3:case 4:var C=t.stateNode.containerInfo,l=sZ(A);vu(A,l,C);break;default:throw Error(U(161))}}catch(s){Ag(A,A.return,s)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function HJ(A,g,e){T=A,XS(A)}function XS(A,g,e){for(var t=(A.mode&1)!==0;T!==null;){var I=T,n=I.child;if(I.tag===22&&t){var C=I.memoizedState!==null||wi;if(!C){var l=I.alternate,s=l!==null&&l.memoizedState!==null||Qg;l=wi;var i=Qg;if(wi=C,(Qg=s)&&!i)for(T=I;T!==null;)C=T,s=C.child,C.tag===22&&C.memoizedState!==null?rZ(I):s!==null?(s.return=C,T=s):rZ(I);for(;n!==null;)T=n,XS(n),n=n.sibling;T=I,wi=l,Qg=i}oZ(A)}else I.subtreeFlags&8772&&n!==null?(n.return=I,T=n):oZ(A)}}function oZ(A){for(;T!==null;){var g=T;if(g.flags&8772){var e=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:Qg||qa(5,g);break;case 1:var t=g.stateNode;if(g.flags&4&&!Qg)if(e===null)t.componentDidMount();else{var I=g.elementType===g.type?e.memoizedProps:ze(g.type,e.memoizedProps);t.componentDidUpdate(I,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var n=g.updateQueue;n!==null&&j0(g,n,t);break;case 3:var C=g.updateQueue;if(C!==null){if(e=null,g.child!==null)switch(g.child.tag){case 5:e=g.child.stateNode;break;case 1:e=g.child.stateNode}j0(g,C,e)}break;case 5:var l=g.stateNode;if(e===null&&g.flags&4){e=l;var s=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&e.focus();break;case"img":s.src&&(e.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var i=g.alternate;if(i!==null){var r=i.memoizedState;if(r!==null){var c=r.dehydrated;c!==null&&cs(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Qg||g.flags&512&&Ru(g)}catch(d){Ag(g,g.return,d)}}if(g===A){T=null;break}if(e=g.sibling,e!==null){e.return=g.return,T=e;break}T=g.return}}function aZ(A){for(;T!==null;){var g=T;if(g===A){T=null;break}var e=g.sibling;if(e!==null){e.return=g.return,T=e;break}T=g.return}}function rZ(A){for(;T!==null;){var g=T;try{switch(g.tag){case 0:case 11:case 15:var e=g.return;try{qa(4,g)}catch(s){Ag(g,e,s)}break;case 1:var t=g.stateNode;if(typeof t.componentDidMount=="function"){var I=g.return;try{t.componentDidMount()}catch(s){Ag(g,I,s)}}var n=g.return;try{Ru(g)}catch(s){Ag(g,n,s)}break;case 5:var C=g.return;try{Ru(g)}catch(s){Ag(g,C,s)}}}catch(s){Ag(g,g.return,s)}if(g===A){T=null;break}var l=g.sibling;if(l!==null){l.return=g.return,T=l;break}T=g.return}}var YJ=Math.ceil,oa=Dt.ReactCurrentDispatcher,VB=Dt.ReactCurrentOwner,Ye=Dt.ReactCurrentBatchConfig,yA=0,Gg=null,og=null,vg=0,re=0,GC=KI(0),Bg=0,fs=null,vn=0,$a=0,WB=0,Ol=null,qg=null,RB=0,EC=1/0,Rt=null,aa=!1,Xu=null,GI=null,Xi=!1,oI=null,ra=0,Pl=0,Ju=null,Xo=-1,Jo=0;function Tg(){return yA&6?lg():Xo!==-1?Xo:Xo=lg()}function yI(A){return A.mode&1?yA&2&&vg!==0?vg&-vg:bJ.transition!==null?(Jo===0&&(Jo=uf()),Jo):(A=FA,A!==0||(A=window.event,A=A===void 0?16:Gf(A.type)),A):1}function Pe(A,g,e,t){if(50<Pl)throw Pl=0,Ju=null,Error(U(185));Ns(A,e,t),(!(yA&2)||A!==Gg)&&(A===Gg&&(!(yA&2)&&($a|=e),Bg===4&&sI(A,vg)),te(A,t),e===1&&yA===0&&!(g.mode&1)&&(EC=lg()+500,Oa&&NI()))}function te(A,g){var e=A.callbackNode;b2(A,g);var t=Oo(A,A===Gg?vg:0);if(t===0)e!==null&&p0(e),A.callbackNode=null,A.callbackPriority=0;else if(g=t&-t,A.callbackPriority!==g){if(e!=null&&p0(e),g===1)A.tag===0?hJ(cZ.bind(null,A)):xf(cZ.bind(null,A)),dJ(function(){!(yA&6)&&NI()}),e=null;else{switch(mf(t)){case 1:e=AB;break;case 4:e=cf;break;case 16:e=jo;break;case 536870912:e=df;break;default:e=jo}e=NS(e,JS.bind(null,A))}A.callbackPriority=g,A.callbackNode=e}}function JS(A,g){if(Xo=-1,Jo=0,yA&6)throw Error(U(327));var e=A.callbackNode;if(JC()&&A.callbackNode!==e)return null;var t=Oo(A,A===Gg?vg:0);if(t===0)return null;if(t&30||t&A.expiredLanes||g)g=ca(A,t);else{g=t;var I=yA;yA|=2;var n=kS();(Gg!==A||vg!==g)&&(Rt=null,EC=lg()+500,bn(A,g));do try{NJ();break}catch(l){FS(A,l)}while(!0);cB(),oa.current=n,yA=I,og!==null?g=0:(Gg=null,vg=0,g=Bg)}if(g!==0){if(g===2&&(I=nu(A),I!==0&&(t=I,g=Fu(A,I))),g===1)throw e=fs,bn(A,0),sI(A,t),te(A,lg()),e;if(g===6)sI(A,t);else{if(I=A.current.alternate,!(t&30)&&!QJ(I)&&(g=ca(A,t),g===2&&(n=nu(A),n!==0&&(t=n,g=Fu(A,n))),g===1))throw e=fs,bn(A,0),sI(A,t),te(A,lg()),e;switch(A.finishedWork=I,A.finishedLanes=t,g){case 0:case 1:throw Error(U(345));case 2:Cn(A,qg,Rt);break;case 3:if(sI(A,t),(t&130023424)===t&&(g=RB+500-lg(),10<g)){if(Oo(A,0)!==0)break;if(I=A.suspendedLanes,(I&t)!==t){Tg(),A.pingedLanes|=A.suspendedLanes&I;break}A.timeoutHandle=cu(Cn.bind(null,A,qg,Rt),g);break}Cn(A,qg,Rt);break;case 4:if(sI(A,t),(t&4194240)===t)break;for(g=A.eventTimes,I=-1;0<t;){var C=31-Oe(t);n=1<<C,C=g[C],C>I&&(I=C),t&=~n}if(t=I,t=lg()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*YJ(t/1960))-t,10<t){A.timeoutHandle=cu(Cn.bind(null,A,qg,Rt),t);break}Cn(A,qg,Rt);break;case 5:Cn(A,qg,Rt);break;default:throw Error(U(329))}}}return te(A,lg()),A.callbackNode===e?JS.bind(null,A):null}function Fu(A,g){var e=Ol;return A.current.memoizedState.isDehydrated&&(bn(A,g).flags|=256),A=ca(A,g),A!==2&&(g=qg,qg=e,g!==null&&ku(g)),A}function ku(A){qg===null?qg=A:qg.push.apply(qg,A)}function QJ(A){for(var g=A;;){if(g.flags&16384){var e=g.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var t=0;t<e.length;t++){var I=e[t],n=I.getSnapshot;I=I.value;try{if(!_e(n(),I))return!1}catch{return!1}}}if(e=g.child,g.subtreeFlags&16384&&e!==null)e.return=g,g=e;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function sI(A,g){for(g&=~WB,g&=~$a,A.suspendedLanes|=g,A.pingedLanes&=~g,A=A.expirationTimes;0<g;){var e=31-Oe(g),t=1<<e;A[e]=-1,g&=~t}}function cZ(A){if(yA&6)throw Error(U(327));JC();var g=Oo(A,0);if(!(g&1))return te(A,lg()),null;var e=ca(A,g);if(A.tag!==0&&e===2){var t=nu(A);t!==0&&(g=t,e=Fu(A,t))}if(e===1)throw e=fs,bn(A,0),sI(A,g),te(A,lg()),e;if(e===6)throw Error(U(345));return A.finishedWork=A.current.alternate,A.finishedLanes=g,Cn(A,qg,Rt),te(A,lg()),null}function vB(A,g){var e=yA;yA|=1;try{return A(g)}finally{yA=e,yA===0&&(EC=lg()+500,Oa&&NI())}}function wn(A){oI!==null&&oI.tag===0&&!(yA&6)&&JC();var g=yA;yA|=1;var e=Ye.transition,t=FA;try{if(Ye.transition=null,FA=1,A)return A()}finally{FA=t,Ye.transition=e,yA=g,!(yA&6)&&NI()}}function wB(){re=GC.current,MA(GC)}function bn(A,g){A.finishedWork=null,A.finishedLanes=0;var e=A.timeoutHandle;if(e!==-1&&(A.timeoutHandle=-1,cJ(e)),og!==null)for(e=og.return;e!==null;){var t=e;switch(oB(t),t.tag){case 1:t=t.type.childContextTypes,t!=null&&Aa();break;case 3:UC(),MA(ge),MA(Kg),bB();break;case 5:hB(t);break;case 4:UC();break;case 13:MA(OA);break;case 19:MA(OA);break;case 10:dB(t.type._context);break;case 22:case 23:wB()}e=e.return}if(Gg=A,og=A=fI(A.current,null),vg=re=g,Bg=0,fs=null,WB=$a=vn=0,qg=Ol=null,dn!==null){for(g=0;g<dn.length;g++)if(e=dn[g],t=e.interleaved,t!==null){e.interleaved=null;var I=t.next,n=e.pending;if(n!==null){var C=n.next;n.next=I,t.next=C}e.pending=t}dn=null}return A}function FS(A,g){do{var e=og;try{if(cB(),Ro.current=ia,sa){for(var t=PA.memoizedState;t!==null;){var I=t.queue;I!==null&&(I.pending=null),t=t.next}sa=!1}if(Rn=0,pg=ug=PA=null,Tl=!1,ps=0,VB.current=null,e===null||e.return===null){Bg=1,fs=g,og=null;break}A:{var n=A,C=e.return,l=e,s=g;if(g=vg,l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var i=s,r=l,c=r.tag;if(!(r.mode&1)&&(c===0||c===11||c===15)){var d=r.alternate;d?(r.updateQueue=d.updateQueue,r.memoizedState=d.memoizedState,r.lanes=d.lanes):(r.updateQueue=null,r.memoizedState=null)}var h=AZ(C);if(h!==null){h.flags&=-257,gZ(h,C,l,n,g),h.mode&1&&$0(n,i,g),g=h,s=i;var Z=g.updateQueue;if(Z===null){var y=new Set;y.add(s),g.updateQueue=y}else Z.add(s);break A}else{if(!(g&1)){$0(n,i,g),XB();break A}s=Error(U(426))}}else if(TA&&l.mode&1){var S=AZ(C);if(S!==null){!(S.flags&65536)&&(S.flags|=256),gZ(S,C,l,n,g),aB(xC(s,l));break A}}n=s=xC(s,l),Bg!==4&&(Bg=2),Ol===null?Ol=[n]:Ol.push(n),n=C;do{switch(n.tag){case 3:n.flags|=65536,g&=-g,n.lanes|=g;var b=mS(n,s,g);T0(n,b);break A;case 1:l=s;var m=n.type,G=n.stateNode;if(!(n.flags&128)&&(typeof m.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(GI===null||!GI.has(G)))){n.flags|=65536,g&=-g,n.lanes|=g;var V=BS(n,l,g);T0(n,V);break A}}n=n.return}while(n!==null)}YS(e)}catch(W){g=W,og===e&&e!==null&&(og=e=e.return);continue}break}while(!0)}function kS(){var A=oa.current;return oa.current=ia,A===null?ia:A}function XB(){(Bg===0||Bg===3||Bg===2)&&(Bg=4),Gg===null||!(vn&268435455)&&!($a&268435455)||sI(Gg,vg)}function ca(A,g){var e=yA;yA|=2;var t=kS();(Gg!==A||vg!==g)&&(Rt=null,bn(A,g));do try{KJ();break}catch(I){FS(A,I)}while(!0);if(cB(),yA=e,oa.current=t,og!==null)throw Error(U(261));return Gg=null,vg=0,Bg}function KJ(){for(;og!==null;)HS(og)}function NJ(){for(;og!==null&&!o2();)HS(og)}function HS(A){var g=KS(A.alternate,A,re);A.memoizedProps=A.pendingProps,g===null?YS(A):og=g,VB.current=null}function YS(A){var g=A;do{var e=g.alternate;if(A=g.return,g.flags&32768){if(e=JJ(e,g),e!==null){e.flags&=32767,og=e;return}if(A!==null)A.flags|=32768,A.subtreeFlags=0,A.deletions=null;else{Bg=6,og=null;return}}else if(e=XJ(e,g,re),e!==null){og=e;return}if(g=g.sibling,g!==null){og=g;return}og=g=A}while(g!==null);Bg===0&&(Bg=5)}function Cn(A,g,e){var t=FA,I=Ye.transition;try{Ye.transition=null,FA=1,UJ(A,g,e,t)}finally{Ye.transition=I,FA=t}return null}function UJ(A,g,e,t){do JC();while(oI!==null);if(yA&6)throw Error(U(327));e=A.finishedWork;var I=A.finishedLanes;if(e===null)return null;if(A.finishedWork=null,A.finishedLanes=0,e===A.current)throw Error(U(177));A.callbackNode=null,A.callbackPriority=0;var n=e.lanes|e.childLanes;if(Z2(A,n),A===Gg&&(og=Gg=null,vg=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Xi||(Xi=!0,NS(jo,function(){return JC(),null})),n=(e.flags&15990)!==0,e.subtreeFlags&15990||n){n=Ye.transition,Ye.transition=null;var C=FA;FA=1;var l=yA;yA|=4,VB.current=null,kJ(A,e),wS(e,A),CJ(au),Po=!!ou,au=ou=null,A.current=e,HJ(e),a2(),yA=l,FA=C,Ye.transition=n}else A.current=e;if(Xi&&(Xi=!1,oI=A,ra=I),n=A.pendingLanes,n===0&&(GI=null),d2(e.stateNode),te(A,lg()),g!==null)for(t=A.onRecoverableError,e=0;e<g.length;e++)I=g[e],t(I.value,{componentStack:I.stack,digest:I.digest});if(aa)throw aa=!1,A=Xu,Xu=null,A;return ra&1&&A.tag!==0&&JC(),n=A.pendingLanes,n&1?A===Ju?Pl++:(Pl=0,Ju=A):Pl=0,NI(),null}function JC(){if(oI!==null){var A=mf(ra),g=Ye.transition,e=FA;try{if(Ye.transition=null,FA=16>A?16:A,oI===null)var t=!1;else{if(A=oI,oI=null,ra=0,yA&6)throw Error(U(331));var I=yA;for(yA|=4,T=A.current;T!==null;){var n=T,C=n.child;if(T.flags&16){var l=n.deletions;if(l!==null){for(var s=0;s<l.length;s++){var i=l[s];for(T=i;T!==null;){var r=T;switch(r.tag){case 0:case 11:case 15:jl(8,r,n)}var c=r.child;if(c!==null)c.return=r,T=c;else for(;T!==null;){r=T;var d=r.sibling,h=r.return;if(WS(r),r===i){T=null;break}if(d!==null){d.return=h,T=d;break}T=h}}}var Z=n.alternate;if(Z!==null){var y=Z.child;if(y!==null){Z.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}T=n}}if(n.subtreeFlags&2064&&C!==null)C.return=n,T=C;else A:for(;T!==null;){if(n=T,n.flags&2048)switch(n.tag){case 0:case 11:case 15:jl(9,n,n.return)}var b=n.sibling;if(b!==null){b.return=n.return,T=b;break A}T=n.return}}var m=A.current;for(T=m;T!==null;){C=T;var G=C.child;if(C.subtreeFlags&2064&&G!==null)G.return=C,T=G;else A:for(C=m;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qa(9,l)}}catch(W){Ag(l,l.return,W)}if(l===C){T=null;break A}var V=l.sibling;if(V!==null){V.return=l.return,T=V;break A}T=l.return}}if(yA=I,NI(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Ma,A)}catch{}t=!0}return t}finally{FA=e,Ye.transition=g}}return!1}function dZ(A,g,e){g=xC(e,g),g=mS(A,g,1),A=pI(A,g,1),g=Tg(),A!==null&&(Ns(A,1,g),te(A,g))}function Ag(A,g,e){if(A.tag===3)dZ(A,A,e);else for(;g!==null;){if(g.tag===3){dZ(g,A,e);break}else if(g.tag===1){var t=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof t.componentDidCatch=="function"&&(GI===null||!GI.has(t))){A=xC(e,A),A=BS(g,A,1),g=pI(g,A,1),A=Tg(),g!==null&&(Ns(g,1,A),te(g,A));break}}g=g.return}}function xJ(A,g,e){var t=A.pingCache;t!==null&&t.delete(g),g=Tg(),A.pingedLanes|=A.suspendedLanes&e,Gg===A&&(vg&e)===e&&(Bg===4||Bg===3&&(vg&130023424)===vg&&500>lg()-RB?bn(A,0):WB|=e),te(A,g)}function QS(A,g){g===0&&(A.mode&1?(g=pi,pi<<=1,!(pi&130023424)&&(pi=4194304)):g=1);var e=Tg();A=Nt(A,g),A!==null&&(Ns(A,g,e),te(A,e))}function EJ(A){var g=A.memoizedState,e=0;g!==null&&(e=g.retryLane),QS(A,e)}function LJ(A,g){var e=0;switch(A.tag){case 13:var t=A.stateNode,I=A.memoizedState;I!==null&&(e=I.retryLane);break;case 19:t=A.stateNode;break;default:throw Error(U(314))}t!==null&&t.delete(g),QS(A,e)}var KS;KS=function(A,g,e){if(A!==null)if(A.memoizedProps!==g.pendingProps||ge.current)Ae=!0;else{if(!(A.lanes&e)&&!(g.flags&128))return Ae=!1,wJ(A,g,e);Ae=!!(A.flags&131072)}else Ae=!1,TA&&g.flags&1048576&&Ef(g,ta,g.index);switch(g.lanes=0,g.tag){case 2:var t=g.type;wo(A,g),A=g.pendingProps;var I=QC(g,Kg.current);XC(g,e),I=pB(null,g,t,A,I,e);var n=GB();return g.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ee(t)?(n=!0,ga(g)):n=!1,g.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,mB(g),I.updater=_a,g.stateNode=I,I._reactInternals=g,Zu(g,t,A,e),g=yu(null,g,t,!0,n,e)):(g.tag=0,TA&&n&&iB(g),zg(null,g,I,e),g=g.child),g;case 16:t=g.elementType;A:{switch(wo(A,g),A=g.pendingProps,I=t._init,t=I(t._payload),g.type=t,I=g.tag=DJ(t),A=ze(t,A),I){case 0:g=Gu(null,g,t,A,e);break A;case 1:g=IZ(null,g,t,A,e);break A;case 11:g=eZ(null,g,t,A,e);break A;case 14:g=tZ(null,g,t,ze(t.type,A),e);break A}throw Error(U(306,t,""))}return g;case 0:return t=g.type,I=g.pendingProps,I=g.elementType===t?I:ze(t,I),Gu(A,g,t,I,e);case 1:return t=g.type,I=g.pendingProps,I=g.elementType===t?I:ze(t,I),IZ(A,g,t,I,e);case 3:A:{if(pS(g),A===null)throw Error(U(387));t=g.pendingProps,n=g.memoizedState,I=n.element,jf(A,g),Ca(g,t,null,e);var C=g.memoizedState;if(t=C.element,n.isDehydrated)if(n={element:t,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},g.updateQueue.baseState=n,g.memoizedState=n,g.flags&256){I=xC(Error(U(423)),g),g=nZ(A,g,t,e,I);break A}else if(t!==I){I=xC(Error(U(424)),g),g=nZ(A,g,t,e,I);break A}else for(ce=ZI(g.stateNode.containerInfo.firstChild),de=g,TA=!0,je=null,e=zf(g,null,t,e),g.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(KC(),t===I){g=Ut(A,g,e);break A}zg(A,g,t,e)}g=g.child}return g;case 5:return Of(g),A===null&&Bu(g),t=g.type,I=g.pendingProps,n=A!==null?A.memoizedProps:null,C=I.children,ru(t,I)?C=null:n!==null&&ru(t,n)&&(g.flags|=32),ZS(A,g),zg(A,g,C,e),g.child;case 6:return A===null&&Bu(g),null;case 13:return GS(A,g,e);case 4:return BB(g,g.stateNode.containerInfo),t=g.pendingProps,A===null?g.child=NC(g,null,t,e):zg(A,g,t,e),g.child;case 11:return t=g.type,I=g.pendingProps,I=g.elementType===t?I:ze(t,I),eZ(A,g,t,I,e);case 7:return zg(A,g,g.pendingProps,e),g.child;case 8:return zg(A,g,g.pendingProps.children,e),g.child;case 12:return zg(A,g,g.pendingProps.children,e),g.child;case 10:A:{if(t=g.type._context,I=g.pendingProps,n=g.memoizedProps,C=I.value,EA(Ia,t._currentValue),t._currentValue=C,n!==null)if(_e(n.value,C)){if(n.children===I.children&&!ge.current){g=Ut(A,g,e);break A}}else for(n=g.child,n!==null&&(n.return=g);n!==null;){var l=n.dependencies;if(l!==null){C=n.child;for(var s=l.firstContext;s!==null;){if(s.context===t){if(n.tag===1){s=kt(-1,e&-e),s.tag=2;var i=n.updateQueue;if(i!==null){i=i.shared;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}}n.lanes|=e,s=n.alternate,s!==null&&(s.lanes|=e),hu(n.return,e,g),l.lanes|=e;break}s=s.next}}else if(n.tag===10)C=n.type===g.type?null:n.child;else if(n.tag===18){if(C=n.return,C===null)throw Error(U(341));C.lanes|=e,l=C.alternate,l!==null&&(l.lanes|=e),hu(C,e,g),C=n.sibling}else C=n.child;if(C!==null)C.return=n;else for(C=n;C!==null;){if(C===g){C=null;break}if(n=C.sibling,n!==null){n.return=C.return,C=n;break}C=C.return}n=C}zg(A,g,I.children,e),g=g.child}return g;case 9:return I=g.type,t=g.pendingProps.children,XC(g,e),I=Qe(I),t=t(I),g.flags|=1,zg(A,g,t,e),g.child;case 14:return t=g.type,I=ze(t,g.pendingProps),I=ze(t.type,I),tZ(A,g,t,I,e);case 15:return hS(A,g,g.type,g.pendingProps,e);case 17:return t=g.type,I=g.pendingProps,I=g.elementType===t?I:ze(t,I),wo(A,g),g.tag=1,ee(t)?(A=!0,ga(g)):A=!1,XC(g,e),uS(g,t,I),Zu(g,t,I,e),yu(null,g,t,!0,A,e);case 19:return yS(A,g,e);case 22:return bS(A,g,e)}throw Error(U(156,g.tag))};function NS(A,g){return rf(A,g)}function MJ(A,g,e,t){this.tag=A,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(A,g,e,t){return new MJ(A,g,e,t)}function JB(A){return A=A.prototype,!(!A||!A.isReactComponent)}function DJ(A){if(typeof A=="function")return JB(A)?1:0;if(A!=null){if(A=A.$$typeof,A===_m)return 11;if(A===qm)return 14}return 2}function fI(A,g){var e=A.alternate;return e===null?(e=Fe(A.tag,g,A.key,A.mode),e.elementType=A.elementType,e.type=A.type,e.stateNode=A.stateNode,e.alternate=A,A.alternate=e):(e.pendingProps=g,e.type=A.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=A.flags&14680064,e.childLanes=A.childLanes,e.lanes=A.lanes,e.child=A.child,e.memoizedProps=A.memoizedProps,e.memoizedState=A.memoizedState,e.updateQueue=A.updateQueue,g=A.dependencies,e.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},e.sibling=A.sibling,e.index=A.index,e.ref=A.ref,e}function Fo(A,g,e,t,I,n){var C=2;if(t=A,typeof A=="function")JB(A)&&(C=1);else if(typeof A=="string")C=5;else A:switch(A){case rC:return Zn(e.children,I,n,g);case Pm:C=8,I|=8;break;case Md:return A=Fe(12,e,g,I|2),A.elementType=Md,A.lanes=n,A;case Dd:return A=Fe(13,e,g,I),A.elementType=Dd,A.lanes=n,A;case zd:return A=Fe(19,e,g,I),A.elementType=zd,A.lanes=n,A;case jy:return Ar(e,I,n,g);default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case zy:C=10;break A;case Ty:C=9;break A;case _m:C=11;break A;case qm:C=14;break A;case tI:C=16,t=null;break A}throw Error(U(130,A==null?A:typeof A,""))}return g=Fe(C,e,g,I),g.elementType=A,g.type=t,g.lanes=n,g}function Zn(A,g,e,t){return A=Fe(7,A,t,g),A.lanes=e,A}function Ar(A,g,e,t){return A=Fe(22,A,t,g),A.elementType=jy,A.lanes=e,A.stateNode={isHidden:!1},A}function Oc(A,g,e){return A=Fe(6,A,null,g),A.lanes=e,A}function Pc(A,g,e){return g=Fe(4,A.children!==null?A.children:[],A.key,g),g.lanes=e,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}function zJ(A,g,e,t,I){this.tag=g,this.containerInfo=A,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=t,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function FB(A,g,e,t,I,n,C,l,s){return A=new zJ(A,g,e,l,s),g===1?(g=1,n===!0&&(g|=8)):g=0,n=Fe(3,null,null,g),A.current=n,n.stateNode=A,n.memoizedState={element:t,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},mB(n),A}function TJ(A,g,e){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aC,key:t==null?null:""+t,children:A,containerInfo:g,implementation:e}}function US(A){if(!A)return XI;A=A._reactInternals;A:{if(Hn(A)!==A||A.tag!==1)throw Error(U(170));var g=A;do{switch(g.tag){case 3:g=g.stateNode.context;break A;case 1:if(ee(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break A}}g=g.return}while(g!==null);throw Error(U(171))}if(A.tag===1){var e=A.type;if(ee(e))return Uf(A,e,g)}return g}function xS(A,g,e,t,I,n,C,l,s){return A=FB(e,t,!0,A,I,n,C,l,s),A.context=US(null),e=A.current,t=Tg(),I=yI(e),n=kt(t,I),n.callback=g??null,pI(e,n,I),A.current.lanes=I,Ns(A,I,t),te(A,t),A}function gr(A,g,e,t){var I=g.current,n=Tg(),C=yI(I);return e=US(e),g.context===null?g.context=e:g.pendingContext=e,g=kt(n,C),g.payload={element:A},t=t===void 0?null:t,t!==null&&(g.callback=t),A=pI(I,g,C),A!==null&&(Pe(A,I,C,n),Wo(A,I,C)),C}function da(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 5:return A.child.stateNode;default:return A.child.stateNode}}function uZ(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var e=A.retryLane;A.retryLane=e!==0&&e<g?e:g}}function kB(A,g){uZ(A,g),(A=A.alternate)&&uZ(A,g)}function jJ(){return null}var ES=typeof reportError=="function"?reportError:function(A){console.error(A)};function HB(A){this._internalRoot=A}er.prototype.render=HB.prototype.render=function(A){var g=this._internalRoot;if(g===null)throw Error(U(409));gr(A,g,null,null)};er.prototype.unmount=HB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var g=A.containerInfo;wn(function(){gr(null,A,null,null)}),g[Kt]=null}};function er(A){this._internalRoot=A}er.prototype.unstable_scheduleHydration=function(A){if(A){var g=bf();A={blockedOn:null,target:A,priority:g};for(var e=0;e<lI.length&&g!==0&&g<lI[e].priority;e++);lI.splice(e,0,A),e===0&&pf(A)}};function YB(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function tr(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11&&(A.nodeType!==8||A.nodeValue!==" react-mount-point-unstable "))}function mZ(){}function OJ(A,g,e,t,I){if(I){if(typeof t=="function"){var n=t;t=function(){var i=da(C);n.call(i)}}var C=xS(g,t,A,0,null,!1,!1,"",mZ);return A._reactRootContainer=C,A[Kt]=C.current,ms(A.nodeType===8?A.parentNode:A),wn(),C}for(;I=A.lastChild;)A.removeChild(I);if(typeof t=="function"){var l=t;t=function(){var i=da(s);l.call(i)}}var s=FB(A,0,!1,null,null,!1,!1,"",mZ);return A._reactRootContainer=s,A[Kt]=s.current,ms(A.nodeType===8?A.parentNode:A),wn(function(){gr(g,s,e,t)}),s}function Ir(A,g,e,t,I){var n=e._reactRootContainer;if(n){var C=n;if(typeof I=="function"){var l=I;I=function(){var s=da(C);l.call(s)}}gr(g,C,A,I)}else C=OJ(e,g,A,I,t);return da(C)}Bf=function(A){switch(A.tag){case 3:var g=A.stateNode;if(g.current.memoizedState.isDehydrated){var e=vl(g.pendingLanes);e!==0&&(gB(g,e|1),te(g,lg()),!(yA&6)&&(EC=lg()+500,NI()))}break;case 13:wn(function(){var t=Nt(A,1);if(t!==null){var I=Tg();Pe(t,A,1,I)}}),kB(A,1)}};eB=function(A){if(A.tag===13){var g=Nt(A,134217728);if(g!==null){var e=Tg();Pe(g,A,134217728,e)}kB(A,134217728)}};hf=function(A){if(A.tag===13){var g=yI(A),e=Nt(A,g);if(e!==null){var t=Tg();Pe(e,A,g,t)}kB(A,g)}};bf=function(){return FA};Zf=function(A,g){var e=FA;try{return FA=A,g()}finally{FA=e}};eu=function(A,g,e){switch(g){case"input":if(Od(A,e),g=e.name,e.type==="radio"&&g!=null){for(e=A;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<e.length;g++){var t=e[g];if(t!==A&&t.form===A.form){var I=ja(t);if(!I)throw Error(U(90));Py(t),Od(t,I)}}}break;case"textarea":qy(A,e);break;case"select":g=e.value,g!=null&&WC(A,!!e.multiple,g,!1)}};nf=vB;Cf=wn;var PJ={usingClientEntryPoint:!1,Events:[xs,mC,ja,tf,If,vB]},Bl={findFiberByHostInstance:cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_J={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(A){return A=of(A),A===null?null:A.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||jJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{Ma=Ji.inject(_J),ut=Ji}catch{}}Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PJ;Be.createPortal=function(A,g){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YB(g))throw Error(U(200));return TJ(A,g,null,e)};Be.createRoot=function(A,g){if(!YB(A))throw Error(U(299));var e=!1,t="",I=ES;return g!=null&&(g.unstable_strictMode===!0&&(e=!0),g.identifierPrefix!==void 0&&(t=g.identifierPrefix),g.onRecoverableError!==void 0&&(I=g.onRecoverableError)),g=FB(A,1,!1,null,null,e,!1,t,I),A[Kt]=g.current,ms(A.nodeType===8?A.parentNode:A),new HB(g)};Be.findDOMNode=function(A){if(A==null)return null;if(A.nodeType===1)return A;var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(U(188)):(A=Object.keys(A).join(","),Error(U(268,A)));return A=of(g),A=A===null?null:A.stateNode,A};Be.flushSync=function(A){return wn(A)};Be.hydrate=function(A,g,e){if(!tr(g))throw Error(U(200));return Ir(null,A,g,!0,e)};Be.hydrateRoot=function(A,g,e){if(!YB(A))throw Error(U(405));var t=e!=null&&e.hydratedSources||null,I=!1,n="",C=ES;if(e!=null&&(e.unstable_strictMode===!0&&(I=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(C=e.onRecoverableError)),g=xS(g,null,A,1,e??null,I,!1,n,C),A[Kt]=g.current,ms(A),t)for(A=0;A<t.length;A++)e=t[A],I=e._getVersion,I=I(e._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[e,I]:g.mutableSourceEagerHydrationData.push(e,I);return new er(g)};Be.render=function(A,g,e){if(!tr(g))throw Error(U(200));return Ir(null,A,g,!1,e)};Be.unmountComponentAtNode=function(A){if(!tr(A))throw Error(U(40));return A._reactRootContainer?(wn(function(){Ir(null,null,A,!1,function(){A._reactRootContainer=null,A[Kt]=null})}),!0):!1};Be.unstable_batchedUpdates=vB;Be.unstable_renderSubtreeIntoContainer=function(A,g,e,t){if(!tr(e))throw Error(U(200));if(A==null||A._reactInternals===void 0)throw Error(U(38));return Ir(A,g,e,!1,t)};Be.version="18.3.1-next-f1338f8080-20240426";function LS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LS)}catch(A){console.error(A)}}LS(),Ey.exports=Be;var MS=Ey.exports;const yC=Ea(MS);var DS,BZ=MS;DS=BZ.createRoot,BZ.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ss(){return Ss=Object.assign?Object.assign.bind():function(A){for(var g=1;g<arguments.length;g++){var e=arguments[g];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])}return A},Ss.apply(this,arguments)}var aI;(function(A){A.Pop="POP",A.Push="PUSH",A.Replace="REPLACE"})(aI||(aI={}));const hZ="popstate";function qJ(A){A===void 0&&(A={});function g(I,n){let{pathname:C="/",search:l="",hash:s=""}=Yn(I.location.hash.substr(1));return!C.startsWith("/")&&!C.startsWith(".")&&(C="/"+C),Hu("",{pathname:C,search:l,hash:s},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function e(I,n){let C=I.document.querySelector("base"),l="";if(C&&C.getAttribute("href")){let s=I.location.href,i=s.indexOf("#");l=i===-1?s:s.slice(0,i)}return l+"#"+(typeof n=="string"?n:ua(n))}function t(I,n){QB(I.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(n)+")")}return AF(g,e,t,A)}function sg(A,g){if(A===!1||A===null||typeof A>"u")throw new Error(g)}function QB(A,g){if(!A){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function $J(){return Math.random().toString(36).substr(2,8)}function bZ(A,g){return{usr:A.state,key:A.key,idx:g}}function Hu(A,g,e,t){return e===void 0&&(e=null),Ss({pathname:typeof A=="string"?A:A.pathname,search:"",hash:""},typeof g=="string"?Yn(g):g,{state:e,key:g&&g.key||t||$J()})}function ua(A){let{pathname:g="/",search:e="",hash:t=""}=A;return e&&e!=="?"&&(g+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(g+=t.charAt(0)==="#"?t:"#"+t),g}function Yn(A){let g={};if(A){let e=A.indexOf("#");e>=0&&(g.hash=A.substr(e),A=A.substr(0,e));let t=A.indexOf("?");t>=0&&(g.search=A.substr(t),A=A.substr(0,t)),A&&(g.pathname=A)}return g}function AF(A,g,e,t){t===void 0&&(t={});let{window:I=document.defaultView,v5Compat:n=!1}=t,C=I.history,l=aI.Pop,s=null,i=r();i==null&&(i=0,C.replaceState(Ss({},C.state,{idx:i}),""));function r(){return(C.state||{idx:null}).idx}function c(){l=aI.Pop;let S=r(),b=S==null?null:S-i;i=S,s&&s({action:l,location:y.location,delta:b})}function d(S,b){l=aI.Push;let m=Hu(y.location,S,b);e&&e(m,S),i=r()+1;let G=bZ(m,i),V=y.createHref(m);try{C.pushState(G,"",V)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;I.location.assign(V)}n&&s&&s({action:l,location:y.location,delta:1})}function h(S,b){l=aI.Replace;let m=Hu(y.location,S,b);e&&e(m,S),i=r();let G=bZ(m,i),V=y.createHref(m);C.replaceState(G,"",V),n&&s&&s({action:l,location:y.location,delta:0})}function Z(S){let b=I.location.origin!=="null"?I.location.origin:I.location.href,m=typeof S=="string"?S:ua(S);return m=m.replace(/ $/,"%20"),sg(b,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,b)}let y={get action(){return l},get location(){return A(I,C)},listen(S){if(s)throw new Error("A history only accepts one active listener");return I.addEventListener(hZ,c),s=S,()=>{I.removeEventListener(hZ,c),s=null}},createHref(S){return g(I,S)},createURL:Z,encodeLocation(S){let b=Z(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:h,go(S){return C.go(S)}};return y}var ZZ;(function(A){A.data="data",A.deferred="deferred",A.redirect="redirect",A.error="error"})(ZZ||(ZZ={}));function gF(A,g,e){return e===void 0&&(e="/"),eF(A,g,e,!1)}function eF(A,g,e,t){let I=typeof g=="string"?Yn(g):g,n=KB(I.pathname||"/",e);if(n==null)return null;let C=zS(A);tF(C);let l=null;for(let s=0;l==null&&s<C.length;++s){let i=dF(n);l=rF(C[s],i,t)}return l}function zS(A,g,e,t){g===void 0&&(g=[]),e===void 0&&(e=[]),t===void 0&&(t="");let I=(n,C,l)=>{let s={relativePath:l===void 0?n.path||"":l,caseSensitive:n.caseSensitive===!0,childrenIndex:C,route:n};s.relativePath.startsWith("/")&&(sg(s.relativePath.startsWith(t),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(t.length));let i=SI([t,s.relativePath]),r=e.concat(s);n.children&&n.children.length>0&&(sg(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+i+'".')),zS(n.children,g,r,i)),!(n.path==null&&!n.index)&&g.push({path:i,score:oF(i,n.index),routesMeta:r})};return A.forEach((n,C)=>{var l;if(n.path===""||!((l=n.path)!=null&&l.includes("?")))I(n,C);else for(let s of TS(n.path))I(n,C,s)}),g}function TS(A){let g=A.split("/");if(g.length===0)return[];let[e,...t]=g,I=e.endsWith("?"),n=e.replace(/\?$/,"");if(t.length===0)return I?[n,""]:[n];let C=TS(t.join("/")),l=[];return l.push(...C.map(s=>s===""?n:[n,s].join("/"))),I&&l.push(...C),l.map(s=>A.startsWith("/")&&s===""?"/":s)}function tF(A){A.sort((g,e)=>g.score!==e.score?e.score-g.score:aF(g.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}const IF=/^:[\w-]+$/,nF=3,CF=2,lF=1,sF=10,iF=-2,pZ=A=>A==="*";function oF(A,g){let e=A.split("/"),t=e.length;return e.some(pZ)&&(t+=iF),g&&(t+=CF),e.filter(I=>!pZ(I)).reduce((I,n)=>I+(IF.test(n)?nF:n===""?lF:sF),t)}function aF(A,g){return A.length===g.length&&A.slice(0,-1).every((t,I)=>t===g[I])?A[A.length-1]-g[g.length-1]:0}function rF(A,g,e){let{routesMeta:t}=A,I={},n="/",C=[];for(let l=0;l<t.length;++l){let s=t[l],i=l===t.length-1,r=n==="/"?g:g.slice(n.length)||"/",c=GZ({path:s.relativePath,caseSensitive:s.caseSensitive,end:i},r),d=s.route;if(!c&&i&&e&&!t[t.length-1].route.index&&(c=GZ({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},r)),!c)return null;Object.assign(I,c.params),C.push({params:I,pathname:SI([n,c.pathname]),pathnameBase:hF(SI([n,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(n=SI([n,c.pathnameBase]))}return C}function GZ(A,g){typeof A=="string"&&(A={path:A,caseSensitive:!1,end:!0});let[e,t]=cF(A.path,A.caseSensitive,A.end),I=g.match(e);if(!I)return null;let n=I[0],C=n.replace(/(.)\/+$/,"$1"),l=I.slice(1);return{params:t.reduce((i,r,c)=>{let{paramName:d,isOptional:h}=r;if(d==="*"){let y=l[c]||"";C=n.slice(0,n.length-y.length).replace(/(.)\/+$/,"$1")}const Z=l[c];return h&&!Z?i[d]=void 0:i[d]=(Z||"").replace(/%2F/g,"/"),i},{}),pathname:n,pathnameBase:C,pattern:A}}function cF(A,g,e){g===void 0&&(g=!1),e===void 0&&(e=!0),QB(A==="*"||!A.endsWith("*")||A.endsWith("/*"),'Route path "'+A+'" will be treated as if it were '+('"'+A.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+A.replace(/\*$/,"/*")+'".'));let t=[],I="^"+A.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,l,s)=>(t.push({paramName:l,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return A.endsWith("*")?(t.push({paramName:"*"}),I+=A==="*"||A==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?I+="\\/*$":A!==""&&A!=="/"&&(I+="(?:(?=\\/|$))"),[new RegExp(I,g?void 0:"i"),t]}function dF(A){try{return A.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return QB(!1,'The URL path "'+A+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),A}}function KB(A,g){if(g==="/")return A;if(!A.toLowerCase().startsWith(g.toLowerCase()))return null;let e=g.endsWith("/")?g.length-1:g.length,t=A.charAt(e);return t&&t!=="/"?null:A.slice(e)||"/"}function uF(A,g){g===void 0&&(g="/");let{pathname:e,search:t="",hash:I=""}=typeof A=="string"?Yn(A):A;return{pathname:e?e.startsWith("/")?e:mF(e,g):g,search:bF(t),hash:ZF(I)}}function mF(A,g){let e=g.replace(/\/+$/,"").split("/");return A.split("/").forEach(I=>{I===".."?e.length>1&&e.pop():I!=="."&&e.push(I)}),e.length>1?e.join("/"):"/"}function _c(A,g,e,t){return"Cannot include a '"+A+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BF(A){return A.filter((g,e)=>e===0||g.route.path&&g.route.path.length>0)}function NB(A,g){let e=BF(A);return g?e.map((t,I)=>I===e.length-1?t.pathname:t.pathnameBase):e.map(t=>t.pathnameBase)}function UB(A,g,e,t){t===void 0&&(t=!1);let I;typeof A=="string"?I=Yn(A):(I=Ss({},A),sg(!I.pathname||!I.pathname.includes("?"),_c("?","pathname","search",I)),sg(!I.pathname||!I.pathname.includes("#"),_c("#","pathname","hash",I)),sg(!I.search||!I.search.includes("#"),_c("#","search","hash",I)));let n=A===""||I.pathname==="",C=n?"/":I.pathname,l;if(C==null)l=e;else{let c=g.length-1;if(!t&&C.startsWith("..")){let d=C.split("/");for(;d[0]==="..";)d.shift(),c-=1;I.pathname=d.join("/")}l=c>=0?g[c]:"/"}let s=uF(I,l),i=C&&C!=="/"&&C.endsWith("/"),r=(n||C===".")&&e.endsWith("/");return!s.pathname.endsWith("/")&&(i||r)&&(s.pathname+="/"),s}const SI=A=>A.join("/").replace(/\/\/+/g,"/"),hF=A=>A.replace(/\/+$/,"").replace(/^\/*/,"/"),bF=A=>!A||A==="?"?"":A.startsWith("?")?A:"?"+A,ZF=A=>!A||A==="#"?"":A.startsWith("#")?A:"#"+A;function pF(A){return A!=null&&typeof A.status=="number"&&typeof A.statusText=="string"&&typeof A.internal=="boolean"&&"data"in A}const jS=["post","put","patch","delete"];new Set(jS);const GF=["get",...jS];new Set(GF);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vs(){return Vs=Object.assign?Object.assign.bind():function(A){for(var g=1;g<arguments.length;g++){var e=arguments[g];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])}return A},Vs.apply(this,arguments)}const xB=f.createContext(null),yF=f.createContext(null),UI=f.createContext(null),nr=f.createContext(null),xI=f.createContext({outlet:null,matches:[],isDataRoute:!1}),OS=f.createContext(null);function fF(A,g){let{relative:e}=g===void 0?{}:g;PC()||sg(!1);let{basename:t,navigator:I}=f.useContext(UI),{hash:n,pathname:C,search:l}=_S(A,{relative:e}),s=C;return t!=="/"&&(s=C==="/"?t:SI([t,C])),I.createHref({pathname:s,search:l,hash:n})}function PC(){return f.useContext(nr)!=null}function hg(){return PC()||sg(!1),f.useContext(nr).location}function PS(A){f.useContext(UI).static||f.useLayoutEffect(A)}function Ug(){let{isDataRoute:A}=f.useContext(xI);return A?QF():SF()}function SF(){PC()||sg(!1);let A=f.useContext(xB),{basename:g,future:e,navigator:t}=f.useContext(UI),{matches:I}=f.useContext(xI),{pathname:n}=hg(),C=JSON.stringify(NB(I,e.v7_relativeSplatPath)),l=f.useRef(!1);return PS(()=>{l.current=!0}),f.useCallback(function(i,r){if(r===void 0&&(r={}),!l.current)return;if(typeof i=="number"){t.go(i);return}let c=UB(i,JSON.parse(C),n,r.relative==="path");A==null&&g!=="/"&&(c.pathname=c.pathname==="/"?g:SI([g,c.pathname])),(r.replace?t.replace:t.push)(c,r.state,r)},[g,t,C,n,A])}function _S(A,g){let{relative:e}=g===void 0?{}:g,{future:t}=f.useContext(UI),{matches:I}=f.useContext(xI),{pathname:n}=hg(),C=JSON.stringify(NB(I,t.v7_relativeSplatPath));return f.useMemo(()=>UB(A,JSON.parse(C),n,e==="path"),[A,C,n,e])}function VF(A,g){return WF(A,g)}function WF(A,g,e,t){PC()||sg(!1);let{navigator:I}=f.useContext(UI),{matches:n}=f.useContext(xI),C=n[n.length-1],l=C?C.params:{};C&&C.pathname;let s=C?C.pathnameBase:"/";C&&C.route;let i=hg(),r;if(g){var c;let S=typeof g=="string"?Yn(g):g;s==="/"||(c=S.pathname)!=null&&c.startsWith(s)||sg(!1),r=S}else r=i;let d=r.pathname||"/",h=d;if(s!=="/"){let S=s.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(S.length).join("/")}let Z=gF(A,{pathname:h}),y=JF(Z&&Z.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:SI([s,I.encodeLocation?I.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?s:SI([s,I.encodeLocation?I.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),n,e,t);return g&&y?f.createElement(nr.Provider,{value:{location:Vs({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:aI.Pop}},y):y}function RF(){let A=YF(),g=pF(A)?A.status+" "+A.statusText:A instanceof Error?A.message:JSON.stringify(A),e=A instanceof Error?A.stack:null,I={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},g),e?f.createElement("pre",{style:I},e):null,null)}const vF=f.createElement(RF,null);class wF extends f.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,e){return e.location!==g.location||e.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:e.error,location:e.location,revalidation:g.revalidation||e.revalidation}}componentDidCatch(g,e){console.error("React Router caught the following error during render",g,e)}render(){return this.state.error!==void 0?f.createElement(xI.Provider,{value:this.props.routeContext},f.createElement(OS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XF(A){let{routeContext:g,match:e,children:t}=A,I=f.useContext(xB);return I&&I.static&&I.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(I.staticContext._deepestRenderedBoundaryId=e.route.id),f.createElement(xI.Provider,{value:g},t)}function JF(A,g,e,t){var I;if(g===void 0&&(g=[]),e===void 0&&(e=null),t===void 0&&(t=null),A==null){var n;if(!e)return null;if(e.errors)A=e.matches;else if((n=t)!=null&&n.v7_partialHydration&&g.length===0&&!e.initialized&&e.matches.length>0)A=e.matches;else return null}let C=A,l=(I=e)==null?void 0:I.errors;if(l!=null){let r=C.findIndex(c=>c.route.id&&(l==null?void 0:l[c.route.id])!==void 0);r>=0||sg(!1),C=C.slice(0,Math.min(C.length,r+1))}let s=!1,i=-1;if(e&&t&&t.v7_partialHydration)for(let r=0;r<C.length;r++){let c=C[r];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(i=r),c.route.id){let{loaderData:d,errors:h}=e,Z=c.route.loader&&d[c.route.id]===void 0&&(!h||h[c.route.id]===void 0);if(c.route.lazy||Z){s=!0,i>=0?C=C.slice(0,i+1):C=[C[0]];break}}}return C.reduceRight((r,c,d)=>{let h,Z=!1,y=null,S=null;e&&(h=l&&c.route.id?l[c.route.id]:void 0,y=c.route.errorElement||vF,s&&(i<0&&d===0?(Z=!0,S=null):i===d&&(Z=!0,S=c.route.hydrateFallbackElement||null)));let b=g.concat(C.slice(0,d+1)),m=()=>{let G;return h?G=y:Z?G=S:c.route.Component?G=f.createElement(c.route.Component,null):c.route.element?G=c.route.element:G=r,f.createElement(XF,{match:c,routeContext:{outlet:r,matches:b,isDataRoute:e!=null},children:G})};return e&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?f.createElement(wF,{location:e.location,revalidation:e.revalidation,component:y,error:h,children:m(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):m()},null)}var qS=function(A){return A.UseBlocker="useBlocker",A.UseRevalidator="useRevalidator",A.UseNavigateStable="useNavigate",A}(qS||{}),ma=function(A){return A.UseBlocker="useBlocker",A.UseLoaderData="useLoaderData",A.UseActionData="useActionData",A.UseRouteError="useRouteError",A.UseNavigation="useNavigation",A.UseRouteLoaderData="useRouteLoaderData",A.UseMatches="useMatches",A.UseRevalidator="useRevalidator",A.UseNavigateStable="useNavigate",A.UseRouteId="useRouteId",A}(ma||{});function FF(A){let g=f.useContext(xB);return g||sg(!1),g}function kF(A){let g=f.useContext(yF);return g||sg(!1),g}function HF(A){let g=f.useContext(xI);return g||sg(!1),g}function $S(A){let g=HF(),e=g.matches[g.matches.length-1];return e.route.id||sg(!1),e.route.id}function YF(){var A;let g=f.useContext(OS),e=kF(ma.UseRouteError),t=$S(ma.UseRouteError);return g!==void 0?g:(A=e.errors)==null?void 0:A[t]}function QF(){let{router:A}=FF(qS.UseNavigateStable),g=$S(ma.UseNavigateStable),e=f.useRef(!1);return PS(()=>{e.current=!0}),f.useCallback(function(I,n){n===void 0&&(n={}),e.current&&(typeof I=="number"?A.navigate(I):A.navigate(I,Vs({fromRouteId:g},n)))},[A,g])}const yZ={};function KF(A,g){yZ[g]||(yZ[g]=!0,console.warn(g))}const fZ=(A,g,e)=>KF(A,"⚠️ React Router Future Flag Warning: "+g+". "+("You can use the `"+A+"` future flag to opt-in early. ")+("For more information, see "+e+"."));function NF(A,g){A!=null&&A.v7_startTransition||fZ("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(A!=null&&A.v7_relativeSplatPath)&&!g&&fZ("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Fi(A){let{to:g,replace:e,state:t,relative:I}=A;PC()||sg(!1);let{future:n,static:C}=f.useContext(UI),{matches:l}=f.useContext(xI),{pathname:s}=hg(),i=Ug(),r=UB(g,NB(l,n.v7_relativeSplatPath),s,I==="path"),c=JSON.stringify(r);return f.useEffect(()=>i(JSON.parse(c),{replace:e,state:t,relative:I}),[i,c,I,e,t]),null}function $A(A){sg(!1)}function UF(A){let{basename:g="/",children:e=null,location:t,navigationType:I=aI.Pop,navigator:n,static:C=!1,future:l}=A;PC()&&sg(!1);let s=g.replace(/^\/*/,"/"),i=f.useMemo(()=>({basename:s,navigator:n,static:C,future:Vs({v7_relativeSplatPath:!1},l)}),[s,l,n,C]);typeof t=="string"&&(t=Yn(t));let{pathname:r="/",search:c="",hash:d="",state:h=null,key:Z="default"}=t,y=f.useMemo(()=>{let S=KB(r,s);return S==null?null:{location:{pathname:S,search:c,hash:d,state:h,key:Z},navigationType:I}},[s,r,c,d,h,Z,I]);return y==null?null:f.createElement(UI.Provider,{value:i},f.createElement(nr.Provider,{children:e,value:y}))}function xF(A){let{children:g,location:e}=A;return VF(Yu(g),e)}new Promise(()=>{});function Yu(A,g){g===void 0&&(g=[]);let e=[];return f.Children.forEach(A,(t,I)=>{if(!f.isValidElement(t))return;let n=[...g,I];if(t.type===f.Fragment){e.push.apply(e,Yu(t.props.children,n));return}t.type!==$A&&sg(!1),!t.props.index||!t.props.children||sg(!1);let C={id:t.props.id||n.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(C.children=Yu(t.props.children,n)),e.push(C)}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(A){for(var g=1;g<arguments.length;g++){var e=arguments[g];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])}return A},Qu.apply(this,arguments)}function EF(A,g){if(A==null)return{};var e={},t=Object.keys(A),I,n;for(n=0;n<t.length;n++)I=t[n],!(g.indexOf(I)>=0)&&(e[I]=A[I]);return e}function LF(A){return!!(A.metaKey||A.altKey||A.ctrlKey||A.shiftKey)}function MF(A,g){return A.button===0&&(!g||g==="_self")&&!LF(A)}const DF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zF="6";try{window.__reactRouterVersion=zF}catch{}const TF="startTransition",SZ=xX[TF];function jF(A){let{basename:g,children:e,future:t,window:I}=A,n=f.useRef();n.current==null&&(n.current=qJ({window:I,v5Compat:!0}));let C=n.current,[l,s]=f.useState({action:C.action,location:C.location}),{v7_startTransition:i}=t||{},r=f.useCallback(c=>{i&&SZ?SZ(()=>s(c)):s(c)},[s,i]);return f.useLayoutEffect(()=>C.listen(r),[C,r]),f.useEffect(()=>NF(t),[t]),f.createElement(UF,{basename:g,children:e,location:l.location,navigationType:l.action,navigator:C,future:t})}const OF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j=f.forwardRef(function(g,e){let{onClick:t,relative:I,reloadDocument:n,replace:C,state:l,target:s,to:i,preventScrollReset:r,viewTransition:c}=g,d=EF(g,DF),{basename:h}=f.useContext(UI),Z,y=!1;if(typeof i=="string"&&PF.test(i)&&(Z=i,OF))try{let G=new URL(window.location.href),V=i.startsWith("//")?new URL(G.protocol+i):new URL(i),W=KB(V.pathname,h);V.origin===G.origin&&W!=null?i=W+V.search+V.hash:y=!0}catch{}let S=fF(i,{relative:I}),b=_F(i,{replace:C,state:l,target:s,preventScrollReset:r,relative:I,viewTransition:c});function m(G){t&&t(G),G.defaultPrevented||b(G)}return f.createElement("a",Qu({},d,{href:Z||S,onClick:y||n?t:m,ref:e,target:s}))});var VZ;(function(A){A.UseScrollRestoration="useScrollRestoration",A.UseSubmit="useSubmit",A.UseSubmitFetcher="useSubmitFetcher",A.UseFetcher="useFetcher",A.useViewTransitionState="useViewTransitionState"})(VZ||(VZ={}));var WZ;(function(A){A.UseFetcher="useFetcher",A.UseFetchers="useFetchers",A.UseScrollRestoration="useScrollRestoration"})(WZ||(WZ={}));function _F(A,g){let{target:e,replace:t,state:I,preventScrollReset:n,relative:C,viewTransition:l}=g===void 0?{}:g,s=Ug(),i=hg(),r=_S(A,{relative:C});return f.useCallback(c=>{if(MF(c,e)){c.preventDefault();let d=t!==void 0?t:ua(i)===ua(r);s(A,{replace:d,state:I,preventScrollReset:n,relative:C,viewTransition:l})}},[i,s,r,t,I,e,A,n,C,l])}const qc=[{username:"1",password:"1",phoneNumber:"123456",role:"Member"},{username:"visitor",password:"pass",phoneNumber:"654321",role:"Visitor"}];function AV(){try{const A=localStorage.getItem("users");if(A){const g=JSON.parse(A);return console.log("โหลดผู้ใช้จาก Local Storage:",g),g}else return localStorage.setItem("users",JSON.stringify(qc)),qc}catch(A){return console.error("เกิดข้อผิดพลาดในการโหลดข้อมูลผู้ใช้:",A),qc}}let ue=AV();function qF(A,g){const e=ue.find(t=>(t.username===A||t.phoneNumber===A)&&t.password===g);return e?{username:e.username,phoneNumber:e.phoneNumber,role:e.role}:null}function $F(A,g,e,t){return Ak(g,e,A)?(console.log("ผู้ใช้นี้มีอยู่ในระบบแล้ว"),!1):(ue.push({username:g,phoneNumber:e,password:t,role:"Visitor",fullName:A}),localStorage.setItem("users",JSON.stringify(ue)),console.log("ผู้ใช้ใหม่ถูกเพิ่ม:",ue),!0)}function Ak(A,g,e){return ue.some(t=>t.username===A||t.phoneNumber===g||t.fullName===e)}function gk(){ue=AV(),console.log("ข้อมูลผู้ใช้ถูกรีเฟรช:",ue)}function ek(A){const g=ue.findIndex(e=>e.username===A||e.phoneNumber===A);if(g!==-1){const e=ue.splice(g,1);return console.log("ผู้ใช้ที่ถูกลบ:",e[0]),localStorage.setItem("users",JSON.stringify(ue)),console.log("อัปเดต Local Storage:",JSON.parse(localStorage.getItem("users"))),!0}else return!1}ek("")&&(gk(),console.log("ลบผู้ใช้สำเร็จ"));function tk(A,g){const e=ue.findIndex(t=>t.phoneNumber===A);return e!==-1?(ue[e].password=g,localStorage.setItem("users",JSON.stringify(ue)),console.log("รหัสผ่านถูกรีเซ็ตสำเร็จสำหรับหมายเลข:",A),!0):(console.log("ไม่พบหมายเลขโทรศัพท์ที่ต้องการรีเซ็ตรหัสผ่าน"),!1)}var gV={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(A){(function(){var g={}.hasOwnProperty;function e(){for(var n="",C=0;C<arguments.length;C++){var l=arguments[C];l&&(n=I(n,t(l)))}return n}function t(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var C="";for(var l in n)g.call(n,l)&&n[l]&&(C=I(C,l));return C}function I(n,C){return C?n?n+" "+C:n+C:n}A.exports?(e.default=e,A.exports=e):window.classNames=e})()})(gV);var Ik=gV.exports;const kA=Ea(Ik);function Ba(){return Ba=Object.assign?Object.assign.bind():function(A){for(var g=1;g<arguments.length;g++){var e=arguments[g];for(var t in e)({}).hasOwnProperty.call(e,t)&&(A[t]=e[t])}return A},Ba.apply(null,arguments)}function EB(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.includes(t))continue;e[t]=A[t]}return e}function RZ(A){return"default"+A.charAt(0).toUpperCase()+A.substr(1)}function nk(A){var g=Ck(A,"string");return typeof g=="symbol"?g:String(g)}function Ck(A,g){if(typeof A!="object"||A===null)return A;var e=A[Symbol.toPrimitive];if(e!==void 0){var t=e.call(A,g);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}function lk(A,g,e){var t=f.useRef(A!==void 0),I=f.useState(g),n=I[0],C=I[1],l=A!==void 0,s=t.current;return t.current=l,!l&&s&&n!==g&&C(g),[l?A:n,f.useCallback(function(i){for(var r=arguments.length,c=new Array(r>1?r-1:0),d=1;d<r;d++)c[d-1]=arguments[d];e&&e.apply(void 0,[i].concat(c)),C(i)},[e])]}function sk(A,g){return Object.keys(g).reduce(function(e,t){var I,n=e,C=n[RZ(t)],l=n[t],s=EB(n,[RZ(t),t].map(nk)),i=g[t],r=lk(l,C,A[i]),c=r[0],d=r[1];return Ba({},s,(I={},I[t]=c,I[i]=d,I))},A)}function Ku(A,g){return Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ku(A,g)}function ik(A,g){A.prototype=Object.create(g.prototype),A.prototype.constructor=A,Ku(A,g)}const ok=["xxl","xl","lg","md","sm","xs"],ak="xs",Cr=f.createContext({prefixes:{},breakpoints:ok,minBreakpoint:ak});function eg(A,g){const{prefixes:e}=f.useContext(Cr);return A||e[g]||g}function rk(){const{breakpoints:A}=f.useContext(Cr);return A}function ck(){const{minBreakpoint:A}=f.useContext(Cr);return A}function dk(){const{dir:A}=f.useContext(Cr);return A==="rtl"}function lr(A){return A&&A.ownerDocument||document}function uk(A){var g=lr(A);return g&&g.defaultView||window}function mk(A,g){return uk(A).getComputedStyle(A,g)}var Bk=/([A-Z])/g;function hk(A){return A.replace(Bk,"-$1").toLowerCase()}var bk=/^ms-/;function ki(A){return hk(A).replace(bk,"-ms-")}var Zk=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function pk(A){return!!(A&&Zk.test(A))}function pn(A,g){var e="",t="";if(typeof g=="string")return A.style.getPropertyValue(ki(g))||mk(A).getPropertyValue(ki(g));Object.keys(g).forEach(function(I){var n=g[I];!n&&n!==0?A.style.removeProperty(ki(I)):pk(I)?t+=I+"("+n+") ":e+=ki(I)+": "+n+";"}),t&&(e+="transform: "+t+";"),A.style.cssText+=";"+e}var eV={exports:{}},Gk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yk=Gk,fk=yk;function tV(){}function IV(){}IV.resetWarningCache=tV;var Sk=function(){function A(t,I,n,C,l,s){if(s!==fk){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}A.isRequired=A;function g(){return A}var e={array:A,bigint:A,bool:A,func:A,number:A,object:A,string:A,symbol:A,any:A,arrayOf:g,element:A,elementType:A,instanceOf:g,node:A,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:IV,resetWarningCache:tV};return e.PropTypes=e,e};eV.exports=Sk();var Vk=eV.exports;const CA=Ea(Vk),vZ={disabled:!1},nV=rg.createContext(null);var Wk=function(g){return g.scrollTop},Xl="unmounted",ln="exited",nI="entering",an="entered",Nu="exiting",zt=function(A){ik(g,A);function g(t,I){var n;n=A.call(this,t,I)||this;var C=I,l=C&&!C.isMounting?t.enter:t.appear,s;return n.appearStatus=null,t.in?l?(s=ln,n.appearStatus=nI):s=an:t.unmountOnExit||t.mountOnEnter?s=Xl:s=ln,n.state={status:s},n.nextCallback=null,n}g.getDerivedStateFromProps=function(I,n){var C=I.in;return C&&n.status===Xl?{status:ln}:null};var e=g.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(I){var n=null;if(I!==this.props){var C=this.state.status;this.props.in?C!==nI&&C!==an&&(n=nI):(C===nI||C===an)&&(n=Nu)}this.updateStatus(!1,n)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var I=this.props.timeout,n,C,l;return n=C=l=I,I!=null&&typeof I!="number"&&(n=I.exit,C=I.enter,l=I.appear!==void 0?I.appear:C),{exit:n,enter:C,appear:l}},e.updateStatus=function(I,n){if(I===void 0&&(I=!1),n!==null)if(this.cancelNextCallback(),n===nI){if(this.props.unmountOnExit||this.props.mountOnEnter){var C=this.props.nodeRef?this.props.nodeRef.current:yC.findDOMNode(this);C&&Wk(C)}this.performEnter(I)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ln&&this.setState({status:Xl})},e.performEnter=function(I){var n=this,C=this.props.enter,l=this.context?this.context.isMounting:I,s=this.props.nodeRef?[l]:[yC.findDOMNode(this),l],i=s[0],r=s[1],c=this.getTimeouts(),d=l?c.appear:c.enter;if(!I&&!C||vZ.disabled){this.safeSetState({status:an},function(){n.props.onEntered(i)});return}this.props.onEnter(i,r),this.safeSetState({status:nI},function(){n.props.onEntering(i,r),n.onTransitionEnd(d,function(){n.safeSetState({status:an},function(){n.props.onEntered(i,r)})})})},e.performExit=function(){var I=this,n=this.props.exit,C=this.getTimeouts(),l=this.props.nodeRef?void 0:yC.findDOMNode(this);if(!n||vZ.disabled){this.safeSetState({status:ln},function(){I.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Nu},function(){I.props.onExiting(l),I.onTransitionEnd(C.exit,function(){I.safeSetState({status:ln},function(){I.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(I,n){n=this.setNextCallback(n),this.setState(I,n)},e.setNextCallback=function(I){var n=this,C=!0;return this.nextCallback=function(l){C&&(C=!1,n.nextCallback=null,I(l))},this.nextCallback.cancel=function(){C=!1},this.nextCallback},e.onTransitionEnd=function(I,n){this.setNextCallback(n);var C=this.props.nodeRef?this.props.nodeRef.current:yC.findDOMNode(this),l=I==null&&!this.props.addEndListener;if(!C||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[C,this.nextCallback],i=s[0],r=s[1];this.props.addEndListener(i,r)}I!=null&&setTimeout(this.nextCallback,I)},e.render=function(){var I=this.state.status;if(I===Xl)return null;var n=this.props,C=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var l=EB(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return rg.createElement(nV.Provider,{value:null},typeof C=="function"?C(I,l):rg.cloneElement(rg.Children.only(C),l))},g}(rg.Component);zt.contextType=nV;zt.propTypes={};function $n(){}zt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:$n,onEntering:$n,onEntered:$n,onExit:$n,onExiting:$n,onExited:$n};zt.UNMOUNTED=Xl;zt.EXITED=ln;zt.ENTERING=nI;zt.ENTERED=an;zt.EXITING=Nu;const _C=!!(typeof window<"u"&&window.document&&window.document.createElement);var Uu=!1,xu=!1;try{var $c={get passive(){return Uu=!0},get once(){return xu=Uu=!0}};_C&&(window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,!0))}catch{}function CV(A,g,e,t){if(t&&typeof t!="boolean"&&!xu){var I=t.once,n=t.capture,C=e;!xu&&I&&(C=e.__once||function l(s){this.removeEventListener(g,l,n),e.call(this,s)},e.__once=C),A.addEventListener(g,C,Uu?t:n)}A.addEventListener(g,e,t)}function Eu(A,g,e,t){var I=t&&typeof t!="boolean"?t.capture:t;A.removeEventListener(g,e,I),e.__once&&A.removeEventListener(g,e.__once,I)}function ha(A,g,e,t){return CV(A,g,e,t),function(){Eu(A,g,e,t)}}function Rk(A,g,e,t){if(t===void 0&&(t=!0),A){var I=document.createEvent("HTMLEvents");I.initEvent(g,e,t),A.dispatchEvent(I)}}function vk(A){var g=pn(A,"transitionDuration")||"",e=g.indexOf("ms")===-1?1e3:1;return parseFloat(g)*e}function wk(A,g,e){e===void 0&&(e=5);var t=!1,I=setTimeout(function(){t||Rk(A,"transitionend",!0)},g+e),n=ha(A,"transitionend",function(){t=!0},{once:!0});return function(){clearTimeout(I),n()}}function lV(A,g,e,t){e==null&&(e=vk(A)||0);var I=wk(A,e,t),n=ha(A,"transitionend",g);return function(){I(),n()}}function wZ(A,g){const e=pn(A,g)||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function Xk(A,g){const e=wZ(A,"transitionDuration"),t=wZ(A,"transitionDelay"),I=lV(A,n=>{n.target===A&&(I(),g(n))},e+t)}function Jk(A){A.offsetHeight}const XZ=A=>!A||typeof A=="function"?A:g=>{A.current=g};function Fk(A,g){const e=XZ(A),t=XZ(g);return I=>{e&&e(I),t&&t(I)}}function qC(A,g){return f.useMemo(()=>Fk(A,g),[A,g])}function kk(A){return A&&"setState"in A?yC.findDOMNode(A):A??null}const Hk=rg.forwardRef(({onEnter:A,onEntering:g,onEntered:e,onExit:t,onExiting:I,onExited:n,addEndListener:C,children:l,childRef:s,...i},r)=>{const c=f.useRef(null),d=qC(c,s),h=R=>{d(kk(R))},Z=R=>X=>{R&&c.current&&R(c.current,X)},y=f.useCallback(Z(A),[A]),S=f.useCallback(Z(g),[g]),b=f.useCallback(Z(e),[e]),m=f.useCallback(Z(t),[t]),G=f.useCallback(Z(I),[I]),V=f.useCallback(Z(n),[n]),W=f.useCallback(Z(C),[C]);return o.jsx(zt,{ref:r,...i,onEnter:y,onEntered:b,onEntering:S,onExit:m,onExited:V,onExiting:G,addEndListener:W,nodeRef:c,children:typeof l=="function"?(R,X)=>l(R,{...X,ref:h}):rg.cloneElement(l,{ref:h})})});function Yk(A){const g=f.useRef(A);return f.useEffect(()=>{g.current=A},[A]),g}function Je(A){const g=Yk(A);return f.useCallback(function(...e){return g.current&&g.current(...e)},[g])}const Qk=A=>f.forwardRef((g,e)=>o.jsx("div",{...g,ref:e,className:kA(g.className,A)}));function Kk(){return f.useState(null)}function Nk(){const A=f.useRef(!0),g=f.useRef(()=>A.current);return f.useEffect(()=>(A.current=!0,()=>{A.current=!1}),[]),g.current}function Uk(A){const g=f.useRef(null);return f.useEffect(()=>{g.current=A}),g.current}const xk=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Ek=typeof document<"u",JZ=Ek||xk?f.useLayoutEffect:f.useEffect,Lk=["as","disabled"];function Mk(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}function Dk(A){return!A||A.trim()==="#"}function LB({tagName:A,disabled:g,href:e,target:t,rel:I,role:n,onClick:C,tabIndex:l=0,type:s}){A||(e!=null||t!=null||I!=null?A="a":A="button");const i={tagName:A};if(A==="button")return[{type:s||"button",disabled:g},i];const r=d=>{if((g||A==="a"&&Dk(e))&&d.preventDefault(),g){d.stopPropagation();return}C==null||C(d)},c=d=>{d.key===" "&&(d.preventDefault(),r(d))};return A==="a"&&(e||(e="#"),g&&(e=void 0)),[{role:n??"button",disabled:void 0,tabIndex:g?void 0:l,href:e,target:A==="a"?t:void 0,"aria-disabled":g||void 0,rel:A==="a"?I:void 0,onClick:r,onKeyDown:c},i]}const sV=f.forwardRef((A,g)=>{let{as:e,disabled:t}=A,I=Mk(A,Lk);const[n,{tagName:C}]=LB(Object.assign({tagName:e,disabled:t},I));return o.jsx(C,Object.assign({},I,n,{ref:g}))});sV.displayName="Button";const zk=["onKeyDown"];function Tk(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}function jk(A){return!A||A.trim()==="#"}const iV=f.forwardRef((A,g)=>{let{onKeyDown:e}=A,t=Tk(A,zk);const[I]=LB(Object.assign({tagName:"a"},t)),n=Je(C=>{I.onKeyDown(C),e==null||e(C)});return jk(t.href)||t.role==="button"?o.jsx("a",Object.assign({ref:g},t,I,{onKeyDown:n})):o.jsx("a",Object.assign({ref:g},t,{onKeyDown:e}))});iV.displayName="Anchor";function Ok(A){return A.code==="Escape"||A.keyCode===27}function oV(){const A=f.version.split(".");return{major:+A[0],minor:+A[1],patch:+A[2]}}const Pk={[nI]:"show",[an]:"show"},MB=f.forwardRef(({className:A,children:g,transitionClasses:e={},onEnter:t,...I},n)=>{const C={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...I},l=f.useCallback((r,c)=>{Jk(r),t==null||t(r,c)},[t]),{major:s}=oV(),i=s>=19?g.props.ref:g.ref;return o.jsx(Hk,{ref:n,addEndListener:Xk,...C,onEnter:l,childRef:i,children:(r,c)=>f.cloneElement(g,{...c,className:kA("fade",A,g.props.className,Pk[r],e[r])})})});MB.displayName="Fade";const _k={"aria-label":CA.string,onClick:CA.func,variant:CA.oneOf(["white"])},DB=f.forwardRef(({className:A,variant:g,"aria-label":e="Close",...t},I)=>o.jsx("button",{ref:I,type:"button",className:kA("btn-close",g&&`btn-close-${g}`,A),"aria-label":e,...t}));DB.displayName="CloseButton";DB.propTypes=_k;const Vg=f.forwardRef(({as:A,bsPrefix:g,variant:e="primary",size:t,active:I=!1,disabled:n=!1,className:C,...l},s)=>{const i=eg(g,"btn"),[r,{tagName:c}]=LB({tagName:A,disabled:n,...l}),d=c;return o.jsx(d,{...r,...l,ref:s,disabled:n,className:kA(C,i,I&&"active",e&&`${i}-${e}`,t&&`${i}-${t}`,l.href&&n&&"disabled")})});Vg.displayName="Button";const aV=f.createContext(null);aV.displayName="CardHeaderContext";function qk(A){const g=f.useRef(A);return g.current=A,g}function rV(A){const g=qk(A);f.useEffect(()=>()=>g.current(),[])}function $k(A,g){return f.Children.toArray(A).some(e=>f.isValidElement(e)&&e.type===g)}function AH({as:A,bsPrefix:g,className:e,...t}){g=eg(g,"col");const I=rk(),n=ck(),C=[],l=[];return I.forEach(s=>{const i=t[s];delete t[s];let r,c,d;typeof i=="object"&&i!=null?{span:r,offset:c,order:d}=i:r=i;const h=s!==n?`-${s}`:"";r&&C.push(r===!0?`${g}${h}`:`${g}${h}-${r}`),d!=null&&l.push(`order${h}-${d}`),c!=null&&l.push(`offset${h}-${c}`)}),[{...t,className:kA(e,...C,...l)},{as:A,bsPrefix:g,spans:C}]}const cV=f.forwardRef((A,g)=>{const[{className:e,...t},{as:I="div",bsPrefix:n,spans:C}]=AH(A);return o.jsx(I,{...t,ref:g,className:kA(e,!C.length&&n)})});cV.displayName="Col";var gH=Function.prototype.bind.call(Function.prototype.call,[].slice);function sn(A,g){return gH(A.querySelectorAll(g))}function eH(){const[,A]=f.useReducer(g=>!g,!1);return A}function FZ(A,g){if(A.contains)return A.contains(g);if(A.compareDocumentPosition)return A===g||!!(A.compareDocumentPosition(g)&16)}const Lu=f.createContext(null),zB=(A,g=null)=>A!=null?String(A):g||null,TB=f.createContext(null);TB.displayName="NavContext";const tH="data-rr-ui-",IH="rrUi";function sr(A){return`${tH}${A}`}function nH(A){return`${IH}${A}`}const dV=f.createContext(_C?window:void 0);dV.Provider;function jB(){return f.useContext(dV)}const uV=f.createContext(null);uV.displayName="NavbarContext";const CH={type:CA.string,tooltip:CA.bool,as:CA.elementType},ir=f.forwardRef(({as:A="div",className:g,type:e="valid",tooltip:t=!1,...I},n)=>o.jsx(A,{...I,ref:n,className:kA(g,`${e}-${t?"tooltip":"feedback"}`)}));ir.displayName="Feedback";ir.propTypes=CH;const xt=f.createContext({}),OB=f.forwardRef(({id:A,bsPrefix:g,className:e,type:t="checkbox",isValid:I=!1,isInvalid:n=!1,as:C="input",...l},s)=>{const{controlId:i}=f.useContext(xt);return g=eg(g,"form-check-input"),o.jsx(C,{...l,ref:s,type:t,id:A||i,className:kA(e,g,I&&"is-valid",n&&"is-invalid")})});OB.displayName="FormCheckInput";const ba=f.forwardRef(({bsPrefix:A,className:g,htmlFor:e,...t},I)=>{const{controlId:n}=f.useContext(xt);return A=eg(A,"form-check-label"),o.jsx("label",{...t,ref:I,htmlFor:e||n,className:kA(g,A)})});ba.displayName="FormCheckLabel";const mV=f.forwardRef(({id:A,bsPrefix:g,bsSwitchPrefix:e,inline:t=!1,reverse:I=!1,disabled:n=!1,isValid:C=!1,isInvalid:l=!1,feedbackTooltip:s=!1,feedback:i,feedbackType:r,className:c,style:d,title:h="",type:Z="checkbox",label:y,children:S,as:b="input",...m},G)=>{g=eg(g,"form-check"),e=eg(e,"form-switch");const{controlId:V}=f.useContext(xt),W=f.useMemo(()=>({controlId:A||V}),[V,A]),R=!S&&y!=null&&y!==!1||$k(S,ba),X=o.jsx(OB,{...m,type:Z==="switch"?"checkbox":Z,ref:G,isValid:C,isInvalid:l,disabled:n,as:b});return o.jsx(xt.Provider,{value:W,children:o.jsx("div",{style:d,className:kA(c,R&&g,t&&`${g}-inline`,I&&`${g}-reverse`,Z==="switch"&&e),children:S||o.jsxs(o.Fragment,{children:[X,R&&o.jsx(ba,{title:h,children:y}),i&&o.jsx(ir,{type:r,tooltip:s,children:i})]})})})});mV.displayName="FormCheck";const Za=Object.assign(mV,{Input:OB,Label:ba}),BV=f.forwardRef(({bsPrefix:A,type:g,size:e,htmlSize:t,id:I,className:n,isValid:C=!1,isInvalid:l=!1,plaintext:s,readOnly:i,as:r="input",...c},d)=>{const{controlId:h}=f.useContext(xt);return A=eg(A,"form-control"),o.jsx(r,{...c,type:g,size:t,ref:d,readOnly:i,id:I||h,className:kA(n,s?`${A}-plaintext`:A,e&&`${A}-${e}`,g==="color"&&`${A}-color`,C&&"is-valid",l&&"is-invalid")})});BV.displayName="FormControl";const lH=Object.assign(BV,{Feedback:ir}),hV=f.forwardRef(({className:A,bsPrefix:g,as:e="div",...t},I)=>(g=eg(g,"form-floating"),o.jsx(e,{ref:I,className:kA(A,g),...t})));hV.displayName="FormFloating";const PB=f.forwardRef(({controlId:A,as:g="div",...e},t)=>{const I=f.useMemo(()=>({controlId:A}),[A]);return o.jsx(xt.Provider,{value:I,children:o.jsx(g,{...e,ref:t})})});PB.displayName="FormGroup";const bV=f.forwardRef(({as:A="label",bsPrefix:g,column:e=!1,visuallyHidden:t=!1,className:I,htmlFor:n,...C},l)=>{const{controlId:s}=f.useContext(xt);g=eg(g,"form-label");let i="col-form-label";typeof e=="string"&&(i=`${i} ${i}-${e}`);const r=kA(I,g,t&&"visually-hidden",e&&i);return n=n||s,e?o.jsx(cV,{ref:l,as:"label",className:r,htmlFor:n,...C}):o.jsx(A,{ref:l,className:r,htmlFor:n,...C})});bV.displayName="FormLabel";const ZV=f.forwardRef(({bsPrefix:A,className:g,id:e,...t},I)=>{const{controlId:n}=f.useContext(xt);return A=eg(A,"form-range"),o.jsx("input",{...t,type:"range",ref:I,className:kA(g,A),id:e||n})});ZV.displayName="FormRange";const pV=f.forwardRef(({bsPrefix:A,size:g,htmlSize:e,className:t,isValid:I=!1,isInvalid:n=!1,id:C,...l},s)=>{const{controlId:i}=f.useContext(xt);return A=eg(A,"form-select"),o.jsx("select",{...l,size:e,ref:s,className:kA(t,A,g&&`${A}-${g}`,I&&"is-valid",n&&"is-invalid"),id:C||i})});pV.displayName="FormSelect";const GV=f.forwardRef(({bsPrefix:A,className:g,as:e="small",muted:t,...I},n)=>(A=eg(A,"form-text"),o.jsx(e,{...I,ref:n,className:kA(g,A,t&&"text-muted")})));GV.displayName="FormText";const yV=f.forwardRef((A,g)=>o.jsx(Za,{...A,ref:g,type:"switch"}));yV.displayName="Switch";const sH=Object.assign(yV,{Input:Za.Input,Label:Za.Label}),fV=f.forwardRef(({bsPrefix:A,className:g,children:e,controlId:t,label:I,...n},C)=>(A=eg(A,"form-floating"),o.jsxs(PB,{ref:C,className:kA(g,A),controlId:t,...n,children:[e,o.jsx("label",{htmlFor:t,children:I})]})));fV.displayName="FloatingLabel";const iH={_ref:CA.any,validated:CA.bool,as:CA.elementType},_B=f.forwardRef(({className:A,validated:g,as:e="form",...t},I)=>o.jsx(e,{...t,ref:I,className:kA(A,g&&"was-validated")}));_B.displayName="Form";_B.propTypes=iH;const Fg=Object.assign(_B,{Group:PB,Control:lH,Floating:hV,Check:Za,Switch:sH,Label:bV,Text:GV,Range:ZV,Select:pV,FloatingLabel:fV}),SV=f.createContext(null),oH=["as","active","eventKey"];function aH(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}function VV({key:A,onClick:g,active:e,id:t,role:I,disabled:n}){const C=f.useContext(Lu),l=f.useContext(TB),s=f.useContext(SV);let i=e;const r={role:I};if(l){!I&&l.role==="tablist"&&(r.role="tab");const c=l.getControllerId(A??null),d=l.getControlledId(A??null);r[sr("event-key")]=A,r.id=c||t,i=e==null&&A!=null?l.activeKey===A:e,(i||!(s!=null&&s.unmountOnExit)&&!(s!=null&&s.mountOnEnter))&&(r["aria-controls"]=d)}return r.role==="tab"&&(r["aria-selected"]=i,i||(r.tabIndex=-1),n&&(r.tabIndex=-1,r["aria-disabled"]=!0)),r.onClick=Je(c=>{n||(g==null||g(c),A!=null&&C&&!c.isPropagationStopped()&&C(A,c))}),[r,{isActive:i}]}const WV=f.forwardRef((A,g)=>{let{as:e=sV,active:t,eventKey:I}=A,n=aH(A,oH);const[C,l]=VV(Object.assign({key:zB(I,n.href),active:t},n));return C[sr("active")]=l.isActive,o.jsx(e,Object.assign({},n,C,{ref:g}))});WV.displayName="NavItem";const rH=["as","onSelect","activeKey","role","onKeyDown"];function cH(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}const kZ=()=>{},HZ=sr("event-key"),RV=f.forwardRef((A,g)=>{let{as:e="div",onSelect:t,activeKey:I,role:n,onKeyDown:C}=A,l=cH(A,rH);const s=eH(),i=f.useRef(!1),r=f.useContext(Lu),c=f.useContext(SV);let d,h;c&&(n=n||"tablist",I=c.activeKey,d=c.getControlledId,h=c.getControllerId);const Z=f.useRef(null),y=G=>{const V=Z.current;if(!V)return null;const W=sn(V,`[${HZ}]:not([aria-disabled=true])`),R=V.querySelector("[aria-selected=true]");if(!R||R!==document.activeElement)return null;const X=W.indexOf(R);if(X===-1)return null;let F=X+G;return F>=W.length&&(F=0),F<0&&(F=W.length-1),W[F]},S=(G,V)=>{G!=null&&(t==null||t(G,V),r==null||r(G,V))},b=G=>{if(C==null||C(G),!c)return;let V;switch(G.key){case"ArrowLeft":case"ArrowUp":V=y(-1);break;case"ArrowRight":case"ArrowDown":V=y(1);break;default:return}V&&(G.preventDefault(),S(V.dataset[nH("EventKey")]||null,G),i.current=!0,s())};f.useEffect(()=>{if(Z.current&&i.current){const G=Z.current.querySelector(`[${HZ}][aria-selected=true]`);G==null||G.focus()}i.current=!1});const m=qC(g,Z);return o.jsx(Lu.Provider,{value:S,children:o.jsx(TB.Provider,{value:{role:n,activeKey:zB(I),getControlledId:d||kZ,getControllerId:h||kZ},children:o.jsx(e,Object.assign({},l,{onKeyDown:b,ref:m,role:n}))})})});RV.displayName="Nav";const dH=Object.assign(RV,{Item:WV});var Hi;function YZ(A){if((!Hi&&Hi!==0||A)&&_C){var g=document.createElement("div");g.style.position="absolute",g.style.top="-9999px",g.style.width="50px",g.style.height="50px",g.style.overflow="scroll",document.body.appendChild(g),Hi=g.offsetWidth-g.clientWidth,document.body.removeChild(g)}return Hi}function Ad(A){A===void 0&&(A=lr());try{var g=A.activeElement;return!g||!g.nodeName?null:g}catch{return A.body}}function uH(A=document){const g=A.defaultView;return Math.abs(g.innerWidth-A.documentElement.clientWidth)}const QZ=sr("modal-open");class qB{constructor({ownerDocument:g,handleContainerOverflow:e=!0,isRTL:t=!1}={}){this.handleContainerOverflow=e,this.isRTL=t,this.modals=[],this.ownerDocument=g}getScrollbarWidth(){return uH(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(g){}removeModalAttributes(g){}setContainerStyle(g){const e={overflow:"hidden"},t=this.isRTL?"paddingLeft":"paddingRight",I=this.getElement();g.style={overflow:I.style.overflow,[t]:I.style[t]},g.scrollBarWidth&&(e[t]=`${parseInt(pn(I,t)||"0",10)+g.scrollBarWidth}px`),I.setAttribute(QZ,""),pn(I,e)}reset(){[...this.modals].forEach(g=>this.remove(g))}removeContainerStyle(g){const e=this.getElement();e.removeAttribute(QZ),Object.assign(e.style,g.style)}add(g){let e=this.modals.indexOf(g);return e!==-1||(e=this.modals.length,this.modals.push(g),this.setModalAttributes(g),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(g){const e=this.modals.indexOf(g);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(g))}isTopModal(g){return!!this.modals.length&&this.modals[this.modals.length-1]===g}}const gd=(A,g)=>_C?A==null?(g||lr()).body:(typeof A=="function"&&(A=A()),A&&"current"in A&&(A=A.current),A&&("nodeType"in A||A.getBoundingClientRect)?A:null):null;function mH(A,g){const e=jB(),[t,I]=f.useState(()=>gd(A,e==null?void 0:e.document));if(!t){const n=gd(A);n&&I(n)}return f.useEffect(()=>{},[g,t]),f.useEffect(()=>{const n=gd(A);n!==t&&I(n)},[A,t]),t}function BH({children:A,in:g,onExited:e,mountOnEnter:t,unmountOnExit:I}){const n=f.useRef(null),C=f.useRef(g),l=Je(e);f.useEffect(()=>{g?C.current=!0:l(n.current)},[g,l]);const s=qC(n,A.ref),i=f.cloneElement(A,{ref:s});return g?i:I||!C.current&&t?null:i}const hH=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function bH(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}function ZH(A){let{onEnter:g,onEntering:e,onEntered:t,onExit:I,onExiting:n,onExited:C,addEndListener:l,children:s}=A,i=bH(A,hH);const{major:r}=oV(),c=r>=19?s.props.ref:s.ref,d=f.useRef(null),h=qC(d,typeof s=="function"?null:c),Z=R=>X=>{R&&d.current&&R(d.current,X)},y=f.useCallback(Z(g),[g]),S=f.useCallback(Z(e),[e]),b=f.useCallback(Z(t),[t]),m=f.useCallback(Z(I),[I]),G=f.useCallback(Z(n),[n]),V=f.useCallback(Z(C),[C]),W=f.useCallback(Z(l),[l]);return Object.assign({},i,{nodeRef:d},g&&{onEnter:y},e&&{onEntering:S},t&&{onEntered:b},I&&{onExit:m},n&&{onExiting:G},C&&{onExited:V},l&&{addEndListener:W},{children:typeof s=="function"?(R,X)=>s(R,Object.assign({},X,{ref:h})):f.cloneElement(s,{ref:h})})}const pH=["component"];function GH(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}const yH=f.forwardRef((A,g)=>{let{component:e}=A,t=GH(A,pH);const I=ZH(t);return o.jsx(e,Object.assign({ref:g},I))});function fH({in:A,onTransition:g}){const e=f.useRef(null),t=f.useRef(!0),I=Je(g);return JZ(()=>{if(!e.current)return;let n=!1;return I({in:A,element:e.current,initial:t.current,isStale:()=>n}),()=>{n=!0}},[A,I]),JZ(()=>(t.current=!1,()=>{t.current=!0}),[]),e}function SH({children:A,in:g,onExited:e,onEntered:t,transition:I}){const[n,C]=f.useState(!g);g&&n&&C(!1);const l=fH({in:!!g,onTransition:i=>{const r=()=>{i.isStale()||(i.in?t==null||t(i.element,i.initial):(C(!0),e==null||e(i.element)))};Promise.resolve(I(i)).then(r,c=>{throw i.in||C(!0),c})}}),s=qC(l,A.ref);return n&&!g?null:f.cloneElement(A,{ref:s})}function KZ(A,g,e){return A?o.jsx(yH,Object.assign({},e,{component:A})):g?o.jsx(SH,Object.assign({},e,{transition:g})):o.jsx(BH,Object.assign({},e))}const VH=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function WH(A,g){if(A==null)return{};var e={};for(var t in A)if({}.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}let ed;function RH(A){return ed||(ed=new qB({ownerDocument:A==null?void 0:A.document})),ed}function vH(A){const g=jB(),e=A||RH(g),t=f.useRef({dialog:null,backdrop:null});return Object.assign(t.current,{add:()=>e.add(t.current),remove:()=>e.remove(t.current),isTopModal:()=>e.isTopModal(t.current),setDialogRef:f.useCallback(I=>{t.current.dialog=I},[]),setBackdropRef:f.useCallback(I=>{t.current.backdrop=I},[])})}const vV=f.forwardRef((A,g)=>{let{show:e=!1,role:t="dialog",className:I,style:n,children:C,backdrop:l=!0,keyboard:s=!0,onBackdropClick:i,onEscapeKeyDown:r,transition:c,runTransition:d,backdropTransition:h,runBackdropTransition:Z,autoFocus:y=!0,enforceFocus:S=!0,restoreFocus:b=!0,restoreFocusOptions:m,renderDialog:G,renderBackdrop:V=RA=>o.jsx("div",Object.assign({},RA)),manager:W,container:R,onShow:X,onHide:F=()=>{},onExit:H,onExited:K,onExiting:_,onEnter:gA,onEntering:AA,onEntered:rA}=A,uA=WH(A,VH);const tA=jB(),oA=mH(R),Q=vH(W),P=Nk(),J=Uk(e),[IA,iA]=f.useState(!e),ZA=f.useRef(null);f.useImperativeHandle(g,()=>Q,[Q]),_C&&!J&&e&&(ZA.current=Ad(tA==null?void 0:tA.document)),e&&IA&&iA(!1);const aA=Je(()=>{if(Q.add(),bt.current=ha(document,"keydown",$),At.current=ha(document,"focus",()=>setTimeout(mA),!0),X&&X(),y){var RA,xe;const EI=Ad((RA=(xe=Q.dialog)==null?void 0:xe.ownerDocument)!=null?RA:tA==null?void 0:tA.document);Q.dialog&&EI&&!FZ(Q.dialog,EI)&&(ZA.current=EI,Q.dialog.focus())}}),SA=Je(()=>{if(Q.remove(),bt.current==null||bt.current(),At.current==null||At.current(),b){var RA;(RA=ZA.current)==null||RA.focus==null||RA.focus(m),ZA.current=null}});f.useEffect(()=>{!e||!oA||aA()},[e,oA,aA]),f.useEffect(()=>{IA&&SA()},[IA,SA]),rV(()=>{SA()});const mA=Je(()=>{if(!S||!P()||!Q.isTopModal())return;const RA=Ad(tA==null?void 0:tA.document);Q.dialog&&RA&&!FZ(Q.dialog,RA)&&Q.dialog.focus()}),dg=Je(RA=>{RA.target===RA.currentTarget&&(i==null||i(RA),l===!0&&F())}),$=Je(RA=>{s&&Ok(RA)&&Q.isTopModal()&&(r==null||r(RA),RA.defaultPrevented||F())}),At=f.useRef(),bt=f.useRef(),Qn=(...RA)=>{iA(!0),K==null||K(...RA)};if(!oA)return null;const jt=Object.assign({role:t,ref:Q.setDialogRef,"aria-modal":t==="dialog"?!0:void 0},uA,{style:n,className:I,tabIndex:-1});let Ue=G?G(jt):o.jsx("div",Object.assign({},jt,{children:f.cloneElement(C,{role:"document"})}));Ue=KZ(c,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!e,onExit:H,onExiting:_,onExited:Qn,onEnter:gA,onEntering:AA,onEntered:rA,children:Ue});let Zt=null;return l&&(Zt=V({ref:Q.setBackdropRef,onClick:dg}),Zt=KZ(h,Z,{in:!!e,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Zt})),o.jsx(o.Fragment,{children:yC.createPortal(o.jsxs(o.Fragment,{children:[Zt,Ue]}),oA)})});vV.displayName="Modal";const wH=Object.assign(vV,{Manager:qB});function XH(A,g){return A.classList?A.classList.contains(g):(" "+(A.className.baseVal||A.className)+" ").indexOf(" "+g+" ")!==-1}function JH(A,g){A.classList?A.classList.add(g):XH(A,g)||(typeof A.className=="string"?A.className=A.className+" "+g:A.setAttribute("class",(A.className&&A.className.baseVal||"")+" "+g))}function NZ(A,g){return A.replace(new RegExp("(^|\\s)"+g+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function FH(A,g){A.classList?A.classList.remove(g):typeof A.className=="string"?A.className=NZ(A.className,g):A.setAttribute("class",NZ(A.className&&A.className.baseVal||"",g))}const AC={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class kH extends qB{adjustAndStore(g,e,t){const I=e.style[g];e.dataset[g]=I,pn(e,{[g]:`${parseFloat(pn(e,g))+t}px`})}restore(g,e){const t=e.dataset[g];t!==void 0&&(delete e.dataset[g],pn(e,{[g]:t}))}setContainerStyle(g){super.setContainerStyle(g);const e=this.getElement();if(JH(e,"modal-open"),!g.scrollBarWidth)return;const t=this.isRTL?"paddingLeft":"paddingRight",I=this.isRTL?"marginLeft":"marginRight";sn(e,AC.FIXED_CONTENT).forEach(n=>this.adjustAndStore(t,n,g.scrollBarWidth)),sn(e,AC.STICKY_CONTENT).forEach(n=>this.adjustAndStore(I,n,-g.scrollBarWidth)),sn(e,AC.NAVBAR_TOGGLER).forEach(n=>this.adjustAndStore(I,n,g.scrollBarWidth))}removeContainerStyle(g){super.removeContainerStyle(g);const e=this.getElement();FH(e,"modal-open");const t=this.isRTL?"paddingLeft":"paddingRight",I=this.isRTL?"marginLeft":"marginRight";sn(e,AC.FIXED_CONTENT).forEach(n=>this.restore(t,n)),sn(e,AC.STICKY_CONTENT).forEach(n=>this.restore(I,n)),sn(e,AC.NAVBAR_TOGGLER).forEach(n=>this.restore(I,n))}}let td;function HH(A){return td||(td=new kH(A)),td}const wV=f.forwardRef(({className:A,bsPrefix:g,as:e="div",...t},I)=>(g=eg(g,"modal-body"),o.jsx(e,{ref:I,className:kA(A,g),...t})));wV.displayName="ModalBody";const XV=f.createContext({onHide(){}}),$B=f.forwardRef(({bsPrefix:A,className:g,contentClassName:e,centered:t,size:I,fullscreen:n,children:C,scrollable:l,...s},i)=>{A=eg(A,"modal");const r=`${A}-dialog`,c=typeof n=="string"?`${A}-fullscreen-${n}`:`${A}-fullscreen`;return o.jsx("div",{...s,ref:i,className:kA(r,g,I&&`${A}-${I}`,t&&`${r}-centered`,l&&`${r}-scrollable`,n&&c),children:o.jsx("div",{className:kA(`${A}-content`,e),children:C})})});$B.displayName="ModalDialog";const JV=f.forwardRef(({className:A,bsPrefix:g,as:e="div",...t},I)=>(g=eg(g,"modal-footer"),o.jsx(e,{ref:I,className:kA(A,g),...t})));JV.displayName="ModalFooter";const YH=f.forwardRef(({closeLabel:A="Close",closeVariant:g,closeButton:e=!1,onHide:t,children:I,...n},C)=>{const l=f.useContext(XV),s=Je(()=>{l==null||l.onHide(),t==null||t()});return o.jsxs("div",{ref:C,...n,children:[I,e&&o.jsx(DB,{"aria-label":A,variant:g,onClick:s})]})}),FV=f.forwardRef(({bsPrefix:A,className:g,closeLabel:e="Close",closeButton:t=!1,...I},n)=>(A=eg(A,"modal-header"),o.jsx(YH,{ref:n,...I,className:kA(g,A),closeLabel:e,closeButton:t})));FV.displayName="ModalHeader";const QH=Qk("h4"),kV=f.forwardRef(({className:A,bsPrefix:g,as:e=QH,...t},I)=>(g=eg(g,"modal-title"),o.jsx(e,{ref:I,className:kA(A,g),...t})));kV.displayName="ModalTitle";function KH(A){return o.jsx(MB,{...A,timeout:null})}function NH(A){return o.jsx(MB,{...A,timeout:null})}const HV=f.forwardRef(({bsPrefix:A,className:g,style:e,dialogClassName:t,contentClassName:I,children:n,dialogAs:C=$B,"data-bs-theme":l,"aria-labelledby":s,"aria-describedby":i,"aria-label":r,show:c=!1,animation:d=!0,backdrop:h=!0,keyboard:Z=!0,onEscapeKeyDown:y,onShow:S,onHide:b,container:m,autoFocus:G=!0,enforceFocus:V=!0,restoreFocus:W=!0,restoreFocusOptions:R,onEntered:X,onExit:F,onExiting:H,onEnter:K,onEntering:_,onExited:gA,backdropClassName:AA,manager:rA,...uA},tA)=>{const[oA,Q]=f.useState({}),[P,J]=f.useState(!1),IA=f.useRef(!1),iA=f.useRef(!1),ZA=f.useRef(null),[aA,SA]=Kk(),mA=qC(tA,SA),dg=Je(b),$=dk();A=eg(A,"modal");const At=f.useMemo(()=>({onHide:dg}),[dg]);function bt(){return rA||HH({isRTL:$})}function Qn(GA){if(!_C)return;const pe=bt().getScrollbarWidth()>0,pt=GA.scrollHeight>lr(GA).documentElement.clientHeight;Q({paddingRight:pe&&!pt?YZ():void 0,paddingLeft:!pe&&pt?YZ():void 0})}const jt=Je(()=>{aA&&Qn(aA.dialog)});rV(()=>{Eu(window,"resize",jt),ZA.current==null||ZA.current()});const Ue=()=>{IA.current=!0},Zt=GA=>{IA.current&&aA&&GA.target===aA.dialog&&(iA.current=!0),IA.current=!1},RA=()=>{J(!0),ZA.current=lV(aA.dialog,()=>{J(!1)})},xe=GA=>{GA.target===GA.currentTarget&&RA()},EI=GA=>{if(h==="static"){xe(GA);return}if(iA.current||GA.target!==GA.currentTarget){iA.current=!1;return}b==null||b()},Ur=GA=>{Z?y==null||y(GA):(GA.preventDefault(),h==="static"&&RA())},xr=(GA,pe)=>{GA&&Qn(GA),K==null||K(GA,pe)},Er=GA=>{ZA.current==null||ZA.current(),F==null||F(GA)},Lr=(GA,pe)=>{_==null||_(GA,pe),CV(window,"resize",jt)},Mr=GA=>{GA&&(GA.style.display=""),gA==null||gA(GA),Eu(window,"resize",jt)},Dr=f.useCallback(GA=>o.jsx("div",{...GA,className:kA(`${A}-backdrop`,AA,!d&&"show")}),[d,AA,A]),LI={...e,...oA};LI.display="block";const gt=GA=>o.jsx("div",{role:"dialog",...GA,style:LI,className:kA(g,A,P&&`${A}-static`,!d&&"show"),onClick:h?EI:void 0,onMouseUp:Zt,"data-bs-theme":l,"aria-label":r,"aria-labelledby":s,"aria-describedby":i,children:o.jsx(C,{...uA,onMouseDown:Ue,className:t,contentClassName:I,children:n})});return o.jsx(XV.Provider,{value:At,children:o.jsx(wH,{show:c,ref:mA,backdrop:h,container:m,keyboard:!0,autoFocus:G,enforceFocus:V,restoreFocus:W,restoreFocusOptions:R,onEscapeKeyDown:Ur,onShow:S,onHide:b,onEnter:xr,onEntering:Lr,onEntered:X,onExit:Er,onExiting:H,onExited:Mr,manager:bt(),transition:d?KH:void 0,backdropTransition:d?NH:void 0,renderBackdrop:Dr,renderDialog:gt})})});HV.displayName="Modal";const ag=Object.assign(HV,{Body:wV,Header:FV,Title:kV,Footer:JV,Dialog:$B,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var UZ={exports:{}},Mu={exports:{}};(function(A,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=e;function e(t){function I(C,l,s,i,r,c){var d=i||"<<anonymous>>",h=c||s;if(l[s]==null)return C?new Error("Required "+r+" `"+h+"` was not specified "+("in `"+d+"`.")):null;for(var Z=arguments.length,y=Array(Z>6?Z-6:0),S=6;S<Z;S++)y[S-6]=arguments[S];return t.apply(void 0,[l,s,d,r,h].concat(y))}var n=I.bind(null,!1);return n.isRequired=I.bind(null,!0),n}A.exports=g.default})(Mu,Mu.exports);var UH=Mu.exports;(function(A,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=n;var e=UH,t=I(e);function I(C){return C&&C.__esModule?C:{default:C}}function n(){for(var C=arguments.length,l=Array(C),s=0;s<C;s++)l[s]=arguments[s];function i(){for(var r=arguments.length,c=Array(r),d=0;d<r;d++)c[d]=arguments[d];var h=null;return l.forEach(function(Z){if(h==null){var y=Z.apply(void 0,c);y!=null&&(h=y)}}),h}return(0,t.default)(i)}A.exports=g.default})(UZ,UZ.exports);const YV=f.forwardRef(({className:A,bsPrefix:g,as:e="div",...t},I)=>(g=eg(g,"nav-item"),o.jsx(e,{ref:I,className:kA(A,g),...t})));YV.displayName="NavItem";const QV=f.forwardRef(({bsPrefix:A,className:g,as:e=iV,active:t,eventKey:I,disabled:n=!1,...C},l)=>{A=eg(A,"nav-link");const[s,i]=VV({key:zB(I,C.href),active:t,disabled:n,...C});return o.jsx(e,{...C,...s,ref:l,disabled:n,className:kA(g,A,n&&"disabled",i.isActive&&"active")})});QV.displayName="NavLink";const KV=f.forwardRef((A,g)=>{const{as:e="div",bsPrefix:t,variant:I,fill:n=!1,justify:C=!1,navbar:l,navbarScroll:s,className:i,activeKey:r,...c}=sk(A,{activeKey:"onSelect"}),d=eg(t,"nav");let h,Z,y=!1;const S=f.useContext(uV),b=f.useContext(aV);return S?(h=S.bsPrefix,y=l??!0):b&&({cardHeaderBsPrefix:Z}=b),o.jsx(dH,{as:e,ref:g,activeKey:r,className:kA(i,{[d]:!y,[`${h}-nav`]:y,[`${h}-nav-scroll`]:y&&s,[`${Z}-${I}`]:!!Z,[`${d}-${I}`]:!!I,[`${d}-fill`]:n,[`${d}-justified`]:C}),...c})});KV.displayName="Nav";const M=Object.assign(KV,{Item:YV,Link:QV}),or="/SmartparkingV2/assets/Cancel-T6G_4Hzv.png";function xH({onLogin:A}){const g=Ug(),[e,t]=f.useState(""),[I,n]=f.useState(""),[C,l]=f.useState(""),[s,i]=f.useState(!1),[r,c]=f.useState(!1),d=()=>{if(!e||!I){l("กรุณากรอกข้อมูลชื่อหรือเบอร์โทรศัทพ์ และรหัสผ่านให้ครบถ้วน"),c(!1),i(!0);return}const S=qF(e,I);S?(localStorage.setItem("loggedIn","true"),localStorage.setItem("userRole",S.role),localStorage.setItem("userName",S.username),localStorage.setItem("userPhone",S.phoneNumber),A(S.username,S.role),g((S.role==="Member","/home"))):(l("รหัสผ่านไม่ถูกต้อง โปรดตรวจสอบความถูกต้อง"),c(!1),i(!0))},h=()=>{g("/signup")},Z=()=>{g("/forgot-password")},y=()=>{i(!1),l("")};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box1",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo-image"})}),o.jsx("div",{className:"title",children:o.jsx("p",{children:"ลงชื่อเข้าสู่ระบบ"})}),o.jsxs("div",{className:"userlogin",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"text",value:e,onChange:S=>t(S.target.value),placeholder:"บัญชีผู้ใช้/เบอร์โทรศัพท์"})]}),o.jsxs("div",{className:"passlogin",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"password",value:I,onChange:S=>n(S.target.value),placeholder:"รหัสผ่าน"})]}),o.jsxs("div",{className:"forgot",children:[o.jsx("button",{className:"btn btn-light custom1-btn  btn-sm",onClick:Z,children:"ลืมรหัสผ่าน?"}),o.jsx("button",{className:"btn btn-light custom1-btn btn-sm",onClick:h,children:"ลงทะเบียน"})]}),o.jsx("button",{className:"btn custom-btn",onClick:d,children:"เข้าสู่ระบบ"}),o.jsx(j,{to:"https://access.line.me/oauth2/v2.1/login?returnUri=%2Foauth2%2Fv2.1%2Fauthorize%2Fconsent%3Fscope%3Dopenid%2Bprofile%2Bfriends%2Bgroups%2Btimeline.post%2Bmessage.write%26response_type%3Dcode%26redirect_uri%3Dhttps%253A%252F%252Fsocial-plugins.line.me%252Fwidget%252FloginCallback%253FreturnUrl%253Dhttps%25253A%25252F%25252Fsocial-plugins.line.me%25252Fwidget%25252Fclose%26state%3D9fec98665820574ebc349f47d089a6%26client_id%3D1446101138&loginChannelId=1446101138&fbclid=IwY2xjawGpKnFleHRuA2FlbQIxMAABHcPq1RU8nWQq28aBUZm1glnXQy06bIyLAUqmL4N6LfuTdeGde6nI7BjDaw_aem_H8ppgZcsQ2iyboos1SN31g#/",children:o.jsxs("button",{className:"btn custom2-btn",children:[o.jsx("i",{className:"bi bi-line",style:{marginRight:"8px",fontSize:"19px"}})," ","Login With LINE account"]})}),o.jsxs(ag,{show:s,onHide:y,centered:!0,className:"custom-modal",children:[o.jsx(ag.Header,{closeButton:!0,children:o.jsx(ag.Title,{className:"custom-title",children:"เกิดข้อผิดพลาด !"})}),o.jsxs(ag.Body,{className:"custom-body2",children:[o.jsx("img",{src:or,alt:"Error",style:{width:"30px",marginRight:"10px",marginTop:"-3px"}}),C]}),o.jsx(ag.Footer,{children:o.jsx(Vg,{variant:"btn custom3-btn",onClick:y,children:"ตกลง"})})]})]})}const ar="/SmartparkingV2/assets/Correct-C78LUoqK.png";function EH(){const A=Ug(),[g,e]=f.useState({fullName:"",userName:"",phoneNumber:"",password:"",confirmPassword:""}),[t,I]=f.useState(""),[n,C]=f.useState(!1),[l,s]=f.useState(!1),i=d=>{const{name:h,value:Z}=d.target;e(y=>({...y,[h]:Z}))},r=d=>{d.preventDefault();for(let Z in g)if(g[Z].trim()===""){I("กรุณากรอกข้อมูลให้ครบ"),s(!1),C(!0);return}if(g.password!==g.confirmPassword){I("รหัสผ่านไม่ตรงกัน"),s(!1),C(!0);return}$F(g.fullName,g.userName,g.phoneNumber,g.password)?(I("การลงทะเบียนเสร็จสิ้น! ยินดีต้อนรับ"),s(!0),C(!0),setTimeout(()=>A("/login"),5e3)):(I("ชื่อผู้ใช้หรือเบอร์โทรศัพท์นี้มีอยู่ในระบบแล้ว"),s(!1),C(!0))},c=()=>{C(!1),I("")};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box1",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo-image"})}),o.jsx("div",{className:"title",children:o.jsx("p",{children:"ลงทะเบียนเข้าใช้งาน"})}),o.jsxs("form",{onSubmit:r,children:[o.jsxs("div",{className:"user1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"text",name:"fullName",placeholder:"ชือ-นามสกุล",value:g.fullName,onChange:i})]}),o.jsxs("div",{className:"user1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"text",name:"userName",placeholder:"ชือบัญชีผู้ใช้",value:g.userName,onChange:i})]}),o.jsxs("div",{className:"user1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"text",placeholder:"เบอร์โทรศัพท์",name:"phoneNumber",value:g.phoneNumber,onChange:d=>{const Z=d.target.value.replace(/[^0-9]/g,"");Z.length<=10&&i({target:{name:"phoneNumber",value:Z}})}})]}),o.jsxs("div",{className:"pass1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"password",placeholder:"รหัสผ่าน",name:"password",value:g.password,onChange:i})]}),o.jsxs("div",{className:"pass1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"password",placeholder:"ยืนยันรหัสผ่าน",name:"confirmPassword",value:g.confirmPassword,onChange:i})]}),o.jsx("button",{type:"submit",className:"btn custom11-btn",children:"ลงทะเบียน"})]}),o.jsxs(ag,{show:n,onHide:c,centered:!0,className:"custom-modal",children:[o.jsx(ag.Header,{closeButton:!0,children:o.jsx(ag.Title,{className:"custom-title",children:"การแจ้งเตือน"})}),o.jsxs(ag.Body,{className:"custom-body2",children:[o.jsx("img",{src:l?ar:or,alt:l?"Success":"Error",style:{width:"30px",marginRight:"10px",marginTop:"1px"}}),t]}),o.jsx(ag.Footer,{children:o.jsx(Vg,{variant:"btn custom3-btn",onClick:c,children:"ตกลง"})})]})]})}function LH(){const A=Ug(),[g,e]=f.useState(""),[t,I]=f.useState(!1),[n,C]=f.useState(!1),l=m=>{const G=Math.floor(1e5+Math.random()*9e5).toString();localStorage.setItem("otp",G),localStorage.setItem("otpPhoneNumber",m),e(`OTP ของคุณคือ: ${G}`),C(!0),I(!0)},s=(m,G)=>{const V=localStorage.getItem("otp"),W=localStorage.getItem("otpPhoneNumber");return V&&W===m&&V===G?(localStorage.setItem("verifiedPhoneNumber",m),e("ยืนยัน OTP สำเร็จ!"),C(!0),I(!0),!0):(e("OTP ไม่ถูกต้อง หรือเบอร์โทรศัพท์ไม่ตรงกัน"),C(!1),I(!0),!1)},[i,r]=f.useState(""),[c,d]=f.useState(""),[h,Z]=f.useState(!1),y=()=>{if(!i){e("กรุณากรอกเบอร์โทรศัพท์"),C(!1),I(!0);return}if(i.length<6){e("กรอกเบอร์โทรศัพท์ให้ถูกต้อง"),C(!1),I(!0);return}l(i),Z(!0)},S=()=>{if(!c){e("กรุณากรอกรหัส OTP"),C(!1),I(!0);return}s(i,c)&&(I(!0),setTimeout(()=>{I(!1),A("/forgot-password/resetpass")},3e3))},b=()=>{I(!1),e("")};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box1",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo-image"})}),o.jsx("div",{className:"title",children:o.jsx("p",{children:"กู้คืนรหัสผ่าน"})}),o.jsxs("div",{className:"user1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",value:i,placeholder:"เบอร์โทรศัพท์",type:"text",inputMode:"numeric",onChange:m=>r(m.target.value.replace(/[^0-9]/g,""))})]}),o.jsx("div",{className:"otp",children:o.jsx("button",{className:"btn custom33-btn",onClick:y,children:"ส่ง OTP"})}),o.jsxs("div",{className:"pass1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"text",inputMode:"numeric",placeholder:"OTP",value:c,onChange:m=>d(m.target.value.replace(/[^0-9]/g,""))})]}),o.jsx("button",{className:"btn custom11-btn",onClick:S,children:"ต่อไป"}),o.jsxs(ag,{show:t,onHide:b,centered:!0,className:"custom-modal",children:[o.jsx(ag.Header,{closeButton:!0,children:o.jsx(ag.Title,{className:"custom-title",children:"การแจ้งเตือน"})}),o.jsxs(ag.Body,{className:"custom-body2",children:[o.jsx("img",{src:n?ar:or,alt:n?"Success":"Error",style:{width:"30px",marginRight:"10px",marginTop:"-1px"}}),g]}),o.jsx(ag.Footer,{children:o.jsx(Vg,{variant:"btn custom3-btn",onClick:b,children:"ตกลง"})})]})]})}const qe="/SmartparkingV2/assets/Metthier%20Master%20Logo-xZcuOxPh.png";function MH(){const A=Ug(),[g,e]=f.useState(""),[t,I]=f.useState(""),n=localStorage.getItem("verifiedPhoneNumber"),[C,l]=f.useState(""),[s,i]=f.useState(!1),[r,c]=f.useState(!1),d=()=>{if(!g||!t){l("กรุณากรอกข้อมูลให้ครบ"),c(!1),i(!0);return}if(g!==t){l("รหัสผ่านไม่ตรงกัน"),c(!1),i(!0);return}n?tk(n,g)?(l("รีเซ็ตรหัสผ่านสำเร็จ!"),c(!0),i(!0),setTimeout(()=>{localStorage.removeItem("verifiedPhoneNumber"),A("/login")},3e3)):(l(`เกิดข้อผิดพลาดในการรีเซ็ตรหัสผ่าน 
 ไม่พบหมายเลขโทรศัพท์ในระบบที่ยืนยัน`),c(!1),i(!0)):(l("ไม่พบหมายเลขโทรศัพท์ที่ยืนยัน"),c(!1),i(!0))},h=()=>{i(!1),l("")};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box1",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo-image"})}),o.jsx("div",{className:"title",children:o.jsx("p",{children:"กู้คืนรหัสผ่าน"})}),o.jsxs("div",{className:"user1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"password",placeholder:"รหัสผ่านใหม่",value:g,onChange:Z=>e(Z.target.value)})]}),o.jsxs("div",{className:"pass1",children:[o.jsx("label",{}),o.jsx("input",{className:"form-control","aria-label":"default input example",type:"password",placeholder:"ยืนยันรหัสผ่าน",value:t,onChange:Z=>I(Z.target.value)})]}),o.jsx("button",{className:"btn custom11-btn",onClick:d,children:"รีเช็ทรหัสผ่านใหม่"}),o.jsxs(ag,{show:s,onHide:h,centered:!0,className:"custom-modal",children:[o.jsx(ag.Header,{closeButton:!0,children:o.jsx(ag.Title,{className:"custom-title",children:"การแจ้งเตือน"})}),o.jsxs(ag.Body,{className:"custom-body2",children:[o.jsx("img",{src:r?ar:or,alt:r?"Success":"Error",style:{width:"30px",marginRight:"15px",marginTop:"1px",whiteSpace:"pre-line"}}),C]}),o.jsx(ag.Footer,{children:o.jsx(Vg,{variant:"btn custom3-btn",onClick:h,children:"ตกลง"})})]})]})}/*!
 * Font Awesome Free 6.7.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Ie={prefix:"fas",iconName:"building-circle-check",icon:[640,512,[],"e4d2","M48 0C21.5 0 0 21.5 0 48L0 464c0 26.5 21.5 48 48 48l96 0 0-80c0-26.5 21.5-48 48-48s48 21.5 48 48l0 80 96 0c15.1 0 28.5-6.9 37.3-17.8C340.4 462.2 320 417.5 320 368c0-54.7 24.9-103.5 64-135.8L384 48c0-26.5-21.5-48-48-48L48 0zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm112-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM80 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM272 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM640 368a144 144 0 1 0 -288 0 144 144 0 1 0 288 0zm-76.7-43.3c6.2 6.2 6.2 16.4 0 22.6l-72 72c-6.2 6.2-16.4 6.2-22.6 0l-40-40c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L480 385.4l60.7-60.7c6.2-6.2 16.4-6.2 22.6 0z"]},ne={prefix:"fas",iconName:"address-card",icon:[576,512,[62140,"contact-card","vcard"],"f2bb","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 256l64 0c44.2 0 80 35.8 80 80c0 8.8-7.2 16-16 16L80 384c-8.8 0-16-7.2-16-16c0-44.2 35.8-80 80-80zm-32-96a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zm256-32l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]};var NV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},xZ=rg.createContext&&rg.createContext(NV),DH=["attr","size","title"];function zH(A,g){if(A==null)return{};var e=TH(A,g),t,I;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);for(I=0;I<n.length;I++)t=n[I],!(g.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(A,t)&&(e[t]=A[t])}return e}function TH(A,g){if(A==null)return{};var e={};for(var t in A)if(Object.prototype.hasOwnProperty.call(A,t)){if(g.indexOf(t)>=0)continue;e[t]=A[t]}return e}function pa(){return pa=Object.assign?Object.assign.bind():function(A){for(var g=1;g<arguments.length;g++){var e=arguments[g];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])}return A},pa.apply(this,arguments)}function EZ(A,g){var e=Object.keys(A);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(A);g&&(t=t.filter(function(I){return Object.getOwnPropertyDescriptor(A,I).enumerable})),e.push.apply(e,t)}return e}function Ga(A){for(var g=1;g<arguments.length;g++){var e=arguments[g]!=null?arguments[g]:{};g%2?EZ(Object(e),!0).forEach(function(t){jH(A,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(e)):EZ(Object(e)).forEach(function(t){Object.defineProperty(A,t,Object.getOwnPropertyDescriptor(e,t))})}return A}function jH(A,g,e){return g=OH(g),g in A?Object.defineProperty(A,g,{value:e,enumerable:!0,configurable:!0,writable:!0}):A[g]=e,A}function OH(A){var g=PH(A,"string");return typeof g=="symbol"?g:g+""}function PH(A,g){if(typeof A!="object"||!A)return A;var e=A[Symbol.toPrimitive];if(e!==void 0){var t=e.call(A,g||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(A)}function UV(A){return A&&A.map((g,e)=>rg.createElement(g.tag,Ga({key:e},g.attr),UV(g.child)))}function $C(A){return g=>rg.createElement(_H,pa({attr:Ga({},A.attr)},g),UV(A.child))}function _H(A){var g=e=>{var{attr:t,size:I,title:n}=A,C=zH(A,DH),l=I||e.size||"1em",s;return e.className&&(s=e.className),A.className&&(s=(s?s+" ":"")+A.className),rg.createElement("svg",pa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,t,C,{className:s,style:Ga(Ga({color:A.color||e.color},e.style),A.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),n&&rg.createElement("title",null,n),A.children)};return xZ!==void 0?rg.createElement(xZ.Consumer,null,e=>g(e)):g(NV)}function qH(A){return $C({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"},child:[]}]})(A)}function $H(A){return $C({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"},child:[]}]})(A)}function xV(A){return $C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(A)}function jg(A){return $C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(A)}/*!
 * Font Awesome Free 6.7.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function AY(A,g,e){return(g=eY(g))in A?Object.defineProperty(A,g,{value:e,enumerable:!0,configurable:!0,writable:!0}):A[g]=e,A}function LZ(A,g){var e=Object.keys(A);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(A);g&&(t=t.filter(function(I){return Object.getOwnPropertyDescriptor(A,I).enumerable})),e.push.apply(e,t)}return e}function N(A){for(var g=1;g<arguments.length;g++){var e=arguments[g]!=null?arguments[g]:{};g%2?LZ(Object(e),!0).forEach(function(t){AY(A,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(e)):LZ(Object(e)).forEach(function(t){Object.defineProperty(A,t,Object.getOwnPropertyDescriptor(e,t))})}return A}function gY(A,g){if(typeof A!="object"||!A)return A;var e=A[Symbol.toPrimitive];if(e!==void 0){var t=e.call(A,g||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(A)}function eY(A){var g=gY(A,"string");return typeof g=="symbol"?g:g+""}const MZ=()=>{};let Ah={},EV={},LV=null,MV={mark:MZ,measure:MZ};try{typeof window<"u"&&(Ah=window),typeof document<"u"&&(EV=document),typeof MutationObserver<"u"&&(LV=MutationObserver),typeof performance<"u"&&(MV=performance)}catch{}const{userAgent:DZ=""}=Ah.navigator||{},JI=Ah,DA=EV,zZ=LV,Yi=MV;JI.document;const Tt=!!DA.documentElement&&!!DA.head&&typeof DA.addEventListener=="function"&&typeof DA.createElement=="function",DV=~DZ.indexOf("MSIE")||~DZ.indexOf("Trident/");var tY=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,IY=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,zV={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},nY={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},TV=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Ng="classic",rr="duotone",CY="sharp",lY="sharp-duotone",jV=[Ng,rr,CY,lY],sY={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},iY={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},oY=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),aY={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},rY=["fak","fa-kit","fakd","fa-kit-duotone"],TZ={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},cY=["kit"],dY={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},uY=["fak","fakd"],mY={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},jZ={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Qi={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},BY=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],hY=["fak","fa-kit","fakd","fa-kit-duotone"],bY={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},ZY={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},pY={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},Du={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},GY=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],zu=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...BY,...GY],yY=["solid","regular","light","thin","duotone","brands"],OV=[1,2,3,4,5,6,7,8,9,10],fY=OV.concat([11,12,13,14,15,16,17,18,19,20]),SY=[...Object.keys(pY),...yY,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Qi.GROUP,Qi.SWAP_OPACITY,Qi.PRIMARY,Qi.SECONDARY].concat(OV.map(A=>"".concat(A,"x"))).concat(fY.map(A=>"w-".concat(A))),VY={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Et="___FONT_AWESOME___",Tu=16,PV="fa",_V="svg-inline--fa",Xn="data-fa-i2svg",ju="data-fa-pseudo-element",WY="data-fa-pseudo-element-pending",gh="data-prefix",eh="data-icon",OZ="fontawesome-i2svg",RY="async",vY=["HTML","HEAD","STYLE","SCRIPT"],qV=(()=>{try{return!0}catch{return!1}})();function Ls(A){return new Proxy(A,{get(g,e){return e in g?g[e]:g[Ng]}})}const $V=N({},zV);$V[Ng]=N(N(N(N({},{"fa-duotone":"duotone"}),zV[Ng]),TZ.kit),TZ["kit-duotone"]);const wY=Ls($V),Ou=N({},aY);Ou[Ng]=N(N(N(N({},{duotone:"fad"}),Ou[Ng]),jZ.kit),jZ["kit-duotone"]);const PZ=Ls(Ou),Pu=N({},Du);Pu[Ng]=N(N({},Pu[Ng]),mY.kit);const th=Ls(Pu),_u=N({},ZY);_u[Ng]=N(N({},_u[Ng]),dY.kit);Ls(_u);const XY=tY,AW="fa-layers-text",JY=IY,FY=N({},sY);Ls(FY);const kY=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Id=nY,HY=[...cY,...SY],_l=JI.FontAwesomeConfig||{};function YY(A){var g=DA.querySelector("script["+A+"]");if(g)return g.getAttribute(A)}function QY(A){return A===""?!0:A==="false"?!1:A==="true"?!0:A}DA&&typeof DA.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(g=>{let[e,t]=g;const I=QY(YY(e));I!=null&&(_l[t]=I)});const gW={styleDefault:"solid",familyDefault:Ng,cssPrefix:PV,replacementClass:_V,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_l.familyPrefix&&(_l.cssPrefix=_l.familyPrefix);const LC=N(N({},gW),_l);LC.autoReplaceSvg||(LC.observeMutations=!1);const q={};Object.keys(gW).forEach(A=>{Object.defineProperty(q,A,{enumerable:!0,set:function(g){LC[A]=g,ql.forEach(e=>e(q))},get:function(){return LC[A]}})});Object.defineProperty(q,"familyPrefix",{enumerable:!0,set:function(A){LC.cssPrefix=A,ql.forEach(g=>g(q))},get:function(){return LC.cssPrefix}});JI.FontAwesomeConfig=q;const ql=[];function KY(A){return ql.push(A),()=>{ql.splice(ql.indexOf(A),1)}}const $t=Tu,ct={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function NY(A){if(!A||!Tt)return;const g=DA.createElement("style");g.setAttribute("type","text/css"),g.innerHTML=A;const e=DA.head.childNodes;let t=null;for(let I=e.length-1;I>-1;I--){const n=e[I],C=(n.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(C)>-1&&(t=n)}return DA.head.insertBefore(g,t),A}const UY="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ws(){let A=12,g="";for(;A-- >0;)g+=UY[Math.random()*62|0];return g}function Al(A){const g=[];for(let e=(A||[]).length>>>0;e--;)g[e]=A[e];return g}function Ih(A){return A.classList?Al(A.classList):(A.getAttribute("class")||"").split(" ").filter(g=>g)}function eW(A){return"".concat(A).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xY(A){return Object.keys(A||{}).reduce((g,e)=>g+"".concat(e,'="').concat(eW(A[e]),'" '),"").trim()}function cr(A){return Object.keys(A||{}).reduce((g,e)=>g+"".concat(e,": ").concat(A[e].trim(),";"),"")}function nh(A){return A.size!==ct.size||A.x!==ct.x||A.y!==ct.y||A.rotate!==ct.rotate||A.flipX||A.flipY}function EY(A){let{transform:g,containerWidth:e,iconWidth:t}=A;const I={transform:"translate(".concat(e/2," 256)")},n="translate(".concat(g.x*32,", ").concat(g.y*32,") "),C="scale(".concat(g.size/16*(g.flipX?-1:1),", ").concat(g.size/16*(g.flipY?-1:1),") "),l="rotate(".concat(g.rotate," 0 0)"),s={transform:"".concat(n," ").concat(C," ").concat(l)},i={transform:"translate(".concat(t/2*-1," -256)")};return{outer:I,inner:s,path:i}}function LY(A){let{transform:g,width:e=Tu,height:t=Tu,startCentered:I=!1}=A,n="";return I&&DV?n+="translate(".concat(g.x/$t-e/2,"em, ").concat(g.y/$t-t/2,"em) "):I?n+="translate(calc(-50% + ".concat(g.x/$t,"em), calc(-50% + ").concat(g.y/$t,"em)) "):n+="translate(".concat(g.x/$t,"em, ").concat(g.y/$t,"em) "),n+="scale(".concat(g.size/$t*(g.flipX?-1:1),", ").concat(g.size/$t*(g.flipY?-1:1),") "),n+="rotate(".concat(g.rotate,"deg) "),n}var MY=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function tW(){const A=PV,g=_V,e=q.cssPrefix,t=q.replacementClass;let I=MY;if(e!==A||t!==g){const n=new RegExp("\\.".concat(A,"\\-"),"g"),C=new RegExp("\\--".concat(A,"\\-"),"g"),l=new RegExp("\\.".concat(g),"g");I=I.replace(n,".".concat(e,"-")).replace(C,"--".concat(e,"-")).replace(l,".".concat(t))}return I}let _Z=!1;function nd(){q.autoAddCss&&!_Z&&(NY(tW()),_Z=!0)}var DY={mixout(){return{dom:{css:tW,insertCss:nd}}},hooks(){return{beforeDOMElementCreation(){nd()},beforeI2svg(){nd()}}}};const Lt=JI||{};Lt[Et]||(Lt[Et]={});Lt[Et].styles||(Lt[Et].styles={});Lt[Et].hooks||(Lt[Et].hooks={});Lt[Et].shims||(Lt[Et].shims=[]);var dt=Lt[Et];const IW=[],nW=function(){DA.removeEventListener("DOMContentLoaded",nW),ya=1,IW.map(A=>A())};let ya=!1;Tt&&(ya=(DA.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DA.readyState),ya||DA.addEventListener("DOMContentLoaded",nW));function zY(A){Tt&&(ya?setTimeout(A,0):IW.push(A))}function Ms(A){const{tag:g,attributes:e={},children:t=[]}=A;return typeof A=="string"?eW(A):"<".concat(g," ").concat(xY(e),">").concat(t.map(Ms).join(""),"</").concat(g,">")}function qZ(A,g,e){if(A&&A[g]&&A[g][e])return{prefix:g,iconName:e,icon:A[g][e]}}var Cd=function(g,e,t,I){var n=Object.keys(g),C=n.length,l=e,s,i,r;for(t===void 0?(s=1,r=g[n[0]]):(s=0,r=t);s<C;s++)i=n[s],r=l(r,g[i],i,g);return r};function TY(A){const g=[];let e=0;const t=A.length;for(;e<t;){const I=A.charCodeAt(e++);if(I>=55296&&I<=56319&&e<t){const n=A.charCodeAt(e++);(n&64512)==56320?g.push(((I&1023)<<10)+(n&1023)+65536):(g.push(I),e--)}else g.push(I)}return g}function qu(A){const g=TY(A);return g.length===1?g[0].toString(16):null}function jY(A,g){const e=A.length;let t=A.charCodeAt(g),I;return t>=55296&&t<=56319&&e>g+1&&(I=A.charCodeAt(g+1),I>=56320&&I<=57343)?(t-55296)*1024+I-56320+65536:t}function $Z(A){return Object.keys(A).reduce((g,e)=>{const t=A[e];return!!t.icon?g[t.iconName]=t.icon:g[e]=t,g},{})}function $u(A,g){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:t=!1}=e,I=$Z(g);typeof dt.hooks.addPack=="function"&&!t?dt.hooks.addPack(A,$Z(g)):dt.styles[A]=N(N({},dt.styles[A]||{}),I),A==="fas"&&$u("fa",g)}const{styles:Rs,shims:OY}=dt,CW=Object.keys(th),PY=CW.reduce((A,g)=>(A[g]=Object.keys(th[g]),A),{});let Ch=null,lW={},sW={},iW={},oW={},aW={};function _Y(A){return~HY.indexOf(A)}function qY(A,g){const e=g.split("-"),t=e[0],I=e.slice(1).join("-");return t===A&&I!==""&&!_Y(I)?I:null}const rW=()=>{const A=t=>Cd(Rs,(I,n,C)=>(I[C]=Cd(n,t,{}),I),{});lW=A((t,I,n)=>(I[3]&&(t[I[3]]=n),I[2]&&I[2].filter(l=>typeof l=="number").forEach(l=>{t[l.toString(16)]=n}),t)),sW=A((t,I,n)=>(t[n]=n,I[2]&&I[2].filter(l=>typeof l=="string").forEach(l=>{t[l]=n}),t)),aW=A((t,I,n)=>{const C=I[2];return t[n]=n,C.forEach(l=>{t[l]=n}),t});const g="far"in Rs||q.autoFetchSvg,e=Cd(OY,(t,I)=>{const n=I[0];let C=I[1];const l=I[2];return C==="far"&&!g&&(C="fas"),typeof n=="string"&&(t.names[n]={prefix:C,iconName:l}),typeof n=="number"&&(t.unicodes[n.toString(16)]={prefix:C,iconName:l}),t},{names:{},unicodes:{}});iW=e.names,oW=e.unicodes,Ch=dr(q.styleDefault,{family:q.familyDefault})};KY(A=>{Ch=dr(A.styleDefault,{family:q.familyDefault})});rW();function lh(A,g){return(lW[A]||{})[g]}function $Y(A,g){return(sW[A]||{})[g]}function mn(A,g){return(aW[A]||{})[g]}function cW(A){return iW[A]||{prefix:null,iconName:null}}function AQ(A){const g=oW[A],e=lh("fas",A);return g||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}function FI(){return Ch}const dW=()=>({prefix:null,iconName:null,rest:[]});function gQ(A){let g=Ng;const e=CW.reduce((t,I)=>(t[I]="".concat(q.cssPrefix,"-").concat(I),t),{});return jV.forEach(t=>{(A.includes(e[t])||A.some(I=>PY[t].includes(I)))&&(g=t)}),g}function dr(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:e=Ng}=g,t=wY[e][A];if(e===rr&&!A)return"fad";const I=PZ[e][A]||PZ[e][t],n=A in dt.styles?A:null;return I||n||null}function eQ(A){let g=[],e=null;return A.forEach(t=>{const I=qY(q.cssPrefix,t);I?e=I:t&&g.push(t)}),{iconName:e,rest:g}}function Ap(A){return A.sort().filter((g,e,t)=>t.indexOf(g)===e)}function ur(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:e=!1}=g;let t=null;const I=zu.concat(hY),n=Ap(A.filter(c=>I.includes(c))),C=Ap(A.filter(c=>!zu.includes(c))),l=n.filter(c=>(t=c,!TV.includes(c))),[s=null]=l,i=gQ(n),r=N(N({},eQ(C)),{},{prefix:dr(s,{family:i})});return N(N(N({},r),CQ({values:A,family:i,styles:Rs,config:q,canonical:r,givenPrefix:t})),tQ(e,t,r))}function tQ(A,g,e){let{prefix:t,iconName:I}=e;if(A||!t||!I)return{prefix:t,iconName:I};const n=g==="fa"?cW(I):{},C=mn(t,I);return I=n.iconName||C||I,t=n.prefix||t,t==="far"&&!Rs.far&&Rs.fas&&!q.autoFetchSvg&&(t="fas"),{prefix:t,iconName:I}}const IQ=jV.filter(A=>A!==Ng||A!==rr),nQ=Object.keys(Du).filter(A=>A!==Ng).map(A=>Object.keys(Du[A])).flat();function CQ(A){const{values:g,family:e,canonical:t,givenPrefix:I="",styles:n={},config:C={}}=A,l=e===rr,s=g.includes("fa-duotone")||g.includes("fad"),i=C.familyDefault==="duotone",r=t.prefix==="fad"||t.prefix==="fa-duotone";if(!l&&(s||i||r)&&(t.prefix="fad"),(g.includes("fa-brands")||g.includes("fab"))&&(t.prefix="fab"),!t.prefix&&IQ.includes(e)&&(Object.keys(n).find(d=>nQ.includes(d))||C.autoFetchSvg)){const d=oY.get(e).defaultShortPrefixId;t.prefix=d,t.iconName=mn(t.prefix,t.iconName)||t.iconName}return(t.prefix==="fa"||I==="fa")&&(t.prefix=FI()||"fas"),t}class lQ{constructor(){this.definitions={}}add(){for(var g=arguments.length,e=new Array(g),t=0;t<g;t++)e[t]=arguments[t];const I=e.reduce(this._pullDefinitions,{});Object.keys(I).forEach(n=>{this.definitions[n]=N(N({},this.definitions[n]||{}),I[n]),$u(n,I[n]);const C=th[Ng][n];C&&$u(C,I[n]),rW()})}reset(){this.definitions={}}_pullDefinitions(g,e){const t=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(t).map(I=>{const{prefix:n,iconName:C,icon:l}=t[I],s=l[2];g[n]||(g[n]={}),s.length>0&&s.forEach(i=>{typeof i=="string"&&(g[n][i]=l)}),g[n][C]=l}),g}}let gp=[],fC={};const FC={},sQ=Object.keys(FC);function iQ(A,g){let{mixoutsTo:e}=g;return gp=A,fC={},Object.keys(FC).forEach(t=>{sQ.indexOf(t)===-1&&delete FC[t]}),gp.forEach(t=>{const I=t.mixout?t.mixout():{};if(Object.keys(I).forEach(n=>{typeof I[n]=="function"&&(e[n]=I[n]),typeof I[n]=="object"&&Object.keys(I[n]).forEach(C=>{e[n]||(e[n]={}),e[n][C]=I[n][C]})}),t.hooks){const n=t.hooks();Object.keys(n).forEach(C=>{fC[C]||(fC[C]=[]),fC[C].push(n[C])})}t.provides&&t.provides(FC)}),e}function Am(A,g){for(var e=arguments.length,t=new Array(e>2?e-2:0),I=2;I<e;I++)t[I-2]=arguments[I];return(fC[A]||[]).forEach(C=>{g=C.apply(null,[g,...t])}),g}function Jn(A){for(var g=arguments.length,e=new Array(g>1?g-1:0),t=1;t<g;t++)e[t-1]=arguments[t];(fC[A]||[]).forEach(n=>{n.apply(null,e)})}function kI(){const A=arguments[0],g=Array.prototype.slice.call(arguments,1);return FC[A]?FC[A].apply(null,g):void 0}function gm(A){A.prefix==="fa"&&(A.prefix="fas");let{iconName:g}=A;const e=A.prefix||FI();if(g)return g=mn(e,g)||g,qZ(uW.definitions,e,g)||qZ(dt.styles,e,g)}const uW=new lQ,oQ=()=>{q.autoReplaceSvg=!1,q.observeMutations=!1,Jn("noAuto")},aQ={i2svg:function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Tt?(Jn("beforeI2svg",A),kI("pseudoElements2svg",A),kI("i2svg",A)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:g}=A;q.autoReplaceSvg===!1&&(q.autoReplaceSvg=!0),q.observeMutations=!0,zY(()=>{cQ({autoReplaceSvgRoot:g}),Jn("watch",A)})}},rQ={icon:A=>{if(A===null)return null;if(typeof A=="object"&&A.prefix&&A.iconName)return{prefix:A.prefix,iconName:mn(A.prefix,A.iconName)||A.iconName};if(Array.isArray(A)&&A.length===2){const g=A[1].indexOf("fa-")===0?A[1].slice(3):A[1],e=dr(A[0]);return{prefix:e,iconName:mn(e,g)||g}}if(typeof A=="string"&&(A.indexOf("".concat(q.cssPrefix,"-"))>-1||A.match(XY))){const g=ur(A.split(" "),{skipLookups:!0});return{prefix:g.prefix||FI(),iconName:mn(g.prefix,g.iconName)||g.iconName}}if(typeof A=="string"){const g=FI();return{prefix:g,iconName:mn(g,A)||A}}}},be={noAuto:oQ,config:q,dom:aQ,parse:rQ,library:uW,findIconDefinition:gm,toHtml:Ms},cQ=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:g=DA}=A;(Object.keys(dt.styles).length>0||q.autoFetchSvg)&&Tt&&q.autoReplaceSvg&&be.dom.i2svg({node:g})};function mr(A,g){return Object.defineProperty(A,"abstract",{get:g}),Object.defineProperty(A,"html",{get:function(){return A.abstract.map(e=>Ms(e))}}),Object.defineProperty(A,"node",{get:function(){if(!Tt)return;const e=DA.createElement("div");return e.innerHTML=A.html,e.children}}),A}function dQ(A){let{children:g,main:e,mask:t,attributes:I,styles:n,transform:C}=A;if(nh(C)&&e.found&&!t.found){const{width:l,height:s}=e,i={x:l/s/2,y:.5};I.style=cr(N(N({},n),{},{"transform-origin":"".concat(i.x+C.x/16,"em ").concat(i.y+C.y/16,"em")}))}return[{tag:"svg",attributes:I,children:g}]}function uQ(A){let{prefix:g,iconName:e,children:t,attributes:I,symbol:n}=A;const C=n===!0?"".concat(g,"-").concat(q.cssPrefix,"-").concat(e):n;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:N(N({},I),{},{id:C}),children:t}]}]}function sh(A){const{icons:{main:g,mask:e},prefix:t,iconName:I,transform:n,symbol:C,title:l,maskId:s,titleId:i,extra:r,watchable:c=!1}=A,{width:d,height:h}=e.found?e:g,Z=uY.includes(t),y=[q.replacementClass,I?"".concat(q.cssPrefix,"-").concat(I):""].filter(W=>r.classes.indexOf(W)===-1).filter(W=>W!==""||!!W).concat(r.classes).join(" ");let S={children:[],attributes:N(N({},r.attributes),{},{"data-prefix":t,"data-icon":I,class:y,role:r.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d," ").concat(h)})};const b=Z&&!~r.classes.indexOf("fa-fw")?{width:"".concat(d/h*16*.0625,"em")}:{};c&&(S.attributes[Xn]=""),l&&(S.children.push({tag:"title",attributes:{id:S.attributes["aria-labelledby"]||"title-".concat(i||Ws())},children:[l]}),delete S.attributes.title);const m=N(N({},S),{},{prefix:t,iconName:I,main:g,mask:e,maskId:s,transform:n,symbol:C,styles:N(N({},b),r.styles)}),{children:G,attributes:V}=e.found&&g.found?kI("generateAbstractMask",m)||{children:[],attributes:{}}:kI("generateAbstractIcon",m)||{children:[],attributes:{}};return m.children=G,m.attributes=V,C?uQ(m):dQ(m)}function ep(A){const{content:g,width:e,height:t,transform:I,title:n,extra:C,watchable:l=!1}=A,s=N(N(N({},C.attributes),n?{title:n}:{}),{},{class:C.classes.join(" ")});l&&(s[Xn]="");const i=N({},C.styles);nh(I)&&(i.transform=LY({transform:I,startCentered:!0,width:e,height:t}),i["-webkit-transform"]=i.transform);const r=cr(i);r.length>0&&(s.style=r);const c=[];return c.push({tag:"span",attributes:s,children:[g]}),n&&c.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),c}function mQ(A){const{content:g,title:e,extra:t}=A,I=N(N(N({},t.attributes),e?{title:e}:{}),{},{class:t.classes.join(" ")}),n=cr(t.styles);n.length>0&&(I.style=n);const C=[];return C.push({tag:"span",attributes:I,children:[g]}),e&&C.push({tag:"span",attributes:{class:"sr-only"},children:[e]}),C}const{styles:ld}=dt;function em(A){const g=A[0],e=A[1],[t]=A.slice(4);let I=null;return Array.isArray(t)?I={tag:"g",attributes:{class:"".concat(q.cssPrefix,"-").concat(Id.GROUP)},children:[{tag:"path",attributes:{class:"".concat(q.cssPrefix,"-").concat(Id.SECONDARY),fill:"currentColor",d:t[0]}},{tag:"path",attributes:{class:"".concat(q.cssPrefix,"-").concat(Id.PRIMARY),fill:"currentColor",d:t[1]}}]}:I={tag:"path",attributes:{fill:"currentColor",d:t}},{found:!0,width:g,height:e,icon:I}}const BQ={found:!1,width:512,height:512};function hQ(A,g){!qV&&!q.showMissingIcons&&A&&console.error('Icon with name "'.concat(A,'" and prefix "').concat(g,'" is missing.'))}function tm(A,g){let e=g;return g==="fa"&&q.styleDefault!==null&&(g=FI()),new Promise((t,I)=>{if(e==="fa"){const n=cW(A)||{};A=n.iconName||A,g=n.prefix||g}if(A&&g&&ld[g]&&ld[g][A]){const n=ld[g][A];return t(em(n))}hQ(A,g),t(N(N({},BQ),{},{icon:q.showMissingIcons&&A?kI("missingIconAbstract")||{}:{}}))})}const tp=()=>{},Im=q.measurePerformance&&Yi&&Yi.mark&&Yi.measure?Yi:{mark:tp,measure:tp},Jl='FA "6.7.0"',bQ=A=>(Im.mark("".concat(Jl," ").concat(A," begins")),()=>mW(A)),mW=A=>{Im.mark("".concat(Jl," ").concat(A," ends")),Im.measure("".concat(Jl," ").concat(A),"".concat(Jl," ").concat(A," begins"),"".concat(Jl," ").concat(A," ends"))};var ih={begin:bQ,end:mW};const ko=()=>{};function Ip(A){return typeof(A.getAttribute?A.getAttribute(Xn):null)=="string"}function ZQ(A){const g=A.getAttribute?A.getAttribute(gh):null,e=A.getAttribute?A.getAttribute(eh):null;return g&&e}function pQ(A){return A&&A.classList&&A.classList.contains&&A.classList.contains(q.replacementClass)}function GQ(){return q.autoReplaceSvg===!0?Ho.replace:Ho[q.autoReplaceSvg]||Ho.replace}function yQ(A){return DA.createElementNS("http://www.w3.org/2000/svg",A)}function fQ(A){return DA.createElement(A)}function BW(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:e=A.tag==="svg"?yQ:fQ}=g;if(typeof A=="string")return DA.createTextNode(A);const t=e(A.tag);return Object.keys(A.attributes||[]).forEach(function(n){t.setAttribute(n,A.attributes[n])}),(A.children||[]).forEach(function(n){t.appendChild(BW(n,{ceFn:e}))}),t}function SQ(A){let g=" ".concat(A.outerHTML," ");return g="".concat(g,"Font Awesome fontawesome.com "),g}const Ho={replace:function(A){const g=A[0];if(g.parentNode)if(A[1].forEach(e=>{g.parentNode.insertBefore(BW(e),g)}),g.getAttribute(Xn)===null&&q.keepOriginalSource){let e=DA.createComment(SQ(g));g.parentNode.replaceChild(e,g)}else g.remove()},nest:function(A){const g=A[0],e=A[1];if(~Ih(g).indexOf(q.replacementClass))return Ho.replace(A);const t=new RegExp("".concat(q.cssPrefix,"-.*"));if(delete e[0].attributes.id,e[0].attributes.class){const n=e[0].attributes.class.split(" ").reduce((C,l)=>(l===q.replacementClass||l.match(t)?C.toSvg.push(l):C.toNode.push(l),C),{toNode:[],toSvg:[]});e[0].attributes.class=n.toSvg.join(" "),n.toNode.length===0?g.removeAttribute("class"):g.setAttribute("class",n.toNode.join(" "))}const I=e.map(n=>Ms(n)).join(`
`);g.setAttribute(Xn,""),g.innerHTML=I}};function np(A){A()}function hW(A,g){const e=typeof g=="function"?g:ko;if(A.length===0)e();else{let t=np;q.mutateApproach===RY&&(t=JI.requestAnimationFrame||np),t(()=>{const I=GQ(),n=ih.begin("mutate");A.map(I),n(),e()})}}let oh=!1;function bW(){oh=!0}function nm(){oh=!1}let fa=null;function Cp(A){if(!zZ||!q.observeMutations)return;const{treeCallback:g=ko,nodeCallback:e=ko,pseudoElementsCallback:t=ko,observeMutationsRoot:I=DA}=A;fa=new zZ(n=>{if(oh)return;const C=FI();Al(n).forEach(l=>{if(l.type==="childList"&&l.addedNodes.length>0&&!Ip(l.addedNodes[0])&&(q.searchPseudoElements&&t(l.target),g(l.target)),l.type==="attributes"&&l.target.parentNode&&q.searchPseudoElements&&t(l.target.parentNode),l.type==="attributes"&&Ip(l.target)&&~kY.indexOf(l.attributeName))if(l.attributeName==="class"&&ZQ(l.target)){const{prefix:s,iconName:i}=ur(Ih(l.target));l.target.setAttribute(gh,s||C),i&&l.target.setAttribute(eh,i)}else pQ(l.target)&&e(l.target)})}),Tt&&fa.observe(I,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function VQ(){fa&&fa.disconnect()}function WQ(A){const g=A.getAttribute("style");let e=[];return g&&(e=g.split(";").reduce((t,I)=>{const n=I.split(":"),C=n[0],l=n.slice(1);return C&&l.length>0&&(t[C]=l.join(":").trim()),t},{})),e}function RQ(A){const g=A.getAttribute("data-prefix"),e=A.getAttribute("data-icon"),t=A.innerText!==void 0?A.innerText.trim():"";let I=ur(Ih(A));return I.prefix||(I.prefix=FI()),g&&e&&(I.prefix=g,I.iconName=e),I.iconName&&I.prefix||(I.prefix&&t.length>0&&(I.iconName=$Y(I.prefix,A.innerText)||lh(I.prefix,qu(A.innerText))),!I.iconName&&q.autoFetchSvg&&A.firstChild&&A.firstChild.nodeType===Node.TEXT_NODE&&(I.iconName=A.firstChild.data)),I}function vQ(A){const g=Al(A.attributes).reduce((I,n)=>(I.name!=="class"&&I.name!=="style"&&(I[n.name]=n.value),I),{}),e=A.getAttribute("title"),t=A.getAttribute("data-fa-title-id");return q.autoA11y&&(e?g["aria-labelledby"]="".concat(q.replacementClass,"-title-").concat(t||Ws()):(g["aria-hidden"]="true",g.focusable="false")),g}function wQ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ct,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function lp(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:e,prefix:t,rest:I}=RQ(A),n=vQ(A),C=Am("parseNodeAttributes",{},A);let l=g.styleParser?WQ(A):[];return N({iconName:e,title:A.getAttribute("title"),titleId:A.getAttribute("data-fa-title-id"),prefix:t,transform:ct,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:I,styles:l,attributes:n}},C)}const{styles:XQ}=dt;function ZW(A){const g=q.autoReplaceSvg==="nest"?lp(A,{styleParser:!1}):lp(A);return~g.extra.classes.indexOf(AW)?kI("generateLayersText",A,g):kI("generateSvgReplacementMutation",A,g)}function JQ(){return[...rY,...zu]}function sp(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Tt)return Promise.resolve();const e=DA.documentElement.classList,t=r=>e.add("".concat(OZ,"-").concat(r)),I=r=>e.remove("".concat(OZ,"-").concat(r)),n=q.autoFetchSvg?JQ():TV.concat(Object.keys(XQ));n.includes("fa")||n.push("fa");const C=[".".concat(AW,":not([").concat(Xn,"])")].concat(n.map(r=>".".concat(r,":not([").concat(Xn,"])"))).join(", ");if(C.length===0)return Promise.resolve();let l=[];try{l=Al(A.querySelectorAll(C))}catch{}if(l.length>0)t("pending"),I("complete");else return Promise.resolve();const s=ih.begin("onTree"),i=l.reduce((r,c)=>{try{const d=ZW(c);d&&r.push(d)}catch(d){qV||d.name==="MissingIcon"&&console.error(d)}return r},[]);return new Promise((r,c)=>{Promise.all(i).then(d=>{hW(d,()=>{t("active"),t("complete"),I("pending"),typeof g=="function"&&g(),s(),r()})}).catch(d=>{s(),c(d)})})}function FQ(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ZW(A).then(e=>{e&&hW([e],g)})}function kQ(A){return function(g){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=(g||{}).icon?g:gm(g||{});let{mask:I}=e;return I&&(I=(I||{}).icon?I:gm(I||{})),A(t,N(N({},e),{},{mask:I}))}}const HQ=function(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:e=ct,symbol:t=!1,mask:I=null,maskId:n=null,title:C=null,titleId:l=null,classes:s=[],attributes:i={},styles:r={}}=g;if(!A)return;const{prefix:c,iconName:d,icon:h}=A;return mr(N({type:"icon"},A),()=>(Jn("beforeDOMElementCreation",{iconDefinition:A,params:g}),q.autoA11y&&(C?i["aria-labelledby"]="".concat(q.replacementClass,"-title-").concat(l||Ws()):(i["aria-hidden"]="true",i.focusable="false")),sh({icons:{main:em(h),mask:I?em(I.icon):{found:!1,width:null,height:null,icon:{}}},prefix:c,iconName:d,transform:N(N({},ct),e),symbol:t,title:C,maskId:n,titleId:l,extra:{attributes:i,styles:r,classes:s}})))};var YQ={mixout(){return{icon:kQ(HQ)}},hooks(){return{mutationObserverCallbacks(A){return A.treeCallback=sp,A.nodeCallback=FQ,A}}},provides(A){A.i2svg=function(g){const{node:e=DA,callback:t=()=>{}}=g;return sp(e,t)},A.generateSvgReplacementMutation=function(g,e){const{iconName:t,title:I,titleId:n,prefix:C,transform:l,symbol:s,mask:i,maskId:r,extra:c}=e;return new Promise((d,h)=>{Promise.all([tm(t,C),i.iconName?tm(i.iconName,i.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(Z=>{let[y,S]=Z;d([g,sh({icons:{main:y,mask:S},prefix:C,iconName:t,transform:l,symbol:s,maskId:r,title:I,titleId:n,extra:c,watchable:!0})])}).catch(h)})},A.generateAbstractIcon=function(g){let{children:e,attributes:t,main:I,transform:n,styles:C}=g;const l=cr(C);l.length>0&&(t.style=l);let s;return nh(n)&&(s=kI("generateAbstractTransformGrouping",{main:I,transform:n,containerWidth:I.width,iconWidth:I.width})),e.push(s||I.icon),{children:e,attributes:t}}}},QQ={mixout(){return{layer(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:e=[]}=g;return mr({type:"layer"},()=>{Jn("beforeDOMElementCreation",{assembler:A,params:g});let t=[];return A(I=>{Array.isArray(I)?I.map(n=>{t=t.concat(n.abstract)}):t=t.concat(I.abstract)}),[{tag:"span",attributes:{class:["".concat(q.cssPrefix,"-layers"),...e].join(" ")},children:t}]})}}}},KQ={mixout(){return{counter(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:e=null,classes:t=[],attributes:I={},styles:n={}}=g;return mr({type:"counter",content:A},()=>(Jn("beforeDOMElementCreation",{content:A,params:g}),mQ({content:A.toString(),title:e,extra:{attributes:I,styles:n,classes:["".concat(q.cssPrefix,"-layers-counter"),...t]}})))}}}},NQ={mixout(){return{text(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:e=ct,title:t=null,classes:I=[],attributes:n={},styles:C={}}=g;return mr({type:"text",content:A},()=>(Jn("beforeDOMElementCreation",{content:A,params:g}),ep({content:A,transform:N(N({},ct),e),title:t,extra:{attributes:n,styles:C,classes:["".concat(q.cssPrefix,"-layers-text"),...I]}})))}}},provides(A){A.generateLayersText=function(g,e){const{title:t,transform:I,extra:n}=e;let C=null,l=null;if(DV){const s=parseInt(getComputedStyle(g).fontSize,10),i=g.getBoundingClientRect();C=i.width/s,l=i.height/s}return q.autoA11y&&!t&&(n.attributes["aria-hidden"]="true"),Promise.resolve([g,ep({content:g.innerHTML,width:C,height:l,transform:I,title:t,extra:n,watchable:!0})])}}};const UQ=new RegExp('"',"ug"),ip=[1105920,1112319],op=N(N(N(N({},{FontAwesome:{normal:"fas",400:"fas"}}),iY),VY),bY),Cm=Object.keys(op).reduce((A,g)=>(A[g.toLowerCase()]=op[g],A),{}),xQ=Object.keys(Cm).reduce((A,g)=>{const e=Cm[g];return A[g]=e[900]||[...Object.entries(e)][0][1],A},{});function EQ(A){const g=A.replace(UQ,""),e=jY(g,0),t=e>=ip[0]&&e<=ip[1],I=g.length===2?g[0]===g[1]:!1;return{value:qu(I?g[0]:g),isSecondary:t||I}}function LQ(A,g){const e=A.replace(/^['"]|['"]$/g,"").toLowerCase(),t=parseInt(g),I=isNaN(t)?"normal":t;return(Cm[e]||{})[I]||xQ[e]}function ap(A,g){const e="".concat(WY).concat(g.replace(":","-"));return new Promise((t,I)=>{if(A.getAttribute(e)!==null)return t();const C=Al(A.children).filter(d=>d.getAttribute(ju)===g)[0],l=JI.getComputedStyle(A,g),s=l.getPropertyValue("font-family"),i=s.match(JY),r=l.getPropertyValue("font-weight"),c=l.getPropertyValue("content");if(C&&!i)return A.removeChild(C),t();if(i&&c!=="none"&&c!==""){const d=l.getPropertyValue("content");let h=LQ(s,r);const{value:Z,isSecondary:y}=EQ(d),S=i[0].startsWith("FontAwesome");let b=lh(h,Z),m=b;if(S){const G=AQ(Z);G.iconName&&G.prefix&&(b=G.iconName,h=G.prefix)}if(b&&!y&&(!C||C.getAttribute(gh)!==h||C.getAttribute(eh)!==m)){A.setAttribute(e,m),C&&A.removeChild(C);const G=wQ(),{extra:V}=G;V.attributes[ju]=g,tm(b,h).then(W=>{const R=sh(N(N({},G),{},{icons:{main:W,mask:dW()},prefix:h,iconName:m,extra:V,watchable:!0})),X=DA.createElementNS("http://www.w3.org/2000/svg","svg");g==="::before"?A.insertBefore(X,A.firstChild):A.appendChild(X),X.outerHTML=R.map(F=>Ms(F)).join(`
`),A.removeAttribute(e),t()}).catch(I)}else t()}else t()})}function MQ(A){return Promise.all([ap(A,"::before"),ap(A,"::after")])}function DQ(A){return A.parentNode!==document.head&&!~vY.indexOf(A.tagName.toUpperCase())&&!A.getAttribute(ju)&&(!A.parentNode||A.parentNode.tagName!=="svg")}function rp(A){if(Tt)return new Promise((g,e)=>{const t=Al(A.querySelectorAll("*")).filter(DQ).map(MQ),I=ih.begin("searchPseudoElements");bW(),Promise.all(t).then(()=>{I(),nm(),g()}).catch(()=>{I(),nm(),e()})})}var zQ={hooks(){return{mutationObserverCallbacks(A){return A.pseudoElementsCallback=rp,A}}},provides(A){A.pseudoElements2svg=function(g){const{node:e=DA}=g;q.searchPseudoElements&&rp(e)}}};let cp=!1;var TQ={mixout(){return{dom:{unwatch(){bW(),cp=!0}}}},hooks(){return{bootstrap(){Cp(Am("mutationObserverCallbacks",{}))},noAuto(){VQ()},watch(A){const{observeMutationsRoot:g}=A;cp?nm():Cp(Am("mutationObserverCallbacks",{observeMutationsRoot:g}))}}}};const dp=A=>{let g={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return A.toLowerCase().split(" ").reduce((e,t)=>{const I=t.toLowerCase().split("-"),n=I[0];let C=I.slice(1).join("-");if(n&&C==="h")return e.flipX=!0,e;if(n&&C==="v")return e.flipY=!0,e;if(C=parseFloat(C),isNaN(C))return e;switch(n){case"grow":e.size=e.size+C;break;case"shrink":e.size=e.size-C;break;case"left":e.x=e.x-C;break;case"right":e.x=e.x+C;break;case"up":e.y=e.y-C;break;case"down":e.y=e.y+C;break;case"rotate":e.rotate=e.rotate+C;break}return e},g)};var jQ={mixout(){return{parse:{transform:A=>dp(A)}}},hooks(){return{parseNodeAttributes(A,g){const e=g.getAttribute("data-fa-transform");return e&&(A.transform=dp(e)),A}}},provides(A){A.generateAbstractTransformGrouping=function(g){let{main:e,transform:t,containerWidth:I,iconWidth:n}=g;const C={transform:"translate(".concat(I/2," 256)")},l="translate(".concat(t.x*32,", ").concat(t.y*32,") "),s="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),i="rotate(".concat(t.rotate," 0 0)"),r={transform:"".concat(l," ").concat(s," ").concat(i)},c={transform:"translate(".concat(n/2*-1," -256)")},d={outer:C,inner:r,path:c};return{tag:"g",attributes:N({},d.outer),children:[{tag:"g",attributes:N({},d.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:N(N({},e.icon.attributes),d.path)}]}]}}}};const sd={x:0,y:0,width:"100%",height:"100%"};function up(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return A.attributes&&(A.attributes.fill||g)&&(A.attributes.fill="black"),A}function OQ(A){return A.tag==="g"?A.children:[A]}var PQ={hooks(){return{parseNodeAttributes(A,g){const e=g.getAttribute("data-fa-mask"),t=e?ur(e.split(" ").map(I=>I.trim())):dW();return t.prefix||(t.prefix=FI()),A.mask=t,A.maskId=g.getAttribute("data-fa-mask-id"),A}}},provides(A){A.generateAbstractMask=function(g){let{children:e,attributes:t,main:I,mask:n,maskId:C,transform:l}=g;const{width:s,icon:i}=I,{width:r,icon:c}=n,d=EY({transform:l,containerWidth:r,iconWidth:s}),h={tag:"rect",attributes:N(N({},sd),{},{fill:"white"})},Z=i.children?{children:i.children.map(up)}:{},y={tag:"g",attributes:N({},d.inner),children:[up(N({tag:i.tag,attributes:N(N({},i.attributes),d.path)},Z))]},S={tag:"g",attributes:N({},d.outer),children:[y]},b="mask-".concat(C||Ws()),m="clip-".concat(C||Ws()),G={tag:"mask",attributes:N(N({},sd),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,S]},V={tag:"defs",children:[{tag:"clipPath",attributes:{id:m},children:OQ(c)},G]};return e.push(V,{tag:"rect",attributes:N({fill:"currentColor","clip-path":"url(#".concat(m,")"),mask:"url(#".concat(b,")")},sd)}),{children:e,attributes:t}}}},_Q={provides(A){let g=!1;JI.matchMedia&&(g=JI.matchMedia("(prefers-reduced-motion: reduce)").matches),A.missingIconAbstract=function(){const e=[],t={fill:"currentColor"},I={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:N(N({},t),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const n=N(N({},I),{},{attributeName:"opacity"}),C={tag:"circle",attributes:N(N({},t),{},{cx:"256",cy:"364",r:"28"}),children:[]};return g||C.children.push({tag:"animate",attributes:N(N({},I),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:N(N({},n),{},{values:"1;0;1;1;0;1;"})}),e.push(C),e.push({tag:"path",attributes:N(N({},t),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:g?[]:[{tag:"animate",attributes:N(N({},n),{},{values:"1;0;0;0;0;1;"})}]}),g||e.push({tag:"path",attributes:N(N({},t),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:N(N({},n),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},qQ={hooks(){return{parseNodeAttributes(A,g){const e=g.getAttribute("data-fa-symbol"),t=e===null?!1:e===""?!0:e;return A.symbol=t,A}}}},$Q=[DY,YQ,QQ,KQ,NQ,zQ,TQ,jQ,PQ,_Q,qQ];iQ($Q,{mixoutsTo:be});be.noAuto;be.config;be.library;be.dom;const lm=be.parse;be.findIconDefinition;be.toHtml;const AK=be.icon;be.layer;be.text;be.counter;function mp(A,g){var e=Object.keys(A);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(A);g&&(t=t.filter(function(I){return Object.getOwnPropertyDescriptor(A,I).enumerable})),e.push.apply(e,t)}return e}function at(A){for(var g=1;g<arguments.length;g++){var e=arguments[g]!=null?arguments[g]:{};g%2?mp(Object(e),!0).forEach(function(t){SC(A,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(e)):mp(Object(e)).forEach(function(t){Object.defineProperty(A,t,Object.getOwnPropertyDescriptor(e,t))})}return A}function Sa(A){"@babel/helpers - typeof";return Sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Sa(A)}function SC(A,g,e){return g in A?Object.defineProperty(A,g,{value:e,enumerable:!0,configurable:!0,writable:!0}):A[g]=e,A}function gK(A,g){if(A==null)return{};var e={},t=Object.keys(A),I,n;for(n=0;n<t.length;n++)I=t[n],!(g.indexOf(I)>=0)&&(e[I]=A[I]);return e}function eK(A,g){if(A==null)return{};var e=gK(A,g),t,I;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);for(I=0;I<n.length;I++)t=n[I],!(g.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(A,t)&&(e[t]=A[t])}return e}function sm(A){return tK(A)||IK(A)||nK(A)||CK()}function tK(A){if(Array.isArray(A))return im(A)}function IK(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function nK(A,g){if(A){if(typeof A=="string")return im(A,g);var e=Object.prototype.toString.call(A).slice(8,-1);if(e==="Object"&&A.constructor&&(e=A.constructor.name),e==="Map"||e==="Set")return Array.from(A);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return im(A,g)}}function im(A,g){(g==null||g>A.length)&&(g=A.length);for(var e=0,t=new Array(g);e<g;e++)t[e]=A[e];return t}function CK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lK(A){var g,e=A.beat,t=A.fade,I=A.beatFade,n=A.bounce,C=A.shake,l=A.flash,s=A.spin,i=A.spinPulse,r=A.spinReverse,c=A.pulse,d=A.fixedWidth,h=A.inverse,Z=A.border,y=A.listItem,S=A.flip,b=A.size,m=A.rotation,G=A.pull,V=(g={"fa-beat":e,"fa-fade":t,"fa-beat-fade":I,"fa-bounce":n,"fa-shake":C,"fa-flash":l,"fa-spin":s,"fa-spin-reverse":r,"fa-spin-pulse":i,"fa-pulse":c,"fa-fw":d,"fa-inverse":h,"fa-border":Z,"fa-li":y,"fa-flip":S===!0,"fa-flip-horizontal":S==="horizontal"||S==="both","fa-flip-vertical":S==="vertical"||S==="both"},SC(g,"fa-".concat(b),typeof b<"u"&&b!==null),SC(g,"fa-rotate-".concat(m),typeof m<"u"&&m!==null&&m!==0),SC(g,"fa-pull-".concat(G),typeof G<"u"&&G!==null),SC(g,"fa-swap-opacity",A.swapOpacity),g);return Object.keys(V).map(function(W){return V[W]?W:null}).filter(function(W){return W})}function sK(A){return A=A-0,A===A}function pW(A){return sK(A)?A:(A=A.replace(/[\-_\s]+(.)?/g,function(g,e){return e?e.toUpperCase():""}),A.substr(0,1).toLowerCase()+A.substr(1))}var iK=["style"];function oK(A){return A.charAt(0).toUpperCase()+A.slice(1)}function aK(A){return A.split(";").map(function(g){return g.trim()}).filter(function(g){return g}).reduce(function(g,e){var t=e.indexOf(":"),I=pW(e.slice(0,t)),n=e.slice(t+1).trim();return I.startsWith("webkit")?g[oK(I)]=n:g[I]=n,g},{})}function GW(A,g){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof g=="string")return g;var t=(g.children||[]).map(function(s){return GW(A,s)}),I=Object.keys(g.attributes||{}).reduce(function(s,i){var r=g.attributes[i];switch(i){case"class":s.attrs.className=r,delete g.attributes.class;break;case"style":s.attrs.style=aK(r);break;default:i.indexOf("aria-")===0||i.indexOf("data-")===0?s.attrs[i.toLowerCase()]=r:s.attrs[pW(i)]=r}return s},{attrs:{}}),n=e.style,C=n===void 0?{}:n,l=eK(e,iK);return I.attrs.style=at(at({},I.attrs.style),C),A.apply(void 0,[g.tag,at(at({},I.attrs),l)].concat(sm(t)))}var yW=!1;try{yW=!0}catch{}function rK(){if(!yW&&console&&typeof console.error=="function"){var A;(A=console).error.apply(A,arguments)}}function Bp(A){if(A&&Sa(A)==="object"&&A.prefix&&A.iconName&&A.icon)return A;if(lm.icon)return lm.icon(A);if(A===null)return null;if(A&&Sa(A)==="object"&&A.prefix&&A.iconName)return A;if(Array.isArray(A)&&A.length===2)return{prefix:A[0],iconName:A[1]};if(typeof A=="string")return{prefix:"fas",iconName:A}}function id(A,g){return Array.isArray(g)&&g.length>0||!Array.isArray(g)&&g?SC({},A,g):{}}var hp={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},wA=rg.forwardRef(function(A,g){var e=at(at({},hp),A),t=e.icon,I=e.mask,n=e.symbol,C=e.className,l=e.title,s=e.titleId,i=e.maskId,r=Bp(t),c=id("classes",[].concat(sm(lK(e)),sm((C||"").split(" ")))),d=id("transform",typeof e.transform=="string"?lm.transform(e.transform):e.transform),h=id("mask",Bp(I)),Z=AK(r,at(at(at(at({},c),d),h),{},{symbol:n,title:l,titleId:s,maskId:i}));if(!Z)return rK("Could not find icon",r),null;var y=Z.abstract,S={ref:g};return Object.keys(e).forEach(function(b){hp.hasOwnProperty(b)||(S[b]=e[b])}),cK(y[0],S)});wA.displayName="FontAwesomeIcon";wA.propTypes={beat:CA.bool,border:CA.bool,beatFade:CA.bool,bounce:CA.bool,className:CA.string,fade:CA.bool,flash:CA.bool,mask:CA.oneOfType([CA.object,CA.array,CA.string]),maskId:CA.string,fixedWidth:CA.bool,inverse:CA.bool,flip:CA.oneOf([!0,!1,"horizontal","vertical","both"]),icon:CA.oneOfType([CA.object,CA.array,CA.string]),listItem:CA.bool,pull:CA.oneOf(["right","left"]),pulse:CA.bool,rotation:CA.oneOf([0,90,180,270]),shake:CA.bool,size:CA.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:CA.bool,spinPulse:CA.bool,spinReverse:CA.bool,symbol:CA.oneOfType([CA.bool,CA.string]),title:CA.string,titleId:CA.string,transform:CA.oneOfType([CA.string,CA.object]),swapOpacity:CA.bool};var cK=GW.bind(null,rg.createElement);function Ce(A){return $C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z"},child:[]},{tag:"path",attr:{d:"m490.91 244.15-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z"},child:[]}]})(A)}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ds(A){return A+.5|0}const rI=(A,g,e)=>Math.max(Math.min(A,e),g);function Fl(A){return rI(Ds(A*2.55),0,255)}function VI(A){return rI(Ds(A*255),0,255)}function wt(A){return rI(Ds(A/2.55)/100,0,1)}function bp(A){return rI(Ds(A*100),0,100)}const We={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},om=[..."0123456789ABCDEF"],dK=A=>om[A&15],uK=A=>om[(A&240)>>4]+om[A&15],Ki=A=>(A&240)>>4===(A&15),mK=A=>Ki(A.r)&&Ki(A.g)&&Ki(A.b)&&Ki(A.a);function BK(A){var g=A.length,e;return A[0]==="#"&&(g===4||g===5?e={r:255&We[A[1]]*17,g:255&We[A[2]]*17,b:255&We[A[3]]*17,a:g===5?We[A[4]]*17:255}:(g===7||g===9)&&(e={r:We[A[1]]<<4|We[A[2]],g:We[A[3]]<<4|We[A[4]],b:We[A[5]]<<4|We[A[6]],a:g===9?We[A[7]]<<4|We[A[8]]:255})),e}const hK=(A,g)=>A<255?g(A):"";function bK(A){var g=mK(A)?dK:uK;return A?"#"+g(A.r)+g(A.g)+g(A.b)+hK(A.a,g):void 0}const ZK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fW(A,g,e){const t=g*Math.min(e,1-e),I=(n,C=(n+A/30)%12)=>e-t*Math.max(Math.min(C-3,9-C,1),-1);return[I(0),I(8),I(4)]}function pK(A,g,e){const t=(I,n=(I+A/60)%6)=>e-e*g*Math.max(Math.min(n,4-n,1),0);return[t(5),t(3),t(1)]}function GK(A,g,e){const t=fW(A,1,.5);let I;for(g+e>1&&(I=1/(g+e),g*=I,e*=I),I=0;I<3;I++)t[I]*=1-g-e,t[I]+=g;return t}function yK(A,g,e,t,I){return A===I?(g-e)/t+(g<e?6:0):g===I?(e-A)/t+2:(A-g)/t+4}function ah(A){const e=A.r/255,t=A.g/255,I=A.b/255,n=Math.max(e,t,I),C=Math.min(e,t,I),l=(n+C)/2;let s,i,r;return n!==C&&(r=n-C,i=l>.5?r/(2-n-C):r/(n+C),s=yK(e,t,I,r,n),s=s*60+.5),[s|0,i||0,l]}function rh(A,g,e,t){return(Array.isArray(g)?A(g[0],g[1],g[2]):A(g,e,t)).map(VI)}function ch(A,g,e){return rh(fW,A,g,e)}function fK(A,g,e){return rh(GK,A,g,e)}function SK(A,g,e){return rh(pK,A,g,e)}function SW(A){return(A%360+360)%360}function VK(A){const g=ZK.exec(A);let e=255,t;if(!g)return;g[5]!==t&&(e=g[6]?Fl(+g[5]):VI(+g[5]));const I=SW(+g[2]),n=+g[3]/100,C=+g[4]/100;return g[1]==="hwb"?t=fK(I,n,C):g[1]==="hsv"?t=SK(I,n,C):t=ch(I,n,C),{r:t[0],g:t[1],b:t[2],a:e}}function WK(A,g){var e=ah(A);e[0]=SW(e[0]+g),e=ch(e),A.r=e[0],A.g=e[1],A.b=e[2]}function RK(A){if(!A)return;const g=ah(A),e=g[0],t=bp(g[1]),I=bp(g[2]);return A.a<255?`hsla(${e}, ${t}%, ${I}%, ${wt(A.a)})`:`hsl(${e}, ${t}%, ${I}%)`}const Zp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vK(){const A={},g=Object.keys(pp),e=Object.keys(Zp);let t,I,n,C,l;for(t=0;t<g.length;t++){for(C=l=g[t],I=0;I<e.length;I++)n=e[I],l=l.replace(n,Zp[n]);n=parseInt(pp[C],16),A[l]=[n>>16&255,n>>8&255,n&255]}return A}let Ni;function wK(A){Ni||(Ni=vK(),Ni.transparent=[0,0,0,0]);const g=Ni[A.toLowerCase()];return g&&{r:g[0],g:g[1],b:g[2],a:g.length===4?g[3]:255}}const XK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function JK(A){const g=XK.exec(A);let e=255,t,I,n;if(g){if(g[7]!==t){const C=+g[7];e=g[8]?Fl(C):rI(C*255,0,255)}return t=+g[1],I=+g[3],n=+g[5],t=255&(g[2]?Fl(t):rI(t,0,255)),I=255&(g[4]?Fl(I):rI(I,0,255)),n=255&(g[6]?Fl(n):rI(n,0,255)),{r:t,g:I,b:n,a:e}}}function FK(A){return A&&(A.a<255?`rgba(${A.r}, ${A.g}, ${A.b}, ${wt(A.a)})`:`rgb(${A.r}, ${A.g}, ${A.b})`)}const od=A=>A<=.0031308?A*12.92:Math.pow(A,1/2.4)*1.055-.055,gC=A=>A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4);function kK(A,g,e){const t=gC(wt(A.r)),I=gC(wt(A.g)),n=gC(wt(A.b));return{r:VI(od(t+e*(gC(wt(g.r))-t))),g:VI(od(I+e*(gC(wt(g.g))-I))),b:VI(od(n+e*(gC(wt(g.b))-n))),a:A.a+e*(g.a-A.a)}}function Ui(A,g,e){if(A){let t=ah(A);t[g]=Math.max(0,Math.min(t[g]+t[g]*e,g===0?360:1)),t=ch(t),A.r=t[0],A.g=t[1],A.b=t[2]}}function VW(A,g){return A&&Object.assign(g||{},A)}function Gp(A){var g={r:0,g:0,b:0,a:255};return Array.isArray(A)?A.length>=3&&(g={r:A[0],g:A[1],b:A[2],a:255},A.length>3&&(g.a=VI(A[3]))):(g=VW(A,{r:0,g:0,b:0,a:1}),g.a=VI(g.a)),g}function HK(A){return A.charAt(0)==="r"?JK(A):VK(A)}class vs{constructor(g){if(g instanceof vs)return g;const e=typeof g;let t;e==="object"?t=Gp(g):e==="string"&&(t=BK(g)||wK(g)||HK(g)),this._rgb=t,this._valid=!!t}get valid(){return this._valid}get rgb(){var g=VW(this._rgb);return g&&(g.a=wt(g.a)),g}set rgb(g){this._rgb=Gp(g)}rgbString(){return this._valid?FK(this._rgb):void 0}hexString(){return this._valid?bK(this._rgb):void 0}hslString(){return this._valid?RK(this._rgb):void 0}mix(g,e){if(g){const t=this.rgb,I=g.rgb;let n;const C=e===n?.5:e,l=2*C-1,s=t.a-I.a,i=((l*s===-1?l:(l+s)/(1+l*s))+1)/2;n=1-i,t.r=255&i*t.r+n*I.r+.5,t.g=255&i*t.g+n*I.g+.5,t.b=255&i*t.b+n*I.b+.5,t.a=C*t.a+(1-C)*I.a,this.rgb=t}return this}interpolate(g,e){return g&&(this._rgb=kK(this._rgb,g._rgb,e)),this}clone(){return new vs(this.rgb)}alpha(g){return this._rgb.a=VI(g),this}clearer(g){const e=this._rgb;return e.a*=1-g,this}greyscale(){const g=this._rgb,e=Ds(g.r*.3+g.g*.59+g.b*.11);return g.r=g.g=g.b=e,this}opaquer(g){const e=this._rgb;return e.a*=1+g,this}negate(){const g=this._rgb;return g.r=255-g.r,g.g=255-g.g,g.b=255-g.b,this}lighten(g){return Ui(this._rgb,2,g),this}darken(g){return Ui(this._rgb,2,-g),this}saturate(g){return Ui(this._rgb,1,g),this}desaturate(g){return Ui(this._rgb,1,-g),this}rotate(g){return WK(this._rgb,g),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */const YK=(()=>{let A=0;return()=>A++})();function jA(A){return A===null||typeof A>"u"}function Wg(A){if(Array.isArray&&Array.isArray(A))return!0;const g=Object.prototype.toString.call(A);return g.slice(0,7)==="[object"&&g.slice(-6)==="Array]"}function WA(A){return A!==null&&Object.prototype.toString.call(A)==="[object Object]"}function Ne(A){return(typeof A=="number"||A instanceof Number)&&isFinite(+A)}function lt(A,g){return Ne(A)?A:g}function gg(A,g){return typeof A>"u"?g:A}const QK=(A,g)=>typeof A=="string"&&A.endsWith("%")?parseFloat(A)/100*g:+A;function Cg(A,g,e){if(A&&typeof A.call=="function")return A.apply(e,g)}function Hg(A,g,e,t){let I,n,C;if(Wg(A))for(n=A.length,I=0;I<n;I++)g.call(e,A[I],I);else if(WA(A))for(C=Object.keys(A),n=C.length,I=0;I<n;I++)g.call(e,A[C[I]],C[I])}function yp(A,g){let e,t,I,n;if(!A||!g||A.length!==g.length)return!1;for(e=0,t=A.length;e<t;++e)if(I=A[e],n=g[e],I.datasetIndex!==n.datasetIndex||I.index!==n.index)return!1;return!0}function Va(A){if(Wg(A))return A.map(Va);if(WA(A)){const g=Object.create(null),e=Object.keys(A),t=e.length;let I=0;for(;I<t;++I)g[e[I]]=Va(A[e[I]]);return g}return A}function WW(A){return["__proto__","prototype","constructor"].indexOf(A)===-1}function KK(A,g,e,t){if(!WW(A))return;const I=g[A],n=e[A];WA(I)&&WA(n)?ws(I,n,t):g[A]=Va(n)}function ws(A,g,e){const t=Wg(g)?g:[g],I=t.length;if(!WA(A))return A;e=e||{};const n=e.merger||KK;let C;for(let l=0;l<I;++l){if(C=t[l],!WA(C))continue;const s=Object.keys(C);for(let i=0,r=s.length;i<r;++i)n(s[i],A,C,e)}return A}function $l(A,g){return ws(A,g,{merger:NK})}function NK(A,g,e){if(!WW(A))return;const t=g[A],I=e[A];WA(t)&&WA(I)?$l(t,I):Object.prototype.hasOwnProperty.call(g,A)||(g[A]=Va(I))}const fp={"":A=>A,x:A=>A.x,y:A=>A.y};function UK(A){const g=A.split("."),e=[];let t="";for(const I of g)t+=I,t.endsWith("\\")?t=t.slice(0,-1)+".":(e.push(t),t="");return e}function xK(A){const g=UK(A);return e=>{for(const t of g){if(t==="")break;e=e&&e[t]}return e}}function MC(A,g){return(fp[g]||(fp[g]=xK(g)))(A)}function dh(A){return A.charAt(0).toUpperCase()+A.slice(1)}const Xs=A=>typeof A<"u",HI=A=>typeof A=="function",Sp=(A,g)=>{if(A.size!==g.size)return!1;for(const e of A)if(!g.has(e))return!1;return!0};function EK(A){return A.type==="mouseup"||A.type==="click"||A.type==="contextmenu"}const Ht=Math.PI,kC=2*Ht,Wa=Number.POSITIVE_INFINITY,Gn=Ht/2,am=Math.log10,WI=Math.sign;function Yo(A,g,e){return Math.abs(A-g)<e}function Vp(A){const g=Math.round(A);A=Yo(A,g,A/1e3)?g:A;const e=Math.pow(10,Math.floor(am(A))),t=A/e;return(t<=1?1:t<=2?2:t<=5?5:10)*e}function LK(A){const g=[],e=Math.sqrt(A);let t;for(t=1;t<e;t++)A%t===0&&(g.push(t),g.push(A/t));return e===(e|0)&&g.push(e),g.sort((I,n)=>I-n).pop(),g}function Ra(A){return!isNaN(parseFloat(A))&&isFinite(A)}function MK(A,g){const e=Math.round(A);return e-g<=A&&e+g>=A}function DK(A,g,e){let t,I,n;for(t=0,I=A.length;t<I;t++)n=A[t][e],isNaN(n)||(g.min=Math.min(g.min,n),g.max=Math.max(g.max,n))}function Bn(A){return A*(Ht/180)}function zK(A){return A*(180/Ht)}function Wp(A){if(!Ne(A))return;let g=1,e=0;for(;Math.round(A*g)/g!==A;)g*=10,e++;return e}function TK(A,g){const e=g.x-A.x,t=g.y-A.y,I=Math.sqrt(e*e+t*t);let n=Math.atan2(t,e);return n<-.5*Ht&&(n+=kC),{angle:n,distance:I}}function gn(A){return(A%kC+kC)%kC}function jK(A,g,e,t){const I=gn(A),n=gn(g),C=gn(e),l=gn(n-I),s=gn(C-I),i=gn(I-n),r=gn(I-C);return I===n||I===C||t&&n===C||l>s&&i<r}function Ft(A,g,e){return Math.max(g,Math.min(e,A))}function OK(A){return Ft(A,-32768,32767)}function Rp(A,g,e,t=1e-6){return A>=Math.min(g,e)-t&&A<=Math.max(g,e)+t}function uh(A,g,e){e=e||(C=>A[C]<g);let t=A.length-1,I=0,n;for(;t-I>1;)n=I+t>>1,e(n)?I=n:t=n;return{lo:I,hi:t}}const rm=(A,g,e,t)=>uh(A,e,t?I=>{const n=A[I][g];return n<e||n===e&&A[I+1][g]===e}:I=>A[I][g]<e),PK=(A,g,e)=>uh(A,e,t=>A[t][g]>=e);function _K(A,g,e){let t=0,I=A.length;for(;t<I&&A[t]<g;)t++;for(;I>t&&A[I-1]>e;)I--;return t>0||I<A.length?A.slice(t,I):A}const RW=["push","pop","shift","splice","unshift"];function qK(A,g){if(A._chartjs){A._chartjs.listeners.push(g);return}Object.defineProperty(A,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[g]}}),RW.forEach(e=>{const t="_onData"+dh(e),I=A[e];Object.defineProperty(A,e,{configurable:!0,enumerable:!1,value(...n){const C=I.apply(this,n);return A._chartjs.listeners.forEach(l=>{typeof l[t]=="function"&&l[t](...n)}),C}})})}function vp(A,g){const e=A._chartjs;if(!e)return;const t=e.listeners,I=t.indexOf(g);I!==-1&&t.splice(I,1),!(t.length>0)&&(RW.forEach(n=>{delete A[n]}),delete A._chartjs)}function vW(A){const g=new Set(A);return g.size===A.length?A:Array.from(g)}const wW=function(){return typeof window>"u"?function(A){return A()}:window.requestAnimationFrame}();function XW(A,g){let e=[],t=!1;return function(...I){e=I,t||(t=!0,wW.call(window,()=>{t=!1,A.apply(g,e)}))}}function $K(A,g){let e;return function(...t){return g?(clearTimeout(e),e=setTimeout(A,g,t)):A.apply(this,t),g}}const A1=A=>A==="start"?"left":A==="end"?"right":"center",wp=(A,g,e)=>A==="start"?g:A==="end"?e:(g+e)/2,xi=A=>A===0||A===1,Xp=(A,g,e)=>-(Math.pow(2,10*(A-=1))*Math.sin((A-g)*kC/e)),Jp=(A,g,e)=>Math.pow(2,-10*A)*Math.sin((A-g)*kC/e)+1,As={linear:A=>A,easeInQuad:A=>A*A,easeOutQuad:A=>-A*(A-2),easeInOutQuad:A=>(A/=.5)<1?.5*A*A:-.5*(--A*(A-2)-1),easeInCubic:A=>A*A*A,easeOutCubic:A=>(A-=1)*A*A+1,easeInOutCubic:A=>(A/=.5)<1?.5*A*A*A:.5*((A-=2)*A*A+2),easeInQuart:A=>A*A*A*A,easeOutQuart:A=>-((A-=1)*A*A*A-1),easeInOutQuart:A=>(A/=.5)<1?.5*A*A*A*A:-.5*((A-=2)*A*A*A-2),easeInQuint:A=>A*A*A*A*A,easeOutQuint:A=>(A-=1)*A*A*A*A+1,easeInOutQuint:A=>(A/=.5)<1?.5*A*A*A*A*A:.5*((A-=2)*A*A*A*A+2),easeInSine:A=>-Math.cos(A*Gn)+1,easeOutSine:A=>Math.sin(A*Gn),easeInOutSine:A=>-.5*(Math.cos(Ht*A)-1),easeInExpo:A=>A===0?0:Math.pow(2,10*(A-1)),easeOutExpo:A=>A===1?1:-Math.pow(2,-10*A)+1,easeInOutExpo:A=>xi(A)?A:A<.5?.5*Math.pow(2,10*(A*2-1)):.5*(-Math.pow(2,-10*(A*2-1))+2),easeInCirc:A=>A>=1?A:-(Math.sqrt(1-A*A)-1),easeOutCirc:A=>Math.sqrt(1-(A-=1)*A),easeInOutCirc:A=>(A/=.5)<1?-.5*(Math.sqrt(1-A*A)-1):.5*(Math.sqrt(1-(A-=2)*A)+1),easeInElastic:A=>xi(A)?A:Xp(A,.075,.3),easeOutElastic:A=>xi(A)?A:Jp(A,.075,.3),easeInOutElastic(A){return xi(A)?A:A<.5?.5*Xp(A*2,.1125,.45):.5+.5*Jp(A*2-1,.1125,.45)},easeInBack(A){return A*A*((1.70158+1)*A-1.70158)},easeOutBack(A){return(A-=1)*A*((1.70158+1)*A+1.70158)+1},easeInOutBack(A){let g=1.70158;return(A/=.5)<1?.5*(A*A*(((g*=1.525)+1)*A-g)):.5*((A-=2)*A*(((g*=1.525)+1)*A+g)+2)},easeInBounce:A=>1-As.easeOutBounce(1-A),easeOutBounce(A){return A<1/2.75?7.5625*A*A:A<2/2.75?7.5625*(A-=1.5/2.75)*A+.75:A<2.5/2.75?7.5625*(A-=2.25/2.75)*A+.9375:7.5625*(A-=2.625/2.75)*A+.984375},easeInOutBounce:A=>A<.5?As.easeInBounce(A*2)*.5:As.easeOutBounce(A*2-1)*.5+.5};function JW(A){if(A&&typeof A=="object"){const g=A.toString();return g==="[object CanvasPattern]"||g==="[object CanvasGradient]"}return!1}function Fp(A){return JW(A)?A:new vs(A)}function ad(A){return JW(A)?A:new vs(A).saturate(.5).darken(.1).hexString()}const g1=["x","y","borderWidth","radius","tension"],e1=["color","borderColor","backgroundColor"];function t1(A){A.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),A.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:g=>g!=="onProgress"&&g!=="onComplete"&&g!=="fn"}),A.set("animations",{colors:{type:"color",properties:e1},numbers:{type:"number",properties:g1}}),A.describe("animations",{_fallback:"animation"}),A.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:g=>g|0}}}})}function I1(A){A.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const kp=new Map;function n1(A,g){g=g||{};const e=A+JSON.stringify(g);let t=kp.get(e);return t||(t=new Intl.NumberFormat(A,g),kp.set(e,t)),t}function FW(A,g,e){return n1(g,e).format(A)}const kW={values(A){return Wg(A)?A:""+A},numeric(A,g,e){if(A===0)return"0";const t=this.chart.options.locale;let I,n=A;if(e.length>1){const i=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(i<1e-4||i>1e15)&&(I="scientific"),n=C1(A,e)}const C=am(Math.abs(n)),l=isNaN(C)?1:Math.max(Math.min(-1*Math.floor(C),20),0),s={notation:I,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(s,this.options.ticks.format),FW(A,t,s)},logarithmic(A,g,e){if(A===0)return"0";const t=e[g].significand||A/Math.pow(10,Math.floor(am(A)));return[1,2,3,5,10,15].includes(t)||g>.8*e.length?kW.numeric.call(this,A,g,e):""}};function C1(A,g){let e=g.length>3?g[2].value-g[1].value:g[1].value-g[0].value;return Math.abs(e)>=1&&A!==Math.floor(A)&&(e=A-Math.floor(A)),e}var HW={formatters:kW};function l1(A){A.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(g,e)=>e.lineWidth,tickColor:(g,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:HW.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),A.route("scale.ticks","color","","color"),A.route("scale.grid","color","","borderColor"),A.route("scale.border","color","","borderColor"),A.route("scale.title","color","","color"),A.describe("scale",{_fallback:!1,_scriptable:g=>!g.startsWith("before")&&!g.startsWith("after")&&g!=="callback"&&g!=="parser",_indexable:g=>g!=="borderDash"&&g!=="tickBorderDash"&&g!=="dash"}),A.describe("scales",{_fallback:"scale"}),A.describe("scale.ticks",{_scriptable:g=>g!=="backdropPadding"&&g!=="callback",_indexable:g=>g!=="backdropPadding"})}const Fn=Object.create(null),cm=Object.create(null);function gs(A,g){if(!g)return A;const e=g.split(".");for(let t=0,I=e.length;t<I;++t){const n=e[t];A=A[n]||(A[n]=Object.create(null))}return A}function rd(A,g,e){return typeof g=="string"?ws(gs(A,g),e):ws(gs(A,""),g)}class s1{constructor(g,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,I)=>ad(I.backgroundColor),this.hoverBorderColor=(t,I)=>ad(I.borderColor),this.hoverColor=(t,I)=>ad(I.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(g),this.apply(e)}set(g,e){return rd(this,g,e)}get(g){return gs(this,g)}describe(g,e){return rd(cm,g,e)}override(g,e){return rd(Fn,g,e)}route(g,e,t,I){const n=gs(this,g),C=gs(this,t),l="_"+e;Object.defineProperties(n,{[l]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const s=this[l],i=C[I];return WA(s)?Object.assign({},i,s):gg(s,i)},set(s){this[l]=s}}})}apply(g){g.forEach(e=>e(this))}}var cg=new s1({_scriptable:A=>!A.startsWith("on"),_indexable:A=>A!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[t1,I1,l1]);function i1(A){return!A||jA(A.size)||jA(A.family)?null:(A.style?A.style+" ":"")+(A.weight?A.weight+" ":"")+A.size+"px "+A.family}function Hp(A,g,e,t,I){let n=g[I];return n||(n=g[I]=A.measureText(I).width,e.push(I)),n>t&&(t=n),t}function en(A,g,e){const t=A.currentDevicePixelRatio,I=e!==0?Math.max(e/2,.5):0;return Math.round((g-I)*t)/t+I}function Yp(A,g){!g&&!A||(g=g||A.getContext("2d"),g.save(),g.resetTransform(),g.clearRect(0,0,A.width,A.height),g.restore())}function YW(A,g,e){return e=e||.5,!g||A&&A.x>g.left-e&&A.x<g.right+e&&A.y>g.top-e&&A.y<g.bottom+e}function QW(A,g){A.save(),A.beginPath(),A.rect(g.left,g.top,g.right-g.left,g.bottom-g.top),A.clip()}function KW(A){A.restore()}function o1(A,g){g.translation&&A.translate(g.translation[0],g.translation[1]),jA(g.rotation)||A.rotate(g.rotation),g.color&&(A.fillStyle=g.color),g.textAlign&&(A.textAlign=g.textAlign),g.textBaseline&&(A.textBaseline=g.textBaseline)}function a1(A,g,e,t,I){if(I.strikethrough||I.underline){const n=A.measureText(t),C=g-n.actualBoundingBoxLeft,l=g+n.actualBoundingBoxRight,s=e-n.actualBoundingBoxAscent,i=e+n.actualBoundingBoxDescent,r=I.strikethrough?(s+i)/2:i;A.strokeStyle=A.fillStyle,A.beginPath(),A.lineWidth=I.decorationWidth||2,A.moveTo(C,r),A.lineTo(l,r),A.stroke()}}function r1(A,g){const e=A.fillStyle;A.fillStyle=g.color,A.fillRect(g.left,g.top,g.width,g.height),A.fillStyle=e}function Qp(A,g,e,t,I,n={}){const C=Wg(g)?g:[g],l=n.strokeWidth>0&&n.strokeColor!=="";let s,i;for(A.save(),A.font=I.string,o1(A,n),s=0;s<C.length;++s)i=C[s],n.backdrop&&r1(A,n.backdrop),l&&(n.strokeColor&&(A.strokeStyle=n.strokeColor),jA(n.strokeWidth)||(A.lineWidth=n.strokeWidth),A.strokeText(i,e,t,n.maxWidth)),A.fillText(i,e,t,n.maxWidth),a1(A,e,t,i,n),t+=Number(I.lineHeight);A.restore()}function c1(A,g){const{x:e,y:t,w:I,h:n,radius:C}=g;A.arc(e+C.topLeft,t+C.topLeft,C.topLeft,1.5*Ht,Ht,!0),A.lineTo(e,t+n-C.bottomLeft),A.arc(e+C.bottomLeft,t+n-C.bottomLeft,C.bottomLeft,Ht,Gn,!0),A.lineTo(e+I-C.bottomRight,t+n),A.arc(e+I-C.bottomRight,t+n-C.bottomRight,C.bottomRight,Gn,0,!0),A.lineTo(e+I,t+C.topRight),A.arc(e+I-C.topRight,t+C.topRight,C.topRight,0,-Gn,!0),A.lineTo(e+C.topLeft,t)}const d1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,u1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function m1(A,g){const e=(""+A).match(d1);if(!e||e[1]==="normal")return g*1.2;switch(A=+e[2],e[3]){case"px":return A;case"%":A/=100;break}return g*A}const B1=A=>+A||0;function NW(A,g){const e={},t=WA(g),I=t?Object.keys(g):g,n=WA(A)?t?C=>gg(A[C],A[g[C]]):C=>A[C]:()=>A;for(const C of I)e[C]=B1(n(C));return e}function UW(A){return NW(A,{top:"y",right:"x",bottom:"y",left:"x"})}function h1(A){return NW(A,["topLeft","topRight","bottomLeft","bottomRight"])}function Js(A){const g=UW(A);return g.width=g.left+g.right,g.height=g.top+g.bottom,g}function dm(A,g){A=A||{},g=g||cg.font;let e=gg(A.size,g.size);typeof e=="string"&&(e=parseInt(e,10));let t=gg(A.style,g.style);t&&!(""+t).match(u1)&&(console.warn('Invalid font style specified: "'+t+'"'),t=void 0);const I={family:gg(A.family,g.family),lineHeight:m1(gg(A.lineHeight,g.lineHeight),e),size:e,style:t,weight:gg(A.weight,g.weight),string:""};return I.string=i1(I),I}function Ei(A,g,e,t){let I,n,C;for(I=0,n=A.length;I<n;++I)if(C=A[I],C!==void 0&&C!==void 0)return C}function b1(A,g,e){const{min:t,max:I}=A,n=QK(g,(I-t)/2),C=(l,s)=>e&&l===0?0:l+s;return{min:C(t,-Math.abs(n)),max:C(I,n)}}function zs(A,g){return Object.assign(Object.create(A),g)}function mh(A,g=[""],e,t,I=()=>A[0]){const n=e||A;typeof t>"u"&&(t=MW("_fallback",A));const C={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:A,_rootScopes:n,_fallback:t,_getTarget:I,override:l=>mh([l,...A],g,n,t)};return new Proxy(C,{deleteProperty(l,s){return delete l[s],delete l._keys,delete A[0][s],!0},get(l,s){return EW(l,s,()=>W1(s,g,A,l))},getOwnPropertyDescriptor(l,s){return Reflect.getOwnPropertyDescriptor(l._scopes[0],s)},getPrototypeOf(){return Reflect.getPrototypeOf(A[0])},has(l,s){return Np(l).includes(s)},ownKeys(l){return Np(l)},set(l,s,i){const r=l._storage||(l._storage=I());return l[s]=r[s]=i,delete l._keys,!0}})}function DC(A,g,e,t){const I={_cacheable:!1,_proxy:A,_context:g,_subProxy:e,_stack:new Set,_descriptors:xW(A,t),setContext:n=>DC(A,n,e,t),override:n=>DC(A.override(n),g,e,t)};return new Proxy(I,{deleteProperty(n,C){return delete n[C],delete A[C],!0},get(n,C,l){return EW(n,C,()=>p1(n,C,l))},getOwnPropertyDescriptor(n,C){return n._descriptors.allKeys?Reflect.has(A,C)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(A,C)},getPrototypeOf(){return Reflect.getPrototypeOf(A)},has(n,C){return Reflect.has(A,C)},ownKeys(){return Reflect.ownKeys(A)},set(n,C,l){return A[C]=l,delete n[C],!0}})}function xW(A,g={scriptable:!0,indexable:!0}){const{_scriptable:e=g.scriptable,_indexable:t=g.indexable,_allKeys:I=g.allKeys}=A;return{allKeys:I,scriptable:e,indexable:t,isScriptable:HI(e)?e:()=>e,isIndexable:HI(t)?t:()=>t}}const Z1=(A,g)=>A?A+dh(g):g,Bh=(A,g)=>WA(g)&&A!=="adapters"&&(Object.getPrototypeOf(g)===null||g.constructor===Object);function EW(A,g,e){if(Object.prototype.hasOwnProperty.call(A,g)||g==="constructor")return A[g];const t=e();return A[g]=t,t}function p1(A,g,e){const{_proxy:t,_context:I,_subProxy:n,_descriptors:C}=A;let l=t[g];return HI(l)&&C.isScriptable(g)&&(l=G1(g,l,A,e)),Wg(l)&&l.length&&(l=y1(g,l,A,C.isIndexable)),Bh(g,l)&&(l=DC(l,I,n&&n[g],C)),l}function G1(A,g,e,t){const{_proxy:I,_context:n,_subProxy:C,_stack:l}=e;if(l.has(A))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+A);l.add(A);let s=g(n,C||t);return l.delete(A),Bh(A,s)&&(s=hh(I._scopes,I,A,s)),s}function y1(A,g,e,t){const{_proxy:I,_context:n,_subProxy:C,_descriptors:l}=e;if(typeof n.index<"u"&&t(A))return g[n.index%g.length];if(WA(g[0])){const s=g,i=I._scopes.filter(r=>r!==s);g=[];for(const r of s){const c=hh(i,I,A,r);g.push(DC(c,n,C&&C[A],l))}}return g}function LW(A,g,e){return HI(A)?A(g,e):A}const f1=(A,g)=>A===!0?g:typeof A=="string"?MC(g,A):void 0;function S1(A,g,e,t,I){for(const n of g){const C=f1(e,n);if(C){A.add(C);const l=LW(C._fallback,e,I);if(typeof l<"u"&&l!==e&&l!==t)return l}else if(C===!1&&typeof t<"u"&&e!==t)return null}return!1}function hh(A,g,e,t){const I=g._rootScopes,n=LW(g._fallback,e,t),C=[...A,...I],l=new Set;l.add(t);let s=Kp(l,C,e,n||e,t);return s===null||typeof n<"u"&&n!==e&&(s=Kp(l,C,n,s,t),s===null)?!1:mh(Array.from(l),[""],I,n,()=>V1(g,e,t))}function Kp(A,g,e,t,I){for(;e;)e=S1(A,g,e,t,I);return e}function V1(A,g,e){const t=A._getTarget();g in t||(t[g]={});const I=t[g];return Wg(I)&&WA(e)?e:I||{}}function W1(A,g,e,t){let I;for(const n of g)if(I=MW(Z1(n,A),e),typeof I<"u")return Bh(A,I)?hh(e,t,A,I):I}function MW(A,g){for(const e of g){if(!e)continue;const t=e[A];if(typeof t<"u")return t}}function Np(A){let g=A._keys;return g||(g=A._keys=R1(A._scopes)),g}function R1(A){const g=new Set;for(const e of A)for(const t of Object.keys(e).filter(I=>!I.startsWith("_")))g.add(t);return Array.from(g)}function bh(){return typeof window<"u"&&typeof document<"u"}function Zh(A){let g=A.parentNode;return g&&g.toString()==="[object ShadowRoot]"&&(g=g.host),g}function va(A,g,e){let t;return typeof A=="string"?(t=parseInt(A,10),A.indexOf("%")!==-1&&(t=t/100*g.parentNode[e])):t=A,t}const Br=A=>A.ownerDocument.defaultView.getComputedStyle(A,null);function v1(A,g){return Br(A).getPropertyValue(g)}const w1=["top","right","bottom","left"];function yn(A,g,e){const t={};e=e?"-"+e:"";for(let I=0;I<4;I++){const n=w1[I];t[n]=parseFloat(A[g+"-"+n+e])||0}return t.width=t.left+t.right,t.height=t.top+t.bottom,t}const X1=(A,g,e)=>(A>0||g>0)&&(!e||!e.shadowRoot);function J1(A,g){const e=A.touches,t=e&&e.length?e[0]:A,{offsetX:I,offsetY:n}=t;let C=!1,l,s;if(X1(I,n,A.target))l=I,s=n;else{const i=g.getBoundingClientRect();l=t.clientX-i.left,s=t.clientY-i.top,C=!0}return{x:l,y:s,box:C}}function on(A,g){if("native"in A)return A;const{canvas:e,currentDevicePixelRatio:t}=g,I=Br(e),n=I.boxSizing==="border-box",C=yn(I,"padding"),l=yn(I,"border","width"),{x:s,y:i,box:r}=J1(A,e),c=C.left+(r&&l.left),d=C.top+(r&&l.top);let{width:h,height:Z}=g;return n&&(h-=C.width+l.width,Z-=C.height+l.height),{x:Math.round((s-c)/h*e.width/t),y:Math.round((i-d)/Z*e.height/t)}}function F1(A,g,e){let t,I;if(g===void 0||e===void 0){const n=A&&Zh(A);if(!n)g=A.clientWidth,e=A.clientHeight;else{const C=n.getBoundingClientRect(),l=Br(n),s=yn(l,"border","width"),i=yn(l,"padding");g=C.width-i.width-s.width,e=C.height-i.height-s.height,t=va(l.maxWidth,n,"clientWidth"),I=va(l.maxHeight,n,"clientHeight")}}return{width:g,height:e,maxWidth:t||Wa,maxHeight:I||Wa}}const Li=A=>Math.round(A*10)/10;function k1(A,g,e,t){const I=Br(A),n=yn(I,"margin"),C=va(I.maxWidth,A,"clientWidth")||Wa,l=va(I.maxHeight,A,"clientHeight")||Wa,s=F1(A,g,e);let{width:i,height:r}=s;if(I.boxSizing==="content-box"){const d=yn(I,"border","width"),h=yn(I,"padding");i-=h.width+d.width,r-=h.height+d.height}return i=Math.max(0,i-n.width),r=Math.max(0,t?i/t:r-n.height),i=Li(Math.min(i,C,s.maxWidth)),r=Li(Math.min(r,l,s.maxHeight)),i&&!r&&(r=Li(i/2)),(g!==void 0||e!==void 0)&&t&&s.height&&r>s.height&&(r=s.height,i=Li(Math.floor(r*t))),{width:i,height:r}}function Up(A,g,e){const t=g||1,I=Math.floor(A.height*t),n=Math.floor(A.width*t);A.height=Math.floor(A.height),A.width=Math.floor(A.width);const C=A.canvas;return C.style&&(e||!C.style.height&&!C.style.width)&&(C.style.height=`${A.height}px`,C.style.width=`${A.width}px`),A.currentDevicePixelRatio!==t||C.height!==I||C.width!==n?(A.currentDevicePixelRatio=t,C.height=I,C.width=n,A.ctx.setTransform(t,0,0,t,0,0),!0):!1}const H1=function(){let A=!1;try{const g={get passive(){return A=!0,!1}};bh()&&(window.addEventListener("test",null,g),window.removeEventListener("test",null,g))}catch{}return A}();function xp(A,g){const e=v1(A,g),t=e&&e.match(/^(\d+)(\.\d+)?px$/);return t?+t[1]:void 0}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Y1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(g,e,t,I){const n=e.listeners[I],C=e.duration;n.forEach(l=>l({chart:g,initial:e.initial,numSteps:C,currentStep:Math.min(t-e.start,C)}))}_refresh(){this._request||(this._running=!0,this._request=wW.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(g=Date.now()){let e=0;this._charts.forEach((t,I)=>{if(!t.running||!t.items.length)return;const n=t.items;let C=n.length-1,l=!1,s;for(;C>=0;--C)s=n[C],s._active?(s._total>t.duration&&(t.duration=s._total),s.tick(g),l=!0):(n[C]=n[n.length-1],n.pop());l&&(I.draw(),this._notify(I,t,g,"progress")),n.length||(t.running=!1,this._notify(I,t,g,"complete"),t.initial=!1),e+=n.length}),this._lastDate=g,e===0&&(this._running=!1)}_getAnims(g){const e=this._charts;let t=e.get(g);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(g,t)),t}listen(g,e,t){this._getAnims(g).listeners[e].push(t)}add(g,e){!e||!e.length||this._getAnims(g).items.push(...e)}has(g){return this._getAnims(g).items.length>0}start(g){const e=this._charts.get(g);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,I)=>Math.max(t,I._duration),0),this._refresh())}running(g){if(!this._running)return!1;const e=this._charts.get(g);return!(!e||!e.running||!e.items.length)}stop(g){const e=this._charts.get(g);if(!e||!e.items.length)return;const t=e.items;let I=t.length-1;for(;I>=0;--I)t[I].cancel();e.items=[],this._notify(g,e,Date.now(),"complete")}remove(g){return this._charts.delete(g)}}var Wt=new Y1;const Ep="transparent",Q1={boolean(A,g,e){return e>.5?g:A},color(A,g,e){const t=Fp(A||Ep),I=t.valid&&Fp(g||Ep);return I&&I.valid?I.mix(t,e).hexString():g},number(A,g,e){return A+(g-A)*e}};class K1{constructor(g,e,t,I){const n=e[t];I=Ei([g.to,I,n,g.from]);const C=Ei([g.from,n,I]);this._active=!0,this._fn=g.fn||Q1[g.type||typeof C],this._easing=As[g.easing]||As.linear,this._start=Math.floor(Date.now()+(g.delay||0)),this._duration=this._total=Math.floor(g.duration),this._loop=!!g.loop,this._target=e,this._prop=t,this._from=C,this._to=I,this._promises=void 0}active(){return this._active}update(g,e,t){if(this._active){this._notify(!1);const I=this._target[this._prop],n=t-this._start,C=this._duration-n;this._start=t,this._duration=Math.floor(Math.max(C,g.duration)),this._total+=n,this._loop=!!g.loop,this._to=Ei([g.to,e,I,g.from]),this._from=Ei([g.from,I,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(g){const e=g-this._start,t=this._duration,I=this._prop,n=this._from,C=this._loop,l=this._to;let s;if(this._active=n!==l&&(C||e<t),!this._active){this._target[I]=l,this._notify(!0);return}if(e<0){this._target[I]=n;return}s=e/t%2,s=C&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[I]=this._fn(n,l,s)}wait(){const g=this._promises||(this._promises=[]);return new Promise((e,t)=>{g.push({res:e,rej:t})})}_notify(g){const e=g?"res":"rej",t=this._promises||[];for(let I=0;I<t.length;I++)t[I][e]()}}class N1{constructor(g,e){this._chart=g,this._properties=new Map,this.configure(e)}configure(g){if(!WA(g))return;const e=Object.keys(cg.animation),t=this._properties;Object.getOwnPropertyNames(g).forEach(I=>{const n=g[I];if(!WA(n))return;const C={};for(const l of e)C[l]=n[l];(Wg(n.properties)&&n.properties||[I]).forEach(l=>{(l===I||!t.has(l))&&t.set(l,C)})})}_animateOptions(g,e){const t=e.options,I=x1(g,t);if(!I)return[];const n=this._createAnimations(I,t);return t.$shared&&U1(g.options.$animations,t).then(()=>{g.options=t},()=>{}),n}_createAnimations(g,e){const t=this._properties,I=[],n=g.$animations||(g.$animations={}),C=Object.keys(e),l=Date.now();let s;for(s=C.length-1;s>=0;--s){const i=C[s];if(i.charAt(0)==="$")continue;if(i==="options"){I.push(...this._animateOptions(g,e));continue}const r=e[i];let c=n[i];const d=t.get(i);if(c)if(d&&c.active()){c.update(d,r,l);continue}else c.cancel();if(!d||!d.duration){g[i]=r;continue}n[i]=c=new K1(d,g,i,r),I.push(c)}return I}update(g,e){if(this._properties.size===0){Object.assign(g,e);return}const t=this._createAnimations(g,e);if(t.length)return Wt.add(this._chart,t),!0}}function U1(A,g){const e=[],t=Object.keys(g);for(let I=0;I<t.length;I++){const n=A[t[I]];n&&n.active()&&e.push(n.wait())}return Promise.all(e)}function x1(A,g){if(!g)return;let e=A.options;if(!e){A.options=g;return}return e.$shared&&(A.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Lp(A,g){const e=A&&A.options||{},t=e.reverse,I=e.min===void 0?g:0,n=e.max===void 0?g:0;return{start:t?n:I,end:t?I:n}}function E1(A,g,e){if(e===!1)return!1;const t=Lp(A,e),I=Lp(g,e);return{top:I.end,right:t.end,bottom:I.start,left:t.start}}function L1(A){let g,e,t,I;return WA(A)?(g=A.top,e=A.right,t=A.bottom,I=A.left):g=e=t=I=A,{top:g,right:e,bottom:t,left:I,disabled:A===!1}}function DW(A,g){const e=[],t=A._getSortedDatasetMetas(g);let I,n;for(I=0,n=t.length;I<n;++I)e.push(t[I].index);return e}function Mp(A,g,e,t={}){const I=A.keys,n=t.mode==="single";let C,l,s,i;if(g===null)return;let r=!1;for(C=0,l=I.length;C<l;++C){if(s=+I[C],s===e){if(r=!0,t.all)continue;break}i=A.values[s],Ne(i)&&(n||g===0||WI(g)===WI(i))&&(g+=i)}return!r&&!t.all?0:g}function M1(A,g){const{iScale:e,vScale:t}=g,I=e.axis==="x"?"x":"y",n=t.axis==="x"?"x":"y",C=Object.keys(A),l=new Array(C.length);let s,i,r;for(s=0,i=C.length;s<i;++s)r=C[s],l[s]={[I]:r,[n]:A[r]};return l}function cd(A,g){const e=A&&A.options.stacked;return e||e===void 0&&g.stack!==void 0}function D1(A,g,e){return`${A.id}.${g.id}.${e.stack||e.type}`}function z1(A){const{min:g,max:e,minDefined:t,maxDefined:I}=A.getUserBounds();return{min:t?g:Number.NEGATIVE_INFINITY,max:I?e:Number.POSITIVE_INFINITY}}function T1(A,g,e){const t=A[g]||(A[g]={});return t[e]||(t[e]={})}function Dp(A,g,e,t){for(const I of g.getMatchingVisibleMetas(t).reverse()){const n=A[I.index];if(e&&n>0||!e&&n<0)return I.index}return null}function zp(A,g){const{chart:e,_cachedMeta:t}=A,I=e._stacks||(e._stacks={}),{iScale:n,vScale:C,index:l}=t,s=n.axis,i=C.axis,r=D1(n,C,t),c=g.length;let d;for(let h=0;h<c;++h){const Z=g[h],{[s]:y,[i]:S}=Z,b=Z._stacks||(Z._stacks={});d=b[i]=T1(I,r,y),d[l]=S,d._top=Dp(d,C,!0,t.type),d._bottom=Dp(d,C,!1,t.type);const m=d._visualValues||(d._visualValues={});m[l]=S}}function dd(A,g){const e=A.scales;return Object.keys(e).filter(t=>e[t].axis===g).shift()}function j1(A,g){return zs(A,{active:!1,dataset:void 0,datasetIndex:g,index:g,mode:"default",type:"dataset"})}function O1(A,g,e){return zs(A,{active:!1,dataIndex:g,parsed:void 0,raw:void 0,element:e,index:g,mode:"default",type:"data"})}function hl(A,g){const e=A.controller.index,t=A.vScale&&A.vScale.axis;if(t){g=g||A._parsed;for(const I of g){const n=I._stacks;if(!n||n[t]===void 0||n[t][e]===void 0)return;delete n[t][e],n[t]._visualValues!==void 0&&n[t]._visualValues[e]!==void 0&&delete n[t]._visualValues[e]}}}const ud=A=>A==="reset"||A==="none",Tp=(A,g)=>g?A:Object.assign({},A),P1=(A,g,e)=>A&&!g.hidden&&g._stacked&&{keys:DW(e,!0),values:null};class es{constructor(g,e){this.chart=g,this._ctx=g.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const g=this._cachedMeta;this.configure(),this.linkScales(),g._stacked=cd(g.vScale,g),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(g){this.index!==g&&hl(this._cachedMeta),this.index=g}linkScales(){const g=this.chart,e=this._cachedMeta,t=this.getDataset(),I=(c,d,h,Z)=>c==="x"?d:c==="r"?Z:h,n=e.xAxisID=gg(t.xAxisID,dd(g,"x")),C=e.yAxisID=gg(t.yAxisID,dd(g,"y")),l=e.rAxisID=gg(t.rAxisID,dd(g,"r")),s=e.indexAxis,i=e.iAxisID=I(s,n,C,l),r=e.vAxisID=I(s,C,n,l);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(C),e.rScale=this.getScaleForId(l),e.iScale=this.getScaleForId(i),e.vScale=this.getScaleForId(r)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(g){return this.chart.scales[g]}_getOtherScale(g){const e=this._cachedMeta;return g===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const g=this._cachedMeta;this._data&&vp(this._data,this),g._stacked&&hl(g)}_dataCheck(){const g=this.getDataset(),e=g.data||(g.data=[]),t=this._data;if(WA(e)){const I=this._cachedMeta;this._data=M1(e,I)}else if(t!==e){if(t){vp(t,this);const I=this._cachedMeta;hl(I),I._parsed=[]}e&&Object.isExtensible(e)&&qK(e,this),this._syncList=[],this._data=e}}addElements(){const g=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(g.dataset=new this.datasetElementType)}buildOrUpdateElements(g){const e=this._cachedMeta,t=this.getDataset();let I=!1;this._dataCheck();const n=e._stacked;e._stacked=cd(e.vScale,e),e.stack!==t.stack&&(I=!0,hl(e),e.stack=t.stack),this._resyncElements(g),(I||n!==e._stacked)&&(zp(this,e._parsed),e._stacked=cd(e.vScale,e))}configure(){const g=this.chart.config,e=g.datasetScopeKeys(this._type),t=g.getOptionScopes(this.getDataset(),e,!0);this.options=g.createResolver(t,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(g,e){const{_cachedMeta:t,_data:I}=this,{iScale:n,_stacked:C}=t,l=n.axis;let s=g===0&&e===I.length?!0:t._sorted,i=g>0&&t._parsed[g-1],r,c,d;if(this._parsing===!1)t._parsed=I,t._sorted=!0,d=I;else{Wg(I[g])?d=this.parseArrayData(t,I,g,e):WA(I[g])?d=this.parseObjectData(t,I,g,e):d=this.parsePrimitiveData(t,I,g,e);const h=()=>c[l]===null||i&&c[l]<i[l];for(r=0;r<e;++r)t._parsed[r+g]=c=d[r],s&&(h()&&(s=!1),i=c);t._sorted=s}C&&zp(this,d)}parsePrimitiveData(g,e,t,I){const{iScale:n,vScale:C}=g,l=n.axis,s=C.axis,i=n.getLabels(),r=n===C,c=new Array(I);let d,h,Z;for(d=0,h=I;d<h;++d)Z=d+t,c[d]={[l]:r||n.parse(i[Z],Z),[s]:C.parse(e[Z],Z)};return c}parseArrayData(g,e,t,I){const{xScale:n,yScale:C}=g,l=new Array(I);let s,i,r,c;for(s=0,i=I;s<i;++s)r=s+t,c=e[r],l[s]={x:n.parse(c[0],r),y:C.parse(c[1],r)};return l}parseObjectData(g,e,t,I){const{xScale:n,yScale:C}=g,{xAxisKey:l="x",yAxisKey:s="y"}=this._parsing,i=new Array(I);let r,c,d,h;for(r=0,c=I;r<c;++r)d=r+t,h=e[d],i[r]={x:n.parse(MC(h,l),d),y:C.parse(MC(h,s),d)};return i}getParsed(g){return this._cachedMeta._parsed[g]}getDataElement(g){return this._cachedMeta.data[g]}applyStack(g,e,t){const I=this.chart,n=this._cachedMeta,C=e[g.axis],l={keys:DW(I,!0),values:e._stacks[g.axis]._visualValues};return Mp(l,C,n.index,{mode:t})}updateRangeFromParsed(g,e,t,I){const n=t[e.axis];let C=n===null?NaN:n;const l=I&&t._stacks[e.axis];I&&l&&(I.values=l,C=Mp(I,n,this._cachedMeta.index)),g.min=Math.min(g.min,C),g.max=Math.max(g.max,C)}getMinMax(g,e){const t=this._cachedMeta,I=t._parsed,n=t._sorted&&g===t.iScale,C=I.length,l=this._getOtherScale(g),s=P1(e,t,this.chart),i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:r,max:c}=z1(l);let d,h;function Z(){h=I[d];const y=h[l.axis];return!Ne(h[g.axis])||r>y||c<y}for(d=0;d<C&&!(!Z()&&(this.updateRangeFromParsed(i,g,h,s),n));++d);if(n){for(d=C-1;d>=0;--d)if(!Z()){this.updateRangeFromParsed(i,g,h,s);break}}return i}getAllParsedValues(g){const e=this._cachedMeta._parsed,t=[];let I,n,C;for(I=0,n=e.length;I<n;++I)C=e[I][g.axis],Ne(C)&&t.push(C);return t}getMaxOverflow(){return!1}getLabelAndValue(g){const e=this._cachedMeta,t=e.iScale,I=e.vScale,n=this.getParsed(g);return{label:t?""+t.getLabelForValue(n[t.axis]):"",value:I?""+I.getLabelForValue(n[I.axis]):""}}_update(g){const e=this._cachedMeta;this.update(g||"default"),e._clip=L1(gg(this.options.clip,E1(e.xScale,e.yScale,this.getMaxOverflow())))}update(g){}draw(){const g=this._ctx,e=this.chart,t=this._cachedMeta,I=t.data||[],n=e.chartArea,C=[],l=this._drawStart||0,s=this._drawCount||I.length-l,i=this.options.drawActiveElementsOnTop;let r;for(t.dataset&&t.dataset.draw(g,n,l,s),r=l;r<l+s;++r){const c=I[r];c.hidden||(c.active&&i?C.push(c):c.draw(g,n))}for(r=0;r<C.length;++r)C[r].draw(g,n)}getStyle(g,e){const t=e?"active":"default";return g===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(t):this.resolveDataElementOptions(g||0,t)}getContext(g,e,t){const I=this.getDataset();let n;if(g>=0&&g<this._cachedMeta.data.length){const C=this._cachedMeta.data[g];n=C.$context||(C.$context=O1(this.getContext(),g,C)),n.parsed=this.getParsed(g),n.raw=I.data[g],n.index=n.dataIndex=g}else n=this.$context||(this.$context=j1(this.chart.getContext(),this.index)),n.dataset=I,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=t,n}resolveDatasetElementOptions(g){return this._resolveElementOptions(this.datasetElementType.id,g)}resolveDataElementOptions(g,e){return this._resolveElementOptions(this.dataElementType.id,e,g)}_resolveElementOptions(g,e="default",t){const I=e==="active",n=this._cachedDataOpts,C=g+"-"+e,l=n[C],s=this.enableOptionSharing&&Xs(t);if(l)return Tp(l,s);const i=this.chart.config,r=i.datasetElementScopeKeys(this._type,g),c=I?[`${g}Hover`,"hover",g,""]:[g,""],d=i.getOptionScopes(this.getDataset(),r),h=Object.keys(cg.elements[g]),Z=()=>this.getContext(t,I,e),y=i.resolveNamedOptions(d,h,Z,c);return y.$shared&&(y.$shared=s,n[C]=Object.freeze(Tp(y,s))),y}_resolveAnimations(g,e,t){const I=this.chart,n=this._cachedDataOpts,C=`animation-${e}`,l=n[C];if(l)return l;let s;if(I.options.animation!==!1){const r=this.chart.config,c=r.datasetAnimationScopeKeys(this._type,e),d=r.getOptionScopes(this.getDataset(),c);s=r.createResolver(d,this.getContext(g,t,e))}const i=new N1(I,s&&s.animations);return s&&s._cacheable&&(n[C]=Object.freeze(i)),i}getSharedOptions(g){if(g.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},g))}includeOptions(g,e){return!e||ud(g)||this.chart._animationsDisabled}_getSharedOptions(g,e){const t=this.resolveDataElementOptions(g,e),I=this._sharedOptions,n=this.getSharedOptions(t),C=this.includeOptions(e,n)||n!==I;return this.updateSharedOptions(n,e,t),{sharedOptions:n,includeOptions:C}}updateElement(g,e,t,I){ud(I)?Object.assign(g,t):this._resolveAnimations(e,I).update(g,t)}updateSharedOptions(g,e,t){g&&!ud(e)&&this._resolveAnimations(void 0,e).update(g,t)}_setStyle(g,e,t,I){g.active=I;const n=this.getStyle(e,I);this._resolveAnimations(e,t,I).update(g,{options:!I&&this.getSharedOptions(n)||n})}removeHoverStyle(g,e,t){this._setStyle(g,t,"active",!1)}setHoverStyle(g,e,t){this._setStyle(g,t,"active",!0)}_removeDatasetHoverStyle(){const g=this._cachedMeta.dataset;g&&this._setStyle(g,void 0,"active",!1)}_setDatasetHoverStyle(){const g=this._cachedMeta.dataset;g&&this._setStyle(g,void 0,"active",!0)}_resyncElements(g){const e=this._data,t=this._cachedMeta.data;for(const[l,s,i]of this._syncList)this[l](s,i);this._syncList=[];const I=t.length,n=e.length,C=Math.min(n,I);C&&this.parse(0,C),n>I?this._insertElements(I,n-I,g):n<I&&this._removeElements(n,I-n)}_insertElements(g,e,t=!0){const I=this._cachedMeta,n=I.data,C=g+e;let l;const s=i=>{for(i.length+=e,l=i.length-1;l>=C;l--)i[l]=i[l-e]};for(s(n),l=g;l<C;++l)n[l]=new this.dataElementType;this._parsing&&s(I._parsed),this.parse(g,e),t&&this.updateElements(n,g,e,"reset")}updateElements(g,e,t,I){}_removeElements(g,e){const t=this._cachedMeta;if(this._parsing){const I=t._parsed.splice(g,e);t._stacked&&hl(t,I)}t.data.splice(g,e)}_sync(g){if(this._parsing)this._syncList.push(g);else{const[e,t,I]=g;this[e](t,I)}this.chart._dataChanges.push([this.index,...g])}_onDataPush(){const g=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-g,g])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(g,e){e&&this._sync(["_removeElements",g,e]);const t=arguments.length-2;t&&this._sync(["_insertElements",g,t])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}fA(es,"defaults",{}),fA(es,"datasetElementType",null),fA(es,"dataElementType",null);function _1(A,g){if(!A._cache.$bar){const e=A.getMatchingVisibleMetas(g);let t=[];for(let I=0,n=e.length;I<n;I++)t=t.concat(e[I].controller.getAllParsedValues(A));A._cache.$bar=vW(t.sort((I,n)=>I-n))}return A._cache.$bar}function q1(A){const g=A.iScale,e=_1(g,A.type);let t=g._length,I,n,C,l;const s=()=>{C===32767||C===-32768||(Xs(l)&&(t=Math.min(t,Math.abs(C-l)||t)),l=C)};for(I=0,n=e.length;I<n;++I)C=g.getPixelForValue(e[I]),s();for(l=void 0,I=0,n=g.ticks.length;I<n;++I)C=g.getPixelForTick(I),s();return t}function $1(A,g,e,t){const I=e.barThickness;let n,C;return jA(I)?(n=g.min*e.categoryPercentage,C=e.barPercentage):(n=I*t,C=1),{chunk:n/t,ratio:C,start:g.pixels[A]-n/2}}function AN(A,g,e,t){const I=g.pixels,n=I[A];let C=A>0?I[A-1]:null,l=A<I.length-1?I[A+1]:null;const s=e.categoryPercentage;C===null&&(C=n-(l===null?g.end-g.start:l-n)),l===null&&(l=n+n-C);const i=n-(n-Math.min(C,l))/2*s;return{chunk:Math.abs(l-C)/2*s/t,ratio:e.barPercentage,start:i}}function gN(A,g,e,t){const I=e.parse(A[0],t),n=e.parse(A[1],t),C=Math.min(I,n),l=Math.max(I,n);let s=C,i=l;Math.abs(C)>Math.abs(l)&&(s=l,i=C),g[e.axis]=i,g._custom={barStart:s,barEnd:i,start:I,end:n,min:C,max:l}}function zW(A,g,e,t){return Wg(A)?gN(A,g,e,t):g[e.axis]=e.parse(A,t),g}function jp(A,g,e,t){const I=A.iScale,n=A.vScale,C=I.getLabels(),l=I===n,s=[];let i,r,c,d;for(i=e,r=e+t;i<r;++i)d=g[i],c={},c[I.axis]=l||I.parse(C[i],i),s.push(zW(d,c,n,i));return s}function md(A){return A&&A.barStart!==void 0&&A.barEnd!==void 0}function eN(A,g,e){return A!==0?WI(A):(g.isHorizontal()?1:-1)*(g.min>=e?1:-1)}function tN(A){let g,e,t,I,n;return A.horizontal?(g=A.base>A.x,e="left",t="right"):(g=A.base<A.y,e="bottom",t="top"),g?(I="end",n="start"):(I="start",n="end"),{start:e,end:t,reverse:g,top:I,bottom:n}}function IN(A,g,e,t){let I=g.borderSkipped;const n={};if(!I){A.borderSkipped=n;return}if(I===!0){A.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:C,end:l,reverse:s,top:i,bottom:r}=tN(A);I==="middle"&&e&&(A.enableBorderRadius=!0,(e._top||0)===t?I=i:(e._bottom||0)===t?I=r:(n[Op(r,C,l,s)]=!0,I=i)),n[Op(I,C,l,s)]=!0,A.borderSkipped=n}function Op(A,g,e,t){return t?(A=nN(A,g,e),A=Pp(A,e,g)):A=Pp(A,g,e),A}function nN(A,g,e){return A===g?e:A===e?g:A}function Pp(A,g,e){return A==="start"?g:A==="end"?e:A}function CN(A,{inflateAmount:g},e){A.inflateAmount=g==="auto"?e===1?.33:0:g}class Qo extends es{parsePrimitiveData(g,e,t,I){return jp(g,e,t,I)}parseArrayData(g,e,t,I){return jp(g,e,t,I)}parseObjectData(g,e,t,I){const{iScale:n,vScale:C}=g,{xAxisKey:l="x",yAxisKey:s="y"}=this._parsing,i=n.axis==="x"?l:s,r=C.axis==="x"?l:s,c=[];let d,h,Z,y;for(d=t,h=t+I;d<h;++d)y=e[d],Z={},Z[n.axis]=n.parse(MC(y,i),d),c.push(zW(MC(y,r),Z,C,d));return c}updateRangeFromParsed(g,e,t,I){super.updateRangeFromParsed(g,e,t,I);const n=t._custom;n&&e===this._cachedMeta.vScale&&(g.min=Math.min(g.min,n.min),g.max=Math.max(g.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(g){const e=this._cachedMeta,{iScale:t,vScale:I}=e,n=this.getParsed(g),C=n._custom,l=md(C)?"["+C.start+", "+C.end+"]":""+I.getLabelForValue(n[I.axis]);return{label:""+t.getLabelForValue(n[t.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const g=this._cachedMeta;g.stack=this.getDataset().stack}update(g){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,g)}updateElements(g,e,t,I){const n=I==="reset",{index:C,_cachedMeta:{vScale:l}}=this,s=l.getBasePixel(),i=l.isHorizontal(),r=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,I);for(let h=e;h<e+t;h++){const Z=this.getParsed(h),y=n||jA(Z[l.axis])?{base:s,head:s}:this._calculateBarValuePixels(h),S=this._calculateBarIndexPixels(h,r),b=(Z._stacks||{})[l.axis],m={horizontal:i,base:y.base,enableBorderRadius:!b||md(Z._custom)||C===b._top||C===b._bottom,x:i?y.head:S.center,y:i?S.center:y.head,height:i?S.size:Math.abs(y.size),width:i?Math.abs(y.size):S.size};d&&(m.options=c||this.resolveDataElementOptions(h,g[h].active?"active":I));const G=m.options||g[h].options;IN(m,G,b,C),CN(m,G,r.ratio),this.updateElement(g[h],h,m,I)}}_getStacks(g,e){const{iScale:t}=this._cachedMeta,I=t.getMatchingVisibleMetas(this._type).filter(r=>r.controller.options.grouped),n=t.options.stacked,C=[],l=this._cachedMeta.controller.getParsed(e),s=l&&l[t.axis],i=r=>{const c=r._parsed.find(h=>h[t.axis]===s),d=c&&c[r.vScale.axis];if(jA(d)||isNaN(d))return!0};for(const r of I)if(!(e!==void 0&&i(r))&&((n===!1||C.indexOf(r.stack)===-1||n===void 0&&r.stack===void 0)&&C.push(r.stack),r.index===g))break;return C.length||C.push(void 0),C}_getStackCount(g){return this._getStacks(void 0,g).length}_getStackIndex(g,e,t){const I=this._getStacks(g,t),n=e!==void 0?I.indexOf(e):-1;return n===-1?I.length-1:n}_getRuler(){const g=this.options,e=this._cachedMeta,t=e.iScale,I=[];let n,C;for(n=0,C=e.data.length;n<C;++n)I.push(t.getPixelForValue(this.getParsed(n)[t.axis],n));const l=g.barThickness;return{min:l||q1(e),pixels:I,start:t._startPixel,end:t._endPixel,stackCount:this._getStackCount(),scale:t,grouped:g.grouped,ratio:l?1:g.categoryPercentage*g.barPercentage}}_calculateBarValuePixels(g){const{_cachedMeta:{vScale:e,_stacked:t,index:I},options:{base:n,minBarLength:C}}=this,l=n||0,s=this.getParsed(g),i=s._custom,r=md(i);let c=s[e.axis],d=0,h=t?this.applyStack(e,s,t):c,Z,y;h!==c&&(d=h-c,h=c),r&&(c=i.barStart,h=i.barEnd-i.barStart,c!==0&&WI(c)!==WI(i.barEnd)&&(d=0),d+=c);const S=!jA(n)&&!r?n:d;let b=e.getPixelForValue(S);if(this.chart.getDataVisibility(g)?Z=e.getPixelForValue(d+h):Z=b,y=Z-b,Math.abs(y)<C){y=eN(y,e,l)*C,c===l&&(b-=y/2);const m=e.getPixelForDecimal(0),G=e.getPixelForDecimal(1),V=Math.min(m,G),W=Math.max(m,G);b=Math.max(Math.min(b,W),V),Z=b+y,t&&!r&&(s._stacks[e.axis]._visualValues[I]=e.getValueForPixel(Z)-e.getValueForPixel(b))}if(b===e.getPixelForValue(l)){const m=WI(y)*e.getLineWidthForValue(l)/2;b+=m,y-=m}return{size:y,base:b,head:Z,center:Z+y/2}}_calculateBarIndexPixels(g,e){const t=e.scale,I=this.options,n=I.skipNull,C=gg(I.maxBarThickness,1/0);let l,s;if(e.grouped){const i=n?this._getStackCount(g):e.stackCount,r=I.barThickness==="flex"?AN(g,e,I,i):$1(g,e,I,i),c=this._getStackIndex(this.index,this._cachedMeta.stack,n?g:void 0);l=r.start+r.chunk*c+r.chunk/2,s=Math.min(C,r.chunk*r.ratio)}else l=t.getPixelForValue(this.getParsed(g)[t.axis],g),s=Math.min(C,e.min*e.ratio);return{base:l-s/2,head:l+s/2,center:l,size:s}}draw(){const g=this._cachedMeta,e=g.vScale,t=g.data,I=t.length;let n=0;for(;n<I;++n)this.getParsed(n)[e.axis]!==null&&!t[n].hidden&&t[n].draw(this._ctx)}}fA(Qo,"id","bar"),fA(Qo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),fA(Qo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function tn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ph{constructor(g){fA(this,"options");this.options=g||{}}static override(g){Object.assign(ph.prototype,g)}init(){}formats(){return tn()}parse(){return tn()}format(){return tn()}add(){return tn()}diff(){return tn()}startOf(){return tn()}endOf(){return tn()}}var lN={_date:ph};function sN(A,g,e,t){const{controller:I,data:n,_sorted:C}=A,l=I._cachedMeta.iScale;if(l&&g===l.axis&&g!=="r"&&C&&n.length){const s=l._reversePixels?PK:rm;if(t){if(I._sharedOptions){const i=n[0],r=typeof i.getRange=="function"&&i.getRange(g);if(r){const c=s(n,g,e-r),d=s(n,g,e+r);return{lo:c.lo,hi:d.hi}}}}else return s(n,g,e)}return{lo:0,hi:n.length-1}}function Ts(A,g,e,t,I){const n=A.getSortedVisibleDatasetMetas(),C=e[g];for(let l=0,s=n.length;l<s;++l){const{index:i,data:r}=n[l],{lo:c,hi:d}=sN(n[l],g,C,I);for(let h=c;h<=d;++h){const Z=r[h];Z.skip||t(Z,i,h)}}}function iN(A){const g=A.indexOf("x")!==-1,e=A.indexOf("y")!==-1;return function(t,I){const n=g?Math.abs(t.x-I.x):0,C=e?Math.abs(t.y-I.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(C,2))}}function Bd(A,g,e,t,I){const n=[];return!I&&!A.isPointInArea(g)||Ts(A,e,g,function(l,s,i){!I&&!YW(l,A.chartArea,0)||l.inRange(g.x,g.y,t)&&n.push({element:l,datasetIndex:s,index:i})},!0),n}function oN(A,g,e,t){let I=[];function n(C,l,s){const{startAngle:i,endAngle:r}=C.getProps(["startAngle","endAngle"],t),{angle:c}=TK(C,{x:g.x,y:g.y});jK(c,i,r)&&I.push({element:C,datasetIndex:l,index:s})}return Ts(A,e,g,n),I}function aN(A,g,e,t,I,n){let C=[];const l=iN(e);let s=Number.POSITIVE_INFINITY;function i(r,c,d){const h=r.inRange(g.x,g.y,I);if(t&&!h)return;const Z=r.getCenterPoint(I);if(!(!!n||A.isPointInArea(Z))&&!h)return;const S=l(g,Z);S<s?(C=[{element:r,datasetIndex:c,index:d}],s=S):S===s&&C.push({element:r,datasetIndex:c,index:d})}return Ts(A,e,g,i),C}function hd(A,g,e,t,I,n){return!n&&!A.isPointInArea(g)?[]:e==="r"&&!t?oN(A,g,e,I):aN(A,g,e,t,I,n)}function _p(A,g,e,t,I){const n=[],C=e==="x"?"inXRange":"inYRange";let l=!1;return Ts(A,e,g,(s,i,r)=>{s[C]&&s[C](g[e],I)&&(n.push({element:s,datasetIndex:i,index:r}),l=l||s.inRange(g.x,g.y,I))}),t&&!l?[]:n}var rN={evaluateInteractionItems:Ts,modes:{index(A,g,e,t){const I=on(g,A),n=e.axis||"x",C=e.includeInvisible||!1,l=e.intersect?Bd(A,I,n,t,C):hd(A,I,n,!1,t,C),s=[];return l.length?(A.getSortedVisibleDatasetMetas().forEach(i=>{const r=l[0].index,c=i.data[r];c&&!c.skip&&s.push({element:c,datasetIndex:i.index,index:r})}),s):[]},dataset(A,g,e,t){const I=on(g,A),n=e.axis||"xy",C=e.includeInvisible||!1;let l=e.intersect?Bd(A,I,n,t,C):hd(A,I,n,!1,t,C);if(l.length>0){const s=l[0].datasetIndex,i=A.getDatasetMeta(s).data;l=[];for(let r=0;r<i.length;++r)l.push({element:i[r],datasetIndex:s,index:r})}return l},point(A,g,e,t){const I=on(g,A),n=e.axis||"xy",C=e.includeInvisible||!1;return Bd(A,I,n,t,C)},nearest(A,g,e,t){const I=on(g,A),n=e.axis||"xy",C=e.includeInvisible||!1;return hd(A,I,n,e.intersect,t,C)},x(A,g,e,t){const I=on(g,A);return _p(A,I,"x",e.intersect,t)},y(A,g,e,t){const I=on(g,A);return _p(A,I,"y",e.intersect,t)}}};const TW=["left","top","right","bottom"];function bl(A,g){return A.filter(e=>e.pos===g)}function qp(A,g){return A.filter(e=>TW.indexOf(e.pos)===-1&&e.box.axis===g)}function Zl(A,g){return A.sort((e,t)=>{const I=g?t:e,n=g?e:t;return I.weight===n.weight?I.index-n.index:I.weight-n.weight})}function cN(A){const g=[];let e,t,I,n,C,l;for(e=0,t=(A||[]).length;e<t;++e)I=A[e],{position:n,options:{stack:C,stackWeight:l=1}}=I,g.push({index:e,box:I,pos:n,horizontal:I.isHorizontal(),weight:I.weight,stack:C&&n+C,stackWeight:l});return g}function dN(A){const g={};for(const e of A){const{stack:t,pos:I,stackWeight:n}=e;if(!t||!TW.includes(I))continue;const C=g[t]||(g[t]={count:0,placed:0,weight:0,size:0});C.count++,C.weight+=n}return g}function uN(A,g){const e=dN(A),{vBoxMaxWidth:t,hBoxMaxHeight:I}=g;let n,C,l;for(n=0,C=A.length;n<C;++n){l=A[n];const{fullSize:s}=l.box,i=e[l.stack],r=i&&l.stackWeight/i.weight;l.horizontal?(l.width=r?r*t:s&&g.availableWidth,l.height=I):(l.width=t,l.height=r?r*I:s&&g.availableHeight)}return e}function mN(A){const g=cN(A),e=Zl(g.filter(i=>i.box.fullSize),!0),t=Zl(bl(g,"left"),!0),I=Zl(bl(g,"right")),n=Zl(bl(g,"top"),!0),C=Zl(bl(g,"bottom")),l=qp(g,"x"),s=qp(g,"y");return{fullSize:e,leftAndTop:t.concat(n),rightAndBottom:I.concat(s).concat(C).concat(l),chartArea:bl(g,"chartArea"),vertical:t.concat(I).concat(s),horizontal:n.concat(C).concat(l)}}function $p(A,g,e,t){return Math.max(A[e],g[e])+Math.max(A[t],g[t])}function jW(A,g){A.top=Math.max(A.top,g.top),A.left=Math.max(A.left,g.left),A.bottom=Math.max(A.bottom,g.bottom),A.right=Math.max(A.right,g.right)}function BN(A,g,e,t){const{pos:I,box:n}=e,C=A.maxPadding;if(!WA(I)){e.size&&(A[I]-=e.size);const c=t[e.stack]||{size:0,count:1};c.size=Math.max(c.size,e.horizontal?n.height:n.width),e.size=c.size/c.count,A[I]+=e.size}n.getPadding&&jW(C,n.getPadding());const l=Math.max(0,g.outerWidth-$p(C,A,"left","right")),s=Math.max(0,g.outerHeight-$p(C,A,"top","bottom")),i=l!==A.w,r=s!==A.h;return A.w=l,A.h=s,e.horizontal?{same:i,other:r}:{same:r,other:i}}function hN(A){const g=A.maxPadding;function e(t){const I=Math.max(g[t]-A[t],0);return A[t]+=I,I}A.y+=e("top"),A.x+=e("left"),e("right"),e("bottom")}function bN(A,g){const e=g.maxPadding;function t(I){const n={left:0,top:0,right:0,bottom:0};return I.forEach(C=>{n[C]=Math.max(g[C],e[C])}),n}return t(A?["left","right"]:["top","bottom"])}function kl(A,g,e,t){const I=[];let n,C,l,s,i,r;for(n=0,C=A.length,i=0;n<C;++n){l=A[n],s=l.box,s.update(l.width||g.w,l.height||g.h,bN(l.horizontal,g));const{same:c,other:d}=BN(g,e,l,t);i|=c&&I.length,r=r||d,s.fullSize||I.push(l)}return i&&kl(I,g,e,t)||r}function Mi(A,g,e,t,I){A.top=e,A.left=g,A.right=g+t,A.bottom=e+I,A.width=t,A.height=I}function AG(A,g,e,t){const I=e.padding;let{x:n,y:C}=g;for(const l of A){const s=l.box,i=t[l.stack]||{count:1,placed:0,weight:1},r=l.stackWeight/i.weight||1;if(l.horizontal){const c=g.w*r,d=i.size||s.height;Xs(i.start)&&(C=i.start),s.fullSize?Mi(s,I.left,C,e.outerWidth-I.right-I.left,d):Mi(s,g.left+i.placed,C,c,d),i.start=C,i.placed+=c,C=s.bottom}else{const c=g.h*r,d=i.size||s.width;Xs(i.start)&&(n=i.start),s.fullSize?Mi(s,n,I.top,d,e.outerHeight-I.bottom-I.top):Mi(s,n,g.top+i.placed,d,c),i.start=n,i.placed+=c,n=s.right}}g.x=n,g.y=C}var Di={addBox(A,g){A.boxes||(A.boxes=[]),g.fullSize=g.fullSize||!1,g.position=g.position||"top",g.weight=g.weight||0,g._layers=g._layers||function(){return[{z:0,draw(e){g.draw(e)}}]},A.boxes.push(g)},removeBox(A,g){const e=A.boxes?A.boxes.indexOf(g):-1;e!==-1&&A.boxes.splice(e,1)},configure(A,g,e){g.fullSize=e.fullSize,g.position=e.position,g.weight=e.weight},update(A,g,e,t){if(!A)return;const I=Js(A.options.layout.padding),n=Math.max(g-I.width,0),C=Math.max(e-I.height,0),l=mN(A.boxes),s=l.vertical,i=l.horizontal;Hg(A.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const r=s.reduce((y,S)=>S.box.options&&S.box.options.display===!1?y:y+1,0)||1,c=Object.freeze({outerWidth:g,outerHeight:e,padding:I,availableWidth:n,availableHeight:C,vBoxMaxWidth:n/2/r,hBoxMaxHeight:C/2}),d=Object.assign({},I);jW(d,Js(t));const h=Object.assign({maxPadding:d,w:n,h:C,x:I.left,y:I.top},I),Z=uN(s.concat(i),c);kl(l.fullSize,h,c,Z),kl(s,h,c,Z),kl(i,h,c,Z)&&kl(s,h,c,Z),hN(h),AG(l.leftAndTop,h,c,Z),h.x+=h.w,h.y+=h.h,AG(l.rightAndBottom,h,c,Z),A.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Hg(l.chartArea,y=>{const S=y.box;Object.assign(S,A.chartArea),S.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class OW{acquireContext(g,e){}releaseContext(g){return!1}addEventListener(g,e,t){}removeEventListener(g,e,t){}getDevicePixelRatio(){return 1}getMaximumSize(g,e,t,I){return e=Math.max(0,e||g.width),t=t||g.height,{width:e,height:Math.max(0,I?Math.floor(e/I):t)}}isAttached(g){return!0}updateConfig(g){}}class ZN extends OW{acquireContext(g){return g&&g.getContext&&g.getContext("2d")||null}updateConfig(g){g.options.animation=!1}}const Ko="$chartjs",pN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gG=A=>A===null||A==="";function GN(A,g){const e=A.style,t=A.getAttribute("height"),I=A.getAttribute("width");if(A[Ko]={initial:{height:t,width:I,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",gG(I)){const n=xp(A,"width");n!==void 0&&(A.width=n)}if(gG(t))if(A.style.height==="")A.height=A.width/(g||2);else{const n=xp(A,"height");n!==void 0&&(A.height=n)}return A}const PW=H1?{passive:!0}:!1;function yN(A,g,e){A&&A.addEventListener(g,e,PW)}function fN(A,g,e){A&&A.canvas&&A.canvas.removeEventListener(g,e,PW)}function SN(A,g){const e=pN[A.type]||A.type,{x:t,y:I}=on(A,g);return{type:e,chart:g,native:A,x:t!==void 0?t:null,y:I!==void 0?I:null}}function wa(A,g){for(const e of A)if(e===g||e.contains(g))return!0}function VN(A,g,e){const t=A.canvas,I=new MutationObserver(n=>{let C=!1;for(const l of n)C=C||wa(l.addedNodes,t),C=C&&!wa(l.removedNodes,t);C&&e()});return I.observe(document,{childList:!0,subtree:!0}),I}function WN(A,g,e){const t=A.canvas,I=new MutationObserver(n=>{let C=!1;for(const l of n)C=C||wa(l.removedNodes,t),C=C&&!wa(l.addedNodes,t);C&&e()});return I.observe(document,{childList:!0,subtree:!0}),I}const Fs=new Map;let eG=0;function _W(){const A=window.devicePixelRatio;A!==eG&&(eG=A,Fs.forEach((g,e)=>{e.currentDevicePixelRatio!==A&&g()}))}function RN(A,g){Fs.size||window.addEventListener("resize",_W),Fs.set(A,g)}function vN(A){Fs.delete(A),Fs.size||window.removeEventListener("resize",_W)}function wN(A,g,e){const t=A.canvas,I=t&&Zh(t);if(!I)return;const n=XW((l,s)=>{const i=I.clientWidth;e(l,s),i<I.clientWidth&&e()},window),C=new ResizeObserver(l=>{const s=l[0],i=s.contentRect.width,r=s.contentRect.height;i===0&&r===0||n(i,r)});return C.observe(I),RN(A,n),C}function bd(A,g,e){e&&e.disconnect(),g==="resize"&&vN(A)}function XN(A,g,e){const t=A.canvas,I=XW(n=>{A.ctx!==null&&e(SN(n,A))},A);return yN(t,g,I),I}class JN extends OW{acquireContext(g,e){const t=g&&g.getContext&&g.getContext("2d");return t&&t.canvas===g?(GN(g,e),t):null}releaseContext(g){const e=g.canvas;if(!e[Ko])return!1;const t=e[Ko].initial;["height","width"].forEach(n=>{const C=t[n];jA(C)?e.removeAttribute(n):e.setAttribute(n,C)});const I=t.style||{};return Object.keys(I).forEach(n=>{e.style[n]=I[n]}),e.width=e.width,delete e[Ko],!0}addEventListener(g,e,t){this.removeEventListener(g,e);const I=g.$proxies||(g.$proxies={}),C={attach:VN,detach:WN,resize:wN}[e]||XN;I[e]=C(g,e,t)}removeEventListener(g,e){const t=g.$proxies||(g.$proxies={}),I=t[e];if(!I)return;({attach:bd,detach:bd,resize:bd}[e]||fN)(g,e,I),t[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(g,e,t,I){return k1(g,e,t,I)}isAttached(g){const e=g&&Zh(g);return!!(e&&e.isConnected)}}function FN(A){return!bh()||typeof OffscreenCanvas<"u"&&A instanceof OffscreenCanvas?ZN:JN}var po;let Gh=(po=class{constructor(){fA(this,"x");fA(this,"y");fA(this,"active",!1);fA(this,"options");fA(this,"$animations")}tooltipPosition(g){const{x:e,y:t}=this.getProps(["x","y"],g);return{x:e,y:t}}hasValue(){return Ra(this.x)&&Ra(this.y)}getProps(g,e){const t=this.$animations;if(!e||!t)return this;const I={};return g.forEach(n=>{I[n]=t[n]&&t[n].active()?t[n]._to:this[n]}),I}},fA(po,"defaults",{}),fA(po,"defaultRoutes"),po);function kN(A,g){const e=A.options.ticks,t=HN(A),I=Math.min(e.maxTicksLimit||t,t),n=e.major.enabled?QN(g):[],C=n.length,l=n[0],s=n[C-1],i=[];if(C>I)return KN(g,i,n,C/I),i;const r=YN(n,g,I);if(C>0){let c,d;const h=C>1?Math.round((s-l)/(C-1)):null;for(zi(g,i,r,jA(h)?0:l-h,l),c=0,d=C-1;c<d;c++)zi(g,i,r,n[c],n[c+1]);return zi(g,i,r,s,jA(h)?g.length:s+h),i}return zi(g,i,r),i}function HN(A){const g=A.options.offset,e=A._tickSize(),t=A._length/e+(g?0:1),I=A._maxLength/e;return Math.floor(Math.min(t,I))}function YN(A,g,e){const t=NN(A),I=g.length/e;if(!t)return Math.max(I,1);const n=LK(t);for(let C=0,l=n.length-1;C<l;C++){const s=n[C];if(s>I)return s}return Math.max(I,1)}function QN(A){const g=[];let e,t;for(e=0,t=A.length;e<t;e++)A[e].major&&g.push(e);return g}function KN(A,g,e,t){let I=0,n=e[0],C;for(t=Math.ceil(t),C=0;C<A.length;C++)C===n&&(g.push(A[C]),I++,n=e[I*t])}function zi(A,g,e,t,I){const n=gg(t,0),C=Math.min(gg(I,A.length),A.length);let l=0,s,i,r;for(e=Math.ceil(e),I&&(s=I-t,e=s/Math.floor(s/e)),r=n;r<0;)l++,r=Math.round(n+l*e);for(i=Math.max(n,0);i<C;i++)i===r&&(g.push(A[i]),l++,r=Math.round(n+l*e))}function NN(A){const g=A.length;let e,t;if(g<2)return!1;for(t=A[0],e=1;e<g;++e)if(A[e]-A[e-1]!==t)return!1;return t}const UN=A=>A==="left"?"right":A==="right"?"left":A,tG=(A,g,e)=>g==="top"||g==="left"?A[g]+e:A[g]-e,IG=(A,g)=>Math.min(g||A,A);function nG(A,g){const e=[],t=A.length/g,I=A.length;let n=0;for(;n<I;n+=t)e.push(A[Math.floor(n)]);return e}function xN(A,g,e){const t=A.ticks.length,I=Math.min(g,t-1),n=A._startPixel,C=A._endPixel,l=1e-6;let s=A.getPixelForTick(I),i;if(!(e&&(t===1?i=Math.max(s-n,C-s):g===0?i=(A.getPixelForTick(1)-s)/2:i=(s-A.getPixelForTick(I-1))/2,s+=I<g?i:-i,s<n-l||s>C+l)))return s}function EN(A,g){Hg(A,e=>{const t=e.gc,I=t.length/2;let n;if(I>g){for(n=0;n<I;++n)delete e.data[t[n]];t.splice(0,I)}})}function pl(A){return A.drawTicks?A.tickLength:0}function CG(A,g){if(!A.display)return 0;const e=dm(A.font,g),t=Js(A.padding);return(Wg(A.text)?A.text.length:1)*e.lineHeight+t.height}function LN(A,g){return zs(A,{scale:g,type:"scale"})}function MN(A,g,e){return zs(A,{tick:e,index:g,type:"tick"})}function DN(A,g,e){let t=A1(A);return(e&&g!=="right"||!e&&g==="right")&&(t=UN(t)),t}function zN(A,g,e,t){const{top:I,left:n,bottom:C,right:l,chart:s}=A,{chartArea:i,scales:r}=s;let c=0,d,h,Z;const y=C-I,S=l-n;if(A.isHorizontal()){if(h=wp(t,n,l),WA(e)){const b=Object.keys(e)[0],m=e[b];Z=r[b].getPixelForValue(m)+y-g}else e==="center"?Z=(i.bottom+i.top)/2+y-g:Z=tG(A,e,g);d=l-n}else{if(WA(e)){const b=Object.keys(e)[0],m=e[b];h=r[b].getPixelForValue(m)-S+g}else e==="center"?h=(i.left+i.right)/2-S+g:h=tG(A,e,g);Z=wp(t,C,I),c=e==="left"?-Gn:Gn}return{titleX:h,titleY:Z,maxWidth:d,rotation:c}}class gl extends Gh{constructor(g){super(),this.id=g.id,this.type=g.type,this.options=void 0,this.ctx=g.ctx,this.chart=g.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(g){this.options=g.setContext(this.getContext()),this.axis=g.axis,this._userMin=this.parse(g.min),this._userMax=this.parse(g.max),this._suggestedMin=this.parse(g.suggestedMin),this._suggestedMax=this.parse(g.suggestedMax)}parse(g,e){return g}getUserBounds(){let{_userMin:g,_userMax:e,_suggestedMin:t,_suggestedMax:I}=this;return g=lt(g,Number.POSITIVE_INFINITY),e=lt(e,Number.NEGATIVE_INFINITY),t=lt(t,Number.POSITIVE_INFINITY),I=lt(I,Number.NEGATIVE_INFINITY),{min:lt(g,t),max:lt(e,I),minDefined:Ne(g),maxDefined:Ne(e)}}getMinMax(g){let{min:e,max:t,minDefined:I,maxDefined:n}=this.getUserBounds(),C;if(I&&n)return{min:e,max:t};const l=this.getMatchingVisibleMetas();for(let s=0,i=l.length;s<i;++s)C=l[s].controller.getMinMax(this,g),I||(e=Math.min(e,C.min)),n||(t=Math.max(t,C.max));return e=n&&e>t?t:e,t=I&&e>t?e:t,{min:lt(e,lt(t,e)),max:lt(t,lt(e,t))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const g=this.chart.data;return this.options.labels||(this.isHorizontal()?g.xLabels:g.yLabels)||g.labels||[]}getLabelItems(g=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(g))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Cg(this.options.beforeUpdate,[this])}update(g,e,t){const{beginAtZero:I,grace:n,ticks:C}=this.options,l=C.sampleSize;this.beforeUpdate(),this.maxWidth=g,this.maxHeight=e,this._margins=t=Object.assign({left:0,right:0,top:0,bottom:0},t),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+t.left+t.right:this.height+t.top+t.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=b1(this,n,I),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=l<this.ticks.length;this._convertTicksToLabels(s?nG(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),C.display&&(C.autoSkip||C.source==="auto")&&(this.ticks=kN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let g=this.options.reverse,e,t;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,g=!g),this._startPixel=e,this._endPixel=t,this._reversePixels=g,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Cg(this.options.afterUpdate,[this])}beforeSetDimensions(){Cg(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Cg(this.options.afterSetDimensions,[this])}_callHooks(g){this.chart.notifyPlugins(g,this.getContext()),Cg(this.options[g],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Cg(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(g){const e=this.options.ticks;let t,I,n;for(t=0,I=g.length;t<I;t++)n=g[t],n.label=Cg(e.callback,[n.value,t,g],this)}afterTickToLabelConversion(){Cg(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Cg(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const g=this.options,e=g.ticks,t=IG(this.ticks.length,g.ticks.maxTicksLimit),I=e.minRotation||0,n=e.maxRotation;let C=I,l,s,i;if(!this._isVisible()||!e.display||I>=n||t<=1||!this.isHorizontal()){this.labelRotation=I;return}const r=this._getLabelSizes(),c=r.widest.width,d=r.highest.height,h=Ft(this.chart.width-c,0,this.maxWidth);l=g.offset?this.maxWidth/t:h/(t-1),c+6>l&&(l=h/(t-(g.offset?.5:1)),s=this.maxHeight-pl(g.grid)-e.padding-CG(g.title,this.chart.options.font),i=Math.sqrt(c*c+d*d),C=zK(Math.min(Math.asin(Ft((r.highest.height+6)/l,-1,1)),Math.asin(Ft(s/i,-1,1))-Math.asin(Ft(d/i,-1,1)))),C=Math.max(I,Math.min(n,C))),this.labelRotation=C}afterCalculateLabelRotation(){Cg(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Cg(this.options.beforeFit,[this])}fit(){const g={width:0,height:0},{chart:e,options:{ticks:t,title:I,grid:n}}=this,C=this._isVisible(),l=this.isHorizontal();if(C){const s=CG(I,e.options.font);if(l?(g.width=this.maxWidth,g.height=pl(n)+s):(g.height=this.maxHeight,g.width=pl(n)+s),t.display&&this.ticks.length){const{first:i,last:r,widest:c,highest:d}=this._getLabelSizes(),h=t.padding*2,Z=Bn(this.labelRotation),y=Math.cos(Z),S=Math.sin(Z);if(l){const b=t.mirror?0:S*c.width+y*d.height;g.height=Math.min(this.maxHeight,g.height+b+h)}else{const b=t.mirror?0:y*c.width+S*d.height;g.width=Math.min(this.maxWidth,g.width+b+h)}this._calculatePadding(i,r,S,y)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=g.height):(this.width=g.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(g,e,t,I){const{ticks:{align:n,padding:C},position:l}=this.options,s=this.labelRotation!==0,i=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const r=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;s?i?(d=I*g.width,h=t*e.height):(d=t*g.height,h=I*e.width):n==="start"?h=e.width:n==="end"?d=g.width:n!=="inner"&&(d=g.width/2,h=e.width/2),this.paddingLeft=Math.max((d-r+C)*this.width/(this.width-r),0),this.paddingRight=Math.max((h-c+C)*this.width/(this.width-c),0)}else{let r=e.height/2,c=g.height/2;n==="start"?(r=0,c=g.height):n==="end"&&(r=e.height,c=0),this.paddingTop=r+C,this.paddingBottom=c+C}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Cg(this.options.afterFit,[this])}isHorizontal(){const{axis:g,position:e}=this.options;return e==="top"||e==="bottom"||g==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(g){this.beforeTickToLabelConversion(),this.generateTickLabels(g);let e,t;for(e=0,t=g.length;e<t;e++)jA(g[e].label)&&(g.splice(e,1),t--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let g=this._labelSizes;if(!g){const e=this.options.ticks.sampleSize;let t=this.ticks;e<t.length&&(t=nG(t,e)),this._labelSizes=g=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return g}_computeLabelSizes(g,e,t){const{ctx:I,_longestTextCache:n}=this,C=[],l=[],s=Math.floor(e/IG(e,t));let i=0,r=0,c,d,h,Z,y,S,b,m,G,V,W;for(c=0;c<e;c+=s){if(Z=g[c].label,y=this._resolveTickFontOptions(c),I.font=S=y.string,b=n[S]=n[S]||{data:{},gc:[]},m=y.lineHeight,G=V=0,!jA(Z)&&!Wg(Z))G=Hp(I,b.data,b.gc,G,Z),V=m;else if(Wg(Z))for(d=0,h=Z.length;d<h;++d)W=Z[d],!jA(W)&&!Wg(W)&&(G=Hp(I,b.data,b.gc,G,W),V+=m);C.push(G),l.push(V),i=Math.max(G,i),r=Math.max(V,r)}EN(n,e);const R=C.indexOf(i),X=l.indexOf(r),F=H=>({width:C[H]||0,height:l[H]||0});return{first:F(0),last:F(e-1),widest:F(R),highest:F(X),widths:C,heights:l}}getLabelForValue(g){return g}getPixelForValue(g,e){return NaN}getValueForPixel(g){}getPixelForTick(g){const e=this.ticks;return g<0||g>e.length-1?null:this.getPixelForValue(e[g].value)}getPixelForDecimal(g){this._reversePixels&&(g=1-g);const e=this._startPixel+g*this._length;return OK(this._alignToPixels?en(this.chart,e,0):e)}getDecimalForPixel(g){const e=(g-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:g,max:e}=this;return g<0&&e<0?e:g>0&&e>0?g:0}getContext(g){const e=this.ticks||[];if(g>=0&&g<e.length){const t=e[g];return t.$context||(t.$context=MN(this.getContext(),g,t))}return this.$context||(this.$context=LN(this.chart.getContext(),this))}_tickSize(){const g=this.options.ticks,e=Bn(this.labelRotation),t=Math.abs(Math.cos(e)),I=Math.abs(Math.sin(e)),n=this._getLabelSizes(),C=g.autoSkipPadding||0,l=n?n.widest.width+C:0,s=n?n.highest.height+C:0;return this.isHorizontal()?s*t>l*I?l/t:s/I:s*I<l*t?s/t:l/I}_isVisible(){const g=this.options.display;return g!=="auto"?!!g:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(g){const e=this.axis,t=this.chart,I=this.options,{grid:n,position:C,border:l}=I,s=n.offset,i=this.isHorizontal(),c=this.ticks.length+(s?1:0),d=pl(n),h=[],Z=l.setContext(this.getContext()),y=Z.display?Z.width:0,S=y/2,b=function(tA){return en(t,tA,y)};let m,G,V,W,R,X,F,H,K,_,gA,AA;if(C==="top")m=b(this.bottom),X=this.bottom-d,H=m-S,_=b(g.top)+S,AA=g.bottom;else if(C==="bottom")m=b(this.top),_=g.top,AA=b(g.bottom)-S,X=m+S,H=this.top+d;else if(C==="left")m=b(this.right),R=this.right-d,F=m-S,K=b(g.left)+S,gA=g.right;else if(C==="right")m=b(this.left),K=g.left,gA=b(g.right)-S,R=m+S,F=this.left+d;else if(e==="x"){if(C==="center")m=b((g.top+g.bottom)/2+.5);else if(WA(C)){const tA=Object.keys(C)[0],oA=C[tA];m=b(this.chart.scales[tA].getPixelForValue(oA))}_=g.top,AA=g.bottom,X=m+S,H=X+d}else if(e==="y"){if(C==="center")m=b((g.left+g.right)/2);else if(WA(C)){const tA=Object.keys(C)[0],oA=C[tA];m=b(this.chart.scales[tA].getPixelForValue(oA))}R=m-S,F=R-d,K=g.left,gA=g.right}const rA=gg(I.ticks.maxTicksLimit,c),uA=Math.max(1,Math.ceil(c/rA));for(G=0;G<c;G+=uA){const tA=this.getContext(G),oA=n.setContext(tA),Q=l.setContext(tA),P=oA.lineWidth,J=oA.color,IA=Q.dash||[],iA=Q.dashOffset,ZA=oA.tickWidth,aA=oA.tickColor,SA=oA.tickBorderDash||[],mA=oA.tickBorderDashOffset;V=xN(this,G,s),V!==void 0&&(W=en(t,V,P),i?R=F=K=gA=W:X=H=_=AA=W,h.push({tx1:R,ty1:X,tx2:F,ty2:H,x1:K,y1:_,x2:gA,y2:AA,width:P,color:J,borderDash:IA,borderDashOffset:iA,tickWidth:ZA,tickColor:aA,tickBorderDash:SA,tickBorderDashOffset:mA}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(g){const e=this.axis,t=this.options,{position:I,ticks:n}=t,C=this.isHorizontal(),l=this.ticks,{align:s,crossAlign:i,padding:r,mirror:c}=n,d=pl(t.grid),h=d+r,Z=c?-r:h,y=-Bn(this.labelRotation),S=[];let b,m,G,V,W,R,X,F,H,K,_,gA,AA="middle";if(I==="top")R=this.bottom-Z,X=this._getXAxisLabelAlignment();else if(I==="bottom")R=this.top+Z,X=this._getXAxisLabelAlignment();else if(I==="left"){const uA=this._getYAxisLabelAlignment(d);X=uA.textAlign,W=uA.x}else if(I==="right"){const uA=this._getYAxisLabelAlignment(d);X=uA.textAlign,W=uA.x}else if(e==="x"){if(I==="center")R=(g.top+g.bottom)/2+h;else if(WA(I)){const uA=Object.keys(I)[0],tA=I[uA];R=this.chart.scales[uA].getPixelForValue(tA)+h}X=this._getXAxisLabelAlignment()}else if(e==="y"){if(I==="center")W=(g.left+g.right)/2-h;else if(WA(I)){const uA=Object.keys(I)[0],tA=I[uA];W=this.chart.scales[uA].getPixelForValue(tA)}X=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(s==="start"?AA="top":s==="end"&&(AA="bottom"));const rA=this._getLabelSizes();for(b=0,m=l.length;b<m;++b){G=l[b],V=G.label;const uA=n.setContext(this.getContext(b));F=this.getPixelForTick(b)+n.labelOffset,H=this._resolveTickFontOptions(b),K=H.lineHeight,_=Wg(V)?V.length:1;const tA=_/2,oA=uA.color,Q=uA.textStrokeColor,P=uA.textStrokeWidth;let J=X;C?(W=F,X==="inner"&&(b===m-1?J=this.options.reverse?"left":"right":b===0?J=this.options.reverse?"right":"left":J="center"),I==="top"?i==="near"||y!==0?gA=-_*K+K/2:i==="center"?gA=-rA.highest.height/2-tA*K+K:gA=-rA.highest.height+K/2:i==="near"||y!==0?gA=K/2:i==="center"?gA=rA.highest.height/2-tA*K:gA=rA.highest.height-_*K,c&&(gA*=-1),y!==0&&!uA.showLabelBackdrop&&(W+=K/2*Math.sin(y))):(R=F,gA=(1-_)*K/2);let IA;if(uA.showLabelBackdrop){const iA=Js(uA.backdropPadding),ZA=rA.heights[b],aA=rA.widths[b];let SA=gA-iA.top,mA=0-iA.left;switch(AA){case"middle":SA-=ZA/2;break;case"bottom":SA-=ZA;break}switch(X){case"center":mA-=aA/2;break;case"right":mA-=aA;break;case"inner":b===m-1?mA-=aA:b>0&&(mA-=aA/2);break}IA={left:mA,top:SA,width:aA+iA.width,height:ZA+iA.height,color:uA.backdropColor}}S.push({label:V,font:H,textOffset:gA,options:{rotation:y,color:oA,strokeColor:Q,strokeWidth:P,textAlign:J,textBaseline:AA,translation:[W,R],backdrop:IA}})}return S}_getXAxisLabelAlignment(){const{position:g,ticks:e}=this.options;if(-Bn(this.labelRotation))return g==="top"?"left":"right";let I="center";return e.align==="start"?I="left":e.align==="end"?I="right":e.align==="inner"&&(I="inner"),I}_getYAxisLabelAlignment(g){const{position:e,ticks:{crossAlign:t,mirror:I,padding:n}}=this.options,C=this._getLabelSizes(),l=g+n,s=C.widest.width;let i,r;return e==="left"?I?(r=this.right+n,t==="near"?i="left":t==="center"?(i="center",r+=s/2):(i="right",r+=s)):(r=this.right-l,t==="near"?i="right":t==="center"?(i="center",r-=s/2):(i="left",r=this.left)):e==="right"?I?(r=this.left+n,t==="near"?i="right":t==="center"?(i="center",r-=s/2):(i="left",r-=s)):(r=this.left+l,t==="near"?i="left":t==="center"?(i="center",r+=s/2):(i="right",r=this.right)):i="right",{textAlign:i,x:r}}_computeLabelArea(){if(this.options.ticks.mirror)return;const g=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:g.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:g.width}}drawBackground(){const{ctx:g,options:{backgroundColor:e},left:t,top:I,width:n,height:C}=this;e&&(g.save(),g.fillStyle=e,g.fillRect(t,I,n,C),g.restore())}getLineWidthForValue(g){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const I=this.ticks.findIndex(n=>n.value===g);return I>=0?e.setContext(this.getContext(I)).lineWidth:0}drawGrid(g){const e=this.options.grid,t=this.ctx,I=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(g));let n,C;const l=(s,i,r)=>{!r.width||!r.color||(t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset,t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(i.x,i.y),t.stroke(),t.restore())};if(e.display)for(n=0,C=I.length;n<C;++n){const s=I[n];e.drawOnChartArea&&l({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),e.drawTicks&&l({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){const{chart:g,ctx:e,options:{border:t,grid:I}}=this,n=t.setContext(this.getContext()),C=t.display?n.width:0;if(!C)return;const l=I.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let i,r,c,d;this.isHorizontal()?(i=en(g,this.left,C)-C/2,r=en(g,this.right,l)+l/2,c=d=s):(c=en(g,this.top,C)-C/2,d=en(g,this.bottom,l)+l/2,i=r=s),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(i,c),e.lineTo(r,d),e.stroke(),e.restore()}drawLabels(g){if(!this.options.ticks.display)return;const t=this.ctx,I=this._computeLabelArea();I&&QW(t,I);const n=this.getLabelItems(g);for(const C of n){const l=C.options,s=C.font,i=C.label,r=C.textOffset;Qp(t,i,0,r,s,l)}I&&KW(t)}drawTitle(){const{ctx:g,options:{position:e,title:t,reverse:I}}=this;if(!t.display)return;const n=dm(t.font),C=Js(t.padding),l=t.align;let s=n.lineHeight/2;e==="bottom"||e==="center"||WA(e)?(s+=C.bottom,Wg(t.text)&&(s+=n.lineHeight*(t.text.length-1))):s+=C.top;const{titleX:i,titleY:r,maxWidth:c,rotation:d}=zN(this,s,e,l);Qp(g,t.text,0,0,n,{color:t.color,maxWidth:c,rotation:d,textAlign:DN(l,e,I),textBaseline:"middle",translation:[i,r]})}draw(g){this._isVisible()&&(this.drawBackground(),this.drawGrid(g),this.drawBorder(),this.drawTitle(),this.drawLabels(g))}_layers(){const g=this.options,e=g.ticks&&g.ticks.z||0,t=gg(g.grid&&g.grid.z,-1),I=gg(g.border&&g.border.z,0);return!this._isVisible()||this.draw!==gl.prototype.draw?[{z:e,draw:n=>{this.draw(n)}}]:[{z:t,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:I,draw:()=>{this.drawBorder()}},{z:e,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(g){const e=this.chart.getSortedVisibleDatasetMetas(),t=this.axis+"AxisID",I=[];let n,C;for(n=0,C=e.length;n<C;++n){const l=e[n];l[t]===this.id&&(!g||l.type===g)&&I.push(l)}return I}_resolveTickFontOptions(g){const e=this.options.ticks.setContext(this.getContext(g));return dm(e.font)}_maxDigits(){const g=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/g}}class Ti{constructor(g,e,t){this.type=g,this.scope=e,this.override=t,this.items=Object.create(null)}isForType(g){return Object.prototype.isPrototypeOf.call(this.type.prototype,g.prototype)}register(g){const e=Object.getPrototypeOf(g);let t;ON(e)&&(t=this.register(e));const I=this.items,n=g.id,C=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+g);return n in I||(I[n]=g,TN(g,C,t),this.override&&cg.override(g.id,g.overrides)),C}get(g){return this.items[g]}unregister(g){const e=this.items,t=g.id,I=this.scope;t in e&&delete e[t],I&&t in cg[I]&&(delete cg[I][t],this.override&&delete Fn[t])}}function TN(A,g,e){const t=ws(Object.create(null),[e?cg.get(e):{},cg.get(g),A.defaults]);cg.set(g,t),A.defaultRoutes&&jN(g,A.defaultRoutes),A.descriptors&&cg.describe(g,A.descriptors)}function jN(A,g){Object.keys(g).forEach(e=>{const t=e.split("."),I=t.pop(),n=[A].concat(t).join("."),C=g[e].split("."),l=C.pop(),s=C.join(".");cg.route(n,I,s,l)})}function ON(A){return"id"in A&&"defaults"in A}class PN{constructor(){this.controllers=new Ti(es,"datasets",!0),this.elements=new Ti(Gh,"elements"),this.plugins=new Ti(Object,"plugins"),this.scales=new Ti(gl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...g){this._each("register",g)}remove(...g){this._each("unregister",g)}addControllers(...g){this._each("register",g,this.controllers)}addElements(...g){this._each("register",g,this.elements)}addPlugins(...g){this._each("register",g,this.plugins)}addScales(...g){this._each("register",g,this.scales)}getController(g){return this._get(g,this.controllers,"controller")}getElement(g){return this._get(g,this.elements,"element")}getPlugin(g){return this._get(g,this.plugins,"plugin")}getScale(g){return this._get(g,this.scales,"scale")}removeControllers(...g){this._each("unregister",g,this.controllers)}removeElements(...g){this._each("unregister",g,this.elements)}removePlugins(...g){this._each("unregister",g,this.plugins)}removeScales(...g){this._each("unregister",g,this.scales)}_each(g,e,t){[...e].forEach(I=>{const n=t||this._getRegistryForType(I);t||n.isForType(I)||n===this.plugins&&I.id?this._exec(g,n,I):Hg(I,C=>{const l=t||this._getRegistryForType(C);this._exec(g,l,C)})})}_exec(g,e,t){const I=dh(g);Cg(t["before"+I],[],t),e[g](t),Cg(t["after"+I],[],t)}_getRegistryForType(g){for(let e=0;e<this._typedRegistries.length;e++){const t=this._typedRegistries[e];if(t.isForType(g))return t}return this.plugins}_get(g,e,t){const I=e.get(g);if(I===void 0)throw new Error('"'+g+'" is not a registered '+t+".");return I}}var ot=new PN;class _N{constructor(){this._init=[]}notify(g,e,t,I){e==="beforeInit"&&(this._init=this._createDescriptors(g,!0),this._notify(this._init,g,"install"));const n=I?this._descriptors(g).filter(I):this._descriptors(g),C=this._notify(n,g,e,t);return e==="afterDestroy"&&(this._notify(n,g,"stop"),this._notify(this._init,g,"uninstall")),C}_notify(g,e,t,I){I=I||{};for(const n of g){const C=n.plugin,l=C[t],s=[e,I,n.options];if(Cg(l,s,C)===!1&&I.cancelable)return!1}return!0}invalidate(){jA(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(g){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(g);return this._notifyStateChanges(g),e}_createDescriptors(g,e){const t=g&&g.config,I=gg(t.options&&t.options.plugins,{}),n=qN(t);return I===!1&&!e?[]:AU(g,n,I,e)}_notifyStateChanges(g){const e=this._oldCache||[],t=this._cache,I=(n,C)=>n.filter(l=>!C.some(s=>l.plugin.id===s.plugin.id));this._notify(I(e,t),g,"stop"),this._notify(I(t,e),g,"start")}}function qN(A){const g={},e=[],t=Object.keys(ot.plugins.items);for(let n=0;n<t.length;n++)e.push(ot.getPlugin(t[n]));const I=A.plugins||[];for(let n=0;n<I.length;n++){const C=I[n];e.indexOf(C)===-1&&(e.push(C),g[C.id]=!0)}return{plugins:e,localIds:g}}function $N(A,g){return!g&&A===!1?null:A===!0?{}:A}function AU(A,{plugins:g,localIds:e},t,I){const n=[],C=A.getContext();for(const l of g){const s=l.id,i=$N(t[s],I);i!==null&&n.push({plugin:l,options:gU(A.config,{plugin:l,local:e[s]},i,C)})}return n}function gU(A,{plugin:g,local:e},t,I){const n=A.pluginScopeKeys(g),C=A.getOptionScopes(t,n);return e&&g.defaults&&C.push(g.defaults),A.createResolver(C,I,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function um(A,g){const e=cg.datasets[A]||{};return((g.datasets||{})[A]||{}).indexAxis||g.indexAxis||e.indexAxis||"x"}function eU(A,g){let e=A;return A==="_index_"?e=g:A==="_value_"&&(e=g==="x"?"y":"x"),e}function tU(A,g){return A===g?"_index_":"_value_"}function lG(A){if(A==="x"||A==="y"||A==="r")return A}function IU(A){if(A==="top"||A==="bottom")return"x";if(A==="left"||A==="right")return"y"}function mm(A,...g){if(lG(A))return A;for(const e of g){const t=e.axis||IU(e.position)||A.length>1&&lG(A[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${A}' axis. Please provide 'axis' or 'position' option.`)}function sG(A,g,e){if(e[g+"AxisID"]===A)return{axis:g}}function nU(A,g){if(g.data&&g.data.datasets){const e=g.data.datasets.filter(t=>t.xAxisID===A||t.yAxisID===A);if(e.length)return sG(A,"x",e[0])||sG(A,"y",e[0])}return{}}function CU(A,g){const e=Fn[A.type]||{scales:{}},t=g.scales||{},I=um(A.type,g),n=Object.create(null);return Object.keys(t).forEach(C=>{const l=t[C];if(!WA(l))return console.error(`Invalid scale configuration for scale: ${C}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${C}`);const s=mm(C,l,nU(C,A),cg.scales[l.type]),i=tU(s,I),r=e.scales||{};n[C]=$l(Object.create(null),[{axis:s},l,r[s],r[i]])}),A.data.datasets.forEach(C=>{const l=C.type||A.type,s=C.indexAxis||um(l,g),r=(Fn[l]||{}).scales||{};Object.keys(r).forEach(c=>{const d=eU(c,s),h=C[d+"AxisID"]||d;n[h]=n[h]||Object.create(null),$l(n[h],[{axis:d},t[h],r[c]])})}),Object.keys(n).forEach(C=>{const l=n[C];$l(l,[cg.scales[l.type],cg.scale])}),n}function qW(A){const g=A.options||(A.options={});g.plugins=gg(g.plugins,{}),g.scales=CU(A,g)}function $W(A){return A=A||{},A.datasets=A.datasets||[],A.labels=A.labels||[],A}function lU(A){return A=A||{},A.data=$W(A.data),qW(A),A}const iG=new Map,AR=new Set;function ji(A,g){let e=iG.get(A);return e||(e=g(),iG.set(A,e),AR.add(e)),e}const Gl=(A,g,e)=>{const t=MC(g,e);t!==void 0&&A.add(t)};class sU{constructor(g){this._config=lU(g),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(g){this._config.type=g}get data(){return this._config.data}set data(g){this._config.data=$W(g)}get options(){return this._config.options}set options(g){this._config.options=g}get plugins(){return this._config.plugins}update(){const g=this._config;this.clearCache(),qW(g)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(g){return ji(g,()=>[[`datasets.${g}`,""]])}datasetAnimationScopeKeys(g,e){return ji(`${g}.transition.${e}`,()=>[[`datasets.${g}.transitions.${e}`,`transitions.${e}`],[`datasets.${g}`,""]])}datasetElementScopeKeys(g,e){return ji(`${g}-${e}`,()=>[[`datasets.${g}.elements.${e}`,`datasets.${g}`,`elements.${e}`,""]])}pluginScopeKeys(g){const e=g.id,t=this.type;return ji(`${t}-plugin-${e}`,()=>[[`plugins.${e}`,...g.additionalOptionScopes||[]]])}_cachedScopes(g,e){const t=this._scopeCache;let I=t.get(g);return(!I||e)&&(I=new Map,t.set(g,I)),I}getOptionScopes(g,e,t){const{options:I,type:n}=this,C=this._cachedScopes(g,t),l=C.get(e);if(l)return l;const s=new Set;e.forEach(r=>{g&&(s.add(g),r.forEach(c=>Gl(s,g,c))),r.forEach(c=>Gl(s,I,c)),r.forEach(c=>Gl(s,Fn[n]||{},c)),r.forEach(c=>Gl(s,cg,c)),r.forEach(c=>Gl(s,cm,c))});const i=Array.from(s);return i.length===0&&i.push(Object.create(null)),AR.has(e)&&C.set(e,i),i}chartOptionScopes(){const{options:g,type:e}=this;return[g,Fn[e]||{},cg.datasets[e]||{},{type:e},cg,cm]}resolveNamedOptions(g,e,t,I=[""]){const n={$shared:!0},{resolver:C,subPrefixes:l}=oG(this._resolverCache,g,I);let s=C;if(oU(C,e)){n.$shared=!1,t=HI(t)?t():t;const i=this.createResolver(g,t,l);s=DC(C,t,i)}for(const i of e)n[i]=s[i];return n}createResolver(g,e,t=[""],I){const{resolver:n}=oG(this._resolverCache,g,t);return WA(e)?DC(n,e,void 0,I):n}}function oG(A,g,e){let t=A.get(g);t||(t=new Map,A.set(g,t));const I=e.join();let n=t.get(I);return n||(n={resolver:mh(g,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},t.set(I,n)),n}const iU=A=>WA(A)&&Object.getOwnPropertyNames(A).some(g=>HI(A[g]));function oU(A,g){const{isScriptable:e,isIndexable:t}=xW(A);for(const I of g){const n=e(I),C=t(I),l=(C||n)&&A[I];if(n&&(HI(l)||iU(l))||C&&Wg(l))return!0}return!1}var aU="4.4.6";const rU=["top","bottom","left","right","chartArea"];function aG(A,g){return A==="top"||A==="bottom"||rU.indexOf(A)===-1&&g==="x"}function rG(A,g){return function(e,t){return e[A]===t[A]?e[g]-t[g]:e[A]-t[A]}}function cG(A){const g=A.chart,e=g.options.animation;g.notifyPlugins("afterRender"),Cg(e&&e.onComplete,[A],g)}function cU(A){const g=A.chart,e=g.options.animation;Cg(e&&e.onProgress,[A],g)}function gR(A){return bh()&&typeof A=="string"?A=document.getElementById(A):A&&A.length&&(A=A[0]),A&&A.canvas&&(A=A.canvas),A}const No={},dG=A=>{const g=gR(A);return Object.values(No).filter(e=>e.canvas===g).pop()};function dU(A,g,e){const t=Object.keys(A);for(const I of t){const n=+I;if(n>=g){const C=A[I];delete A[I],(e>0||n>g)&&(A[n+e]=C)}}}function uU(A,g,e,t){return!e||A.type==="mouseout"?null:t?g:A}function Oi(A,g,e){return A.options.clip?A[e]:g[e]}function mU(A,g){const{xScale:e,yScale:t}=A;return e&&t?{left:Oi(e,g,"left"),right:Oi(e,g,"right"),top:Oi(t,g,"top"),bottom:Oi(t,g,"bottom")}:g}var AI;let hr=(AI=class{static register(...g){ot.add(...g),uG()}static unregister(...g){ot.remove(...g),uG()}constructor(g,e){const t=this.config=new sU(e),I=gR(g),n=dG(I);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const C=t.createResolver(t.chartOptionScopes(),this.getContext());this.platform=new(t.platform||FN(I)),this.platform.updateConfig(t);const l=this.platform.acquireContext(I,C.aspectRatio),s=l&&l.canvas,i=s&&s.height,r=s&&s.width;if(this.id=YK(),this.ctx=l,this.canvas=s,this.width=r,this.height=i,this._options=C,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _N,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$K(c=>this.update(c),C.resizeDelay||0),this._dataChanges=[],No[this.id]=this,!l||!s){console.error("Failed to create chart: can't acquire context from the given item");return}Wt.listen(this,"complete",cG),Wt.listen(this,"progress",cU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:g,maintainAspectRatio:e},width:t,height:I,_aspectRatio:n}=this;return jA(g)?e&&n?n:I?t/I:null:g}get data(){return this.config.data}set data(g){this.config.data=g}get options(){return this._options}set options(g){this.config.options=g}get registry(){return ot}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Up(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Yp(this.canvas,this.ctx),this}stop(){return Wt.stop(this),this}resize(g,e){Wt.running(this)?this._resizeBeforeDraw={width:g,height:e}:this._resize(g,e)}_resize(g,e){const t=this.options,I=this.canvas,n=t.maintainAspectRatio&&this.aspectRatio,C=this.platform.getMaximumSize(I,g,e,n),l=t.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=C.width,this.height=C.height,this._aspectRatio=this.aspectRatio,Up(this,l,!0)&&(this.notifyPlugins("resize",{size:C}),Cg(t.onResize,[this,C],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Hg(e,(t,I)=>{t.id=I})}buildOrUpdateScales(){const g=this.options,e=g.scales,t=this.scales,I=Object.keys(t).reduce((C,l)=>(C[l]=!1,C),{});let n=[];e&&(n=n.concat(Object.keys(e).map(C=>{const l=e[C],s=mm(C,l),i=s==="r",r=s==="x";return{options:l,dposition:i?"chartArea":r?"bottom":"left",dtype:i?"radialLinear":r?"category":"linear"}}))),Hg(n,C=>{const l=C.options,s=l.id,i=mm(s,l),r=gg(l.type,C.dtype);(l.position===void 0||aG(l.position,i)!==aG(C.dposition))&&(l.position=C.dposition),I[s]=!0;let c=null;if(s in t&&t[s].type===r)c=t[s];else{const d=ot.getScale(r);c=new d({id:s,type:r,ctx:this.ctx,chart:this}),t[c.id]=c}c.init(l,g)}),Hg(I,(C,l)=>{C||delete t[l]}),Hg(t,C=>{Di.configure(this,C,C.options),Di.addBox(this,C)})}_updateMetasets(){const g=this._metasets,e=this.data.datasets.length,t=g.length;if(g.sort((I,n)=>I.index-n.index),t>e){for(let I=e;I<t;++I)this._destroyDatasetMeta(I);g.splice(e,t-e)}this._sortedMetasets=g.slice(0).sort(rG("order","index"))}_removeUnreferencedMetasets(){const{_metasets:g,data:{datasets:e}}=this;g.length>e.length&&delete this._stacks,g.forEach((t,I)=>{e.filter(n=>n===t._dataset).length===0&&this._destroyDatasetMeta(I)})}buildOrUpdateControllers(){const g=[],e=this.data.datasets;let t,I;for(this._removeUnreferencedMetasets(),t=0,I=e.length;t<I;t++){const n=e[t];let C=this.getDatasetMeta(t);const l=n.type||this.config.type;if(C.type&&C.type!==l&&(this._destroyDatasetMeta(t),C=this.getDatasetMeta(t)),C.type=l,C.indexAxis=n.indexAxis||um(l,this.options),C.order=n.order||0,C.index=t,C.label=""+n.label,C.visible=this.isDatasetVisible(t),C.controller)C.controller.updateIndex(t),C.controller.linkScales();else{const s=ot.getController(l),{datasetElementType:i,dataElementType:r}=cg.datasets[l];Object.assign(s,{dataElementType:ot.getElement(r),datasetElementType:i&&ot.getElement(i)}),C.controller=new s(this,t),g.push(C.controller)}}return this._updateMetasets(),g}_resetElements(){Hg(this.data.datasets,(g,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(g){const e=this.config;e.update();const t=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),I=this._animationsDisabled=!t.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:g,cancelable:!0})===!1)return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let C=0;for(let i=0,r=this.data.datasets.length;i<r;i++){const{controller:c}=this.getDatasetMeta(i),d=!I&&n.indexOf(c)===-1;c.buildOrUpdateElements(d),C=Math.max(+c.getMaxOverflow(),C)}C=this._minPadding=t.layout.autoPadding?C:0,this._updateLayout(C),I||Hg(n,i=>{i.reset()}),this._updateDatasets(g),this.notifyPlugins("afterUpdate",{mode:g}),this._layers.sort(rG("z","_idx"));const{_active:l,_lastEvent:s}=this;s?this._eventHandler(s,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Hg(this.scales,g=>{Di.removeBox(this,g)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const g=this.options,e=new Set(Object.keys(this._listeners)),t=new Set(g.events);(!Sp(e,t)||!!this._responsiveListeners!==g.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:g}=this,e=this._getUniformDataChanges()||[];for(const{method:t,start:I,count:n}of e){const C=t==="_removeElements"?-n:n;dU(g,I,C)}}_getUniformDataChanges(){const g=this._dataChanges;if(!g||!g.length)return;this._dataChanges=[];const e=this.data.datasets.length,t=n=>new Set(g.filter(C=>C[0]===n).map((C,l)=>l+","+C.splice(1).join(","))),I=t(0);for(let n=1;n<e;n++)if(!Sp(I,t(n)))return;return Array.from(I).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}_updateLayout(g){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Di.update(this,this.width,this.height,g);const e=this.chartArea,t=e.width<=0||e.height<=0;this._layers=[],Hg(this.boxes,I=>{t&&I.position==="chartArea"||(I.configure&&I.configure(),this._layers.push(...I._layers()))},this),this._layers.forEach((I,n)=>{I._idx=n}),this.notifyPlugins("afterLayout")}_updateDatasets(g){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:g,cancelable:!0})!==!1){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,t=this.data.datasets.length;e<t;++e)this._updateDataset(e,HI(g)?g({datasetIndex:e}):g);this.notifyPlugins("afterDatasetsUpdate",{mode:g})}}_updateDataset(g,e){const t=this.getDatasetMeta(g),I={meta:t,index:g,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",I)!==!1&&(t.controller._update(e),I.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",I))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wt.has(this)?this.attached&&!Wt.running(this)&&Wt.start(this):(this.draw(),cG({chart:this})))}draw(){let g;if(this._resizeBeforeDraw){const{width:t,height:I}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,I)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(g=0;g<e.length&&e[g].z<=0;++g)e[g].draw(this.chartArea);for(this._drawDatasets();g<e.length;++g)e[g].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(g){const e=this._sortedMetasets,t=[];let I,n;for(I=0,n=e.length;I<n;++I){const C=e[I];(!g||C.visible)&&t.push(C)}return t}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const g=this.getSortedVisibleDatasetMetas();for(let e=g.length-1;e>=0;--e)this._drawDataset(g[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(g){const e=this.ctx,t=g._clip,I=!t.disabled,n=mU(g,this.chartArea),C={meta:g,index:g.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",C)!==!1&&(I&&QW(e,{left:t.left===!1?0:n.left-t.left,right:t.right===!1?this.width:n.right+t.right,top:t.top===!1?0:n.top-t.top,bottom:t.bottom===!1?this.height:n.bottom+t.bottom}),g.controller.draw(),I&&KW(e),C.cancelable=!1,this.notifyPlugins("afterDatasetDraw",C))}isPointInArea(g){return YW(g,this.chartArea,this._minPadding)}getElementsAtEventForMode(g,e,t,I){const n=rN.modes[e];return typeof n=="function"?n(this,g,t,I):[]}getDatasetMeta(g){const e=this.data.datasets[g],t=this._metasets;let I=t.filter(n=>n&&n._dataset===e).pop();return I||(I={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:g,_dataset:e,_parsed:[],_sorted:!1},t.push(I)),I}getContext(){return this.$context||(this.$context=zs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(g){const e=this.data.datasets[g];if(!e)return!1;const t=this.getDatasetMeta(g);return typeof t.hidden=="boolean"?!t.hidden:!e.hidden}setDatasetVisibility(g,e){const t=this.getDatasetMeta(g);t.hidden=!e}toggleDataVisibility(g){this._hiddenIndices[g]=!this._hiddenIndices[g]}getDataVisibility(g){return!this._hiddenIndices[g]}_updateVisibility(g,e,t){const I=t?"show":"hide",n=this.getDatasetMeta(g),C=n.controller._resolveAnimations(void 0,I);Xs(e)?(n.data[e].hidden=!t,this.update()):(this.setDatasetVisibility(g,t),C.update(n,{visible:t}),this.update(l=>l.datasetIndex===g?I:void 0))}hide(g,e){this._updateVisibility(g,e,!1)}show(g,e){this._updateVisibility(g,e,!0)}_destroyDatasetMeta(g){const e=this._metasets[g];e&&e.controller&&e.controller._destroy(),delete this._metasets[g]}_stop(){let g,e;for(this.stop(),Wt.remove(this),g=0,e=this.data.datasets.length;g<e;++g)this._destroyDatasetMeta(g)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:g,ctx:e}=this;this._stop(),this.config.clearCache(),g&&(this.unbindEvents(),Yp(g,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete No[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...g){return this.canvas.toDataURL(...g)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const g=this._listeners,e=this.platform,t=(n,C)=>{e.addEventListener(this,n,C),g[n]=C},I=(n,C,l)=>{n.offsetX=C,n.offsetY=l,this._eventHandler(n)};Hg(this.options.events,n=>t(n,I))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const g=this._responsiveListeners,e=this.platform,t=(s,i)=>{e.addEventListener(this,s,i),g[s]=i},I=(s,i)=>{g[s]&&(e.removeEventListener(this,s,i),delete g[s])},n=(s,i)=>{this.canvas&&this.resize(s,i)};let C;const l=()=>{I("attach",l),this.attached=!0,this.resize(),t("resize",n),t("detach",C)};C=()=>{this.attached=!1,I("resize",n),this._stop(),this._resize(0,0),t("attach",l)},e.isAttached(this.canvas)?l():C()}unbindEvents(){Hg(this._listeners,(g,e)=>{this.platform.removeEventListener(this,e,g)}),this._listeners={},Hg(this._responsiveListeners,(g,e)=>{this.platform.removeEventListener(this,e,g)}),this._responsiveListeners=void 0}updateHoverStyle(g,e,t){const I=t?"set":"remove";let n,C,l,s;for(e==="dataset"&&(n=this.getDatasetMeta(g[0].datasetIndex),n.controller["_"+I+"DatasetHoverStyle"]()),l=0,s=g.length;l<s;++l){C=g[l];const i=C&&this.getDatasetMeta(C.datasetIndex).controller;i&&i[I+"HoverStyle"](C.element,C.datasetIndex,C.index)}}getActiveElements(){return this._active||[]}setActiveElements(g){const e=this._active||[],t=g.map(({datasetIndex:n,index:C})=>{const l=this.getDatasetMeta(n);if(!l)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:l.data[C],index:C}});!yp(t,e)&&(this._active=t,this._lastEvent=null,this._updateHoverStyles(t,e))}notifyPlugins(g,e,t){return this._plugins.notify(this,g,e,t)}isPluginEnabled(g){return this._plugins._cache.filter(e=>e.plugin.id===g).length===1}_updateHoverStyles(g,e,t){const I=this.options.hover,n=(s,i)=>s.filter(r=>!i.some(c=>r.datasetIndex===c.datasetIndex&&r.index===c.index)),C=n(e,g),l=t?g:n(g,e);C.length&&this.updateHoverStyle(C,I.mode,!1),l.length&&I.mode&&this.updateHoverStyle(l,I.mode,!0)}_eventHandler(g,e){const t={event:g,replay:e,cancelable:!0,inChartArea:this.isPointInArea(g)},I=C=>(C.options.events||this.options.events).includes(g.native.type);if(this.notifyPlugins("beforeEvent",t,I)===!1)return;const n=this._handleEvent(g,e,t.inChartArea);return t.cancelable=!1,this.notifyPlugins("afterEvent",t,I),(n||t.changed)&&this.render(),this}_handleEvent(g,e,t){const{_active:I=[],options:n}=this,C=e,l=this._getActiveElements(g,I,t,C),s=EK(g),i=uU(g,this._lastEvent,t,s);t&&(this._lastEvent=null,Cg(n.onHover,[g,l,this],this),s&&Cg(n.onClick,[g,l,this],this));const r=!yp(l,I);return(r||e)&&(this._active=l,this._updateHoverStyles(l,I,e)),this._lastEvent=i,r}_getActiveElements(g,e,t,I){if(g.type==="mouseout")return[];if(!t)return e;const n=this.options.hover;return this.getElementsAtEventForMode(g,n.mode,n,I)}},fA(AI,"defaults",cg),fA(AI,"instances",No),fA(AI,"overrides",Fn),fA(AI,"registry",ot),fA(AI,"version",aU),fA(AI,"getChart",dG),AI);function uG(){return Hg(hr.instances,A=>A._plugins.invalidate())}function eR(A,g){const{x:e,y:t,base:I,width:n,height:C}=A.getProps(["x","y","base","width","height"],g);let l,s,i,r,c;return A.horizontal?(c=C/2,l=Math.min(e,I),s=Math.max(e,I),i=t-c,r=t+c):(c=n/2,l=e-c,s=e+c,i=Math.min(t,I),r=Math.max(t,I)),{left:l,top:i,right:s,bottom:r}}function cI(A,g,e,t){return A?0:Ft(g,e,t)}function BU(A,g,e){const t=A.options.borderWidth,I=A.borderSkipped,n=UW(t);return{t:cI(I.top,n.top,0,e),r:cI(I.right,n.right,0,g),b:cI(I.bottom,n.bottom,0,e),l:cI(I.left,n.left,0,g)}}function hU(A,g,e){const{enableBorderRadius:t}=A.getProps(["enableBorderRadius"]),I=A.options.borderRadius,n=h1(I),C=Math.min(g,e),l=A.borderSkipped,s=t||WA(I);return{topLeft:cI(!s||l.top||l.left,n.topLeft,0,C),topRight:cI(!s||l.top||l.right,n.topRight,0,C),bottomLeft:cI(!s||l.bottom||l.left,n.bottomLeft,0,C),bottomRight:cI(!s||l.bottom||l.right,n.bottomRight,0,C)}}function bU(A){const g=eR(A),e=g.right-g.left,t=g.bottom-g.top,I=BU(A,e/2,t/2),n=hU(A,e/2,t/2);return{outer:{x:g.left,y:g.top,w:e,h:t,radius:n},inner:{x:g.left+I.l,y:g.top+I.t,w:e-I.l-I.r,h:t-I.t-I.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(I.t,I.l)),topRight:Math.max(0,n.topRight-Math.max(I.t,I.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(I.b,I.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(I.b,I.r))}}}}function Zd(A,g,e,t){const I=g===null,n=e===null,l=A&&!(I&&n)&&eR(A,t);return l&&(I||Rp(g,l.left,l.right))&&(n||Rp(e,l.top,l.bottom))}function ZU(A){return A.topLeft||A.topRight||A.bottomLeft||A.bottomRight}function pU(A,g){A.rect(g.x,g.y,g.w,g.h)}function pd(A,g,e={}){const t=A.x!==e.x?-g:0,I=A.y!==e.y?-g:0,n=(A.x+A.w!==e.x+e.w?g:0)-t,C=(A.y+A.h!==e.y+e.h?g:0)-I;return{x:A.x+t,y:A.y+I,w:A.w+n,h:A.h+C,radius:A.radius}}class Uo extends Gh{constructor(g){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,g&&Object.assign(this,g)}draw(g){const{inflateAmount:e,options:{borderColor:t,backgroundColor:I}}=this,{inner:n,outer:C}=bU(this),l=ZU(C.radius)?c1:pU;g.save(),(C.w!==n.w||C.h!==n.h)&&(g.beginPath(),l(g,pd(C,e,n)),g.clip(),l(g,pd(n,-e,C)),g.fillStyle=t,g.fill("evenodd")),g.beginPath(),l(g,pd(n,e)),g.fillStyle=I,g.fill(),g.restore()}inRange(g,e,t){return Zd(this,g,e,t)}inXRange(g,e){return Zd(this,g,null,e)}inYRange(g,e){return Zd(this,null,g,e)}getCenterPoint(g){const{x:e,y:t,base:I,horizontal:n}=this.getProps(["x","y","base","horizontal"],g);return{x:n?(e+I)/2:e,y:n?t:(t+I)/2}}getRange(g){return g==="x"?this.width/2:this.height/2}}fA(Uo,"id","bar"),fA(Uo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),fA(Uo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const GU=(A,g,e,t)=>(typeof g=="string"?(e=A.push(g)-1,t.unshift({index:e,label:g})):isNaN(g)&&(e=null),e);function yU(A,g,e,t){const I=A.indexOf(g);if(I===-1)return GU(A,g,e,t);const n=A.lastIndexOf(g);return I!==n?e:I}const fU=(A,g)=>A===null?null:Ft(Math.round(A),0,g);function mG(A){const g=this.getLabels();return A>=0&&A<g.length?g[A]:A}class Bm extends gl{constructor(g){super(g),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(g){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:I,label:n}of e)t[I]===n&&t.splice(I,1);this._addedLabels=[]}super.init(g)}parse(g,e){if(jA(g))return null;const t=this.getLabels();return e=isFinite(e)&&t[e]===g?e:yU(t,g,gg(e,g),this._addedLabels),fU(e,t.length-1)}determineDataLimits(){const{minDefined:g,maxDefined:e}=this.getUserBounds();let{min:t,max:I}=this.getMinMax(!0);this.options.bounds==="ticks"&&(g||(t=0),e||(I=this.getLabels().length-1)),this.min=t,this.max=I}buildTicks(){const g=this.min,e=this.max,t=this.options.offset,I=[];let n=this.getLabels();n=g===0&&e===n.length-1?n:n.slice(g,e+1),this._valueRange=Math.max(n.length-(t?0:1),1),this._startValue=this.min-(t?.5:0);for(let C=g;C<=e;C++)I.push({value:C});return I}getLabelForValue(g){return mG.call(this,g)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(g){return typeof g!="number"&&(g=this.parse(g)),g===null?NaN:this.getPixelForDecimal((g-this._startValue)/this._valueRange)}getPixelForTick(g){const e=this.ticks;return g<0||g>e.length-1?null:this.getPixelForValue(e[g].value)}getValueForPixel(g){return Math.round(this._startValue+this.getDecimalForPixel(g)*this._valueRange)}getBasePixel(){return this.bottom}}fA(Bm,"id","category"),fA(Bm,"defaults",{ticks:{callback:mG}});function SU(A,g){const e=[],{bounds:I,step:n,min:C,max:l,precision:s,count:i,maxTicks:r,maxDigits:c,includeBounds:d}=A,h=n||1,Z=r-1,{min:y,max:S}=g,b=!jA(C),m=!jA(l),G=!jA(i),V=(S-y)/(c+1);let W=Vp((S-y)/Z/h)*h,R,X,F,H;if(W<1e-14&&!b&&!m)return[{value:y},{value:S}];H=Math.ceil(S/W)-Math.floor(y/W),H>Z&&(W=Vp(H*W/Z/h)*h),jA(s)||(R=Math.pow(10,s),W=Math.ceil(W*R)/R),I==="ticks"?(X=Math.floor(y/W)*W,F=Math.ceil(S/W)*W):(X=y,F=S),b&&m&&n&&MK((l-C)/n,W/1e3)?(H=Math.round(Math.min((l-C)/W,r)),W=(l-C)/H,X=C,F=l):G?(X=b?C:X,F=m?l:F,H=i-1,W=(F-X)/H):(H=(F-X)/W,Yo(H,Math.round(H),W/1e3)?H=Math.round(H):H=Math.ceil(H));const K=Math.max(Wp(W),Wp(X));R=Math.pow(10,jA(s)?K:s),X=Math.round(X*R)/R,F=Math.round(F*R)/R;let _=0;for(b&&(d&&X!==C?(e.push({value:C}),X<C&&_++,Yo(Math.round((X+_*W)*R)/R,C,BG(C,V,A))&&_++):X<C&&_++);_<H;++_){const gA=Math.round((X+_*W)*R)/R;if(m&&gA>l)break;e.push({value:gA})}return m&&d&&F!==l?e.length&&Yo(e[e.length-1].value,l,BG(l,V,A))?e[e.length-1].value=l:e.push({value:l}):(!m||F===l)&&e.push({value:F}),e}function BG(A,g,{horizontal:e,minRotation:t}){const I=Bn(t),n=(e?Math.sin(I):Math.cos(I))||.001,C=.75*g*(""+A).length;return Math.min(g/n,C)}class VU extends gl{constructor(g){super(g),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(g,e){return jA(g)||(typeof g=="number"||g instanceof Number)&&!isFinite(+g)?null:+g}handleTickRangeOptions(){const{beginAtZero:g}=this.options,{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:I,max:n}=this;const C=s=>I=e?I:s,l=s=>n=t?n:s;if(g){const s=WI(I),i=WI(n);s<0&&i<0?l(0):s>0&&i>0&&C(0)}if(I===n){let s=n===0?1:Math.abs(n*.05);l(n+s),g||C(I-s)}this.min=I,this.max=n}getTickLimit(){const g=this.options.ticks;let{maxTicksLimit:e,stepSize:t}=g,I;return t?(I=Math.ceil(this.max/t)-Math.floor(this.min/t)+1,I>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${t} would result generating up to ${I} ticks. Limiting to 1000.`),I=1e3)):(I=this.computeTickLimit(),e=e||11),e&&(I=Math.min(e,I)),I}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const g=this.options,e=g.ticks;let t=this.getTickLimit();t=Math.max(2,t);const I={maxTicks:t,bounds:g.bounds,min:g.min,max:g.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},n=this._range||this,C=SU(I,n);return g.bounds==="ticks"&&DK(C,this,"value"),g.reverse?(C.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),C}configure(){const g=this.ticks;let e=this.min,t=this.max;if(super.configure(),this.options.offset&&g.length){const I=(t-e)/Math.max(g.length-1,1)/2;e-=I,t+=I}this._startValue=e,this._endValue=t,this._valueRange=t-e}getLabelForValue(g){return FW(g,this.chart.options.locale,this.options.ticks.format)}}class hm extends VU{determineDataLimits(){const{min:g,max:e}=this.getMinMax(!0);this.min=Ne(g)?g:0,this.max=Ne(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const g=this.isHorizontal(),e=g?this.width:this.height,t=Bn(this.options.ticks.minRotation),I=(g?Math.sin(t):Math.cos(t))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/I))}getPixelForValue(g){return g===null?NaN:this.getPixelForDecimal((g-this._startValue)/this._valueRange)}getValueForPixel(g){return this._startValue+this.getDecimalForPixel(g)*this._valueRange}}fA(hm,"id","linear"),fA(hm,"defaults",{ticks:{callback:HW.formatters.numeric}});const br={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$g=Object.keys(br);function hG(A,g){return A-g}function bG(A,g){if(jA(g))return null;const e=A._adapter,{parser:t,round:I,isoWeekday:n}=A._parseOpts;let C=g;return typeof t=="function"&&(C=t(C)),Ne(C)||(C=typeof t=="string"?e.parse(C,t):e.parse(C)),C===null?null:(I&&(C=I==="week"&&(Ra(n)||n===!0)?e.startOf(C,"isoWeek",n):e.startOf(C,I)),+C)}function ZG(A,g,e,t){const I=$g.length;for(let n=$g.indexOf(A);n<I-1;++n){const C=br[$g[n]],l=C.steps?C.steps:Number.MAX_SAFE_INTEGER;if(C.common&&Math.ceil((e-g)/(l*C.size))<=t)return $g[n]}return $g[I-1]}function WU(A,g,e,t,I){for(let n=$g.length-1;n>=$g.indexOf(e);n--){const C=$g[n];if(br[C].common&&A._adapter.diff(I,t,C)>=g-1)return C}return $g[e?$g.indexOf(e):0]}function RU(A){for(let g=$g.indexOf(A)+1,e=$g.length;g<e;++g)if(br[$g[g]].common)return $g[g]}function pG(A,g,e){if(!e)A[g]=!0;else if(e.length){const{lo:t,hi:I}=uh(e,g),n=e[t]>=g?e[t]:e[I];A[n]=!0}}function vU(A,g,e,t){const I=A._adapter,n=+I.startOf(g[0].value,t),C=g[g.length-1].value;let l,s;for(l=n;l<=C;l=+I.add(l,1,t))s=e[l],s>=0&&(g[s].major=!0);return g}function GG(A,g,e){const t=[],I={},n=g.length;let C,l;for(C=0;C<n;++C)l=g[C],I[l]=C,t.push({value:l,major:!1});return n===0||!e?t:vU(A,t,I,e)}class Xa extends gl{constructor(g){super(g),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(g,e={}){const t=g.time||(g.time={}),I=this._adapter=new lN._date(g.adapters.date);I.init(e),$l(t.displayFormats,I.formats()),this._parseOpts={parser:t.parser,round:t.round,isoWeekday:t.isoWeekday},super.init(g),this._normalized=e.normalized}parse(g,e){return g===void 0?null:bG(this,g)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const g=this.options,e=this._adapter,t=g.time.unit||"day";let{min:I,max:n,minDefined:C,maxDefined:l}=this.getUserBounds();function s(i){!C&&!isNaN(i.min)&&(I=Math.min(I,i.min)),!l&&!isNaN(i.max)&&(n=Math.max(n,i.max))}(!C||!l)&&(s(this._getLabelBounds()),(g.bounds!=="ticks"||g.ticks.source!=="labels")&&s(this.getMinMax(!1))),I=Ne(I)&&!isNaN(I)?I:+e.startOf(Date.now(),t),n=Ne(n)&&!isNaN(n)?n:+e.endOf(Date.now(),t)+1,this.min=Math.min(I,n-1),this.max=Math.max(I+1,n)}_getLabelBounds(){const g=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;return g.length&&(e=g[0],t=g[g.length-1]),{min:e,max:t}}buildTicks(){const g=this.options,e=g.time,t=g.ticks,I=t.source==="labels"?this.getLabelTimestamps():this._generate();g.bounds==="ticks"&&I.length&&(this.min=this._userMin||I[0],this.max=this._userMax||I[I.length-1]);const n=this.min,C=this.max,l=_K(I,n,C);return this._unit=e.unit||(t.autoSkip?ZG(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):WU(this,l.length,e.minUnit,this.min,this.max)),this._majorUnit=!t.major.enabled||this._unit==="year"?void 0:RU(this._unit),this.initOffsets(I),g.reverse&&l.reverse(),GG(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(g=>+g.value))}initOffsets(g=[]){let e=0,t=0,I,n;this.options.offset&&g.length&&(I=this.getDecimalForValue(g[0]),g.length===1?e=1-I:e=(this.getDecimalForValue(g[1])-I)/2,n=this.getDecimalForValue(g[g.length-1]),g.length===1?t=n:t=(n-this.getDecimalForValue(g[g.length-2]))/2);const C=g.length<3?.5:.25;e=Ft(e,0,C),t=Ft(t,0,C),this._offsets={start:e,end:t,factor:1/(e+1+t)}}_generate(){const g=this._adapter,e=this.min,t=this.max,I=this.options,n=I.time,C=n.unit||ZG(n.minUnit,e,t,this._getLabelCapacity(e)),l=gg(I.ticks.stepSize,1),s=C==="week"?n.isoWeekday:!1,i=Ra(s)||s===!0,r={};let c=e,d,h;if(i&&(c=+g.startOf(c,"isoWeek",s)),c=+g.startOf(c,i?"day":C),g.diff(t,e,C)>1e5*l)throw new Error(e+" and "+t+" are too far apart with stepSize of "+l+" "+C);const Z=I.ticks.source==="data"&&this.getDataTimestamps();for(d=c,h=0;d<t;d=+g.add(d,l,C),h++)pG(r,d,Z);return(d===t||I.bounds==="ticks"||h===1)&&pG(r,d,Z),Object.keys(r).sort(hG).map(y=>+y)}getLabelForValue(g){const e=this._adapter,t=this.options.time;return t.tooltipFormat?e.format(g,t.tooltipFormat):e.format(g,t.displayFormats.datetime)}format(g,e){const I=this.options.time.displayFormats,n=this._unit,C=e||I[n];return this._adapter.format(g,C)}_tickFormatFunction(g,e,t,I){const n=this.options,C=n.ticks.callback;if(C)return Cg(C,[g,e,t],this);const l=n.time.displayFormats,s=this._unit,i=this._majorUnit,r=s&&l[s],c=i&&l[i],d=t[e],h=i&&c&&d&&d.major;return this._adapter.format(g,I||(h?c:r))}generateTickLabels(g){let e,t,I;for(e=0,t=g.length;e<t;++e)I=g[e],I.label=this._tickFormatFunction(I.value,e,g)}getDecimalForValue(g){return g===null?NaN:(g-this.min)/(this.max-this.min)}getPixelForValue(g){const e=this._offsets,t=this.getDecimalForValue(g);return this.getPixelForDecimal((e.start+t)*e.factor)}getValueForPixel(g){const e=this._offsets,t=this.getDecimalForPixel(g)/e.factor-e.end;return this.min+t*(this.max-this.min)}_getLabelSize(g){const e=this.options.ticks,t=this.ctx.measureText(g).width,I=Bn(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(I),C=Math.sin(I),l=this._resolveTickFontOptions(0).size;return{w:t*n+l*C,h:t*C+l*n}}_getLabelCapacity(g){const e=this.options.time,t=e.displayFormats,I=t[e.unit]||t.millisecond,n=this._tickFormatFunction(g,0,GG(this,[g],this._majorUnit),I),C=this._getLabelSize(n),l=Math.floor(this.isHorizontal()?this.width/C.w:this.height/C.h)-1;return l>0?l:1}getDataTimestamps(){let g=this._cache.data||[],e,t;if(g.length)return g;const I=this.getMatchingVisibleMetas();if(this._normalized&&I.length)return this._cache.data=I[0].controller.getAllParsedValues(this);for(e=0,t=I.length;e<t;++e)g=g.concat(I[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(g)}getLabelTimestamps(){const g=this._cache.labels||[];let e,t;if(g.length)return g;const I=this.getLabels();for(e=0,t=I.length;e<t;++e)g.push(bG(this,I[e]));return this._cache.labels=this._normalized?g:this.normalize(g)}normalize(g){return vW(g.sort(hG))}}fA(Xa,"id","time"),fA(Xa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Pi(A,g,e){let t=0,I=A.length-1,n,C,l,s;e?(g>=A[t].pos&&g<=A[I].pos&&({lo:t,hi:I}=rm(A,"pos",g)),{pos:n,time:l}=A[t],{pos:C,time:s}=A[I]):(g>=A[t].time&&g<=A[I].time&&({lo:t,hi:I}=rm(A,"time",g)),{time:n,pos:l}=A[t],{time:C,pos:s}=A[I]);const i=C-n;return i?l+(s-l)*(g-n)/i:l}class yG extends Xa{constructor(g){super(g),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const g=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(g);this._minPos=Pi(e,this.min),this._tableRange=Pi(e,this.max)-this._minPos,super.initOffsets(g)}buildLookupTable(g){const{min:e,max:t}=this,I=[],n=[];let C,l,s,i,r;for(C=0,l=g.length;C<l;++C)i=g[C],i>=e&&i<=t&&I.push(i);if(I.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(C=0,l=I.length;C<l;++C)r=I[C+1],s=I[C-1],i=I[C],Math.round((r+s)/2)!==i&&n.push({time:i,pos:C/(l-1)});return n}_generate(){const g=this.min,e=this.max;let t=super.getDataTimestamps();return(!t.includes(g)||!t.length)&&t.splice(0,0,g),(!t.includes(e)||t.length===1)&&t.push(e),t.sort((I,n)=>I-n)}_getTimestampsForTable(){let g=this._cache.all||[];if(g.length)return g;const e=this.getDataTimestamps(),t=this.getLabelTimestamps();return e.length&&t.length?g=this.normalize(e.concat(t)):g=e.length?e:t,g=this._cache.all=g,g}getDecimalForValue(g){return(Pi(this._table,g)-this._minPos)/this._tableRange}getValueForPixel(g){const e=this._offsets,t=this.getDecimalForPixel(g)/e.factor-e.end;return Pi(this._table,t*this._tableRange+this._minPos,!0)}}fA(yG,"id","timeseries"),fA(yG,"defaults",Xa.defaults);const tR="label";function fG(A,g){typeof A=="function"?A(g):A&&(A.current=g)}function wU(A,g){const e=A.options;e&&g&&Object.assign(e,g)}function IR(A,g){A.labels=g}function nR(A,g){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tR;const t=[];A.datasets=g.map(I=>{const n=A.datasets.find(C=>C[e]===I[e]);return!n||!I.data||t.includes(n)?{...I}:(t.push(n),Object.assign(n,I),n)})}function XU(A){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tR;const e={labels:[],datasets:[]};return IR(e,A.labels),nR(e,A.datasets,g),e}function JU(A,g){const{height:e=150,width:t=300,redraw:I=!1,datasetIdKey:n,type:C,data:l,options:s,plugins:i=[],fallbackContent:r,updateMode:c,...d}=A,h=f.useRef(null),Z=f.useRef(),y=()=>{h.current&&(Z.current=new hr(h.current,{type:C,data:XU(l,n),options:s&&{...s},plugins:i}),fG(g,Z.current))},S=()=>{fG(g,null),Z.current&&(Z.current.destroy(),Z.current=null)};return f.useEffect(()=>{!I&&Z.current&&s&&wU(Z.current,s)},[I,s]),f.useEffect(()=>{!I&&Z.current&&IR(Z.current.config.data,l.labels)},[I,l.labels]),f.useEffect(()=>{!I&&Z.current&&l.datasets&&nR(Z.current.config.data,l.datasets,n)},[I,l.datasets]),f.useEffect(()=>{Z.current&&(I?(S(),setTimeout(y)):Z.current.update(c))},[I,s,l.labels,l.datasets,c]),f.useEffect(()=>{Z.current&&(S(),setTimeout(y))},[C]),f.useEffect(()=>(y(),()=>S()),[]),rg.createElement("canvas",Object.assign({ref:h,role:"img",height:e,width:t},d),r)}const FU=f.forwardRef(JU);function kU(A,g){return hr.register(g),f.forwardRef((e,t)=>rg.createElement(FU,Object.assign({},e,{ref:t,type:A})))}const HU=kU("bar",Qo);hr.register(Uo,Bm,hm);const YU=()=>{const[A,g]=f.useState({A:65,B:85,C:50}),[e,t]=f.useState(""),[I,n]=f.useState(""),C=new Date,l=new Date;l.setDate(C.getDate()+7);const s=h=>h.toISOString().split("T")[0],i=()=>{g({A:Math.floor(Math.random()*101),B:Math.floor(Math.random()*101),C:Math.floor(Math.random()*101)})};f.useEffect(()=>{e&&I&&i()},[e,I]);const r={labels:["อาคาร A","อาคาร B","อาคาร C"],datasets:[{label:"เปอร์เซ็นต์ที่จอด",data:[A.A,A.B,A.C],backgroundColor:["#FD6E2B","#FD6E2B","#FD6E2B"],borderColor:["#B8B1C3","#B8B1C3","#B8B1C3"],borderWidth:3}]},c={scales:{x:{ticks:{color:"#000000"},grid:{color:"#adadad"}},y:{beginAtZero:!0,max:100,ticks:{color:"#000000"},grid:{color:"#adadad"}}}},d=[{id:"displayPercentage",afterDatasetsDraw:h=>{const{ctx:Z,data:y}=h;h.data.datasets.forEach((S,b)=>{h.getDatasetMeta(b).data.forEach((G,V)=>{const W=S.data[V];Z.save(),Z.font="20px ",Z.fillStyle="#473366",Z.textAlign="center",Z.fillText(`${W}%`,G.x,G.y-5),Z.restore()})})}}];return o.jsxs("div",{className:"graphall",children:[o.jsxs("div",{className:"dategraphtime",children:[o.jsx("input",{type:"date",className:"form-control custom-date-pickerG2",value:e,onChange:h=>t(h.target.value),min:s(C),max:s(l)}),o.jsx("input",{type:"time",className:"form-control custom-date-pickerGT",value:I,onChange:h=>n(h.target.value)})]}),o.jsx("div",{className:"titlegraph1",children:o.jsx("p",{children:"สถานะอาคารว่าง"})}),o.jsx(HU,{data:r,options:c,plugins:d})]})};function SG({}){const A=hg(),[g,e]=f.useState(""),[t,I]=f.useState("");f.useEffect(()=>{const l=localStorage.getItem("userRole"),s=localStorage.getItem("userName"),i=localStorage.getItem("userPhone");if(l&&(C(l),e(s||""),I(i||"")),s&&i&&l){const r={name:s||"",phone:i||"",status:l,carRegistration:"9 รถ 9999 กรุงเทพฯ"};localStorage.setItem("currentUser",JSON.stringify(r))}},[]);const[n,C]=f.useState("");return f.useEffect(()=>{const l=localStorage.getItem("userRole");l&&C(l)},[]),o.jsxs("div",{style:{minHeight:"900px"},children:[o.jsx("div",{children:o.jsx("div",{className:"box2",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo2-image"})})}),o.jsxs("div",{className:"main-content",children:[n==="Member"&&o.jsx("div",{className:"userprofilehome",children:o.jsxs("div",{className:"datahomeprofile",children:[o.jsx("p",{children:g}),o.jsxs("p",{children:["Status : ",o.jsx("span",{children:"Member"})]}),o.jsxs("p",{children:["Phone : ",o.jsx("span",{children:t})]}),o.jsx("div",{className:"photohomeprofile",children:o.jsx("img",{src:"./Profile1.png",alt:"My Logo",className:"profile1"})})]})}),n==="Visitor"&&o.jsx("div",{className:"userprofilehome",children:o.jsxs("div",{className:"datahomeprofile",children:[o.jsx("p",{children:g}),o.jsxs("p",{children:["Status : ",o.jsx("span",{children:"Visitor"})]}),o.jsxs("p",{children:["Phone : ",o.jsx("span",{children:t})]}),o.jsx("div",{className:"photohomeprofile",children:o.jsx("img",{src:"./Profile1.png",alt:"My Logo",className:"profile1"})})]})}),n==="Member"&&o.jsx("div",{className:"buildingLot",children:o.jsxs("div",{className:"lot1",children:[o.jsx("div",{className:"parkingphoto1",children:o.jsx("img",{src:"./Parking1.png",alt:"My Logo",className:"parking1"})}),o.jsx("p",{className:"titlelot",children:"อาคารลานจอด"}),o.jsx("p",{children:"อาคาร A ลาน 1"}),o.jsxs("p",{children:["เวลา : ",o.jsx("span",{children:"13:00 - ตอนนี้"})]}),o.jsxs("p",{children:["สถานะ : ",o.jsx("span",{children:" กำลังจอดอยู่"})]})]})}),n==="Visitor"&&o.jsx("div",{className:"buildingLot2",children:o.jsxs("div",{className:"lot2",children:[o.jsx("div",{className:"parkingphoto2",children:o.jsx("img",{src:"./Parking1.png",alt:"My Logo",className:"parking1"})}),o.jsx("p",{className:"titlelot2",children:"การนัดหมาย"}),o.jsx("p",{children:"ชื่อผู้ทำการนัด : 1 "}),o.jsx("p",{children:"เบอร์โทร : 123456"}),o.jsx("p",{children:"วันที่ 27/11/67"}),o.jsx("p",{children:"เวลา 09:00"})]})}),o.jsx("div",{className:"QRCodescan",children:o.jsxs(j,{to:"/home/ScanQRCode",className:"link-no-underline",children:[o.jsx("p",{className:"bottomscan",children:"กดเพื่อสแกน"}),o.jsx("div",{className:"BoxQRCode",children:o.jsx("img",{src:"./scanQRcode.png",alt:"My Logo",className:"QRCode"})})]})}),o.jsx("div",{className:"boxgraph",children:o.jsx("div",{className:"graphbox1",children:o.jsx(YU,{})})})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})}function ks(A){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},ks(A)}function QU(A,g){if(ks(A)!="object"||!A)return A;var e=A[Symbol.toPrimitive];if(e!==void 0){var t=e.call(A,g||"default");if(ks(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(A)}function KU(A){var g=QU(A,"string");return ks(g)=="symbol"?g:g+""}function NU(A,g,e){return(g=KU(g))in A?Object.defineProperty(A,g,{value:e,enumerable:!0,configurable:!0,writable:!0}):A[g]=e,A}function UU(A){if(Array.isArray(A))return A}function xU(A,g){var e=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(e!=null){var t,I,n,C,l=[],s=!0,i=!1;try{if(n=(e=e.call(A)).next,g!==0)for(;!(s=(t=n.call(e)).done)&&(l.push(t.value),l.length!==g);s=!0);}catch(r){i=!0,I=r}finally{try{if(!s&&e.return!=null&&(C=e.return(),Object(C)!==C))return}finally{if(i)throw I}}return l}}function VG(A,g){(g==null||g>A.length)&&(g=A.length);for(var e=0,t=Array(g);e<g;e++)t[e]=A[e];return t}function EU(A,g){if(A){if(typeof A=="string")return VG(A,g);var e={}.toString.call(A).slice(8,-1);return e==="Object"&&A.constructor&&(e=A.constructor.name),e==="Map"||e==="Set"?Array.from(A):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?VG(A,g):void 0}}function LU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MU(A,g){return UU(A)||xU(A,g)||EU(A,g)||LU()}function DU(A,g){if(A==null)return{};var e,t,I=EB(A,g);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);for(t=0;t<n.length;t++)e=n[t],g.includes(e)||{}.propertyIsEnumerable.call(A,e)&&(I[e]=A[e])}return I}var CR={exports:{}},KA={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg=typeof Symbol=="function"&&Symbol.for,yh=yg?Symbol.for("react.element"):60103,fh=yg?Symbol.for("react.portal"):60106,Zr=yg?Symbol.for("react.fragment"):60107,pr=yg?Symbol.for("react.strict_mode"):60108,Gr=yg?Symbol.for("react.profiler"):60114,yr=yg?Symbol.for("react.provider"):60109,fr=yg?Symbol.for("react.context"):60110,Sh=yg?Symbol.for("react.async_mode"):60111,Sr=yg?Symbol.for("react.concurrent_mode"):60111,Vr=yg?Symbol.for("react.forward_ref"):60112,Wr=yg?Symbol.for("react.suspense"):60113,zU=yg?Symbol.for("react.suspense_list"):60120,Rr=yg?Symbol.for("react.memo"):60115,vr=yg?Symbol.for("react.lazy"):60116,TU=yg?Symbol.for("react.block"):60121,jU=yg?Symbol.for("react.fundamental"):60117,OU=yg?Symbol.for("react.responder"):60118,PU=yg?Symbol.for("react.scope"):60119;function Ze(A){if(typeof A=="object"&&A!==null){var g=A.$$typeof;switch(g){case yh:switch(A=A.type,A){case Sh:case Sr:case Zr:case Gr:case pr:case Wr:return A;default:switch(A=A&&A.$$typeof,A){case fr:case Vr:case vr:case Rr:case yr:return A;default:return g}}case fh:return g}}}function lR(A){return Ze(A)===Sr}KA.AsyncMode=Sh;KA.ConcurrentMode=Sr;KA.ContextConsumer=fr;KA.ContextProvider=yr;KA.Element=yh;KA.ForwardRef=Vr;KA.Fragment=Zr;KA.Lazy=vr;KA.Memo=Rr;KA.Portal=fh;KA.Profiler=Gr;KA.StrictMode=pr;KA.Suspense=Wr;KA.isAsyncMode=function(A){return lR(A)||Ze(A)===Sh};KA.isConcurrentMode=lR;KA.isContextConsumer=function(A){return Ze(A)===fr};KA.isContextProvider=function(A){return Ze(A)===yr};KA.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===yh};KA.isForwardRef=function(A){return Ze(A)===Vr};KA.isFragment=function(A){return Ze(A)===Zr};KA.isLazy=function(A){return Ze(A)===vr};KA.isMemo=function(A){return Ze(A)===Rr};KA.isPortal=function(A){return Ze(A)===fh};KA.isProfiler=function(A){return Ze(A)===Gr};KA.isStrictMode=function(A){return Ze(A)===pr};KA.isSuspense=function(A){return Ze(A)===Wr};KA.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===Zr||A===Sr||A===Gr||A===pr||A===Wr||A===zU||typeof A=="object"&&A!==null&&(A.$$typeof===vr||A.$$typeof===Rr||A.$$typeof===yr||A.$$typeof===fr||A.$$typeof===Vr||A.$$typeof===jU||A.$$typeof===OU||A.$$typeof===PU||A.$$typeof===TU)};KA.typeOf=Ze;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var WG=Object.getOwnPropertySymbols,_U=Object.prototype.hasOwnProperty,qU=Object.prototype.propertyIsEnumerable;function $U(A){if(A==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(A)}function A9(){try{if(!Object.assign)return!1;var A=new String("abc");if(A[5]="de",Object.getOwnPropertyNames(A)[0]==="5")return!1;for(var g={},e=0;e<10;e++)g["_"+String.fromCharCode(e)]=e;var t=Object.getOwnPropertyNames(g).map(function(n){return g[n]});if(t.join("")!=="0123456789")return!1;var I={};return"abcdefghijklmnopqrst".split("").forEach(function(n){I[n]=n}),Object.keys(Object.assign({},I)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}A9();var g9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",e9=g9;Function.call.bind(Object.prototype.hasOwnProperty);var t9=e9;function sR(){}function iR(){}iR.resetWarningCache=sR;var I9=function(){function A(t,I,n,C,l,s){if(s!==t9){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}A.isRequired=A;function g(){return A}var e={array:A,bigint:A,bool:A,func:A,number:A,object:A,string:A,symbol:A,any:A,arrayOf:g,element:A,elementType:A,instanceOf:g,node:A,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:iR,resetWarningCache:sR};return e.PropTypes=e,e};CR.exports=I9();var eC=CR.exports;function n9(A,g){var e=atob(A);return e}function C9(A,g,e){var t=n9(A),I=t.indexOf(`
`,10)+1,n=t.substring(I)+"",C=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(C)}function l9(A,g,e){var t;return function(n){return t=t||C9(A),new Worker(t,n)}}var s9=l9("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),i9=["constraints","onError","onLoad","onScan","resolution","qrArea"];function RG(A,g){var e=Object.keys(A);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(A);g&&(t=t.filter(function(I){return Object.getOwnPropertyDescriptor(A,I).enumerable})),e.push.apply(e,t)}return e}function vG(A){for(var g=1;g<arguments.length;g++){var e=arguments[g]!=null?arguments[g]:{};g%2?RG(Object(e),!0).forEach(function(t){NU(A,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(e)):RG(Object(e)).forEach(function(t){Object.defineProperty(A,t,Object.getOwnPropertyDescriptor(e,t))})}return A}var o9=function(){return new s9},wG=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().forEach(function(e){g.removeTrack(e),e.stop()}),g.getAudioTracks().forEach(function(e){g.removeTrack(e),e.stop()})):g.stop())},Vh=function(g){var e=g.constraints,t=g.onError,I=g.onLoad,n=g.onScan,C=g.resolution,l=g.qrArea,s=DU(g,i9),i=f.useRef(null),r=f.useRef(null),c=f.useRef(document.createElement("canvas")),d=f.useRef(null),h=f.useRef(),Z=f.useState(null),y=MU(Z,2),S=y[0],b=y[1],m=f.useRef(!1),G=f.useRef();f.useEffect(function(){G.current=o9();var X=G.current;return X.onmessage=function(F){n&&n(F.data?vG(vG({},F.data),{},{canvas:c.current}):null),m.current=!1},function(){X.terminate()}},[n]);var V=JSON.stringify(l),W=f.useCallback(function(){var X=JSON.parse(V),F=G.current,H=r.current&&r.current.readyState===r.current.HAVE_ENOUGH_DATA;if(!m.current&&H){m.current=!0;var K=r.current.videoWidth,_=r.current.videoHeight,gA=K>_?K:_,AA=Math.floor(C/gA*100)/100;_=Math.floor(AA*_),K=Math.floor(AA*K),c.current.width=K,c.current.height=_,d.current=c.current.getContext("2d"),d.current.drawImage(r.current,0,0,K,_);var rA;X&&X.length===2&&X[0]>0&&X[1]>0?rA=d.current.getImageData(Math.floor((K-X[0])/2),Math.floor((_-X[1])/2),X[0],X[1]):rA=d.current.getImageData(0,0,K,_),F.postMessage(rA)}h.current=requestAnimationFrame(W)},[C,V]),R=JSON.stringify(e);return f.useEffect(function(){var X=JSON.parse(R),F=!0;return navigator.mediaDevices.getUserMedia(X).then(function(H){if(!F)wG(H);else{i.current=H;try{r.current&&(r.current.srcObject=H,r.current.setAttribute("playsinline",!0))}catch{b(window.URL.createObjectURL(H))}I&&I(),h.current=requestAnimationFrame(W)}}).catch(function(H){return F?t(H):null}),function(){cancelAnimationFrame(h.current),F=!1,wG(i.current),S&&window.URL.revokeObjectURL(S)}},[W,R,t,I,S]),f.createElement("video",Ba({autoPlay:!0,playsInline:!0,src:S,ref:r},s))};Vh.propTypes={constraints:eC.object,onError:eC.func.isRequired,onLoad:eC.func,onScan:eC.func.isRequired,resolution:eC.number,qrArea:eC.array};Vh.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function a9({}){const A=hg(),[g,e]=f.useState(null),t=n=>{if(n){const C=n.text;e(n.text),window.location.href=C}},I=n=>{console.error("Error scanning QR Code:",n)};return o.jsxs("div",{style:{minHeight:"900px",display:"flex",flexDirection:"column"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content",children:[o.jsx("div",{className:"titleQR",children:o.jsx("h2",{children:"Scan QR Code"})}),o.jsx("div",{className:"boxscan",children:o.jsx(Vh,{delay:300,className:"previewStyle",onError:I,onScan:t,constraints:{video:{facingMode:"environment",width:{ideal:1280},height:{ideal:1280}}}})}),o.jsx("div",{className:"scan-result",children:g?o.jsxs("p",{children:["ผลลัพธ์: ",g]}):o.jsx("p",{children:"กรุณาสแกน QR Code"})}),o.jsx("div",{children:o.jsx(j,{to:"/home",className:"link-no-underline",children:o.jsx("button",{className:"back-btn backtohome1",children:"กลับสู่หน้าหลัก"})})})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})}const r9=[{id:1,building:"อาคาร A",floor:"ลาน 1",slots:"0/50",time:"09:00-12:00",image:"Parking1.png",status:"ว่าง"},{id:2,building:"อาคาร A",floor:"ลาน 2",slots:"0/20",time:"09:00-12:00 ",image:"Parking2.png",status:"ว่าง"},{id:3,building:"อาคาร A",floor:"ลาน 3",slots:"0/20",time:"09:00-12:00 ",image:"Parking3.png",status:"ว่าง"},{id:4,building:"อาคาร B",floor:"ลาน 1",slots:"0/20",time:"09:00-12:00",image:"Parking1.png",status:"ไม่ว่าง"},{id:5,building:"อาคาร B",floor:"ลาน 2",slots:"0/20",time:"09:00-12:00",image:"Parking2.png",status:"ว่าง"},{id:6,building:"อาคาร B",floor:"ลาน 3",slots:"0/20",time:"09:00-12:00",image:"Parking3.png",status:"ว่าง"},{id:7,building:"อาคาร C",floor:"ลาน 1",slots:"0/20",time:"09:00-12:00",image:"Parking1.png",status:"ว่าง"},{id:8,building:"อาคาร C",floor:"ลาน 2",slots:"0/20",time:"09:00-12:00",image:"Parking2.png",status:"ว่าง"},{id:9,building:"อาคาร C",floor:"ลาน 3",slots:"0/20",time:"09:00-12:00",image:"Parking3.png",status:"ว่าง"},{id:10,building:"อาคาร A",floor:"ลาน 1",slots:"0/50",time:"12:01-15:00",image:"Parking1.png",status:"ไม่ว่าง"},{id:11,building:"อาคาร A",floor:"ลาน 2",slots:"0/20",time:"12:01-15:00",image:"Parking2.png",status:"ว่าง"},{id:12,building:"อาคาร A",floor:"ลาน 3",slots:"0/20",time:"12:01-15:00",image:"Parking3.png",status:"ว่าง"},{id:13,building:"อาคาร B",floor:"ลาน 1",slots:"0/20",time:"12:01-15:00",image:"Parking1.png",status:"ไม่ว่าง"},{id:14,building:"อาคาร B",floor:"ลาน 2",slots:"0/20",time:"12:01-15:00",image:"Parking2.png",status:"ว่าง"},{id:15,building:"อาคาร B",floor:"ลาน 3",slots:"0/20",time:"12:01-15:00",image:"Parking3.png",status:"ว่าง"},{id:16,building:"อาคาร C",floor:"ลาน 1",slots:"0/20",time:"12:01-15:00",image:"Parking1.png",status:"ว่าง"},{id:17,building:"อาคาร C",floor:"ลาน 2",slots:"0/20",time:"12:01-15:00",image:"Parking2.png",status:"ว่าง"},{id:18,building:"อาคาร C",floor:"ลาน 3",slots:"0/20",time:"12:01-15:00",image:"Parking3.png",status:"ว่าง"},{id:19,building:"อาคาร A",floor:"ลาน 1",slots:"0/50",time:"15:01-18:00",image:"Parking1.png",status:"ว่าง"},{id:20,building:"อาคาร A",floor:"ลาน 2",slots:"0/20",time:"15:01-18:00",image:"Parking2.png",status:"ว่าง"},{id:21,building:"อาคาร A",floor:"ลาน 3",slots:"0/20",time:"15:01-18:00",image:"Parking1.png",status:"ว่าง"},{id:22,building:"อาคาร B",floor:"ลาน 1",slots:"0/20",time:"15:01-18:00",image:"Parking1.png",status:"ว่าง"},{id:23,building:"อาคาร B",floor:"ลาน 2",slots:"0/20",time:"15:01-18:00",image:"Parking2.png",status:"ว่าง"},{id:24,building:"อาคาร B",floor:"ลาน 3",slots:"0/20",time:"15:01-18:00",image:"Parking3.png",status:"ว่าง"},{id:25,building:"อาคาร C",floor:"ลาน 1",slots:"0/20",time:"15:01-18:00",image:"Parking1.png",status:"ว่าง"},{id:26,building:"อาคาร C",floor:"ลาน 2",slots:"0/20",time:"15:01-18:00",image:"Parking2.png",status:"ว่าง"},{id:27,building:"อาคาร C",floor:"ลาน 3",slots:"0/20",time:"15:01-18:00",image:"Parking3.png",status:"ว่าง"},{id:28,building:"อาคาร A",floor:"ลาน 1",slots:"0/50",time:"18:01-23:59",image:"Parking1.png",status:"ว่าง"},{id:29,building:"อาคาร A",floor:"ลาน 2",slots:"0/20",time:"18:01-23:59",image:"Parking2.png",status:"ว่าง"},{id:30,building:"อาคาร A",floor:"ลาน 3",slots:"0/20",time:"18:01-23:59",image:"Parking1.png",status:"ว่าง"},{id:31,building:"อาคาร B",floor:"ลาน 1",slots:"0/20",time:"18:01-23:59",image:"Parking1.png",status:"ว่าง"},{id:32,building:"อาคาร B",floor:"ลาน 2",slots:"0/20",time:"18:01-23:59",image:"Parking2.png",status:"ว่าง"},{id:33,building:"อาคาร B",floor:"ลาน 3",slots:"0/20",time:"18:01-23:59",image:"Parking3.png",status:"ว่าง"},{id:34,building:"อาคาร C",floor:"ลาน 1",slots:"0/20",time:"18:01-23:59",image:"Parking1.png",status:"ว่าง"},{id:35,building:"อาคาร C",floor:"ลาน 2",slots:"0/20",time:"18:01-23:59",image:"Parking2.png",status:"ว่าง"},{id:36,building:"อาคาร C",floor:"ลาน 3",slots:"0/20",time:"18:01-23:59",image:"Parking3.png",status:"ว่าง"}];var c9={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(A,g){(function(e,t){A.exports=t()})(SX,function(){const e=new Map,t={set(B,a,u){e.has(B)||e.set(B,new Map);const p=e.get(B);p.has(a)||p.size===0?p.set(a,u):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(p.keys())[0]}.`)},get:(B,a)=>e.has(B)&&e.get(B).get(a)||null,remove(B,a){if(!e.has(B))return;const u=e.get(B);u.delete(a),u.size===0&&e.delete(B)}},I="transitionend",n=B=>(B&&window.CSS&&window.CSS.escape&&(B=B.replace(/#([^\s"#']+)/g,(a,u)=>`#${CSS.escape(u)}`)),B),C=B=>{B.dispatchEvent(new Event(I))},l=B=>!(!B||typeof B!="object")&&(B.jquery!==void 0&&(B=B[0]),B.nodeType!==void 0),s=B=>l(B)?B.jquery?B[0]:B:typeof B=="string"&&B.length>0?document.querySelector(n(B)):null,i=B=>{if(!l(B)||B.getClientRects().length===0)return!1;const a=getComputedStyle(B).getPropertyValue("visibility")==="visible",u=B.closest("details:not([open])");if(!u)return a;if(u!==B){const p=B.closest("summary");if(p&&p.parentNode!==u||p===null)return!1}return a},r=B=>!B||B.nodeType!==Node.ELEMENT_NODE||!!B.classList.contains("disabled")||(B.disabled!==void 0?B.disabled:B.hasAttribute("disabled")&&B.getAttribute("disabled")!=="false"),c=B=>{if(!document.documentElement.attachShadow)return null;if(typeof B.getRootNode=="function"){const a=B.getRootNode();return a instanceof ShadowRoot?a:null}return B instanceof ShadowRoot?B:B.parentNode?c(B.parentNode):null},d=()=>{},h=B=>{B.offsetHeight},Z=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y=[],S=()=>document.documentElement.dir==="rtl",b=B=>{var a;a=()=>{const u=Z();if(u){const p=B.NAME,v=u.fn[p];u.fn[p]=B.jQueryInterface,u.fn[p].Constructor=B,u.fn[p].noConflict=()=>(u.fn[p]=v,B.jQueryInterface)}},document.readyState==="loading"?(y.length||document.addEventListener("DOMContentLoaded",()=>{for(const u of y)u()}),y.push(a)):a()},m=(B,a=[],u=B)=>typeof B=="function"?B(...a):u,G=(B,a,u=!0)=>{if(!u)return void m(B);const p=(k=>{if(!k)return 0;let{transitionDuration:Y,transitionDelay:x}=window.getComputedStyle(k);const z=Number.parseFloat(Y),O=Number.parseFloat(x);return z||O?(Y=Y.split(",")[0],x=x.split(",")[0],1e3*(Number.parseFloat(Y)+Number.parseFloat(x))):0})(a)+5;let v=!1;const w=({target:k})=>{k===a&&(v=!0,a.removeEventListener(I,w),m(B))};a.addEventListener(I,w),setTimeout(()=>{v||C(a)},p)},V=(B,a,u,p)=>{const v=B.length;let w=B.indexOf(a);return w===-1?!u&&p?B[v-1]:B[0]:(w+=u?1:-1,p&&(w=(w+v)%v),B[Math.max(0,Math.min(w,v-1))])},W=/[^.]*(?=\..*)\.|.*/,R=/\..*/,X=/::\d+$/,F={};let H=1;const K={mouseenter:"mouseover",mouseleave:"mouseout"},_=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function gA(B,a){return a&&`${a}::${H++}`||B.uidEvent||H++}function AA(B){const a=gA(B);return B.uidEvent=a,F[a]=F[a]||{},F[a]}function rA(B,a,u=null){return Object.values(B).find(p=>p.callable===a&&p.delegationSelector===u)}function uA(B,a,u){const p=typeof a=="string",v=p?u:a||u;let w=P(B);return _.has(w)||(w=B),[p,v,w]}function tA(B,a,u,p,v){if(typeof a!="string"||!B)return;let[w,k,Y]=uA(a,u,p);a in K&&(k=(lA=>function(nA){if(!nA.relatedTarget||nA.relatedTarget!==nA.delegateTarget&&!nA.delegateTarget.contains(nA.relatedTarget))return lA.call(this,nA)})(k));const x=AA(B),z=x[Y]||(x[Y]={}),O=rA(z,k,w?u:null);if(O)return void(O.oneOff=O.oneOff&&v);const E=gA(k,a.replace(W,"")),cA=w?function(eA,lA,nA){return function sA(HA){const UA=eA.querySelectorAll(lA);for(let{target:BA}=HA;BA&&BA!==this;BA=BA.parentNode)for(const VA of UA)if(VA===BA)return IA(HA,{delegateTarget:BA}),sA.oneOff&&J.off(eA,HA.type,lA,nA),nA.apply(BA,[HA])}}(B,u,k):function(eA,lA){return function nA(sA){return IA(sA,{delegateTarget:eA}),nA.oneOff&&J.off(eA,sA.type,lA),lA.apply(eA,[sA])}}(B,k);cA.delegationSelector=w?u:null,cA.callable=k,cA.oneOff=v,cA.uidEvent=E,z[E]=cA,B.addEventListener(Y,cA,w)}function oA(B,a,u,p,v){const w=rA(a[u],p,v);w&&(B.removeEventListener(u,w,!!v),delete a[u][w.uidEvent])}function Q(B,a,u,p){const v=a[u]||{};for(const[w,k]of Object.entries(v))w.includes(p)&&oA(B,a,u,k.callable,k.delegationSelector)}function P(B){return B=B.replace(R,""),K[B]||B}const J={on(B,a,u,p){tA(B,a,u,p,!1)},one(B,a,u,p){tA(B,a,u,p,!0)},off(B,a,u,p){if(typeof a!="string"||!B)return;const[v,w,k]=uA(a,u,p),Y=k!==a,x=AA(B),z=x[k]||{},O=a.startsWith(".");if(w===void 0){if(O)for(const E of Object.keys(x))Q(B,x,E,a.slice(1));for(const[E,cA]of Object.entries(z)){const eA=E.replace(X,"");Y&&!a.includes(eA)||oA(B,x,k,cA.callable,cA.delegationSelector)}}else{if(!Object.keys(z).length)return;oA(B,x,k,w,v?u:null)}},trigger(B,a,u){if(typeof a!="string"||!B)return null;const p=Z();let v=null,w=!0,k=!0,Y=!1;a!==P(a)&&p&&(v=p.Event(a,u),p(B).trigger(v),w=!v.isPropagationStopped(),k=!v.isImmediatePropagationStopped(),Y=v.isDefaultPrevented());const x=IA(new Event(a,{bubbles:w,cancelable:!0}),u);return Y&&x.preventDefault(),k&&B.dispatchEvent(x),x.defaultPrevented&&v&&v.preventDefault(),x}};function IA(B,a={}){for(const[u,p]of Object.entries(a))try{B[u]=p}catch{Object.defineProperty(B,u,{configurable:!0,get:()=>p})}return B}function iA(B){if(B==="true")return!0;if(B==="false")return!1;if(B===Number(B).toString())return Number(B);if(B===""||B==="null")return null;if(typeof B!="string")return B;try{return JSON.parse(decodeURIComponent(B))}catch{return B}}function ZA(B){return B.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}const aA={setDataAttribute(B,a,u){B.setAttribute(`data-bs-${ZA(a)}`,u)},removeDataAttribute(B,a){B.removeAttribute(`data-bs-${ZA(a)}`)},getDataAttributes(B){if(!B)return{};const a={},u=Object.keys(B.dataset).filter(p=>p.startsWith("bs")&&!p.startsWith("bsConfig"));for(const p of u){let v=p.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1,v.length),a[v]=iA(B.dataset[p])}return a},getDataAttribute:(B,a)=>iA(B.getAttribute(`data-bs-${ZA(a)}`))};class SA{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(a){return a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a}_mergeConfigObj(a,u){const p=l(u)?aA.getDataAttribute(u,"config"):{};return{...this.constructor.Default,...typeof p=="object"?p:{},...l(u)?aA.getDataAttributes(u):{},...typeof a=="object"?a:{}}}_typeCheckConfig(a,u=this.constructor.DefaultType){for(const[v,w]of Object.entries(u)){const k=a[v],Y=l(k)?"element":(p=k)==null?`${p}`:Object.prototype.toString.call(p).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(w).test(Y))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${v}" provided type "${Y}" but expected type "${w}".`)}var p}}class mA extends SA{constructor(a,u){super(),(a=s(a))&&(this._element=a,this._config=this._getConfig(u),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(const a of Object.getOwnPropertyNames(this))this[a]=null}_queueCallback(a,u,p=!0){G(a,u,p)}_getConfig(a){return a=this._mergeConfigObj(a,this._element),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}static getInstance(a){return t.get(s(a),this.DATA_KEY)}static getOrCreateInstance(a,u={}){return this.getInstance(a)||new this(a,typeof u=="object"?u:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(a){return`${a}${this.EVENT_KEY}`}}const dg=B=>{let a=B.getAttribute("data-bs-target");if(!a||a==="#"){let u=B.getAttribute("href");if(!u||!u.includes("#")&&!u.startsWith("."))return null;u.includes("#")&&!u.startsWith("#")&&(u=`#${u.split("#")[1]}`),a=u&&u!=="#"?u.trim():null}return a?a.split(",").map(u=>n(u)).join(","):null},$={find:(B,a=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(a,B)),findOne:(B,a=document.documentElement)=>Element.prototype.querySelector.call(a,B),children:(B,a)=>[].concat(...B.children).filter(u=>u.matches(a)),parents(B,a){const u=[];let p=B.parentNode.closest(a);for(;p;)u.push(p),p=p.parentNode.closest(a);return u},prev(B,a){let u=B.previousElementSibling;for(;u;){if(u.matches(a))return[u];u=u.previousElementSibling}return[]},next(B,a){let u=B.nextElementSibling;for(;u;){if(u.matches(a))return[u];u=u.nextElementSibling}return[]},focusableChildren(B){const a=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(u=>`${u}:not([tabindex^="-"])`).join(",");return this.find(a,B).filter(u=>!r(u)&&i(u))},getSelectorFromElement(B){const a=dg(B);return a&&$.findOne(a)?a:null},getElementFromSelector(B){const a=dg(B);return a?$.findOne(a):null},getMultipleElementsFromSelector(B){const a=dg(B);return a?$.find(a):[]}},At=(B,a="hide")=>{const u=`click.dismiss${B.EVENT_KEY}`,p=B.NAME;J.on(document,u,`[data-bs-dismiss="${p}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),r(this))return;const w=$.getElementFromSelector(this)||this.closest(`.${p}`);B.getOrCreateInstance(w)[a]()})},bt=".bs.alert",Qn=`close${bt}`,jt=`closed${bt}`;class Ue extends mA{static get NAME(){return"alert"}close(){if(J.trigger(this._element,Qn).defaultPrevented)return;this._element.classList.remove("show");const a=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,a)}_destroyElement(){this._element.remove(),J.trigger(this._element,jt),this.dispose()}static jQueryInterface(a){return this.each(function(){const u=Ue.getOrCreateInstance(this);if(typeof a=="string"){if(u[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);u[a](this)}})}}At(Ue,"close"),b(Ue);const Zt='[data-bs-toggle="button"]';class RA extends mA{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(a){return this.each(function(){const u=RA.getOrCreateInstance(this);a==="toggle"&&u[a]()})}}J.on(document,"click.bs.button.data-api",Zt,B=>{B.preventDefault();const a=B.target.closest(Zt);RA.getOrCreateInstance(a).toggle()}),b(RA);const xe=".bs.swipe",EI=`touchstart${xe}`,Ur=`touchmove${xe}`,xr=`touchend${xe}`,Er=`pointerdown${xe}`,Lr=`pointerup${xe}`,Mr={endCallback:null,leftCallback:null,rightCallback:null},Dr={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class LI extends SA{constructor(a,u){super(),this._element=a,a&&LI.isSupported()&&(this._config=this._getConfig(u),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Mr}static get DefaultType(){return Dr}static get NAME(){return"swipe"}dispose(){J.off(this._element,xe)}_start(a){this._supportPointerEvents?this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX):this._deltaX=a.touches[0].clientX}_end(a){this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX-this._deltaX),this._handleSwipe(),m(this._config.endCallback)}_move(a){this._deltaX=a.touches&&a.touches.length>1?0:a.touches[0].clientX-this._deltaX}_handleSwipe(){const a=Math.abs(this._deltaX);if(a<=40)return;const u=a/this._deltaX;this._deltaX=0,u&&m(u>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,Er,a=>this._start(a)),J.on(this._element,Lr,a=>this._end(a)),this._element.classList.add("pointer-event")):(J.on(this._element,EI,a=>this._start(a)),J.on(this._element,Ur,a=>this._move(a)),J.on(this._element,xr,a=>this._end(a)))}_eventIsPointerPenTouch(a){return this._supportPointerEvents&&(a.pointerType==="pen"||a.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const gt=".bs.carousel",GA=".data-api",pe="next",pt="prev",Kn="left",_s="right",mv=`slide${gt}`,zr=`slid${gt}`,Bv=`keydown${gt}`,hv=`mouseenter${gt}`,bv=`mouseleave${gt}`,Zv=`dragstart${gt}`,pv=`load${gt}${GA}`,Gv=`click${gt}${GA}`,kh="carousel",qs="active",Hh=".active",Yh=".carousel-item",yv=Hh+Yh,fv={ArrowLeft:_s,ArrowRight:Kn},Sv={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Vv={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Nn extends mA{constructor(a,u){super(a,u),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=$.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===kh&&this.cycle()}static get Default(){return Sv}static get DefaultType(){return Vv}static get NAME(){return"carousel"}next(){this._slide(pe)}nextWhenVisible(){!document.hidden&&i(this._element)&&this.next()}prev(){this._slide(pt)}pause(){this._isSliding&&C(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?J.one(this._element,zr,()=>this.cycle()):this.cycle())}to(a){const u=this._getItems();if(a>u.length-1||a<0)return;if(this._isSliding)return void J.one(this._element,zr,()=>this.to(a));const p=this._getItemIndex(this._getActive());if(p===a)return;const v=a>p?pe:pt;this._slide(v,u[a])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(a){return a.defaultInterval=a.interval,a}_addEventListeners(){this._config.keyboard&&J.on(this._element,Bv,a=>this._keydown(a)),this._config.pause==="hover"&&(J.on(this._element,hv,()=>this.pause()),J.on(this._element,bv,()=>this._maybeEnableCycle())),this._config.touch&&LI.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const u of $.find(".carousel-item img",this._element))J.on(u,Zv,p=>p.preventDefault());const a={leftCallback:()=>this._slide(this._directionToOrder(Kn)),rightCallback:()=>this._slide(this._directionToOrder(_s)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new LI(this._element,a)}_keydown(a){if(/input|textarea/i.test(a.target.tagName))return;const u=fv[a.key];u&&(a.preventDefault(),this._slide(this._directionToOrder(u)))}_getItemIndex(a){return this._getItems().indexOf(a)}_setActiveIndicatorElement(a){if(!this._indicatorsElement)return;const u=$.findOne(Hh,this._indicatorsElement);u.classList.remove(qs),u.removeAttribute("aria-current");const p=$.findOne(`[data-bs-slide-to="${a}"]`,this._indicatorsElement);p&&(p.classList.add(qs),p.setAttribute("aria-current","true"))}_updateInterval(){const a=this._activeElement||this._getActive();if(!a)return;const u=Number.parseInt(a.getAttribute("data-bs-interval"),10);this._config.interval=u||this._config.defaultInterval}_slide(a,u=null){if(this._isSliding)return;const p=this._getActive(),v=a===pe,w=u||V(this._getItems(),p,v,this._config.wrap);if(w===p)return;const k=this._getItemIndex(w),Y=E=>J.trigger(this._element,E,{relatedTarget:w,direction:this._orderToDirection(a),from:this._getItemIndex(p),to:k});if(Y(mv).defaultPrevented||!p||!w)return;const x=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(k),this._activeElement=w;const z=v?"carousel-item-start":"carousel-item-end",O=v?"carousel-item-next":"carousel-item-prev";w.classList.add(O),h(w),p.classList.add(z),w.classList.add(z),this._queueCallback(()=>{w.classList.remove(z,O),w.classList.add(qs),p.classList.remove(qs,O,z),this._isSliding=!1,Y(zr)},p,this._isAnimated()),x&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return $.findOne(yv,this._element)}_getItems(){return $.find(Yh,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(a){return S()?a===Kn?pt:pe:a===Kn?pe:pt}_orderToDirection(a){return S()?a===pt?Kn:_s:a===pt?_s:Kn}static jQueryInterface(a){return this.each(function(){const u=Nn.getOrCreateInstance(this,a);if(typeof a!="number"){if(typeof a=="string"){if(u[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);u[a]()}}else u.to(a)})}}J.on(document,Gv,"[data-bs-slide], [data-bs-slide-to]",function(B){const a=$.getElementFromSelector(this);if(!a||!a.classList.contains(kh))return;B.preventDefault();const u=Nn.getOrCreateInstance(a),p=this.getAttribute("data-bs-slide-to");return p?(u.to(p),void u._maybeEnableCycle()):aA.getDataAttribute(this,"slide")==="next"?(u.next(),void u._maybeEnableCycle()):(u.prev(),void u._maybeEnableCycle())}),J.on(window,pv,()=>{const B=$.find('[data-bs-ride="carousel"]');for(const a of B)Nn.getOrCreateInstance(a)}),b(Nn);const tl=".bs.collapse",Wv=`show${tl}`,Rv=`shown${tl}`,vv=`hide${tl}`,wv=`hidden${tl}`,Xv=`click${tl}.data-api`,Tr="show",Un="collapse",$s="collapsing",Jv=`:scope .${Un} .${Un}`,jr='[data-bs-toggle="collapse"]',Fv={parent:null,toggle:!0},kv={parent:"(null|element)",toggle:"boolean"};class xn extends mA{constructor(a,u){super(a,u),this._isTransitioning=!1,this._triggerArray=[];const p=$.find(jr);for(const v of p){const w=$.getSelectorFromElement(v),k=$.find(w).filter(Y=>Y===this._element);w!==null&&k.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Fv}static get DefaultType(){return kv}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let a=[];if(this._config.parent&&(a=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(v=>v!==this._element).map(v=>xn.getOrCreateInstance(v,{toggle:!1}))),a.length&&a[0]._isTransitioning||J.trigger(this._element,Wv).defaultPrevented)return;for(const v of a)v.hide();const u=this._getDimension();this._element.classList.remove(Un),this._element.classList.add($s),this._element.style[u]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const p=`scroll${u[0].toUpperCase()+u.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove($s),this._element.classList.add(Un,Tr),this._element.style[u]="",J.trigger(this._element,Rv)},this._element,!0),this._element.style[u]=`${this._element[p]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,vv).defaultPrevented)return;const a=this._getDimension();this._element.style[a]=`${this._element.getBoundingClientRect()[a]}px`,h(this._element),this._element.classList.add($s),this._element.classList.remove(Un,Tr);for(const u of this._triggerArray){const p=$.getElementFromSelector(u);p&&!this._isShown(p)&&this._addAriaAndCollapsedClass([u],!1)}this._isTransitioning=!0,this._element.style[a]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove($s),this._element.classList.add(Un),J.trigger(this._element,wv)},this._element,!0)}_isShown(a=this._element){return a.classList.contains(Tr)}_configAfterMerge(a){return a.toggle=!!a.toggle,a.parent=s(a.parent),a}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const a=this._getFirstLevelChildren(jr);for(const u of a){const p=$.getElementFromSelector(u);p&&this._addAriaAndCollapsedClass([u],this._isShown(p))}}_getFirstLevelChildren(a){const u=$.find(Jv,this._config.parent);return $.find(a,this._config.parent).filter(p=>!u.includes(p))}_addAriaAndCollapsedClass(a,u){if(a.length)for(const p of a)p.classList.toggle("collapsed",!u),p.setAttribute("aria-expanded",u)}static jQueryInterface(a){const u={};return typeof a=="string"&&/show|hide/.test(a)&&(u.toggle=!1),this.each(function(){const p=xn.getOrCreateInstance(this,u);if(typeof a=="string"){if(p[a]===void 0)throw new TypeError(`No method named "${a}"`);p[a]()}})}}J.on(document,Xv,jr,function(B){(B.target.tagName==="A"||B.delegateTarget&&B.delegateTarget.tagName==="A")&&B.preventDefault();for(const a of $.getMultipleElementsFromSelector(this))xn.getOrCreateInstance(a,{toggle:!1}).toggle()}),b(xn);var xg="top",le="bottom",se="right",Eg="left",Ai="auto",En=[xg,le,se,Eg],MI="start",Ln="end",Qh="clippingParents",Or="viewport",Mn="popper",Kh="reference",Pr=En.reduce(function(B,a){return B.concat([a+"-"+MI,a+"-"+Ln])},[]),_r=[].concat(En,[Ai]).reduce(function(B,a){return B.concat([a,a+"-"+MI,a+"-"+Ln])},[]),Nh="beforeRead",Uh="read",xh="afterRead",Eh="beforeMain",Lh="main",Mh="afterMain",Dh="beforeWrite",zh="write",Th="afterWrite",jh=[Nh,Uh,xh,Eh,Lh,Mh,Dh,zh,Th];function et(B){return B?(B.nodeName||"").toLowerCase():null}function ie(B){if(B==null)return window;if(B.toString()!=="[object Window]"){var a=B.ownerDocument;return a&&a.defaultView||window}return B}function DI(B){return B instanceof ie(B).Element||B instanceof Element}function Ge(B){return B instanceof ie(B).HTMLElement||B instanceof HTMLElement}function qr(B){return typeof ShadowRoot<"u"&&(B instanceof ie(B).ShadowRoot||B instanceof ShadowRoot)}const $r={name:"applyStyles",enabled:!0,phase:"write",fn:function(B){var a=B.state;Object.keys(a.elements).forEach(function(u){var p=a.styles[u]||{},v=a.attributes[u]||{},w=a.elements[u];Ge(w)&&et(w)&&(Object.assign(w.style,p),Object.keys(v).forEach(function(k){var Y=v[k];Y===!1?w.removeAttribute(k):w.setAttribute(k,Y===!0?"":Y)}))})},effect:function(B){var a=B.state,u={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,u.popper),a.styles=u,a.elements.arrow&&Object.assign(a.elements.arrow.style,u.arrow),function(){Object.keys(a.elements).forEach(function(p){var v=a.elements[p],w=a.attributes[p]||{},k=Object.keys(a.styles.hasOwnProperty(p)?a.styles[p]:u[p]).reduce(function(Y,x){return Y[x]="",Y},{});Ge(v)&&et(v)&&(Object.assign(v.style,k),Object.keys(w).forEach(function(Y){v.removeAttribute(Y)}))})}},requires:["computeStyles"]};function tt(B){return B.split("-")[0]}var zI=Math.max,gi=Math.min,Dn=Math.round;function Ac(){var B=navigator.userAgentData;return B!=null&&B.brands&&Array.isArray(B.brands)?B.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function Oh(){return!/^((?!chrome|android).)*safari/i.test(Ac())}function zn(B,a,u){a===void 0&&(a=!1),u===void 0&&(u=!1);var p=B.getBoundingClientRect(),v=1,w=1;a&&Ge(B)&&(v=B.offsetWidth>0&&Dn(p.width)/B.offsetWidth||1,w=B.offsetHeight>0&&Dn(p.height)/B.offsetHeight||1);var k=(DI(B)?ie(B):window).visualViewport,Y=!Oh()&&u,x=(p.left+(Y&&k?k.offsetLeft:0))/v,z=(p.top+(Y&&k?k.offsetTop:0))/w,O=p.width/v,E=p.height/w;return{width:O,height:E,top:z,right:x+O,bottom:z+E,left:x,x,y:z}}function gc(B){var a=zn(B),u=B.offsetWidth,p=B.offsetHeight;return Math.abs(a.width-u)<=1&&(u=a.width),Math.abs(a.height-p)<=1&&(p=a.height),{x:B.offsetLeft,y:B.offsetTop,width:u,height:p}}function Ph(B,a){var u=a.getRootNode&&a.getRootNode();if(B.contains(a))return!0;if(u&&qr(u)){var p=a;do{if(p&&B.isSameNode(p))return!0;p=p.parentNode||p.host}while(p)}return!1}function Gt(B){return ie(B).getComputedStyle(B)}function Hv(B){return["table","td","th"].indexOf(et(B))>=0}function Ot(B){return((DI(B)?B.ownerDocument:B.document)||window.document).documentElement}function ei(B){return et(B)==="html"?B:B.assignedSlot||B.parentNode||(qr(B)?B.host:null)||Ot(B)}function _h(B){return Ge(B)&&Gt(B).position!=="fixed"?B.offsetParent:null}function Il(B){for(var a=ie(B),u=_h(B);u&&Hv(u)&&Gt(u).position==="static";)u=_h(u);return u&&(et(u)==="html"||et(u)==="body"&&Gt(u).position==="static")?a:u||function(p){var v=/firefox/i.test(Ac());if(/Trident/i.test(Ac())&&Ge(p)&&Gt(p).position==="fixed")return null;var w=ei(p);for(qr(w)&&(w=w.host);Ge(w)&&["html","body"].indexOf(et(w))<0;){var k=Gt(w);if(k.transform!=="none"||k.perspective!=="none"||k.contain==="paint"||["transform","perspective"].indexOf(k.willChange)!==-1||v&&k.willChange==="filter"||v&&k.filter&&k.filter!=="none")return w;w=w.parentNode}return null}(B)||a}function ec(B){return["top","bottom"].indexOf(B)>=0?"x":"y"}function nl(B,a,u){return zI(B,gi(a,u))}function qh(B){return Object.assign({},{top:0,right:0,bottom:0,left:0},B)}function $h(B,a){return a.reduce(function(u,p){return u[p]=B,u},{})}const Ab={name:"arrow",enabled:!0,phase:"main",fn:function(B){var a,u=B.state,p=B.name,v=B.options,w=u.elements.arrow,k=u.modifiersData.popperOffsets,Y=tt(u.placement),x=ec(Y),z=[Eg,se].indexOf(Y)>=0?"height":"width";if(w&&k){var O=function(YA,JA){return qh(typeof(YA=typeof YA=="function"?YA(Object.assign({},JA.rects,{placement:JA.placement})):YA)!="number"?YA:$h(YA,En))}(v.padding,u),E=gc(w),cA=x==="y"?xg:Eg,eA=x==="y"?le:se,lA=u.rects.reference[z]+u.rects.reference[x]-k[x]-u.rects.popper[z],nA=k[x]-u.rects.reference[x],sA=Il(w),HA=sA?x==="y"?sA.clientHeight||0:sA.clientWidth||0:0,UA=lA/2-nA/2,BA=O[cA],VA=HA-E[z]-O[eA],dA=HA/2-E[z]/2+UA,pA=nl(BA,dA,VA),XA=x;u.modifiersData[p]=((a={})[XA]=pA,a.centerOffset=pA-dA,a)}},effect:function(B){var a=B.state,u=B.options.element,p=u===void 0?"[data-popper-arrow]":u;p!=null&&(typeof p!="string"||(p=a.elements.popper.querySelector(p)))&&Ph(a.elements.popper,p)&&(a.elements.arrow=p)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tn(B){return B.split("-")[1]}var Yv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gb(B){var a,u=B.popper,p=B.popperRect,v=B.placement,w=B.variation,k=B.offsets,Y=B.position,x=B.gpuAcceleration,z=B.adaptive,O=B.roundOffsets,E=B.isFixed,cA=k.x,eA=cA===void 0?0:cA,lA=k.y,nA=lA===void 0?0:lA,sA=typeof O=="function"?O({x:eA,y:nA}):{x:eA,y:nA};eA=sA.x,nA=sA.y;var HA=k.hasOwnProperty("x"),UA=k.hasOwnProperty("y"),BA=Eg,VA=xg,dA=window;if(z){var pA=Il(u),XA="clientHeight",YA="clientWidth";pA===ie(u)&&Gt(pA=Ot(u)).position!=="static"&&Y==="absolute"&&(XA="scrollHeight",YA="scrollWidth"),(v===xg||(v===Eg||v===se)&&w===Ln)&&(VA=le,nA-=(E&&pA===dA&&dA.visualViewport?dA.visualViewport.height:pA[XA])-p.height,nA*=x?1:-1),v!==Eg&&(v!==xg&&v!==le||w!==Ln)||(BA=se,eA-=(E&&pA===dA&&dA.visualViewport?dA.visualViewport.width:pA[YA])-p.width,eA*=x?1:-1)}var JA,tg=Object.assign({position:Y},z&&Yv),oe=O===!0?function(Le,Lg){var fe=Le.x,Se=Le.y,qA=Lg.devicePixelRatio||1;return{x:Dn(fe*qA)/qA||0,y:Dn(Se*qA)/qA||0}}({x:eA,y:nA},ie(u)):{x:eA,y:nA};return eA=oe.x,nA=oe.y,x?Object.assign({},tg,((JA={})[VA]=UA?"0":"",JA[BA]=HA?"0":"",JA.transform=(dA.devicePixelRatio||1)<=1?"translate("+eA+"px, "+nA+"px)":"translate3d("+eA+"px, "+nA+"px, 0)",JA)):Object.assign({},tg,((a={})[VA]=UA?nA+"px":"",a[BA]=HA?eA+"px":"",a.transform="",a))}const tc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(B){var a=B.state,u=B.options,p=u.gpuAcceleration,v=p===void 0||p,w=u.adaptive,k=w===void 0||w,Y=u.roundOffsets,x=Y===void 0||Y,z={placement:tt(a.placement),variation:Tn(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:v,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,gb(Object.assign({},z,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:k,roundOffsets:x})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,gb(Object.assign({},z,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:x})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}};var ti={passive:!0};const Ic={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(B){var a=B.state,u=B.instance,p=B.options,v=p.scroll,w=v===void 0||v,k=p.resize,Y=k===void 0||k,x=ie(a.elements.popper),z=[].concat(a.scrollParents.reference,a.scrollParents.popper);return w&&z.forEach(function(O){O.addEventListener("scroll",u.update,ti)}),Y&&x.addEventListener("resize",u.update,ti),function(){w&&z.forEach(function(O){O.removeEventListener("scroll",u.update,ti)}),Y&&x.removeEventListener("resize",u.update,ti)}},data:{}};var Qv={left:"right",right:"left",bottom:"top",top:"bottom"};function Ii(B){return B.replace(/left|right|bottom|top/g,function(a){return Qv[a]})}var Kv={start:"end",end:"start"};function eb(B){return B.replace(/start|end/g,function(a){return Kv[a]})}function nc(B){var a=ie(B);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function Cc(B){return zn(Ot(B)).left+nc(B).scrollLeft}function lc(B){var a=Gt(B),u=a.overflow,p=a.overflowX,v=a.overflowY;return/auto|scroll|overlay|hidden/.test(u+v+p)}function tb(B){return["html","body","#document"].indexOf(et(B))>=0?B.ownerDocument.body:Ge(B)&&lc(B)?B:tb(ei(B))}function Cl(B,a){var u;a===void 0&&(a=[]);var p=tb(B),v=p===((u=B.ownerDocument)==null?void 0:u.body),w=ie(p),k=v?[w].concat(w.visualViewport||[],lc(p)?p:[]):p,Y=a.concat(k);return v?Y:Y.concat(Cl(ei(k)))}function sc(B){return Object.assign({},B,{left:B.x,top:B.y,right:B.x+B.width,bottom:B.y+B.height})}function Ib(B,a,u){return a===Or?sc(function(p,v){var w=ie(p),k=Ot(p),Y=w.visualViewport,x=k.clientWidth,z=k.clientHeight,O=0,E=0;if(Y){x=Y.width,z=Y.height;var cA=Oh();(cA||!cA&&v==="fixed")&&(O=Y.offsetLeft,E=Y.offsetTop)}return{width:x,height:z,x:O+Cc(p),y:E}}(B,u)):DI(a)?function(p,v){var w=zn(p,!1,v==="fixed");return w.top=w.top+p.clientTop,w.left=w.left+p.clientLeft,w.bottom=w.top+p.clientHeight,w.right=w.left+p.clientWidth,w.width=p.clientWidth,w.height=p.clientHeight,w.x=w.left,w.y=w.top,w}(a,u):sc(function(p){var v,w=Ot(p),k=nc(p),Y=(v=p.ownerDocument)==null?void 0:v.body,x=zI(w.scrollWidth,w.clientWidth,Y?Y.scrollWidth:0,Y?Y.clientWidth:0),z=zI(w.scrollHeight,w.clientHeight,Y?Y.scrollHeight:0,Y?Y.clientHeight:0),O=-k.scrollLeft+Cc(p),E=-k.scrollTop;return Gt(Y||w).direction==="rtl"&&(O+=zI(w.clientWidth,Y?Y.clientWidth:0)-x),{width:x,height:z,x:O,y:E}}(Ot(B)))}function nb(B){var a,u=B.reference,p=B.element,v=B.placement,w=v?tt(v):null,k=v?Tn(v):null,Y=u.x+u.width/2-p.width/2,x=u.y+u.height/2-p.height/2;switch(w){case xg:a={x:Y,y:u.y-p.height};break;case le:a={x:Y,y:u.y+u.height};break;case se:a={x:u.x+u.width,y:x};break;case Eg:a={x:u.x-p.width,y:x};break;default:a={x:u.x,y:u.y}}var z=w?ec(w):null;if(z!=null){var O=z==="y"?"height":"width";switch(k){case MI:a[z]=a[z]-(u[O]/2-p[O]/2);break;case Ln:a[z]=a[z]+(u[O]/2-p[O]/2)}}return a}function jn(B,a){a===void 0&&(a={});var u=a,p=u.placement,v=p===void 0?B.placement:p,w=u.strategy,k=w===void 0?B.strategy:w,Y=u.boundary,x=Y===void 0?Qh:Y,z=u.rootBoundary,O=z===void 0?Or:z,E=u.elementContext,cA=E===void 0?Mn:E,eA=u.altBoundary,lA=eA!==void 0&&eA,nA=u.padding,sA=nA===void 0?0:nA,HA=qh(typeof sA!="number"?sA:$h(sA,En)),UA=cA===Mn?Kh:Mn,BA=B.rects.popper,VA=B.elements[lA?UA:cA],dA=function(Lg,fe,Se,qA){var It=fe==="clippingParents"?function(NA){var Mg=Cl(ei(NA)),Ve=["absolute","fixed"].indexOf(Gt(NA).position)>=0&&Ge(NA)?Il(NA):NA;return DI(Ve)?Mg.filter(function(_t){return DI(_t)&&Ph(_t,Ve)&&et(_t)!=="body"}):[]}(Lg):[].concat(fe),nt=[].concat(It,[Se]),_n=nt[0],bg=nt.reduce(function(NA,Mg){var Ve=Ib(Lg,Mg,qA);return NA.top=zI(Ve.top,NA.top),NA.right=gi(Ve.right,NA.right),NA.bottom=gi(Ve.bottom,NA.bottom),NA.left=zI(Ve.left,NA.left),NA},Ib(Lg,_n,qA));return bg.width=bg.right-bg.left,bg.height=bg.bottom-bg.top,bg.x=bg.left,bg.y=bg.top,bg}(DI(VA)?VA:VA.contextElement||Ot(B.elements.popper),x,O,k),pA=zn(B.elements.reference),XA=nb({reference:pA,element:BA,strategy:"absolute",placement:v}),YA=sc(Object.assign({},BA,XA)),JA=cA===Mn?YA:pA,tg={top:dA.top-JA.top+HA.top,bottom:JA.bottom-dA.bottom+HA.bottom,left:dA.left-JA.left+HA.left,right:JA.right-dA.right+HA.right},oe=B.modifiersData.offset;if(cA===Mn&&oe){var Le=oe[v];Object.keys(tg).forEach(function(Lg){var fe=[se,le].indexOf(Lg)>=0?1:-1,Se=[xg,le].indexOf(Lg)>=0?"y":"x";tg[Lg]+=Le[Se]*fe})}return tg}function Nv(B,a){a===void 0&&(a={});var u=a,p=u.placement,v=u.boundary,w=u.rootBoundary,k=u.padding,Y=u.flipVariations,x=u.allowedAutoPlacements,z=x===void 0?_r:x,O=Tn(p),E=O?Y?Pr:Pr.filter(function(lA){return Tn(lA)===O}):En,cA=E.filter(function(lA){return z.indexOf(lA)>=0});cA.length===0&&(cA=E);var eA=cA.reduce(function(lA,nA){return lA[nA]=jn(B,{placement:nA,boundary:v,rootBoundary:w,padding:k})[tt(nA)],lA},{});return Object.keys(eA).sort(function(lA,nA){return eA[lA]-eA[nA]})}const Cb={name:"flip",enabled:!0,phase:"main",fn:function(B){var a=B.state,u=B.options,p=B.name;if(!a.modifiersData[p]._skip){for(var v=u.mainAxis,w=v===void 0||v,k=u.altAxis,Y=k===void 0||k,x=u.fallbackPlacements,z=u.padding,O=u.boundary,E=u.rootBoundary,cA=u.altBoundary,eA=u.flipVariations,lA=eA===void 0||eA,nA=u.allowedAutoPlacements,sA=a.options.placement,HA=tt(sA),UA=x||(HA!==sA&&lA?function(NA){if(tt(NA)===Ai)return[];var Mg=Ii(NA);return[eb(NA),Mg,eb(Mg)]}(sA):[Ii(sA)]),BA=[sA].concat(UA).reduce(function(NA,Mg){return NA.concat(tt(Mg)===Ai?Nv(a,{placement:Mg,boundary:O,rootBoundary:E,padding:z,flipVariations:lA,allowedAutoPlacements:nA}):Mg)},[]),VA=a.rects.reference,dA=a.rects.popper,pA=new Map,XA=!0,YA=BA[0],JA=0;JA<BA.length;JA++){var tg=BA[JA],oe=tt(tg),Le=Tn(tg)===MI,Lg=[xg,le].indexOf(oe)>=0,fe=Lg?"width":"height",Se=jn(a,{placement:tg,boundary:O,rootBoundary:E,altBoundary:cA,padding:z}),qA=Lg?Le?se:Eg:Le?le:xg;VA[fe]>dA[fe]&&(qA=Ii(qA));var It=Ii(qA),nt=[];if(w&&nt.push(Se[oe]<=0),Y&&nt.push(Se[qA]<=0,Se[It]<=0),nt.every(function(NA){return NA})){YA=tg,XA=!1;break}pA.set(tg,nt)}if(XA)for(var _n=function(NA){var Mg=BA.find(function(Ve){var _t=pA.get(Ve);if(_t)return _t.slice(0,NA).every(function(ci){return ci})});if(Mg)return YA=Mg,"break"},bg=lA?3:1;bg>0&&_n(bg)!=="break";bg--);a.placement!==YA&&(a.modifiersData[p]._skip=!0,a.placement=YA,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function lb(B,a,u){return u===void 0&&(u={x:0,y:0}),{top:B.top-a.height-u.y,right:B.right-a.width+u.x,bottom:B.bottom-a.height+u.y,left:B.left-a.width-u.x}}function sb(B){return[xg,se,le,Eg].some(function(a){return B[a]>=0})}const ib={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(B){var a=B.state,u=B.name,p=a.rects.reference,v=a.rects.popper,w=a.modifiersData.preventOverflow,k=jn(a,{elementContext:"reference"}),Y=jn(a,{altBoundary:!0}),x=lb(k,p),z=lb(Y,v,w),O=sb(x),E=sb(z);a.modifiersData[u]={referenceClippingOffsets:x,popperEscapeOffsets:z,isReferenceHidden:O,hasPopperEscaped:E},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":O,"data-popper-escaped":E})}},ob={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(B){var a=B.state,u=B.options,p=B.name,v=u.offset,w=v===void 0?[0,0]:v,k=_r.reduce(function(O,E){return O[E]=function(cA,eA,lA){var nA=tt(cA),sA=[Eg,xg].indexOf(nA)>=0?-1:1,HA=typeof lA=="function"?lA(Object.assign({},eA,{placement:cA})):lA,UA=HA[0],BA=HA[1];return UA=UA||0,BA=(BA||0)*sA,[Eg,se].indexOf(nA)>=0?{x:BA,y:UA}:{x:UA,y:BA}}(E,a.rects,w),O},{}),Y=k[a.placement],x=Y.x,z=Y.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=x,a.modifiersData.popperOffsets.y+=z),a.modifiersData[p]=k}},ic={name:"popperOffsets",enabled:!0,phase:"read",fn:function(B){var a=B.state,u=B.name;a.modifiersData[u]=nb({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})},data:{}},ab={name:"preventOverflow",enabled:!0,phase:"main",fn:function(B){var a=B.state,u=B.options,p=B.name,v=u.mainAxis,w=v===void 0||v,k=u.altAxis,Y=k!==void 0&&k,x=u.boundary,z=u.rootBoundary,O=u.altBoundary,E=u.padding,cA=u.tether,eA=cA===void 0||cA,lA=u.tetherOffset,nA=lA===void 0?0:lA,sA=jn(a,{boundary:x,rootBoundary:z,padding:E,altBoundary:O}),HA=tt(a.placement),UA=Tn(a.placement),BA=!UA,VA=ec(HA),dA=VA==="x"?"y":"x",pA=a.modifiersData.popperOffsets,XA=a.rects.reference,YA=a.rects.popper,JA=typeof nA=="function"?nA(Object.assign({},a.rects,{placement:a.placement})):nA,tg=typeof JA=="number"?{mainAxis:JA,altAxis:JA}:Object.assign({mainAxis:0,altAxis:0},JA),oe=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,Le={x:0,y:0};if(pA){if(w){var Lg,fe=VA==="y"?xg:Eg,Se=VA==="y"?le:se,qA=VA==="y"?"height":"width",It=pA[VA],nt=It+sA[fe],_n=It-sA[Se],bg=eA?-YA[qA]/2:0,NA=UA===MI?XA[qA]:YA[qA],Mg=UA===MI?-YA[qA]:-XA[qA],Ve=a.elements.arrow,_t=eA&&Ve?gc(Ve):{width:0,height:0},ci=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},_b=ci[fe],qb=ci[Se],di=nl(0,XA[qA],_t[qA]),dX=BA?XA[qA]/2-bg-di-_b-tg.mainAxis:NA-di-_b-tg.mainAxis,uX=BA?-XA[qA]/2+bg+di+qb+tg.mainAxis:Mg+di+qb+tg.mainAxis,Gc=a.elements.arrow&&Il(a.elements.arrow),mX=Gc?VA==="y"?Gc.clientTop||0:Gc.clientLeft||0:0,$b=(Lg=oe==null?void 0:oe[VA])!=null?Lg:0,BX=It+uX-$b,A0=nl(eA?gi(nt,It+dX-$b-mX):nt,It,eA?zI(_n,BX):_n);pA[VA]=A0,Le[VA]=A0-It}if(Y){var g0,hX=VA==="x"?xg:Eg,bX=VA==="x"?le:se,An=pA[dA],ui=dA==="y"?"height":"width",e0=An+sA[hX],t0=An-sA[bX],yc=[xg,Eg].indexOf(HA)!==-1,I0=(g0=oe==null?void 0:oe[dA])!=null?g0:0,n0=yc?e0:An-XA[ui]-YA[ui]-I0+tg.altAxis,C0=yc?An+XA[ui]+YA[ui]-I0-tg.altAxis:t0,l0=eA&&yc?function(ZX,pX,fc){var s0=nl(ZX,pX,fc);return s0>fc?fc:s0}(n0,An,C0):nl(eA?n0:e0,An,eA?C0:t0);pA[dA]=l0,Le[dA]=l0-An}a.modifiersData[p]=Le}},requiresIfExists:["offset"]};function Uv(B,a,u){u===void 0&&(u=!1);var p,v,w=Ge(a),k=Ge(a)&&function(E){var cA=E.getBoundingClientRect(),eA=Dn(cA.width)/E.offsetWidth||1,lA=Dn(cA.height)/E.offsetHeight||1;return eA!==1||lA!==1}(a),Y=Ot(a),x=zn(B,k,u),z={scrollLeft:0,scrollTop:0},O={x:0,y:0};return(w||!w&&!u)&&((et(a)!=="body"||lc(Y))&&(z=(p=a)!==ie(p)&&Ge(p)?{scrollLeft:(v=p).scrollLeft,scrollTop:v.scrollTop}:nc(p)),Ge(a)?((O=zn(a,!0)).x+=a.clientLeft,O.y+=a.clientTop):Y&&(O.x=Cc(Y))),{x:x.left+z.scrollLeft-O.x,y:x.top+z.scrollTop-O.y,width:x.width,height:x.height}}function xv(B){var a=new Map,u=new Set,p=[];function v(w){u.add(w.name),[].concat(w.requires||[],w.requiresIfExists||[]).forEach(function(k){if(!u.has(k)){var Y=a.get(k);Y&&v(Y)}}),p.push(w)}return B.forEach(function(w){a.set(w.name,w)}),B.forEach(function(w){u.has(w.name)||v(w)}),p}var rb={placement:"bottom",modifiers:[],strategy:"absolute"};function cb(){for(var B=arguments.length,a=new Array(B),u=0;u<B;u++)a[u]=arguments[u];return!a.some(function(p){return!(p&&typeof p.getBoundingClientRect=="function")})}function ni(B){B===void 0&&(B={});var a=B,u=a.defaultModifiers,p=u===void 0?[]:u,v=a.defaultOptions,w=v===void 0?rb:v;return function(k,Y,x){x===void 0&&(x=w);var z,O,E={placement:"bottom",orderedModifiers:[],options:Object.assign({},rb,w),modifiersData:{},elements:{reference:k,popper:Y},attributes:{},styles:{}},cA=[],eA=!1,lA={state:E,setOptions:function(sA){var HA=typeof sA=="function"?sA(E.options):sA;nA(),E.options=Object.assign({},w,E.options,HA),E.scrollParents={reference:DI(k)?Cl(k):k.contextElement?Cl(k.contextElement):[],popper:Cl(Y)};var UA,BA,VA=function(dA){var pA=xv(dA);return jh.reduce(function(XA,YA){return XA.concat(pA.filter(function(JA){return JA.phase===YA}))},[])}((UA=[].concat(p,E.options.modifiers),BA=UA.reduce(function(dA,pA){var XA=dA[pA.name];return dA[pA.name]=XA?Object.assign({},XA,pA,{options:Object.assign({},XA.options,pA.options),data:Object.assign({},XA.data,pA.data)}):pA,dA},{}),Object.keys(BA).map(function(dA){return BA[dA]})));return E.orderedModifiers=VA.filter(function(dA){return dA.enabled}),E.orderedModifiers.forEach(function(dA){var pA=dA.name,XA=dA.options,YA=XA===void 0?{}:XA,JA=dA.effect;if(typeof JA=="function"){var tg=JA({state:E,name:pA,instance:lA,options:YA});cA.push(tg||function(){})}}),lA.update()},forceUpdate:function(){if(!eA){var sA=E.elements,HA=sA.reference,UA=sA.popper;if(cb(HA,UA)){E.rects={reference:Uv(HA,Il(UA),E.options.strategy==="fixed"),popper:gc(UA)},E.reset=!1,E.placement=E.options.placement,E.orderedModifiers.forEach(function(JA){return E.modifiersData[JA.name]=Object.assign({},JA.data)});for(var BA=0;BA<E.orderedModifiers.length;BA++)if(E.reset!==!0){var VA=E.orderedModifiers[BA],dA=VA.fn,pA=VA.options,XA=pA===void 0?{}:pA,YA=VA.name;typeof dA=="function"&&(E=dA({state:E,options:XA,name:YA,instance:lA})||E)}else E.reset=!1,BA=-1}}},update:(z=function(){return new Promise(function(sA){lA.forceUpdate(),sA(E)})},function(){return O||(O=new Promise(function(sA){Promise.resolve().then(function(){O=void 0,sA(z())})})),O}),destroy:function(){nA(),eA=!0}};if(!cb(k,Y))return lA;function nA(){cA.forEach(function(sA){return sA()}),cA=[]}return lA.setOptions(x).then(function(sA){!eA&&x.onFirstUpdate&&x.onFirstUpdate(sA)}),lA}}var Ev=ni(),Lv=ni({defaultModifiers:[Ic,ic,tc,$r]}),oc=ni({defaultModifiers:[Ic,ic,tc,$r,ob,Cb,ab,Ab,ib]});const db=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Mh,afterRead:xh,afterWrite:Th,applyStyles:$r,arrow:Ab,auto:Ai,basePlacements:En,beforeMain:Eh,beforeRead:Nh,beforeWrite:Dh,bottom:le,clippingParents:Qh,computeStyles:tc,createPopper:oc,createPopperBase:Ev,createPopperLite:Lv,detectOverflow:jn,end:Ln,eventListeners:Ic,flip:Cb,hide:ib,left:Eg,main:Lh,modifierPhases:jh,offset:ob,placements:_r,popper:Mn,popperGenerator:ni,popperOffsets:ic,preventOverflow:ab,read:Uh,reference:Kh,right:se,start:MI,top:xg,variationPlacements:Pr,viewport:Or,write:zh},Symbol.toStringTag,{value:"Module"})),ub="dropdown",TI=".bs.dropdown",ac=".data-api",Mv="ArrowUp",mb="ArrowDown",Dv=`hide${TI}`,zv=`hidden${TI}`,Tv=`show${TI}`,jv=`shown${TI}`,Bb=`click${TI}${ac}`,hb=`keydown${TI}${ac}`,Ov=`keyup${TI}${ac}`,On="show",jI='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Pv=`${jI}.${On}`,Ci=".dropdown-menu",_v=S()?"top-end":"top-start",qv=S()?"top-start":"top-end",$v=S()?"bottom-end":"bottom-start",Aw=S()?"bottom-start":"bottom-end",gw=S()?"left-start":"right-start",ew=S()?"right-start":"left-start",tw={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Iw={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ee extends mA{constructor(a,u){super(a,u),this._popper=null,this._parent=this._element.parentNode,this._menu=$.next(this._element,Ci)[0]||$.prev(this._element,Ci)[0]||$.findOne(Ci,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return tw}static get DefaultType(){return Iw}static get NAME(){return ub}toggle(){return this._isShown()?this.hide():this.show()}show(){if(r(this._element)||this._isShown())return;const a={relatedTarget:this._element};if(!J.trigger(this._element,Tv,a).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const u of[].concat(...document.body.children))J.on(u,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(On),this._element.classList.add(On),J.trigger(this._element,jv,a)}}hide(){if(r(this._element)||!this._isShown())return;const a={relatedTarget:this._element};this._completeHide(a)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(a){if(!J.trigger(this._element,Dv,a).defaultPrevented){if("ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))J.off(u,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(On),this._element.classList.remove(On),this._element.setAttribute("aria-expanded","false"),aA.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,zv,a)}}_getConfig(a){if(typeof(a=super._getConfig(a)).reference=="object"&&!l(a.reference)&&typeof a.reference.getBoundingClientRect!="function")throw new TypeError(`${ub.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return a}_createPopper(){if(db===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let a=this._element;this._config.reference==="parent"?a=this._parent:l(this._config.reference)?a=s(this._config.reference):typeof this._config.reference=="object"&&(a=this._config.reference);const u=this._getPopperConfig();this._popper=oc(a,this._menu,u)}_isShown(){return this._menu.classList.contains(On)}_getPlacement(){const a=this._parent;if(a.classList.contains("dropend"))return gw;if(a.classList.contains("dropstart"))return ew;if(a.classList.contains("dropup-center"))return"top";if(a.classList.contains("dropdown-center"))return"bottom";const u=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return a.classList.contains("dropup")?u?qv:_v:u?Aw:$v}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(u=>Number.parseInt(u,10)):typeof a=="function"?u=>a(u,this._element):a}_getPopperConfig(){const a={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(aA.setDataAttribute(this._menu,"popper","static"),a.modifiers=[{name:"applyStyles",enabled:!1}]),{...a,...m(this._config.popperConfig,[a])}}_selectMenuItem({key:a,target:u}){const p=$.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(v=>i(v));p.length&&V(p,u,a===mb,!p.includes(u)).focus()}static jQueryInterface(a){return this.each(function(){const u=Ee.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0)throw new TypeError(`No method named "${a}"`);u[a]()}})}static clearMenus(a){if(a.button===2||a.type==="keyup"&&a.key!=="Tab")return;const u=$.find(Pv);for(const p of u){const v=Ee.getInstance(p);if(!v||v._config.autoClose===!1)continue;const w=a.composedPath(),k=w.includes(v._menu);if(w.includes(v._element)||v._config.autoClose==="inside"&&!k||v._config.autoClose==="outside"&&k||v._menu.contains(a.target)&&(a.type==="keyup"&&a.key==="Tab"||/input|select|option|textarea|form/i.test(a.target.tagName)))continue;const Y={relatedTarget:v._element};a.type==="click"&&(Y.clickEvent=a),v._completeHide(Y)}}static dataApiKeydownHandler(a){const u=/input|textarea/i.test(a.target.tagName),p=a.key==="Escape",v=[Mv,mb].includes(a.key);if(!v&&!p||u&&!p)return;a.preventDefault();const w=this.matches(jI)?this:$.prev(this,jI)[0]||$.next(this,jI)[0]||$.findOne(jI,a.delegateTarget.parentNode),k=Ee.getOrCreateInstance(w);if(v)return a.stopPropagation(),k.show(),void k._selectMenuItem(a);k._isShown()&&(a.stopPropagation(),k.hide(),w.focus())}}J.on(document,hb,jI,Ee.dataApiKeydownHandler),J.on(document,hb,Ci,Ee.dataApiKeydownHandler),J.on(document,Bb,Ee.clearMenus),J.on(document,Ov,Ee.clearMenus),J.on(document,Bb,jI,function(B){B.preventDefault(),Ee.getOrCreateInstance(this).toggle()}),b(Ee);const bb="backdrop",Zb="show",pb=`mousedown.bs.${bb}`,nw={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Cw={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Gb extends SA{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return nw}static get DefaultType(){return Cw}static get NAME(){return bb}show(a){if(!this._config.isVisible)return void m(a);this._append();const u=this._getElement();this._config.isAnimated&&h(u),u.classList.add(Zb),this._emulateAnimation(()=>{m(a)})}hide(a){this._config.isVisible?(this._getElement().classList.remove(Zb),this._emulateAnimation(()=>{this.dispose(),m(a)})):m(a)}dispose(){this._isAppended&&(J.off(this._element,pb),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add("fade"),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=s(a.rootElement),a}_append(){if(this._isAppended)return;const a=this._getElement();this._config.rootElement.append(a),J.on(a,pb,()=>{m(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){G(a,this._getElement(),this._config.isAnimated)}}const li=".bs.focustrap",lw=`focusin${li}`,sw=`keydown.tab${li}`,yb="backward",iw={autofocus:!0,trapElement:null},ow={autofocus:"boolean",trapElement:"element"};class fb extends SA{constructor(a){super(),this._config=this._getConfig(a),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return iw}static get DefaultType(){return ow}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,li),J.on(document,lw,a=>this._handleFocusin(a)),J.on(document,sw,a=>this._handleKeydown(a)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,J.off(document,li))}_handleFocusin(a){const{trapElement:u}=this._config;if(a.target===document||a.target===u||u.contains(a.target))return;const p=$.focusableChildren(u);p.length===0?u.focus():this._lastTabNavDirection===yb?p[p.length-1].focus():p[0].focus()}_handleKeydown(a){a.key==="Tab"&&(this._lastTabNavDirection=a.shiftKey?yb:"forward")}}const Sb=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Vb=".sticky-top",si="padding-right",Wb="margin-right";class rc{constructor(){this._element=document.body}getWidth(){const a=document.documentElement.clientWidth;return Math.abs(window.innerWidth-a)}hide(){const a=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,si,u=>u+a),this._setElementAttributes(Sb,si,u=>u+a),this._setElementAttributes(Vb,Wb,u=>u-a)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,si),this._resetElementAttributes(Sb,si),this._resetElementAttributes(Vb,Wb)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(a,u,p){const v=this.getWidth();this._applyManipulationCallback(a,w=>{if(w!==this._element&&window.innerWidth>w.clientWidth+v)return;this._saveInitialAttribute(w,u);const k=window.getComputedStyle(w).getPropertyValue(u);w.style.setProperty(u,`${p(Number.parseFloat(k))}px`)})}_saveInitialAttribute(a,u){const p=a.style.getPropertyValue(u);p&&aA.setDataAttribute(a,u,p)}_resetElementAttributes(a,u){this._applyManipulationCallback(a,p=>{const v=aA.getDataAttribute(p,u);v!==null?(aA.removeDataAttribute(p,u),p.style.setProperty(u,v)):p.style.removeProperty(u)})}_applyManipulationCallback(a,u){if(l(a))u(a);else for(const p of $.find(a,this._element))u(p)}}const ye=".bs.modal",aw=`hide${ye}`,rw=`hidePrevented${ye}`,Rb=`hidden${ye}`,vb=`show${ye}`,cw=`shown${ye}`,dw=`resize${ye}`,uw=`click.dismiss${ye}`,mw=`mousedown.dismiss${ye}`,Bw=`keydown.dismiss${ye}`,hw=`click${ye}.data-api`,wb="modal-open",Xb="show",cc="modal-static",bw={backdrop:!0,focus:!0,keyboard:!0},Zw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class OI extends mA{constructor(a,u){super(a,u),this._dialog=$.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rc,this._addEventListeners()}static get Default(){return bw}static get DefaultType(){return Zw}static get NAME(){return"modal"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||this._isTransitioning||J.trigger(this._element,vb,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(wb),this._adjustDialog(),this._backdrop.show(()=>this._showElement(a)))}hide(){this._isShown&&!this._isTransitioning&&(J.trigger(this._element,aw).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xb),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){J.off(window,ye),J.off(this._dialog,ye),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Gb({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new fb({trapElement:this._element})}_showElement(a){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const u=$.findOne(".modal-body",this._dialog);u&&(u.scrollTop=0),h(this._element),this._element.classList.add(Xb),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,cw,{relatedTarget:a})},this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,Bw,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),J.on(window,dw,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,mw,a=>{J.one(this._element,uw,u=>{this._element===a.target&&this._element===u.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(wb),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,Rb)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(J.trigger(this._element,rw).defaultPrevented)return;const a=this._element.scrollHeight>document.documentElement.clientHeight,u=this._element.style.overflowY;u==="hidden"||this._element.classList.contains(cc)||(a||(this._element.style.overflowY="hidden"),this._element.classList.add(cc),this._queueCallback(()=>{this._element.classList.remove(cc),this._queueCallback(()=>{this._element.style.overflowY=u},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const a=this._element.scrollHeight>document.documentElement.clientHeight,u=this._scrollBar.getWidth(),p=u>0;if(p&&!a){const v=S()?"paddingLeft":"paddingRight";this._element.style[v]=`${u}px`}if(!p&&a){const v=S()?"paddingRight":"paddingLeft";this._element.style[v]=`${u}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(a,u){return this.each(function(){const p=OI.getOrCreateInstance(this,a);if(typeof a=="string"){if(p[a]===void 0)throw new TypeError(`No method named "${a}"`);p[a](u)}})}}J.on(document,hw,'[data-bs-toggle="modal"]',function(B){const a=$.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&B.preventDefault(),J.one(a,vb,p=>{p.defaultPrevented||J.one(a,Rb,()=>{i(this)&&this.focus()})});const u=$.findOne(".modal.show");u&&OI.getInstance(u).hide(),OI.getOrCreateInstance(a).toggle(this)}),At(OI),b(OI);const yt=".bs.offcanvas",Jb=".data-api",pw=`load${yt}${Jb}`,Fb="show",kb="showing",Hb="hiding",Yb=".offcanvas.show",Gw=`show${yt}`,yw=`shown${yt}`,fw=`hide${yt}`,Qb=`hidePrevented${yt}`,Kb=`hidden${yt}`,Sw=`resize${yt}`,Vw=`click${yt}${Jb}`,Ww=`keydown.dismiss${yt}`,Rw={backdrop:!0,keyboard:!0,scroll:!1},vw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ft extends mA{constructor(a,u){super(a,u),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Rw}static get DefaultType(){return vw}static get NAME(){return"offcanvas"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||J.trigger(this._element,Gw,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new rc().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(kb),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Fb),this._element.classList.remove(kb),J.trigger(this._element,yw,{relatedTarget:a})},this._element,!0))}hide(){this._isShown&&(J.trigger(this._element,fw).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Hb),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Fb,Hb),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rc().reset(),J.trigger(this._element,Kb)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const a=!!this._config.backdrop;return new Gb({className:"offcanvas-backdrop",isVisible:a,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:a?()=>{this._config.backdrop!=="static"?this.hide():J.trigger(this._element,Qb)}:null})}_initializeFocusTrap(){return new fb({trapElement:this._element})}_addEventListeners(){J.on(this._element,Ww,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():J.trigger(this._element,Qb))})}static jQueryInterface(a){return this.each(function(){const u=ft.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);u[a](this)}})}}J.on(document,Vw,'[data-bs-toggle="offcanvas"]',function(B){const a=$.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&B.preventDefault(),r(this))return;J.one(a,Kb,()=>{i(this)&&this.focus()});const u=$.findOne(Yb);u&&u!==a&&ft.getInstance(u).hide(),ft.getOrCreateInstance(a).toggle(this)}),J.on(window,pw,()=>{for(const B of $.find(Yb))ft.getOrCreateInstance(B).show()}),J.on(window,Sw,()=>{for(const B of $.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(B).position!=="fixed"&&ft.getOrCreateInstance(B).hide()}),At(ft),b(ft);const Nb={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ww=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Jw=(B,a)=>{const u=B.nodeName.toLowerCase();return a.includes(u)?!ww.has(u)||!!Xw.test(B.nodeValue):a.filter(p=>p instanceof RegExp).some(p=>p.test(u))},Fw={allowList:Nb,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},kw={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Hw={entry:"(string|element|function|null)",selector:"(string|element)"};class Yw extends SA{constructor(a){super(),this._config=this._getConfig(a)}static get Default(){return Fw}static get DefaultType(){return kw}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(a=>this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(a){return this._checkContent(a),this._config.content={...this._config.content,...a},this}toHtml(){const a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(const[v,w]of Object.entries(this._config.content))this._setContent(a,w,v);const u=a.children[0],p=this._resolvePossibleFunction(this._config.extraClass);return p&&u.classList.add(...p.split(" ")),u}_typeCheckConfig(a){super._typeCheckConfig(a),this._checkContent(a.content)}_checkContent(a){for(const[u,p]of Object.entries(a))super._typeCheckConfig({selector:u,entry:p},Hw)}_setContent(a,u,p){const v=$.findOne(p,a);v&&((u=this._resolvePossibleFunction(u))?l(u)?this._putElementInTemplate(s(u),v):this._config.html?v.innerHTML=this._maybeSanitize(u):v.textContent=u:v.remove())}_maybeSanitize(a){return this._config.sanitize?function(u,p,v){if(!u.length)return u;if(v&&typeof v=="function")return v(u);const w=new window.DOMParser().parseFromString(u,"text/html"),k=[].concat(...w.body.querySelectorAll("*"));for(const Y of k){const x=Y.nodeName.toLowerCase();if(!Object.keys(p).includes(x)){Y.remove();continue}const z=[].concat(...Y.attributes),O=[].concat(p["*"]||[],p[x]||[]);for(const E of z)Jw(E,O)||Y.removeAttribute(E.nodeName)}return w.body.innerHTML}(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return m(a,[this])}_putElementInTemplate(a,u){if(this._config.html)return u.innerHTML="",void u.append(a);u.textContent=a.textContent}}const Qw=new Set(["sanitize","allowList","sanitizeFn"]),dc="fade",ii="show",Ub=".modal",xb="hide.bs.modal",ll="hover",uc="focus",Kw={AUTO:"auto",TOP:"top",RIGHT:S()?"left":"right",BOTTOM:"bottom",LEFT:S()?"right":"left"},Nw={allowList:Nb,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Uw={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class PI extends mA{constructor(a,u){if(db===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(a,u),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Nw}static get DefaultType(){return Uw}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),J.off(this._element.closest(Ub),xb,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const a=J.trigger(this._element,this.constructor.eventName("show")),u=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(a.defaultPrevented||!u)return;this._disposePopper();const p=this._getTipElement();this._element.setAttribute("aria-describedby",p.getAttribute("id"));const{container:v}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(v.append(p),J.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(p),p.classList.add(ii),"ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))J.on(w,"mouseover",d);this._queueCallback(()=>{J.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!J.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ii),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))J.off(a,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger[uc]=!1,this._activeTrigger[ll]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(a){const u=this._getTemplateFactory(a).toHtml();if(!u)return null;u.classList.remove(dc,ii),u.classList.add(`bs-${this.constructor.NAME}-auto`);const p=(v=>{do v+=Math.floor(1e6*Math.random());while(document.getElementById(v));return v})(this.constructor.NAME).toString();return u.setAttribute("id",p),this._isAnimated()&&u.classList.add(dc),u}setContent(a){this._newContent=a,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(a){return this._templateFactory?this._templateFactory.changeContent(a):this._templateFactory=new Yw({...this._config,content:a,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(a){return this.constructor.getOrCreateInstance(a.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(dc)}_isShown(){return this.tip&&this.tip.classList.contains(ii)}_createPopper(a){const u=m(this._config.placement,[this,a,this._element]),p=Kw[u.toUpperCase()];return oc(this._element,a,this._getPopperConfig(p))}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(u=>Number.parseInt(u,10)):typeof a=="function"?u=>a(u,this._element):a}_resolvePossibleFunction(a){return m(a,[this._element])}_getPopperConfig(a){const u={placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:p=>{this._getTipElement().setAttribute("data-popper-placement",p.state.placement)}}]};return{...u,...m(this._config.popperConfig,[u])}}_setListeners(){const a=this._config.trigger.split(" ");for(const u of a)if(u==="click")J.on(this._element,this.constructor.eventName("click"),this._config.selector,p=>{this._initializeOnDelegatedTarget(p).toggle()});else if(u!=="manual"){const p=u===ll?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),v=u===ll?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");J.on(this._element,p,this._config.selector,w=>{const k=this._initializeOnDelegatedTarget(w);k._activeTrigger[w.type==="focusin"?uc:ll]=!0,k._enter()}),J.on(this._element,v,this._config.selector,w=>{const k=this._initializeOnDelegatedTarget(w);k._activeTrigger[w.type==="focusout"?uc:ll]=k._element.contains(w.relatedTarget),k._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest(Ub),xb,this._hideModalHandler)}_fixTitle(){const a=this._element.getAttribute("title");a&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",a),this._element.setAttribute("data-bs-original-title",a),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(a,u){clearTimeout(this._timeout),this._timeout=setTimeout(a,u)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(a){const u=aA.getDataAttributes(this._element);for(const p of Object.keys(u))Qw.has(p)&&delete u[p];return a={...u,...typeof a=="object"&&a?a:{}},a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a.container=a.container===!1?document.body:s(a.container),typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),typeof a.title=="number"&&(a.title=a.title.toString()),typeof a.content=="number"&&(a.content=a.content.toString()),a}_getDelegateConfig(){const a={};for(const[u,p]of Object.entries(this._config))this.constructor.Default[u]!==p&&(a[u]=p);return a.selector=!1,a.trigger="manual",a}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(a){return this.each(function(){const u=PI.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0)throw new TypeError(`No method named "${a}"`);u[a]()}})}}b(PI);const xw={...PI.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ew={...PI.DefaultType,content:"(null|string|element|function)"};class oi extends PI{static get Default(){return xw}static get DefaultType(){return Ew}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(a){return this.each(function(){const u=oi.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0)throw new TypeError(`No method named "${a}"`);u[a]()}})}}b(oi);const mc=".bs.scrollspy",Lw=`activate${mc}`,Eb=`click${mc}`,Mw=`load${mc}.data-api`,Pn="active",Bc="[href]",Lb=".nav-link",Dw=`${Lb}, .nav-item > ${Lb}, .list-group-item`,zw={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Tw={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class sl extends mA{constructor(a,u){super(a,u),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return zw}static get DefaultType(){return Tw}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const a of this._observableSections.values())this._observer.observe(a)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(a){return a.target=s(a.target)||document.body,a.rootMargin=a.offset?`${a.offset}px 0px -30%`:a.rootMargin,typeof a.threshold=="string"&&(a.threshold=a.threshold.split(",").map(u=>Number.parseFloat(u))),a}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(J.off(this._config.target,Eb),J.on(this._config.target,Eb,Bc,a=>{const u=this._observableSections.get(a.target.hash);if(u){a.preventDefault();const p=this._rootElement||window,v=u.offsetTop-this._element.offsetTop;if(p.scrollTo)return void p.scrollTo({top:v,behavior:"smooth"});p.scrollTop=v}}))}_getNewObserver(){const a={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(u=>this._observerCallback(u),a)}_observerCallback(a){const u=k=>this._targetLinks.get(`#${k.target.id}`),p=k=>{this._previousScrollData.visibleEntryTop=k.target.offsetTop,this._process(u(k))},v=(this._rootElement||document.documentElement).scrollTop,w=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const k of a){if(!k.isIntersecting){this._activeTarget=null,this._clearActiveClass(u(k));continue}const Y=k.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(w&&Y){if(p(k),!v)return}else w||Y||p(k)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const a=$.find(Bc,this._config.target);for(const u of a){if(!u.hash||r(u))continue;const p=$.findOne(decodeURI(u.hash),this._element);i(p)&&(this._targetLinks.set(decodeURI(u.hash),u),this._observableSections.set(u.hash,p))}}_process(a){this._activeTarget!==a&&(this._clearActiveClass(this._config.target),this._activeTarget=a,a.classList.add(Pn),this._activateParents(a),J.trigger(this._element,Lw,{relatedTarget:a}))}_activateParents(a){if(a.classList.contains("dropdown-item"))$.findOne(".dropdown-toggle",a.closest(".dropdown")).classList.add(Pn);else for(const u of $.parents(a,".nav, .list-group"))for(const p of $.prev(u,Dw))p.classList.add(Pn)}_clearActiveClass(a){a.classList.remove(Pn);const u=$.find(`${Bc}.${Pn}`,a);for(const p of u)p.classList.remove(Pn)}static jQueryInterface(a){return this.each(function(){const u=sl.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);u[a]()}})}}J.on(window,Mw,()=>{for(const B of $.find('[data-bs-spy="scroll"]'))sl.getOrCreateInstance(B)}),b(sl);const _I=".bs.tab",jw=`hide${_I}`,Ow=`hidden${_I}`,Pw=`show${_I}`,_w=`shown${_I}`,qw=`click${_I}`,$w=`keydown${_I}`,AX=`load${_I}`,gX="ArrowLeft",Mb="ArrowRight",eX="ArrowUp",Db="ArrowDown",hc="Home",zb="End",qI="active",Tb="fade",bc="show",jb=".dropdown-toggle",Zc=`:not(${jb})`,Ob='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',pc=`.nav-link${Zc}, .list-group-item${Zc}, [role="tab"]${Zc}, ${Ob}`,tX=`.${qI}[data-bs-toggle="tab"], .${qI}[data-bs-toggle="pill"], .${qI}[data-bs-toggle="list"]`;class $I extends mA{constructor(a){super(a),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,$w,u=>this._keydown(u)))}static get NAME(){return"tab"}show(){const a=this._element;if(this._elemIsActive(a))return;const u=this._getActiveElem(),p=u?J.trigger(u,jw,{relatedTarget:a}):null;J.trigger(a,Pw,{relatedTarget:u}).defaultPrevented||p&&p.defaultPrevented||(this._deactivate(u,a),this._activate(a,u))}_activate(a,u){a&&(a.classList.add(qI),this._activate($.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.removeAttribute("tabindex"),a.setAttribute("aria-selected",!0),this._toggleDropDown(a,!0),J.trigger(a,_w,{relatedTarget:u})):a.classList.add(bc)},a,a.classList.contains(Tb)))}_deactivate(a,u){a&&(a.classList.remove(qI),a.blur(),this._deactivate($.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.setAttribute("aria-selected",!1),a.setAttribute("tabindex","-1"),this._toggleDropDown(a,!1),J.trigger(a,Ow,{relatedTarget:u})):a.classList.remove(bc)},a,a.classList.contains(Tb)))}_keydown(a){if(![gX,Mb,eX,Db,hc,zb].includes(a.key))return;a.stopPropagation(),a.preventDefault();const u=this._getChildren().filter(v=>!r(v));let p;if([hc,zb].includes(a.key))p=u[a.key===hc?0:u.length-1];else{const v=[Mb,Db].includes(a.key);p=V(u,a.target,v,!0)}p&&(p.focus({preventScroll:!0}),$I.getOrCreateInstance(p).show())}_getChildren(){return $.find(pc,this._parent)}_getActiveElem(){return this._getChildren().find(a=>this._elemIsActive(a))||null}_setInitialAttributes(a,u){this._setAttributeIfNotExists(a,"role","tablist");for(const p of u)this._setInitialAttributesOnChild(p)}_setInitialAttributesOnChild(a){a=this._getInnerElement(a);const u=this._elemIsActive(a),p=this._getOuterElement(a);a.setAttribute("aria-selected",u),p!==a&&this._setAttributeIfNotExists(p,"role","presentation"),u||a.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(a,"role","tab"),this._setInitialAttributesOnTargetPanel(a)}_setInitialAttributesOnTargetPanel(a){const u=$.getElementFromSelector(a);u&&(this._setAttributeIfNotExists(u,"role","tabpanel"),a.id&&this._setAttributeIfNotExists(u,"aria-labelledby",`${a.id}`))}_toggleDropDown(a,u){const p=this._getOuterElement(a);if(!p.classList.contains("dropdown"))return;const v=(w,k)=>{const Y=$.findOne(w,p);Y&&Y.classList.toggle(k,u)};v(jb,qI),v(".dropdown-menu",bc),p.setAttribute("aria-expanded",u)}_setAttributeIfNotExists(a,u,p){a.hasAttribute(u)||a.setAttribute(u,p)}_elemIsActive(a){return a.classList.contains(qI)}_getInnerElement(a){return a.matches(pc)?a:$.findOne(pc,a)}_getOuterElement(a){return a.closest(".nav-item, .list-group-item")||a}static jQueryInterface(a){return this.each(function(){const u=$I.getOrCreateInstance(this);if(typeof a=="string"){if(u[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);u[a]()}})}}J.on(document,qw,Ob,function(B){["A","AREA"].includes(this.tagName)&&B.preventDefault(),r(this)||$I.getOrCreateInstance(this).show()}),J.on(window,AX,()=>{for(const B of $.find(tX))$I.getOrCreateInstance(B)}),b($I);const Pt=".bs.toast",IX=`mouseover${Pt}`,nX=`mouseout${Pt}`,CX=`focusin${Pt}`,lX=`focusout${Pt}`,sX=`hide${Pt}`,iX=`hidden${Pt}`,oX=`show${Pt}`,aX=`shown${Pt}`,Pb="hide",ai="show",ri="showing",rX={animation:"boolean",autohide:"boolean",delay:"number"},cX={animation:!0,autohide:!0,delay:5e3};class il extends mA{constructor(a,u){super(a,u),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return cX}static get DefaultType(){return rX}static get NAME(){return"toast"}show(){J.trigger(this._element,oX).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Pb),h(this._element),this._element.classList.add(ai,ri),this._queueCallback(()=>{this._element.classList.remove(ri),J.trigger(this._element,aX),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(J.trigger(this._element,sX).defaultPrevented||(this._element.classList.add(ri),this._queueCallback(()=>{this._element.classList.add(Pb),this._element.classList.remove(ri,ai),J.trigger(this._element,iX)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ai),super.dispose()}isShown(){return this._element.classList.contains(ai)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(a,u){switch(a.type){case"mouseover":case"mouseout":this._hasMouseInteraction=u;break;case"focusin":case"focusout":this._hasKeyboardInteraction=u}if(u)return void this._clearTimeout();const p=a.relatedTarget;this._element===p||this._element.contains(p)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,IX,a=>this._onInteraction(a,!0)),J.on(this._element,nX,a=>this._onInteraction(a,!1)),J.on(this._element,CX,a=>this._onInteraction(a,!0)),J.on(this._element,lX,a=>this._onInteraction(a,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(a){return this.each(function(){const u=il.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0)throw new TypeError(`No method named "${a}"`);u[a](this)}})}}return At(il),b(il),{Alert:Ue,Button:RA,Carousel:Nn,Collapse:xn,Dropdown:Ee,Modal:OI,Offcanvas:ft,Popover:oi,ScrollSpy:sl,Tab:$I,Toast:il,Tooltip:PI}})})(c9);function d9({}){const A=hg(),[g,e]=f.useState(null),[t,I]=f.useState(null),[n,C]=f.useState(null),[l,s]=f.useState(null),[i,r]=f.useState([]),[c,d]=f.useState({}),h=new Date,Z=new Date(h);Z.setDate(h.getDate()+7);const y=S=>S.toISOString().split("T")[0];return f.useEffect(()=>{const S=(m,G)=>{if(!m||!G)return!1;const[V,W]=G.split("-").map(H=>H.trim()),R=new Date(`1970-01-01T${m}:00`),X=new Date(`1970-01-01T${V}:00`),F=new Date(`1970-01-01T${W}:00`);return R>=X&&R<=F},b=r9.filter(m=>(!g||m.building===g)&&(!t||m.floor===t)&&(!n||S(n,m.time)));r(b)},[g,t,n]),f.useEffect(()=>{(()=>{!l||!n||d(b=>{const m={...b};return m[l]||(m[l]={}),m[l][n]||(m[l][n]={}),i.forEach(G=>{const V=`${G.building}-${G.floor}`;if(!m[l][n][V]){const W=Math.floor(Math.random()*100)+1,[R,X]=G.slots.split("/").map(Number),F=Math.round((100-W)/100*X);m[l][n][V]={percent:W,slots:`${F}/${X}`}}}),m})})()},[i,l,n]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{className:"box2",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo2-image"})}),o.jsxs("div",{className:"main-content3",children:[o.jsxs("h2",{className:"text-center",children:["ค้นหาลานจอดรถ ",o.jsx(jg,{className:"iconPark",size:31})]}),o.jsxs("div",{className:"boxback",children:[o.jsx("div",{className:"photoparking",children:o.jsx("img",{src:"parking.png",alt:"",className:"parking"})}),o.jsxs("div",{className:"dropdown",children:[o.jsx("div",{className:"search-section",children:o.jsx("input",{type:"date",className:"form-control custom-date-picker",placeholder:"วันที่",min:y(h),max:y(Z),value:l||"",onChange:S=>s(S.target.value)})}),o.jsx("input",{type:"time",className:"form-control custom-date-pickerGT2",value:n||"",onChange:S=>C(S.target.value)})]}),o.jsxs("div",{className:"dropdown2",children:[o.jsxs("button",{className:"btn btn-light dropdown-toggle ",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",style:{marginRight:"20px",marginLeft:"4px",width:"150px"},children:[o.jsx("i",{className:"bi bi-building",style:{marginRight:"10px",color:"#2e2e2e"}})," ",g||"อาคาร"]}),o.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>e(null),children:"อาคาร"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>e("อาคาร A"),children:"อาคาร A"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>e("อาคาร B"),children:"อาคาร B"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>e("อาคาร C"),children:"อาคาร C"})})]}),o.jsxs("button",{className:"btn btn-light dropdown-toggle",type:"button",id:"dropdownFloor","data-bs-toggle":"dropdown","aria-expanded":"false",style:{marginRight:"4px",width:"150px"},children:[o.jsx("i",{className:"bi bi-p-square",style:{marginRight:"8px",color:"#2e2e2e",marginTop:"2px"}}),t||"เลือกลาน"]}),o.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"dropdownFloor",children:[o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>I(null),children:"เลือกลาน"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>I("ลาน 1"),children:"ลาน 1"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>I("ลาน 2"),children:"ลาน 2"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>I("ลาน 3"),children:"ลาน 3"})})]})]}),o.jsx("div",{className:"parking-list",children:i.map(S=>{var b,m;return o.jsxs("div",{className:"parking-item",children:[o.jsx("img",{src:S.image,alt:S.building,className:"parking-image"}),o.jsxs("div",{className:"parking-info",children:[o.jsxs("h5",{children:[S.building," ",S.floor]}),o.jsxs("p",{children:["สถานะลานจอด:"," ",c[l]&&c[l][n]&&c[l][n][`${S.building}-${S.floor}`]?c[l][n][`${S.building}-${S.floor}`].slots:S.slots]}),o.jsxs("p",{children:["โอกาสที่จะว่าง:"," ",c[l]&&c[l][n]&&c[l][n][`${S.building}-${S.floor}`]?`${c[l][n][`${S.building}-${S.floor}`].percent}%`:"--%"]}),o.jsxs("p",{children:["เวลา: ",S.time," น."]})]}),o.jsx("div",{className:"boxstatus2",children:o.jsx("button",{className:`boxstatus ${c[l]&&c[l][n]&&((b=c[l][n][`${S.building}-${S.floor}`])==null?void 0:b.percent)>50?"status-available":"status-occupied"}`,disabled:!0,children:c[l]&&c[l][n]&&((m=c[l][n][`${S.building}-${S.floor}`])==null?void 0:m.percent)>50?"ว่าง":"ไม่ว่าง"})})]},S.id)})})]})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})}function u9(A){return $C({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M140,80v41.21l34.17,20.5a12,12,0,1,1-12.34,20.58l-40-24A12,12,0,0,1,116,128V80a12,12,0,0,1,24,0ZM128,28A99.38,99.38,0,0,0,57.24,57.34c-4.69,4.74-9,9.37-13.24,14V64a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H72a12,12,0,0,0,0-24H57.77C63,86,68.37,80.22,74.26,74.26a76,76,0,1,1,1.58,109,12,12,0,0,0-16.48,17.46A100,100,0,1,0,128,28Z"},child:[]}]})(A)}const m9=[{id:1,date:"2024-11-26",building:"อาคาร A",floor:"ชั้น 1",time:"13:00-18:00 น.",carDetails:{date:"2024-11-26",parklot:"อาคาร A ชั้น 1",plate:"79456",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"26/11/2024",model:"TOYOTA",duration:"5 ชั่วโมง"},image:"cars1.png"},{id:2,date:"2024-11-25",building:"อาคาร A",floor:"ชั้น 2",time:"09:00-12:00 น.",carDetails:{date:"2024-11-25",parklot:"อาคาร A ชั้น 2",plate:"57426",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"25/11/2024",model:"TOYOTA",duration:"3 ชั่วโมง"},image:"cars1.png"},{id:3,date:"2024-11-24",building:"อาคาร C",floor:"ชั้น 3",time:"12:00-15:00 น.",carDetails:{date:"2024-11-24",parklot:"อาคาร C ชั้น 3",plate:"89356",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"24/11/2024",model:"TOYOTA",duration:"3 ชั่วโมง"},image:"cars1.png"},{id:4,date:"2024-11-15",building:"อาคาร B",floor:"ชั้น 1",time:"12:00-18:00 น.",carDetails:{date:"2024-11-15",parklot:"อาคาร B ชั้น 1",plate:"79126",carNumber:["5 รถ 7859","กรุงเทพมหานคร"],insuranceDate:"15/11/2024",model:"Ford",duration:"6 ชั่วโมง"},image:"cars4.png"},{id:5,date:"2024-11-11",building:"อาคาร B",floor:"ชั้น 2",time:"11:00-18:00 น.",carDetails:{date:"2024-11-11",parklot:"อาคาร B ชั้น 2",plate:"64578",carNumber:["5 รถ 7859","กรุงเทพมหานคร"],insuranceDate:"11/11/2024",model:"Ford",duration:"7 ชั่วโมง"},image:"cars4.png"},{id:6,date:"2024-11-08",building:"อาคาร A",floor:"ชั้น 1",time:"13:00-18:00 น.",carDetails:{date:"2024-11-08",parklot:"อาคาร A ชั้น 1",plate:"57378",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"8/11/2024",model:"TOYOTA",duration:"5 ชั่วโมง"},image:"cars1.png"},{id:7,date:"2024-10-31",building:"อาคาร A",floor:"ชั้น 3",time:"13:00-18:00 น.",carDetails:{date:"2024-10-31",parklot:"อาคาร A ชั้น 3",plate:"64786",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"31/10/2024",model:"TOYOTA",duration:"5 ชั่วโมง"},image:"cars1.png"},{id:8,date:"2024-10-28",building:"อาคาร A",floor:"ชั้น 2",time:"09:00-15:00 น.",carDetails:{date:"2024-10-28",parklot:"อาคาร A ชั้น 2",plate:"83559",carNumber:["56 รถ 9524","กรุงเทพมหานคร"],insuranceDate:"28/10/2024",model:"Mazda",duration:"6 ชั่วโมง"},image:"cars5.png"},{id:9,date:"2024-10-25",building:"อาคาร C",floor:"ชั้น 3",time:"12:00-15:00 น.",carDetails:{date:"2024-10-25",parklot:"อาคาร C ชั้น 3",plate:"45347",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"25/10/2024",model:"TOYOTA",duration:"3 ชั่วโมง"},image:"cars1.png"},{id:10,date:"2024-10-24",building:"อาคาร B",floor:"ชั้น 1",time:"12:00-18:00 น.",carDetails:{date:"2024-10-24",parklot:"อาคาร B ชั้น 1",plate:"35789",carNumber:["5 รถ 7859","กรุงเทพมหานคร"],insuranceDate:"24/10/2024",model:"Ford",duration:"6 ชั่วโมง"},image:"cars4.png"},{id:11,date:"2024-10-22",building:"อาคาร C",floor:"ชั้น 1",time:"21:00-18:00 น.",carDetails:{date:"2024-10-22",parklot:"อาคาร C ชั้น 1",plate:"45637",carNumber:["5 รถ 7859","กรุงเทพมหานคร"],insuranceDate:"22/10/2024",model:"Ford",duration:"3 ชั่วโมง"},image:"cars4.png"},{id:12,date:"2024-10-20",building:"อาคาร A",floor:"ชั้น 1",time:"13:00-18:00 น.",carDetails:{date:"2024-10-20",parklot:"อาคาร A ชั้น 1",plate:"12347",carNumber:["9 รถ 9999","กรุงเทพมหานคร"],insuranceDate:"20/10/2024",model:"TOYOTA",duration:"5 ชั่วโมง"},image:"cars1.png"}];function B9({}){const A=hg(),[g,e]=f.useState(null),[t,I]=f.useState(""),[n,C]=f.useState(null);function l(i){const r=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],c=new Date(i),d=c.getDate(),h=r[c.getMonth()],Z=c.getFullYear()+543;return`${d} ${h} ${Z}`}const s=m9.filter(i=>{const r=new Date(i.date);if(t){const c=new Date(t);return r.getFullYear()===c.getFullYear()&&r.getMonth()===c.getMonth()&&r.getDate()===c.getDate()}if(g==="สัปดาห์นี้"){const c=new Date,d=new Date(c);d.setDate(c.getDate()-c.getDay());const h=new Date(d);return h.setDate(d.getDate()+6),r>=d&&r<=h}if(g==="เดือนนี้"){const c=new Date,d=new Date(c.getFullYear(),c.getMonth(),1),h=new Date(c.getFullYear(),c.getMonth()+1,0);return r>=d&&r<=h}return!0});return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{children:o.jsx("div",{className:"box2",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo2-image"})})}),o.jsxs("div",{className:"main-content3",children:[o.jsxs("h2",{className:"text-center",children:["ประวัติการจอด"," ",o.jsx(u9,{className:"iconClock",size:43})]}),o.jsxs("div",{className:"boxrecord",children:[o.jsxs("div",{className:"dropdownrecord",children:[o.jsx("div",{className:"record-section1",children:o.jsx("input",{type:"date",className:"form-control custom-date-picker1",value:t,onChange:i=>{I(i.target.value),e(null)}})}),o.jsx("button",{className:"btn btn-light dropdown-toggle ",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",style:{marginLeft:"4px",width:"90px",float:"right",marginTop:"-35px",marginRight:"15px"},children:g||"ล่าสุด"}),o.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>{e(null),I("")},children:"ล่าสุด"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>{e("สัปดาห์นี้"),I("")},children:"สัปดาห์นี้"})}),o.jsx("li",{children:o.jsx("button",{className:"dropdown-item",onClick:()=>{e("เดือนนี้"),I("")},children:"เดือนนี้"})})]})]}),o.jsx("div",{className:"record-list",children:s.length>0?s.map(i=>o.jsxs("div",{className:`record-item ${n===i.id?"expanded":""}`,children:[o.jsx("div",{className:"record-image-container",children:o.jsx("img",{src:i.image,alt:"car",className:"record-car-image"})}),o.jsxs("div",{className:`record-summary ${n===i.id?"hidden":""}`,children:[o.jsxs("div",{className:"record-details",children:[o.jsx("p",{className:"record-date",children:l(i.date)}),o.jsx("p",{className:"record-building",children:i.building}),o.jsx("p",{className:"record-floor",children:i.floor}),o.jsxs("p",{className:"record-time",children:["เวลา : ",i.time]})]}),o.jsxs("button",{className:"content-detalis1",onClick:()=>C(n===i.id?null:i.id),children:[o.jsx("span",{children:"รายละเอียดเพิ่มเติม"})," ",o.jsx(qH,{className:"icon",size:20,style:{marginTop:"-22px",marginLeft:"110px"}})]})]}),n===i.id&&o.jsxs("div",{className:"record-expanded",children:[o.jsx("div",{className:"daterecord",children:o.jsx("p",{className:"record-date2",children:l(i.carDetails.date)})}),o.jsxs("div",{className:"record-detail-item",children:[o.jsx("span",{children:"สถานที่จอดรถ : "}),o.jsx("span",{children:i.carDetails.parklot})]}),o.jsxs("div",{className:"record-detail-item",children:[o.jsx("span",{children:"เลขที่บัตร : "}),o.jsx("span",{children:i.carDetails.plate})]}),o.jsxs("div",{className:"record-detail-item",children:[o.jsx("span",{children:"ทะเบียนรถ : "}),o.jsxs("span",{style:{textAlign:"right"},children:[" ",i.carDetails.carNumber.map((r,c)=>o.jsxs(rg.Fragment,{children:[r,o.jsx("br",{})]},c))]})]}),o.jsxs("div",{className:"record-detail-item",children:[o.jsx("span",{children:"วันที่-เวลาเข้า/ออก :"}),o.jsx("span",{children:i.carDetails.insuranceDate})]}),o.jsxs("div",{className:"record-detail-item",children:[o.jsx("span",{children:"ยี่ห้อรถ :"}),o.jsxs("span",{children:[" ",i.carDetails.model]})]}),o.jsxs("div",{className:"record-detail-item",children:[o.jsx("span",{children:"ระยะเวลา : "}),o.jsx("span",{children:i.carDetails.duration})]}),o.jsxs("button",{className:"content-shorten",onClick:()=>C(null),children:[o.jsx("span",{children:"ย่อหน้า"})," ",o.jsx($H,{className:"icon",size:20,style:{marginTop:"-22px",marginLeft:"50px"}})]})]})]},i.id)):o.jsx("p",{children:"ไม่พบข้อมูล"})})]})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})}function h9({onLogout:A}){const g=hg(),e=Ug(),[t,I]=f.useState(""),[n,C]=f.useState({name:"",phone:"",status:"",carRegistration:""});f.useEffect(()=>{const c=localStorage.getItem("currentUser");c&&C(JSON.parse(c));const d=localStorage.getItem("userRole");d&&I(d)},[g.state]);const l=()=>{e("/profile/edit-member")},s=()=>{e("/profile/appointment")},i=()=>{e("/profile/report")},r=()=>{e("/profile/payment")};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box2",children:o.jsx("img",{src:"./Metthier Master Logo.png",alt:"My Logo",className:"Logo2-image"})}),o.jsxs("div",{className:"main-content2",children:[o.jsx("div",{className:"userprofilehome2",children:o.jsxs("div",{className:"datahomeprofile2",children:[o.jsx("p",{className:"profileinfoname2",style:{fontWeight:"bold"},children:n.name||"No Name"}),o.jsxs("p",{children:["Status : ",o.jsx("span",{children:n.status||"Unknown"})]}),o.jsxs("p",{children:["Phone : ",o.jsx("span",{children:n.phone||"No Phone"})]}),o.jsxs("p",{children:["ทะเบียนรถ : ",o.jsx("span",{children:n.carRegistration||"No Car"})]}),o.jsx("div",{className:"photohomeprofile2",children:o.jsx("img",{src:"./Profile1.png",alt:"My Logo",className:"profile2"})})]})}),o.jsx("div",{className:"button-container-center",children:o.jsxs("div",{className:"content-buttons",children:[o.jsx(Vg,{variant:"light",className:"content-edit",style:{fontWeight:"bold",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},onClick:l,children:"แก้ไขข้อมูลส่วนตัว"}),t==="Visitor"&&o.jsx(Vg,{variant:"light",className:"content-Payment",style:{fontWeight:"bold",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},onClick:r,children:"ชำระเงิน"}),t==="Member"&&o.jsx(Vg,{variant:"light",className:"content-Appointment",style:{fontWeight:"bold",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},onClick:s,children:"นัดหมายการจอด"}),o.jsx(Vg,{variant:"light",className:"content-Report",style:{fontWeight:"bold",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},onClick:i,children:"แจ้งปัญหา"})]})}),o.jsx(Vg,{variant:"light",className:"content-Logout1",onClick:A,children:"ออกจากระบบ"}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${g.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${g.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${g.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${g.pathname==="/profile"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}const b9="/SmartparkingV2/Profile1.png";function Z9({}){const A=hg(),g=Ug(),[e,t]=f.useState({name:"",email:"",phone:"",carRegistration:""}),[I,n]=f.useState(!1);f.useEffect(()=>{const r=localStorage.getItem("currentUser");r&&t(JSON.parse(r))},[]);const C=r=>{const{name:c,value:d}=r.target;t(h=>({...h,[c]:d||""}))},l=r=>{r.preventDefault(),localStorage.setItem("currentUser",JSON.stringify(e)),n(!1),g("/profile")},s=()=>{n(!I)},i=()=>{g(-1)};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box2",children:o.jsx("img",{src:qe,alt:"My Logo",className:"Logo2-image"})}),o.jsxs("div",{className:"main-content2",children:[o.jsx("div",{className:"profile-form-container",children:o.jsx("div",{className:"purple-box",children:o.jsx("div",{className:"white-box",children:o.jsxs("div",{className:"purple-box-inner",children:[o.jsx("div",{className:"profile-header",children:o.jsx("img",{src:b9,alt:"Profile",className:"profile-image"})}),o.jsx("h3",{style:{color:"#FFFFFF"},children:e.name||"iice"}),o.jsx("div",{className:"profile-form",children:o.jsxs("form",{onSubmit:l,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"name",children:"ชื่อที่แสดง"}),o.jsx("div",{className:"input-group",children:o.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:C,disabled:!I,className:"form-control",placeholder:"กรุณากรอกชื่อ"})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email"}),o.jsx("div",{className:"input-group",children:o.jsx("input",{type:"email",id:"email",name:"email",value:e.email||"",onChange:C,disabled:!I,className:"form-control",placeholder:"กรุณากรอกอีเมล์"})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"phone"}),o.jsx("div",{className:"input-group",children:o.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone||"",onChange:C,disabled:!I,className:"form-control",placeholder:"กรุณากรอกเบอร์โทร"})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"carRegistration"}),o.jsx("div",{className:"input-group",children:o.jsx("input",{type:"text",id:"carRegistration",name:"carRegistration",value:e.carRegistration||"",onChange:C,disabled:!I,className:"form-control",placeholder:"กรุณากรอกเลขทะเบียนรถ"})})]}),o.jsxs("div",{className:"form-buttons",children:[!I&&o.jsxs("button",{type:"button",className:"ButtonBack",onClick:i,children:[o.jsx("i",{className:"fa fa-arrow-left icon"})," ย้อนกลับ"]}),o.jsxs("button",{type:"button",className:"button-edit",onClick:s,children:[o.jsx("i",{className:I?"fa fa-times icon":"fa fa-pencil icon"}),I?"ยกเลิก":"แก้ไขข้อมูล"]}),I&&o.jsxs("button",{type:"submit",className:"button-save",children:[o.jsx("i",{className:"fa fa-save icon"})," บันทึก"]})]})]})})]})})})}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/edit-member"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}const bm="/SmartparkingV2/assets/prompt-pay-logo-CTuy0A3V.png",oR="/SmartparkingV2/assets/true-D1Wxj68U.png",js="/SmartparkingV2/Undo.png";function p9({}){const A=hg(),g=Ug(),[e,t]=f.useState(0),[I,n]=f.useState(0),[C,l]=f.useState(0),[s,i]=f.useState(()=>{const r=sessionStorage.getItem("total");return r?parseInt(r,10):0});return f.useEffect(()=>{const r=sessionStorage.getItem("paymentData");if(r){const{penaltyFee:c,serviceFee:d,discount:h,total:Z}=JSON.parse(r);n(c),t(d),l(h),i(Z)}else{const S=10+Math.floor(Math.random()*11),b=40+Math.floor(Math.random()*21),m=Math.max(0,Math.min(80-(S+b),Math.floor(Math.random()*81))),G=S+b-m;n(S),t(b),l(m),i(G);const V={penaltyFee:S,serviceFee:b,discount:m,total:G};sessionStorage.setItem("paymentData",JSON.stringify(V))}},[]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content",children:[o.jsxs("div",{className:"receipt-container",children:[o.jsx("div",{className:"receipt-header",children:o.jsx("p",{children:"อาคารที่เข้าจอด : อาคาร A ลาน 1"})}),o.jsxs("div",{className:"receipt-details",children:[o.jsx("p",{className:"headpay",children:"ใบเสร็จชำระเงิน"}),o.jsxs("p",{children:["ค่าบริการ : ",o.jsxs("span",{children:[e," บาท"]})]}),o.jsxs("p",{children:["ค่าปรับ : ",o.jsxs("span",{children:[I," บาท"]})]}),o.jsxs("p",{children:["ค่าส่วนลด : ",o.jsxs("span",{children:[C," บาท"]})]}),o.jsx("div",{className:"boxtotal",children:o.jsxs("p",{className:"total",children:["ยอดชำระทั้งหมด : ",o.jsxs("span",{children:[s," บาท"]})]})}),o.jsxs("p",{children:["สถานที่จอดรถ : ",o.jsx("span",{children:"อาคาร A ลาน 1 "})]}),o.jsxs("p",{children:["เลขที่บัตร : ",o.jsx("span",{children:"79456"})]}),o.jsxs("p",{children:["วันที่/เวลาเข้า : ",o.jsx("span",{children:"26/11/2024"})]}),o.jsxs("p",{children:["วันที่/เวลาปัจจุบัน : ",o.jsx("span",{children:"26/11/2024"})]}),o.jsxs("p",{children:["จำนวนชั่วโมง : ",o.jsx("span",{children:"ตลอดวัน"})]})]}),o.jsxs("div",{className:"payment-methods",children:[o.jsx("h2",{children:"วิธีการชำระเงิน"}),o.jsx(j,{to:"/profile/payment/promptpay",state:{total:s},className:"link-no-underline",children:o.jsxs("button",{className:"payment-btn promptpay",children:[o.jsx("img",{src:bm,alt:"Logo1",className:"btn-logo"})," ","PromptPay"]})}),o.jsx(j,{to:"/profile/payment/true",state:{total:s},className:"link-no-underline",children:o.jsxs("button",{className:"payment-btn truemoney",children:[o.jsx("img",{src:oR,alt:"Logo1",className:"btn-logo"})," TrueMoney"]})})]})]}),o.jsx("div",{className:"form-buttonsP",children:o.jsxs(Vg,{className:"btn2",onClick:()=>g(-1),children:[o.jsx("img",{src:js,alt:"Back Icon",className:"icon33"}),"ย้อนกลับ"]})}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/payment"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}const aR="/SmartparkingV2/send.png";function G9({}){const A=Ug(),g=hg(),[e,t]=f.useState(!1),I=()=>{A(-1)},n=()=>{t(!0),setTimeout(()=>A("/profile"),2e3)};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box2",children:o.jsx("img",{src:qe,alt:"My Logo",className:"Logo2-image"})}),o.jsxs("div",{className:"main-content2",children:[o.jsxs("div",{className:"appointment-form",children:[o.jsx("div",{className:"headfrom1",children:"นัดหมายการจอด"}),o.jsxs("form",{children:[o.jsxs("div",{className:"form-row",children:[o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"date",className:"form-control",placeholder:"วันที่"})}),o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"time",className:"form-control",placeholder:"เวลา"})})]}),o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"text",className:"form-control",placeholder:"ชื่อผู้ทำการนัด"})}),o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"text",className:"form-control",placeholder:"ชื่อผู้ถูกเรียกนัด"})}),o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"tel",className:"form-control",placeholder:"เบอร์โทรติดต่อผู้ทำการนัด"})}),o.jsx("div",{className:"form-group",children:o.jsx("input",{type:"tel",className:"form-control",placeholder:"เบอร์โทรติดต่อผู้ถูกนัด"})}),o.jsxs("div",{className:"form-buttons2",children:[o.jsxs(Vg,{className:"btn2",onClick:I,children:[o.jsx("img",{src:js,alt:"Back Icon",className:"icon"}),"ย้อนกลับ"]}),o.jsxs(Vg,{className:"btn3",onClick:n,children:[o.jsx("img",{src:aR,alt:"Send Icon",className:"icon"}),"ส่ง"]})]})]})]}),e&&o.jsx("div",{className:"success-message",children:"ได้รับการอนุมัติ"}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${g.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${g.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${g.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${g.pathname==="/profile/appointment"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}function y9(){const A=hg(),g=Ug(),[e,t]=f.useState(!1),I=()=>{t(!0),setTimeout(()=>g("/profile"),2e3)};return o.jsxs("div",{style:{minHeight:"844px"},children:[o.jsx("div",{className:"box2",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})}),o.jsxs("div",{className:"main-content",children:[o.jsxs("div",{className:"report-content",children:[o.jsx("h2",{className:"report-title",children:"แจ้งปัญหา"}),o.jsxs(Fg,{children:[o.jsxs(Fg.Group,{controlId:"problemType",children:[o.jsx(Fg.Label,{className:"custom-label",children:"ปัญหาที่พบ"}),o.jsx(Fg.Control,{as:"textarea",rows:2,placeholder:"กรอกปัญหาที่พบ"})]}),o.jsxs(Fg.Group,{controlId:"uploadImage",children:[o.jsx(Fg.Label,{className:"custom-label",children:"แนบรูปภาพ"}),o.jsx(Fg.Control,{type:"file"})]}),o.jsxs(Fg.Group,{controlId:"additionalDescription",children:[o.jsx(Fg.Label,{className:"custom-label",children:"อธิบายเพิ่มเติม"}),o.jsx(Fg.Control,{as:"textarea",rows:3,placeholder:"อธิบายเพิ่มเติม"})]}),o.jsxs(Fg.Group,{controlId:"contactPhone",children:[o.jsx(Fg.Label,{className:"custom-label",children:"เบอร์โทร"}),o.jsx(Fg.Control,{type:"tel",placeholder:"เบอร์โทร"})]}),o.jsxs(Fg.Group,{controlId:"contactEmail",children:[o.jsx(Fg.Label,{className:"custom-label",children:"อีเมล"}),o.jsx(Fg.Control,{type:"email",placeholder:"อีเมล"})]}),o.jsxs("div",{className:"form-buttons33",children:[o.jsxs(Vg,{className:"btn2",onClick:()=>g(-1),children:[o.jsx("img",{src:js,alt:"Back Icon",className:"icon33"}),"ย้อนกลับ"]}),o.jsxs(Vg,{className:"btn3",onClick:I,children:[o.jsx("img",{src:aR,alt:"Send Icon",className:"icon33"}),"ส่ง"]})]})]})]}),e&&o.jsx("div",{className:"success-message",children:"คุณได้ส่งคำแจ้งปัญหาแล้ว"}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/report"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zm=function(A,g){return Zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var I in t)Object.prototype.hasOwnProperty.call(t,I)&&(e[I]=t[I])},Zm(A,g)};function $e(A,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");Zm(A,g);function e(){this.constructor=A}A.prototype=g===null?Object.create(g):(e.prototype=g.prototype,new e)}var pm=function(){return pm=Object.assign||function(g){for(var e,t=1,I=arguments.length;t<I;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(g[n]=e[n])}return g},pm.apply(this,arguments)};function Dg(A,g,e,t){function I(n){return n instanceof e?n:new e(function(C){C(n)})}return new(e||(e=Promise))(function(n,C){function l(r){try{i(t.next(r))}catch(c){C(c)}}function s(r){try{i(t.throw(r))}catch(c){C(c)}}function i(r){r.done?n(r.value):I(r.value).then(l,s)}i((t=t.apply(A,[])).next())})}function kg(A,g){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},t,I,n,C;return C={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function l(i){return function(r){return s([i,r])}}function s(i){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,I&&(n=i[0]&2?I.return:i[0]?I.throw||((n=I.return)&&n.call(I),0):I.next)&&!(n=n.call(I,i[1])).done)return n;switch(I=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,I=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=g.call(A,e)}catch(r){i=[6,r],I=0}finally{t=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function _i(A,g,e){if(arguments.length===2)for(var t=0,I=g.length,n;t<I;t++)(n||!(t in g))&&(n||(n=Array.prototype.slice.call(g,0,t)),n[t]=g[t]);return A.concat(n||g)}var Mt=function(){function A(g,e,t,I){this.left=g,this.top=e,this.width=t,this.height=I}return A.prototype.add=function(g,e,t,I){return new A(this.left+g,this.top+e,this.width+t,this.height+I)},A.fromClientRect=function(g,e){return new A(e.left+g.windowBounds.left,e.top+g.windowBounds.top,e.width,e.height)},A.fromDOMRectList=function(g,e){var t=Array.from(e).find(function(I){return I.width!==0});return t?new A(t.left+g.windowBounds.left,t.top+g.windowBounds.top,t.width,t.height):A.EMPTY},A.EMPTY=new A(0,0,0,0),A}(),wr=function(A,g){return Mt.fromClientRect(A,g.getBoundingClientRect())},f9=function(A){var g=A.body,e=A.documentElement;if(!g||!e)throw new Error("Unable to get document size");var t=Math.max(Math.max(g.scrollWidth,e.scrollWidth),Math.max(g.offsetWidth,e.offsetWidth),Math.max(g.clientWidth,e.clientWidth)),I=Math.max(Math.max(g.scrollHeight,e.scrollHeight),Math.max(g.offsetHeight,e.offsetHeight),Math.max(g.clientHeight,e.clientHeight));return new Mt(0,0,t,I)},Xr=function(A){for(var g=[],e=0,t=A.length;e<t;){var I=A.charCodeAt(e++);if(I>=55296&&I<=56319&&e<t){var n=A.charCodeAt(e++);(n&64512)===56320?g.push(((I&1023)<<10)+(n&1023)+65536):(g.push(I),e--)}else g.push(I)}return g},ng=function(){for(var A=[],g=0;g<arguments.length;g++)A[g]=arguments[g];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var e=A.length;if(!e)return"";for(var t=[],I=-1,n="";++I<e;){var C=A[I];C<=65535?t.push(C):(C-=65536,t.push((C>>10)+55296,C%1024+56320)),(I+1===e||t.length>16384)&&(n+=String.fromCharCode.apply(String,t),t.length=0)}return n},XG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qi=0;qi<XG.length;qi++)S9[XG.charCodeAt(qi)]=qi;var JG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $i=0;$i<JG.length;$i++)Hl[JG.charCodeAt($i)]=$i;var V9=function(A){var g=A.length*.75,e=A.length,t,I=0,n,C,l,s;A[A.length-1]==="="&&(g--,A[A.length-2]==="="&&g--);var i=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(g):new Array(g),r=Array.isArray(i)?i:new Uint8Array(i);for(t=0;t<e;t+=4)n=Hl[A.charCodeAt(t)],C=Hl[A.charCodeAt(t+1)],l=Hl[A.charCodeAt(t+2)],s=Hl[A.charCodeAt(t+3)],r[I++]=n<<2|C>>4,r[I++]=(C&15)<<4|l>>2,r[I++]=(l&3)<<6|s&63;return i},W9=function(A){for(var g=A.length,e=[],t=0;t<g;t+=2)e.push(A[t+1]<<8|A[t]);return e},R9=function(A){for(var g=A.length,e=[],t=0;t<g;t+=4)e.push(A[t+3]<<24|A[t+2]<<16|A[t+1]<<8|A[t]);return e},fn=5,Wh=11,Gd=2,v9=Wh-fn,rR=65536>>fn,w9=1<<fn,yd=w9-1,X9=1024>>fn,J9=rR+X9,F9=J9,k9=32,H9=F9+k9,Y9=65536>>Wh,Q9=1<<v9,K9=Q9-1,FG=function(A,g,e){return A.slice?A.slice(g,e):new Uint16Array(Array.prototype.slice.call(A,g,e))},N9=function(A,g,e){return A.slice?A.slice(g,e):new Uint32Array(Array.prototype.slice.call(A,g,e))},U9=function(A,g){var e=V9(A),t=Array.isArray(e)?R9(e):new Uint32Array(e),I=Array.isArray(e)?W9(e):new Uint16Array(e),n=24,C=FG(I,n/2,t[4]/2),l=t[5]===2?FG(I,(n+t[4])/2):N9(t,Math.ceil((n+t[4])/4));return new x9(t[0],t[1],t[2],t[3],C,l)},x9=function(){function A(g,e,t,I,n,C){this.initialValue=g,this.errorValue=e,this.highStart=t,this.highValueIndex=I,this.index=n,this.data=C}return A.prototype.get=function(g){var e;if(g>=0){if(g<55296||g>56319&&g<=65535)return e=this.index[g>>fn],e=(e<<Gd)+(g&yd),this.data[e];if(g<=65535)return e=this.index[rR+(g-55296>>fn)],e=(e<<Gd)+(g&yd),this.data[e];if(g<this.highStart)return e=H9-Y9+(g>>Wh),e=this.index[e],e+=g>>fn&K9,e=this.index[e],e=(e<<Gd)+(g&yd),this.data[e];if(g<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),kG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ao=0;Ao<kG.length;Ao++)E9[kG.charCodeAt(Ao)]=Ao;var L9="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",HG=50,M9=1,cR=2,dR=3,D9=4,z9=5,YG=7,uR=8,QG=9,dI=10,Gm=11,KG=12,ym=13,T9=14,Yl=15,fm=16,go=17,yl=18,j9=19,NG=20,Sm=21,fl=22,fd=23,tC=24,ae=25,Ql=26,Kl=27,IC=28,O9=29,rn=30,P9=31,eo=32,to=33,Vm=34,Wm=35,Rm=36,Hs=37,vm=38,xo=39,Eo=40,Sd=41,mR=42,_9=43,q9=[9001,65288],BR="!",bA="×",Io="÷",wm=U9(L9),St=[rn,Rm],Xm=[M9,cR,dR,z9],hR=[dI,uR],UG=[Kl,Ql],$9=Xm.concat(hR),xG=[vm,xo,Eo,Vm,Wm],Ax=[Yl,ym],gx=function(A,g){g===void 0&&(g="strict");var e=[],t=[],I=[];return A.forEach(function(n,C){var l=wm.get(n);if(l>HG?(I.push(!0),l-=HG):I.push(!1),["normal","auto","loose"].indexOf(g)!==-1&&[8208,8211,12316,12448].indexOf(n)!==-1)return t.push(C),e.push(fm);if(l===D9||l===Gm){if(C===0)return t.push(C),e.push(rn);var s=e[C-1];return $9.indexOf(s)===-1?(t.push(t[C-1]),e.push(s)):(t.push(C),e.push(rn))}if(t.push(C),l===P9)return e.push(g==="strict"?Sm:Hs);if(l===mR||l===O9)return e.push(rn);if(l===_9)return n>=131072&&n<=196605||n>=196608&&n<=262141?e.push(Hs):e.push(rn);e.push(l)}),[t,e,I]},Vd=function(A,g,e,t){var I=t[e];if(Array.isArray(A)?A.indexOf(I)!==-1:A===I)for(var n=e;n<=t.length;){n++;var C=t[n];if(C===g)return!0;if(C!==dI)break}if(I===dI)for(var n=e;n>0;){n--;var l=t[n];if(Array.isArray(A)?A.indexOf(l)!==-1:A===l)for(var s=e;s<=t.length;){s++;var C=t[s];if(C===g)return!0;if(C!==dI)break}if(l!==dI)break}return!1},EG=function(A,g){for(var e=A;e>=0;){var t=g[e];if(t===dI)e--;else return t}return 0},ex=function(A,g,e,t,I){if(e[t]===0)return bA;var n=t-1;if(Array.isArray(I)&&I[n]===!0)return bA;var C=n-1,l=n+1,s=g[n],i=C>=0?g[C]:0,r=g[l];if(s===cR&&r===dR)return bA;if(Xm.indexOf(s)!==-1)return BR;if(Xm.indexOf(r)!==-1||hR.indexOf(r)!==-1)return bA;if(EG(n,g)===uR)return Io;if(wm.get(A[n])===Gm||(s===eo||s===to)&&wm.get(A[l])===Gm||s===YG||r===YG||s===QG||[dI,ym,Yl].indexOf(s)===-1&&r===QG||[go,yl,j9,tC,IC].indexOf(r)!==-1||EG(n,g)===fl||Vd(fd,fl,n,g)||Vd([go,yl],Sm,n,g)||Vd(KG,KG,n,g))return bA;if(s===dI)return Io;if(s===fd||r===fd)return bA;if(r===fm||s===fm)return Io;if([ym,Yl,Sm].indexOf(r)!==-1||s===T9||i===Rm&&Ax.indexOf(s)!==-1||s===IC&&r===Rm||r===NG||St.indexOf(r)!==-1&&s===ae||St.indexOf(s)!==-1&&r===ae||s===Kl&&[Hs,eo,to].indexOf(r)!==-1||[Hs,eo,to].indexOf(s)!==-1&&r===Ql||St.indexOf(s)!==-1&&UG.indexOf(r)!==-1||UG.indexOf(s)!==-1&&St.indexOf(r)!==-1||[Kl,Ql].indexOf(s)!==-1&&(r===ae||[fl,Yl].indexOf(r)!==-1&&g[l+1]===ae)||[fl,Yl].indexOf(s)!==-1&&r===ae||s===ae&&[ae,IC,tC].indexOf(r)!==-1)return bA;if([ae,IC,tC,go,yl].indexOf(r)!==-1)for(var c=n;c>=0;){var d=g[c];if(d===ae)return bA;if([IC,tC].indexOf(d)!==-1)c--;else break}if([Kl,Ql].indexOf(r)!==-1)for(var c=[go,yl].indexOf(s)!==-1?C:n;c>=0;){var d=g[c];if(d===ae)return bA;if([IC,tC].indexOf(d)!==-1)c--;else break}if(vm===s&&[vm,xo,Vm,Wm].indexOf(r)!==-1||[xo,Vm].indexOf(s)!==-1&&[xo,Eo].indexOf(r)!==-1||[Eo,Wm].indexOf(s)!==-1&&r===Eo||xG.indexOf(s)!==-1&&[NG,Ql].indexOf(r)!==-1||xG.indexOf(r)!==-1&&s===Kl||St.indexOf(s)!==-1&&St.indexOf(r)!==-1||s===tC&&St.indexOf(r)!==-1||St.concat(ae).indexOf(s)!==-1&&r===fl&&q9.indexOf(A[l])===-1||St.concat(ae).indexOf(r)!==-1&&s===yl)return bA;if(s===Sd&&r===Sd){for(var h=e[n],Z=1;h>0&&(h--,g[h]===Sd);)Z++;if(Z%2!==0)return bA}return s===eo&&r===to?bA:Io},tx=function(A,g){g||(g={lineBreak:"normal",wordBreak:"normal"});var e=gx(A,g.lineBreak),t=e[0],I=e[1],n=e[2];(g.wordBreak==="break-all"||g.wordBreak==="break-word")&&(I=I.map(function(l){return[ae,rn,mR].indexOf(l)!==-1?Hs:l}));var C=g.wordBreak==="keep-all"?n.map(function(l,s){return l&&A[s]>=19968&&A[s]<=40959}):void 0;return[t,I,C]},Ix=function(){function A(g,e,t,I){this.codePoints=g,this.required=e===BR,this.start=t,this.end=I}return A.prototype.slice=function(){return ng.apply(void 0,this.codePoints.slice(this.start,this.end))},A}(),nx=function(A,g){var e=Xr(A),t=tx(e,g),I=t[0],n=t[1],C=t[2],l=e.length,s=0,i=0;return{next:function(){if(i>=l)return{done:!0,value:null};for(var r=bA;i<l&&(r=ex(e,n,I,++i,C))===bA;);if(r!==bA||i===l){var c=new Ix(e,r,s,i);return s=i,{value:c,done:!1}}return{done:!0,value:null}}}},Cx=1,lx=2,Os=4,LG=8,Ja=10,MG=47,ts=92,sx=9,ix=32,no=34,Sl=61,ox=35,ax=36,rx=37,Co=39,lo=40,Vl=41,cx=95,_g=45,dx=33,ux=60,mx=62,Bx=64,hx=91,bx=93,Zx=61,px=123,so=63,Gx=125,DG=124,yx=126,fx=128,zG=65533,Wd=42,hn=43,Sx=44,Vx=58,Wx=59,Ys=46,Rx=0,vx=8,wx=11,Xx=14,Jx=31,Fx=127,st=-1,bR=48,ZR=97,pR=101,kx=102,Hx=117,Yx=122,GR=65,yR=69,fR=70,Qx=85,Kx=90,Yg=function(A){return A>=bR&&A<=57},Nx=function(A){return A>=55296&&A<=57343},nC=function(A){return Yg(A)||A>=GR&&A<=fR||A>=ZR&&A<=kx},Ux=function(A){return A>=ZR&&A<=Yx},xx=function(A){return A>=GR&&A<=Kx},Ex=function(A){return Ux(A)||xx(A)},Lx=function(A){return A>=fx},io=function(A){return A===Ja||A===sx||A===ix},Fa=function(A){return Ex(A)||Lx(A)||A===cx},TG=function(A){return Fa(A)||Yg(A)||A===_g},Mx=function(A){return A>=Rx&&A<=vx||A===wx||A>=Xx&&A<=Jx||A===Fx},CI=function(A,g){return A!==ts?!1:g!==Ja},oo=function(A,g,e){return A===_g?Fa(g)||CI(g,e):Fa(A)?!0:!!(A===ts&&CI(A,g))},Rd=function(A,g,e){return A===hn||A===_g?Yg(g)?!0:g===Ys&&Yg(e):Yg(A===Ys?g:A)},Dx=function(A){var g=0,e=1;(A[g]===hn||A[g]===_g)&&(A[g]===_g&&(e=-1),g++);for(var t=[];Yg(A[g]);)t.push(A[g++]);var I=t.length?parseInt(ng.apply(void 0,t),10):0;A[g]===Ys&&g++;for(var n=[];Yg(A[g]);)n.push(A[g++]);var C=n.length,l=C?parseInt(ng.apply(void 0,n),10):0;(A[g]===yR||A[g]===pR)&&g++;var s=1;(A[g]===hn||A[g]===_g)&&(A[g]===_g&&(s=-1),g++);for(var i=[];Yg(A[g]);)i.push(A[g++]);var r=i.length?parseInt(ng.apply(void 0,i),10):0;return e*(I+l*Math.pow(10,-C))*Math.pow(10,s*r)},zx={type:2},Tx={type:3},jx={type:4},Ox={type:13},Px={type:8},_x={type:21},qx={type:9},$x={type:10},A5={type:11},g5={type:12},e5={type:14},ao={type:23},t5={type:1},I5={type:25},n5={type:24},C5={type:26},l5={type:27},s5={type:28},i5={type:29},o5={type:31},Jm={type:32},SR=function(){function A(){this._value=[]}return A.prototype.write=function(g){this._value=this._value.concat(Xr(g))},A.prototype.read=function(){for(var g=[],e=this.consumeToken();e!==Jm;)g.push(e),e=this.consumeToken();return g},A.prototype.consumeToken=function(){var g=this.consumeCodePoint();switch(g){case no:return this.consumeStringToken(no);case ox:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),I=this.peekCodePoint(2);if(TG(e)||CI(t,I)){var n=oo(e,t,I)?lx:Cx,C=this.consumeName();return{type:5,value:C,flags:n}}break;case ax:if(this.peekCodePoint(0)===Sl)return this.consumeCodePoint(),Ox;break;case Co:return this.consumeStringToken(Co);case lo:return zx;case Vl:return Tx;case Wd:if(this.peekCodePoint(0)===Sl)return this.consumeCodePoint(),e5;break;case hn:if(Rd(g,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(g),this.consumeNumericToken();break;case Sx:return jx;case _g:var l=g,s=this.peekCodePoint(0),i=this.peekCodePoint(1);if(Rd(l,s,i))return this.reconsumeCodePoint(g),this.consumeNumericToken();if(oo(l,s,i))return this.reconsumeCodePoint(g),this.consumeIdentLikeToken();if(s===_g&&i===mx)return this.consumeCodePoint(),this.consumeCodePoint(),n5;break;case Ys:if(Rd(g,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(g),this.consumeNumericToken();break;case MG:if(this.peekCodePoint(0)===Wd)for(this.consumeCodePoint();;){var r=this.consumeCodePoint();if(r===Wd&&(r=this.consumeCodePoint(),r===MG))return this.consumeToken();if(r===st)return this.consumeToken()}break;case Vx:return C5;case Wx:return l5;case ux:if(this.peekCodePoint(0)===dx&&this.peekCodePoint(1)===_g&&this.peekCodePoint(2)===_g)return this.consumeCodePoint(),this.consumeCodePoint(),I5;break;case Bx:var c=this.peekCodePoint(0),d=this.peekCodePoint(1),h=this.peekCodePoint(2);if(oo(c,d,h)){var C=this.consumeName();return{type:7,value:C}}break;case hx:return s5;case ts:if(CI(g,this.peekCodePoint(0)))return this.reconsumeCodePoint(g),this.consumeIdentLikeToken();break;case bx:return i5;case Zx:if(this.peekCodePoint(0)===Sl)return this.consumeCodePoint(),Px;break;case px:return A5;case Gx:return g5;case Hx:case Qx:var Z=this.peekCodePoint(0),y=this.peekCodePoint(1);return Z===hn&&(nC(y)||y===so)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(g),this.consumeIdentLikeToken();case DG:if(this.peekCodePoint(0)===Sl)return this.consumeCodePoint(),qx;if(this.peekCodePoint(0)===DG)return this.consumeCodePoint(),_x;break;case yx:if(this.peekCodePoint(0)===Sl)return this.consumeCodePoint(),$x;break;case st:return Jm}return io(g)?(this.consumeWhiteSpace(),o5):Yg(g)?(this.reconsumeCodePoint(g),this.consumeNumericToken()):Fa(g)?(this.reconsumeCodePoint(g),this.consumeIdentLikeToken()):{type:6,value:ng(g)}},A.prototype.consumeCodePoint=function(){var g=this._value.shift();return typeof g>"u"?-1:g},A.prototype.reconsumeCodePoint=function(g){this._value.unshift(g)},A.prototype.peekCodePoint=function(g){return g>=this._value.length?-1:this._value[g]},A.prototype.consumeUnicodeRangeToken=function(){for(var g=[],e=this.consumeCodePoint();nC(e)&&g.length<6;)g.push(e),e=this.consumeCodePoint();for(var t=!1;e===so&&g.length<6;)g.push(e),e=this.consumeCodePoint(),t=!0;if(t){var I=parseInt(ng.apply(void 0,g.map(function(s){return s===so?bR:s})),16),n=parseInt(ng.apply(void 0,g.map(function(s){return s===so?fR:s})),16);return{type:30,start:I,end:n}}var C=parseInt(ng.apply(void 0,g),16);if(this.peekCodePoint(0)===_g&&nC(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var l=[];nC(e)&&l.length<6;)l.push(e),e=this.consumeCodePoint();var n=parseInt(ng.apply(void 0,l),16);return{type:30,start:C,end:n}}else return{type:30,start:C,end:C}},A.prototype.consumeIdentLikeToken=function(){var g=this.consumeName();return g.toLowerCase()==="url"&&this.peekCodePoint(0)===lo?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===lo?(this.consumeCodePoint(),{type:19,value:g}):{type:20,value:g}},A.prototype.consumeUrlToken=function(){var g=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===st)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===Co||e===no){var t=this.consumeStringToken(this.consumeCodePoint());return t.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===st||this.peekCodePoint(0)===Vl)?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),ao)}for(;;){var I=this.consumeCodePoint();if(I===st||I===Vl)return{type:22,value:ng.apply(void 0,g)};if(io(I))return this.consumeWhiteSpace(),this.peekCodePoint(0)===st||this.peekCodePoint(0)===Vl?(this.consumeCodePoint(),{type:22,value:ng.apply(void 0,g)}):(this.consumeBadUrlRemnants(),ao);if(I===no||I===Co||I===lo||Mx(I))return this.consumeBadUrlRemnants(),ao;if(I===ts)if(CI(I,this.peekCodePoint(0)))g.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ao;else g.push(I)}},A.prototype.consumeWhiteSpace=function(){for(;io(this.peekCodePoint(0));)this.consumeCodePoint()},A.prototype.consumeBadUrlRemnants=function(){for(;;){var g=this.consumeCodePoint();if(g===Vl||g===st)return;CI(g,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},A.prototype.consumeStringSlice=function(g){for(var e=5e4,t="";g>0;){var I=Math.min(e,g);t+=ng.apply(void 0,this._value.splice(0,I)),g-=I}return this._value.shift(),t},A.prototype.consumeStringToken=function(g){var e="",t=0;do{var I=this._value[t];if(I===st||I===void 0||I===g)return e+=this.consumeStringSlice(t),{type:0,value:e};if(I===Ja)return this._value.splice(0,t),t5;if(I===ts){var n=this._value[t+1];n!==st&&n!==void 0&&(n===Ja?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):CI(I,n)&&(e+=this.consumeStringSlice(t),e+=ng(this.consumeEscapedCodePoint()),t=-1))}t++}while(!0)},A.prototype.consumeNumber=function(){var g=[],e=Os,t=this.peekCodePoint(0);for((t===hn||t===_g)&&g.push(this.consumeCodePoint());Yg(this.peekCodePoint(0));)g.push(this.consumeCodePoint());t=this.peekCodePoint(0);var I=this.peekCodePoint(1);if(t===Ys&&Yg(I))for(g.push(this.consumeCodePoint(),this.consumeCodePoint()),e=LG;Yg(this.peekCodePoint(0));)g.push(this.consumeCodePoint());t=this.peekCodePoint(0),I=this.peekCodePoint(1);var n=this.peekCodePoint(2);if((t===yR||t===pR)&&((I===hn||I===_g)&&Yg(n)||Yg(I)))for(g.push(this.consumeCodePoint(),this.consumeCodePoint()),e=LG;Yg(this.peekCodePoint(0));)g.push(this.consumeCodePoint());return[Dx(g),e]},A.prototype.consumeNumericToken=function(){var g=this.consumeNumber(),e=g[0],t=g[1],I=this.peekCodePoint(0),n=this.peekCodePoint(1),C=this.peekCodePoint(2);if(oo(I,n,C)){var l=this.consumeName();return{type:15,number:e,flags:t,unit:l}}return I===rx?(this.consumeCodePoint(),{type:16,number:e,flags:t}):{type:17,number:e,flags:t}},A.prototype.consumeEscapedCodePoint=function(){var g=this.consumeCodePoint();if(nC(g)){for(var e=ng(g);nC(this.peekCodePoint(0))&&e.length<6;)e+=ng(this.consumeCodePoint());io(this.peekCodePoint(0))&&this.consumeCodePoint();var t=parseInt(e,16);return t===0||Nx(t)||t>1114111?zG:t}return g===st?zG:g},A.prototype.consumeName=function(){for(var g="";;){var e=this.consumeCodePoint();if(TG(e))g+=ng(e);else if(CI(e,this.peekCodePoint(0)))g+=ng(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(e),g}},A}(),VR=function(){function A(g){this._tokens=g}return A.create=function(g){var e=new SR;return e.write(g),new A(e.read())},A.parseValue=function(g){return A.create(g).parseComponentValue()},A.parseValues=function(g){return A.create(g).parseComponentValues()},A.prototype.parseComponentValue=function(){for(var g=this.consumeToken();g.type===31;)g=this.consumeToken();if(g.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(g);var e=this.consumeComponentValue();do g=this.consumeToken();while(g.type===31);if(g.type===32)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},A.prototype.parseComponentValues=function(){for(var g=[];;){var e=this.consumeComponentValue();if(e.type===32)return g;g.push(e),g.push()}},A.prototype.consumeComponentValue=function(){var g=this.consumeToken();switch(g.type){case 11:case 28:case 2:return this.consumeSimpleBlock(g.type);case 19:return this.consumeFunction(g)}return g},A.prototype.consumeSimpleBlock=function(g){for(var e={type:g,values:[]},t=this.consumeToken();;){if(t.type===32||r5(t,g))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},A.prototype.consumeFunction=function(g){for(var e={name:g.value,values:[],type:18};;){var t=this.consumeToken();if(t.type===32||t.type===3)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},A.prototype.consumeToken=function(){var g=this._tokens.shift();return typeof g>"u"?Jm:g},A.prototype.reconsumeToken=function(g){this._tokens.unshift(g)},A}(),Ps=function(A){return A.type===15},el=function(A){return A.type===17},QA=function(A){return A.type===20},a5=function(A){return A.type===0},Fm=function(A,g){return QA(A)&&A.value===g},WR=function(A){return A.type!==31},zC=function(A){return A.type!==31&&A.type!==4},Bt=function(A){var g=[],e=[];return A.forEach(function(t){if(t.type===4){if(e.length===0)throw new Error("Error parsing function args, zero tokens for arg");g.push(e),e=[];return}t.type!==31&&e.push(t)}),e.length&&g.push(e),g},r5=function(A,g){return g===11&&A.type===12||g===28&&A.type===29?!0:g===2&&A.type===3},YI=function(A){return A.type===17||A.type===15},ig=function(A){return A.type===16||YI(A)},RR=function(A){return A.length>1?[A[0],A[1]]:[A[0]]},Rg={type:17,number:0,flags:Os},Rh={type:16,number:50,flags:Os},uI={type:16,number:100,flags:Os},Nl=function(A,g,e){var t=A[0],I=A[1];return[xA(t,g),xA(typeof I<"u"?I:t,e)]},xA=function(A,g){if(A.type===16)return A.number/100*g;if(Ps(A))switch(A.unit){case"rem":case"em":return 16*A.number;case"px":default:return A.number}return A.number},vR="deg",wR="grad",XR="rad",JR="turn",Jr={name:"angle",parse:function(A,g){if(g.type===15)switch(g.unit){case vR:return Math.PI*g.number/180;case wR:return Math.PI/200*g.number;case XR:return g.number;case JR:return Math.PI*2*g.number}throw new Error("Unsupported angle type")}},FR=function(A){return A.type===15&&(A.unit===vR||A.unit===wR||A.unit===XR||A.unit===JR)},kR=function(A){var g=A.filter(QA).map(function(e){return e.value}).join(" ");switch(g){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Rg,Rg];case"to top":case"bottom":return ke(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Rg,uI];case"to right":case"left":return ke(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[uI,uI];case"to bottom":case"top":return ke(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[uI,Rg];case"to left":case"right":return ke(270)}return 0},ke=function(A){return Math.PI*A/180},RI={name:"color",parse:function(A,g){if(g.type===18){var e=c5[g.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported color function "'+g.name+'"');return e(A,g.values)}if(g.type===5){if(g.value.length===3){var t=g.value.substring(0,1),I=g.value.substring(1,2),n=g.value.substring(2,3);return mI(parseInt(t+t,16),parseInt(I+I,16),parseInt(n+n,16),1)}if(g.value.length===4){var t=g.value.substring(0,1),I=g.value.substring(1,2),n=g.value.substring(2,3),C=g.value.substring(3,4);return mI(parseInt(t+t,16),parseInt(I+I,16),parseInt(n+n,16),parseInt(C+C,16)/255)}if(g.value.length===6){var t=g.value.substring(0,2),I=g.value.substring(2,4),n=g.value.substring(4,6);return mI(parseInt(t,16),parseInt(I,16),parseInt(n,16),1)}if(g.value.length===8){var t=g.value.substring(0,2),I=g.value.substring(2,4),n=g.value.substring(4,6),C=g.value.substring(6,8);return mI(parseInt(t,16),parseInt(I,16),parseInt(n,16),parseInt(C,16)/255)}}if(g.type===20){var l=Yt[g.value.toUpperCase()];if(typeof l<"u")return l}return Yt.TRANSPARENT}},vI=function(A){return(255&A)===0},Zg=function(A){var g=255&A,e=255&A>>8,t=255&A>>16,I=255&A>>24;return g<255?"rgba("+I+","+t+","+e+","+g/255+")":"rgb("+I+","+t+","+e+")"},mI=function(A,g,e,t){return(A<<24|g<<16|e<<8|Math.round(t*255)<<0)>>>0},jG=function(A,g){if(A.type===17)return A.number;if(A.type===16){var e=g===3?1:255;return g===3?A.number/100*e:Math.round(A.number/100*e)}return 0},OG=function(A,g){var e=g.filter(zC);if(e.length===3){var t=e.map(jG),I=t[0],n=t[1],C=t[2];return mI(I,n,C,1)}if(e.length===4){var l=e.map(jG),I=l[0],n=l[1],C=l[2],s=l[3];return mI(I,n,C,s)}return 0};function vd(A,g,e){return e<0&&(e+=1),e>=1&&(e-=1),e<1/6?(g-A)*e*6+A:e<1/2?g:e<2/3?(g-A)*6*(2/3-e)+A:A}var PG=function(A,g){var e=g.filter(zC),t=e[0],I=e[1],n=e[2],C=e[3],l=(t.type===17?ke(t.number):Jr.parse(A,t))/(Math.PI*2),s=ig(I)?I.number/100:0,i=ig(n)?n.number/100:0,r=typeof C<"u"&&ig(C)?xA(C,1):1;if(s===0)return mI(i*255,i*255,i*255,1);var c=i<=.5?i*(s+1):i+s-i*s,d=i*2-c,h=vd(d,c,l+1/3),Z=vd(d,c,l),y=vd(d,c,l-1/3);return mI(h*255,Z*255,y*255,r)},c5={hsl:PG,hsla:PG,rgb:OG,rgba:OG},Is=function(A,g){return RI.parse(A,VR.create(g).parseComponentValue())},Yt={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},d5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,g){return g.map(function(e){if(QA(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},u5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fr=function(A,g){var e=RI.parse(A,g[0]),t=g[1];return t&&ig(t)?{color:e,stop:t}:{color:e,stop:null}},_G=function(A,g){var e=A[0],t=A[A.length-1];e.stop===null&&(e.stop=Rg),t.stop===null&&(t.stop=uI);for(var I=[],n=0,C=0;C<A.length;C++){var l=A[C].stop;if(l!==null){var s=xA(l,g);s>n?I.push(s):I.push(n),n=s}else I.push(null)}for(var i=null,C=0;C<I.length;C++){var r=I[C];if(r===null)i===null&&(i=C);else if(i!==null){for(var c=C-i,d=I[i-1],h=(r-d)/(c+1),Z=1;Z<=c;Z++)I[i+Z-1]=h*Z;i=null}}return A.map(function(y,S){var b=y.color;return{color:b,stop:Math.max(Math.min(1,I[S]/g),0)}})},m5=function(A,g,e){var t=g/2,I=e/2,n=xA(A[0],g)-t,C=I-xA(A[1],e);return(Math.atan2(C,n)+Math.PI*2)%(Math.PI*2)},B5=function(A,g,e){var t=typeof A=="number"?A:m5(A,g,e),I=Math.abs(g*Math.sin(t))+Math.abs(e*Math.cos(t)),n=g/2,C=e/2,l=I/2,s=Math.sin(t-Math.PI/2)*l,i=Math.cos(t-Math.PI/2)*l;return[I,n-i,n+i,C-s,C+s]},De=function(A,g){return Math.sqrt(A*A+g*g)},qG=function(A,g,e,t,I){var n=[[0,0],[0,g],[A,0],[A,g]];return n.reduce(function(C,l){var s=l[0],i=l[1],r=De(e-s,t-i);return(I?r<C.optimumDistance:r>C.optimumDistance)?{optimumCorner:l,optimumDistance:r}:C},{optimumDistance:I?1/0:-1/0,optimumCorner:null}).optimumCorner},h5=function(A,g,e,t,I){var n=0,C=0;switch(A.size){case 0:A.shape===0?n=C=Math.min(Math.abs(g),Math.abs(g-t),Math.abs(e),Math.abs(e-I)):A.shape===1&&(n=Math.min(Math.abs(g),Math.abs(g-t)),C=Math.min(Math.abs(e),Math.abs(e-I)));break;case 2:if(A.shape===0)n=C=Math.min(De(g,e),De(g,e-I),De(g-t,e),De(g-t,e-I));else if(A.shape===1){var l=Math.min(Math.abs(e),Math.abs(e-I))/Math.min(Math.abs(g),Math.abs(g-t)),s=qG(t,I,g,e,!0),i=s[0],r=s[1];n=De(i-g,(r-e)/l),C=l*n}break;case 1:A.shape===0?n=C=Math.max(Math.abs(g),Math.abs(g-t),Math.abs(e),Math.abs(e-I)):A.shape===1&&(n=Math.max(Math.abs(g),Math.abs(g-t)),C=Math.max(Math.abs(e),Math.abs(e-I)));break;case 3:if(A.shape===0)n=C=Math.max(De(g,e),De(g,e-I),De(g-t,e),De(g-t,e-I));else if(A.shape===1){var l=Math.max(Math.abs(e),Math.abs(e-I))/Math.max(Math.abs(g),Math.abs(g-t)),c=qG(t,I,g,e,!1),i=c[0],r=c[1];n=De(i-g,(r-e)/l),C=l*n}break}return Array.isArray(A.size)&&(n=xA(A.size[0],t),C=A.size.length===2?xA(A.size[1],I):n),[n,C]},b5=function(A,g){var e=ke(180),t=[];return Bt(g).forEach(function(I,n){if(n===0){var C=I[0];if(C.type===20&&C.value==="to"){e=kR(I);return}else if(FR(C)){e=Jr.parse(A,C);return}}var l=Fr(A,I);t.push(l)}),{angle:e,stops:t,type:1}},ro=function(A,g){var e=ke(180),t=[];return Bt(g).forEach(function(I,n){if(n===0){var C=I[0];if(C.type===20&&["top","left","right","bottom"].indexOf(C.value)!==-1){e=kR(I);return}else if(FR(C)){e=(Jr.parse(A,C)+ke(270))%ke(360);return}}var l=Fr(A,I);t.push(l)}),{angle:e,stops:t,type:1}},Z5=function(A,g){var e=ke(180),t=[],I=1,n=0,C=3,l=[];return Bt(g).forEach(function(s,i){var r=s[0];if(i===0){if(QA(r)&&r.value==="linear"){I=1;return}else if(QA(r)&&r.value==="radial"){I=2;return}}if(r.type===18){if(r.name==="from"){var c=RI.parse(A,r.values[0]);t.push({stop:Rg,color:c})}else if(r.name==="to"){var c=RI.parse(A,r.values[0]);t.push({stop:uI,color:c})}else if(r.name==="color-stop"){var d=r.values.filter(zC);if(d.length===2){var c=RI.parse(A,d[1]),h=d[0];el(h)&&t.push({stop:{type:16,number:h.number*100,flags:h.flags},color:c})}}}}),I===1?{angle:(e+ke(180))%ke(360),stops:t,type:I}:{size:C,shape:n,stops:t,position:l,type:I}},HR="closest-side",YR="farthest-side",QR="closest-corner",KR="farthest-corner",NR="circle",UR="ellipse",xR="cover",ER="contain",p5=function(A,g){var e=0,t=3,I=[],n=[];return Bt(g).forEach(function(C,l){var s=!0;if(l===0){var i=!1;s=C.reduce(function(c,d){if(i)if(QA(d))switch(d.value){case"center":return n.push(Rh),c;case"top":case"left":return n.push(Rg),c;case"right":case"bottom":return n.push(uI),c}else(ig(d)||YI(d))&&n.push(d);else if(QA(d))switch(d.value){case NR:return e=0,!1;case UR:return e=1,!1;case"at":return i=!0,!1;case HR:return t=0,!1;case xR:case YR:return t=1,!1;case ER:case QR:return t=2,!1;case KR:return t=3,!1}else if(YI(d)||ig(d))return Array.isArray(t)||(t=[]),t.push(d),!1;return c},s)}if(s){var r=Fr(A,C);I.push(r)}}),{size:t,shape:e,stops:I,position:n,type:2}},co=function(A,g){var e=0,t=3,I=[],n=[];return Bt(g).forEach(function(C,l){var s=!0;if(l===0?s=C.reduce(function(r,c){if(QA(c))switch(c.value){case"center":return n.push(Rh),!1;case"top":case"left":return n.push(Rg),!1;case"right":case"bottom":return n.push(uI),!1}else if(ig(c)||YI(c))return n.push(c),!1;return r},s):l===1&&(s=C.reduce(function(r,c){if(QA(c))switch(c.value){case NR:return e=0,!1;case UR:return e=1,!1;case ER:case HR:return t=0,!1;case YR:return t=1,!1;case QR:return t=2,!1;case xR:case KR:return t=3,!1}else if(YI(c)||ig(c))return Array.isArray(t)||(t=[]),t.push(c),!1;return r},s)),s){var i=Fr(A,C);I.push(i)}}),{size:t,shape:e,stops:I,position:n,type:2}},G5=function(A){return A.type===1},y5=function(A){return A.type===2},vh={name:"image",parse:function(A,g){if(g.type===22){var e={url:g.value,type:0};return A.cache.addImage(g.value),e}if(g.type===18){var t=LR[g.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported image function "'+g.name+'"');return t(A,g.values)}throw new Error("Unsupported image type "+g.type)}};function f5(A){return!(A.type===20&&A.value==="none")&&(A.type!==18||!!LR[A.name])}var LR={"linear-gradient":b5,"-moz-linear-gradient":ro,"-ms-linear-gradient":ro,"-o-linear-gradient":ro,"-webkit-linear-gradient":ro,"radial-gradient":p5,"-moz-radial-gradient":co,"-ms-radial-gradient":co,"-o-radial-gradient":co,"-webkit-radial-gradient":co,"-webkit-gradient":Z5},S5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(A,g){if(g.length===0)return[];var e=g[0];return e.type===20&&e.value==="none"?[]:g.filter(function(t){return zC(t)&&f5(t)}).map(function(t){return vh.parse(A,t)})}},V5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,g){return g.map(function(e){if(QA(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},W5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,g){return Bt(g).map(function(e){return e.filter(ig)}).map(RR)}},R5={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,g){return Bt(g).map(function(e){return e.filter(QA).map(function(t){return t.value}).join(" ")}).map(v5)}},v5=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},HC;(function(A){A.AUTO="auto",A.CONTAIN="contain",A.COVER="cover"})(HC||(HC={}));var w5={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(A,g){return Bt(g).map(function(e){return e.filter(X5)})}},X5=function(A){return QA(A)||ig(A)},kr=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},J5=kr("top"),F5=kr("right"),k5=kr("bottom"),H5=kr("left"),Hr=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(g,e){return RR(e.filter(ig))}}},Y5=Hr("top-left"),Q5=Hr("top-right"),K5=Hr("bottom-right"),N5=Hr("bottom-left"),Yr=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(g,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},U5=Yr("top"),x5=Yr("right"),E5=Yr("bottom"),L5=Yr("left"),Qr=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(g,e){return Ps(e)?e.number:0}}},M5=Qr("top"),D5=Qr("right"),z5=Qr("bottom"),T5=Qr("left"),j5={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},O5={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,g){switch(g){case"rtl":return 1;case"ltr":default:return 0}}},P5={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,g){return g.filter(QA).reduce(function(e,t){return e|_5(t.value)},0)}},_5=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},q5={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,g){switch(g){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$5={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,g){return g.type===20&&g.value==="normal"?0:g.type===17||g.type===15?g.number:0}},ka;(function(A){A.NORMAL="normal",A.STRICT="strict"})(ka||(ka={}));var AE={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,g){switch(g){case"strict":return ka.STRICT;case"normal":default:return ka.NORMAL}}},gE={name:"line-height",initialValue:"normal",prefix:!1,type:4},$G=function(A,g){return QA(A)&&A.value==="normal"?1.2*g:A.type===17?g*A.number:ig(A)?xA(A,g):g},eE={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,g){return g.type===20&&g.value==="none"?null:vh.parse(A,g)}},tE={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,g){switch(g){case"inside":return 0;case"outside":default:return 1}}},km={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,g){switch(g){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Kr=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},IE=Kr("top"),nE=Kr("right"),CE=Kr("bottom"),lE=Kr("left"),sE={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,g){return g.filter(QA).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},iE={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,g){switch(g){case"break-word":return"break-word";case"normal":default:return"normal"}}},Nr=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},oE=Nr("top"),aE=Nr("right"),rE=Nr("bottom"),cE=Nr("left"),dE={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,g){switch(g){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},uE={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,g){switch(g){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},mE={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,g){return g.length===1&&Fm(g[0],"none")?[]:Bt(g).map(function(e){for(var t={color:Yt.TRANSPARENT,offsetX:Rg,offsetY:Rg,blur:Rg},I=0,n=0;n<e.length;n++){var C=e[n];YI(C)?(I===0?t.offsetX=C:I===1?t.offsetY=C:t.blur=C,I++):t.color=RI.parse(A,C)}return t})}},BE={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,g){switch(g){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},hE={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,g){if(g.type===20&&g.value==="none")return null;if(g.type===18){var e=pE[g.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported transform function "'+g.name+'"');return e(g.values)}return null}},bE=function(A){var g=A.filter(function(e){return e.type===17}).map(function(e){return e.number});return g.length===6?g:null},ZE=function(A){var g=A.filter(function(s){return s.type===17}).map(function(s){return s.number}),e=g[0],t=g[1];g[2],g[3];var I=g[4],n=g[5];g[6],g[7],g[8],g[9],g[10],g[11];var C=g[12],l=g[13];return g[14],g[15],g.length===16?[e,t,I,n,C,l]:null},pE={matrix:bE,matrix3d:ZE},Ay={type:16,number:50,flags:Os},GE=[Ay,Ay],yE={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,g){var e=g.filter(ig);return e.length!==2?GE:[e[0],e[1]]}},fE={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,g){switch(g){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ns;(function(A){A.NORMAL="normal",A.BREAK_ALL="break-all",A.KEEP_ALL="keep-all"})(ns||(ns={}));var SE={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,g){switch(g){case"break-all":return ns.BREAK_ALL;case"keep-all":return ns.KEEP_ALL;case"normal":default:return ns.NORMAL}}},VE={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,g){if(g.type===20)return{auto:!0,order:0};if(el(g))return{auto:!1,order:g.number};throw new Error("Invalid z-index number parsed")}},MR={name:"time",parse:function(A,g){if(g.type===15)switch(g.unit.toLowerCase()){case"s":return 1e3*g.number;case"ms":return g.number}throw new Error("Unsupported time type")}},WE={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,g){return el(g)?g.number:1}},RE={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vE={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,g){return g.filter(QA).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return e!==0})}},wE={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,g){var e=[],t=[];return g.forEach(function(I){switch(I.type){case 20:case 0:e.push(I.value);break;case 17:e.push(I.number.toString());break;case 4:t.push(e.join(" ")),e.length=0;break}}),e.length&&t.push(e.join(" ")),t.map(function(I){return I.indexOf(" ")===-1?I:"'"+I+"'"})}},XE={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},JE={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,g){if(el(g))return g.number;if(QA(g))switch(g.value){case"bold":return 700;case"normal":default:return 400}return 400}},FE={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,g){return g.filter(QA).map(function(e){return e.value})}},kE={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,g){switch(g){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mg=function(A,g){return(A&g)!==0},HE={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,g){if(g.length===0)return[];var e=g[0];return e.type===20&&e.value==="none"?[]:g}},YE={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,g){if(g.length===0)return null;var e=g[0];if(e.type===20&&e.value==="none")return null;for(var t=[],I=g.filter(WR),n=0;n<I.length;n++){var C=I[n],l=I[n+1];if(C.type===20){var s=l&&el(l)?l.number:1;t.push({counter:C.value,increment:s})}}return t}},QE={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,g){if(g.length===0)return[];for(var e=[],t=g.filter(WR),I=0;I<t.length;I++){var n=t[I],C=t[I+1];if(QA(n)&&n.value!=="none"){var l=C&&el(C)?C.number:0;e.push({counter:n.value,reset:l})}}return e}},KE={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(A,g){return g.filter(Ps).map(function(e){return MR.parse(A,e)})}},NE={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,g){if(g.length===0)return null;var e=g[0];if(e.type===20&&e.value==="none")return null;var t=[],I=g.filter(a5);if(I.length%2!==0)return null;for(var n=0;n<I.length;n+=2){var C=I[n].value,l=I[n+1].value;t.push({open:C,close:l})}return t}},gy=function(A,g,e){if(!A)return"";var t=A[Math.min(g,A.length-1)];return t?e?t.open:t.close:""},UE={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,g){return g.length===1&&Fm(g[0],"none")?[]:Bt(g).map(function(e){for(var t={color:255,offsetX:Rg,offsetY:Rg,blur:Rg,spread:Rg,inset:!1},I=0,n=0;n<e.length;n++){var C=e[n];Fm(C,"inset")?t.inset=!0:YI(C)?(I===0?t.offsetX=C:I===1?t.offsetY=C:I===2?t.blur=C:t.spread=C,I++):t.color=RI.parse(A,C)}return t})}},xE={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,g){var e=[0,1,2],t=[];return g.filter(QA).forEach(function(I){switch(I.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2);break}}),e.forEach(function(I){t.indexOf(I)===-1&&t.push(I)}),t}},EE={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},LE={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,g){return Ps(g)?g.number:0}},ME=function(){function A(g,e){var t,I;this.animationDuration=D(g,KE,e.animationDuration),this.backgroundClip=D(g,d5,e.backgroundClip),this.backgroundColor=D(g,u5,e.backgroundColor),this.backgroundImage=D(g,S5,e.backgroundImage),this.backgroundOrigin=D(g,V5,e.backgroundOrigin),this.backgroundPosition=D(g,W5,e.backgroundPosition),this.backgroundRepeat=D(g,R5,e.backgroundRepeat),this.backgroundSize=D(g,w5,e.backgroundSize),this.borderTopColor=D(g,J5,e.borderTopColor),this.borderRightColor=D(g,F5,e.borderRightColor),this.borderBottomColor=D(g,k5,e.borderBottomColor),this.borderLeftColor=D(g,H5,e.borderLeftColor),this.borderTopLeftRadius=D(g,Y5,e.borderTopLeftRadius),this.borderTopRightRadius=D(g,Q5,e.borderTopRightRadius),this.borderBottomRightRadius=D(g,K5,e.borderBottomRightRadius),this.borderBottomLeftRadius=D(g,N5,e.borderBottomLeftRadius),this.borderTopStyle=D(g,U5,e.borderTopStyle),this.borderRightStyle=D(g,x5,e.borderRightStyle),this.borderBottomStyle=D(g,E5,e.borderBottomStyle),this.borderLeftStyle=D(g,L5,e.borderLeftStyle),this.borderTopWidth=D(g,M5,e.borderTopWidth),this.borderRightWidth=D(g,D5,e.borderRightWidth),this.borderBottomWidth=D(g,z5,e.borderBottomWidth),this.borderLeftWidth=D(g,T5,e.borderLeftWidth),this.boxShadow=D(g,UE,e.boxShadow),this.color=D(g,j5,e.color),this.direction=D(g,O5,e.direction),this.display=D(g,P5,e.display),this.float=D(g,q5,e.cssFloat),this.fontFamily=D(g,wE,e.fontFamily),this.fontSize=D(g,XE,e.fontSize),this.fontStyle=D(g,kE,e.fontStyle),this.fontVariant=D(g,FE,e.fontVariant),this.fontWeight=D(g,JE,e.fontWeight),this.letterSpacing=D(g,$5,e.letterSpacing),this.lineBreak=D(g,AE,e.lineBreak),this.lineHeight=D(g,gE,e.lineHeight),this.listStyleImage=D(g,eE,e.listStyleImage),this.listStylePosition=D(g,tE,e.listStylePosition),this.listStyleType=D(g,km,e.listStyleType),this.marginTop=D(g,IE,e.marginTop),this.marginRight=D(g,nE,e.marginRight),this.marginBottom=D(g,CE,e.marginBottom),this.marginLeft=D(g,lE,e.marginLeft),this.opacity=D(g,WE,e.opacity);var n=D(g,sE,e.overflow);this.overflowX=n[0],this.overflowY=n[n.length>1?1:0],this.overflowWrap=D(g,iE,e.overflowWrap),this.paddingTop=D(g,oE,e.paddingTop),this.paddingRight=D(g,aE,e.paddingRight),this.paddingBottom=D(g,rE,e.paddingBottom),this.paddingLeft=D(g,cE,e.paddingLeft),this.paintOrder=D(g,xE,e.paintOrder),this.position=D(g,uE,e.position),this.textAlign=D(g,dE,e.textAlign),this.textDecorationColor=D(g,RE,(t=e.textDecorationColor)!==null&&t!==void 0?t:e.color),this.textDecorationLine=D(g,vE,(I=e.textDecorationLine)!==null&&I!==void 0?I:e.textDecoration),this.textShadow=D(g,mE,e.textShadow),this.textTransform=D(g,BE,e.textTransform),this.transform=D(g,hE,e.transform),this.transformOrigin=D(g,yE,e.transformOrigin),this.visibility=D(g,fE,e.visibility),this.webkitTextStrokeColor=D(g,EE,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=D(g,LE,e.webkitTextStrokeWidth),this.wordBreak=D(g,SE,e.wordBreak),this.zIndex=D(g,VE,e.zIndex)}return A.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},A.prototype.isTransparent=function(){return vI(this.backgroundColor)},A.prototype.isTransformed=function(){return this.transform!==null},A.prototype.isPositioned=function(){return this.position!==0},A.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},A.prototype.isFloating=function(){return this.float!==0},A.prototype.isInlineLevel=function(){return mg(this.display,4)||mg(this.display,33554432)||mg(this.display,268435456)||mg(this.display,536870912)||mg(this.display,67108864)||mg(this.display,134217728)},A}(),DE=function(){function A(g,e){this.content=D(g,HE,e.content),this.quotes=D(g,NE,e.quotes)}return A}(),ey=function(){function A(g,e){this.counterIncrement=D(g,YE,e.counterIncrement),this.counterReset=D(g,QE,e.counterReset)}return A}(),D=function(A,g,e){var t=new SR,I=e!==null&&typeof e<"u"?e.toString():g.initialValue;t.write(I);var n=new VR(t.read());switch(g.type){case 2:var C=n.parseComponentValue();return g.parse(A,QA(C)?C.value:g.initialValue);case 0:return g.parse(A,n.parseComponentValue());case 1:return g.parse(A,n.parseComponentValues());case 4:return n.parseComponentValue();case 3:switch(g.format){case"angle":return Jr.parse(A,n.parseComponentValue());case"color":return RI.parse(A,n.parseComponentValue());case"image":return vh.parse(A,n.parseComponentValue());case"length":var l=n.parseComponentValue();return YI(l)?l:Rg;case"length-percentage":var s=n.parseComponentValue();return ig(s)?s:Rg;case"time":return MR.parse(A,n.parseComponentValue())}break}},zE="data-html2canvas-debug",TE=function(A){var g=A.getAttribute(zE);switch(g){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Hm=function(A,g){var e=TE(A);return e===1||g===e},ht=function(){function A(g,e){if(this.context=g,this.textNodes=[],this.elements=[],this.flags=0,Hm(e,3))debugger;this.styles=new ME(g,window.getComputedStyle(e,null)),Km(e)&&(this.styles.animationDuration.some(function(t){return t>0})&&(e.style.animationDuration="0s"),this.styles.transform!==null&&(e.style.transform="none")),this.bounds=wr(this.context,e),Hm(e,4)&&(this.flags|=16)}return A}(),jE="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ty="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ul=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uo=0;uo<ty.length;uo++)Ul[ty.charCodeAt(uo)]=uo;var OE=function(A){var g=A.length*.75,e=A.length,t,I=0,n,C,l,s;A[A.length-1]==="="&&(g--,A[A.length-2]==="="&&g--);var i=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(g):new Array(g),r=Array.isArray(i)?i:new Uint8Array(i);for(t=0;t<e;t+=4)n=Ul[A.charCodeAt(t)],C=Ul[A.charCodeAt(t+1)],l=Ul[A.charCodeAt(t+2)],s=Ul[A.charCodeAt(t+3)],r[I++]=n<<2|C>>4,r[I++]=(C&15)<<4|l>>2,r[I++]=(l&3)<<6|s&63;return i},PE=function(A){for(var g=A.length,e=[],t=0;t<g;t+=2)e.push(A[t+1]<<8|A[t]);return e},_E=function(A){for(var g=A.length,e=[],t=0;t<g;t+=4)e.push(A[t+3]<<24|A[t+2]<<16|A[t+1]<<8|A[t]);return e},Sn=5,wh=11,wd=2,qE=wh-Sn,DR=65536>>Sn,$E=1<<Sn,Xd=$E-1,A3=1024>>Sn,g3=DR+A3,e3=g3,t3=32,I3=e3+t3,n3=65536>>wh,C3=1<<qE,l3=C3-1,Iy=function(A,g,e){return A.slice?A.slice(g,e):new Uint16Array(Array.prototype.slice.call(A,g,e))},s3=function(A,g,e){return A.slice?A.slice(g,e):new Uint32Array(Array.prototype.slice.call(A,g,e))},i3=function(A,g){var e=OE(A),t=Array.isArray(e)?_E(e):new Uint32Array(e),I=Array.isArray(e)?PE(e):new Uint16Array(e),n=24,C=Iy(I,n/2,t[4]/2),l=t[5]===2?Iy(I,(n+t[4])/2):s3(t,Math.ceil((n+t[4])/4));return new o3(t[0],t[1],t[2],t[3],C,l)},o3=function(){function A(g,e,t,I,n,C){this.initialValue=g,this.errorValue=e,this.highStart=t,this.highValueIndex=I,this.index=n,this.data=C}return A.prototype.get=function(g){var e;if(g>=0){if(g<55296||g>56319&&g<=65535)return e=this.index[g>>Sn],e=(e<<wd)+(g&Xd),this.data[e];if(g<=65535)return e=this.index[DR+(g-55296>>Sn)],e=(e<<wd)+(g&Xd),this.data[e];if(g<this.highStart)return e=I3-n3+(g>>wh),e=this.index[e],e+=g>>Sn&l3,e=this.index[e],e=(e<<wd)+(g&Xd),this.data[e];if(g<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mo=0;mo<ny.length;mo++)a3[ny.charCodeAt(mo)]=mo;var r3=1,Jd=2,Fd=3,Cy=4,ly=5,c3=7,sy=8,kd=9,Hd=10,iy=11,oy=12,ay=13,ry=14,Yd=15,d3=function(A){for(var g=[],e=0,t=A.length;e<t;){var I=A.charCodeAt(e++);if(I>=55296&&I<=56319&&e<t){var n=A.charCodeAt(e++);(n&64512)===56320?g.push(((I&1023)<<10)+(n&1023)+65536):(g.push(I),e--)}else g.push(I)}return g},u3=function(){for(var A=[],g=0;g<arguments.length;g++)A[g]=arguments[g];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var e=A.length;if(!e)return"";for(var t=[],I=-1,n="";++I<e;){var C=A[I];C<=65535?t.push(C):(C-=65536,t.push((C>>10)+55296,C%1024+56320)),(I+1===e||t.length>16384)&&(n+=String.fromCharCode.apply(String,t),t.length=0)}return n},m3=i3(jE),Re="×",Qd="÷",B3=function(A){return m3.get(A)},h3=function(A,g,e){var t=e-2,I=g[t],n=g[e-1],C=g[e];if(n===Jd&&C===Fd)return Re;if(n===Jd||n===Fd||n===Cy||C===Jd||C===Fd||C===Cy)return Qd;if(n===sy&&[sy,kd,iy,oy].indexOf(C)!==-1||(n===iy||n===kd)&&(C===kd||C===Hd)||(n===oy||n===Hd)&&C===Hd||C===ay||C===ly||C===c3||n===r3)return Re;if(n===ay&&C===ry){for(;I===ly;)I=g[--t];if(I===ry)return Re}if(n===Yd&&C===Yd){for(var l=0;I===Yd;)l++,I=g[--t];if(l%2===0)return Re}return Qd},b3=function(A){var g=d3(A),e=g.length,t=0,I=0,n=g.map(B3);return{next:function(){if(t>=e)return{done:!0,value:null};for(var C=Re;t<e&&(C=h3(g,n,++t))===Re;);if(C!==Re||t===e){var l=u3.apply(null,g.slice(I,t));return I=t,{value:l,done:!1}}return{done:!0,value:null}}}},Z3=function(A){for(var g=b3(A),e=[],t;!(t=g.next()).done;)t.value&&e.push(t.value.slice());return e},p3=function(A){var g=123;if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height=g+"px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);var I=e.getBoundingClientRect(),n=Math.round(I.height);if(A.body.removeChild(t),n===g)return!0}}return!1},G3=function(A){var g=A.createElement("boundtest");g.style.width="50px",g.style.display="block",g.style.fontSize="12px",g.style.letterSpacing="0px",g.style.wordSpacing="0px",A.body.appendChild(g);var e=A.createRange();g.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var t=g.firstChild,I=Xr(t.data).map(function(s){return ng(s)}),n=0,C={},l=I.every(function(s,i){e.setStart(t,n),e.setEnd(t,n+s.length);var r=e.getBoundingClientRect();n+=s.length;var c=r.x>C.x||r.y>C.y;return C=r,i===0?!0:c});return A.body.removeChild(g),l},y3=function(){return typeof new Image().crossOrigin<"u"},f3=function(){return typeof new XMLHttpRequest().responseType=="string"},S3=function(A){var g=new Image,e=A.createElement("canvas"),t=e.getContext("2d");if(!t)return!1;g.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{t.drawImage(g,0,0),e.toDataURL()}catch{return!1}return!0},cy=function(A){return A[0]===0&&A[1]===255&&A[2]===0&&A[3]===255},V3=function(A){var g=A.createElement("canvas"),e=100;g.width=e,g.height=e;var t=g.getContext("2d");if(!t)return Promise.reject(!1);t.fillStyle="rgb(0, 255, 0)",t.fillRect(0,0,e,e);var I=new Image,n=g.toDataURL();I.src=n;var C=Ym(e,e,0,0,I);return t.fillStyle="red",t.fillRect(0,0,e,e),dy(C).then(function(l){t.drawImage(l,0,0);var s=t.getImageData(0,0,e,e).data;t.fillStyle="red",t.fillRect(0,0,e,e);var i=A.createElement("div");return i.style.backgroundImage="url("+n+")",i.style.height=e+"px",cy(s)?dy(Ym(e,e,0,0,i)):Promise.reject(!1)}).then(function(l){return t.drawImage(l,0,0),cy(t.getImageData(0,0,e,e).data)}).catch(function(){return!1})},Ym=function(A,g,e,t,I){var n="http://www.w3.org/2000/svg",C=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject");return C.setAttributeNS(null,"width",A.toString()),C.setAttributeNS(null,"height",g.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",t.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),C.appendChild(l),l.appendChild(I),C},dy=function(A){return new Promise(function(g,e){var t=new Image;t.onload=function(){return g(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},Sg={get SUPPORT_RANGE_BOUNDS(){var A=p3(document);return Object.defineProperty(Sg,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Sg.SUPPORT_RANGE_BOUNDS&&G3(document);return Object.defineProperty(Sg,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=S3(document);return Object.defineProperty(Sg,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A=typeof Array.from=="function"&&typeof window.fetch=="function"?V3(document):Promise.resolve(!1);return Object.defineProperty(Sg,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=y3();return Object.defineProperty(Sg,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A=f3();return Object.defineProperty(Sg,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Sg,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Sg,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Cs=function(){function A(g,e){this.text=g,this.bounds=e}return A}(),W3=function(A,g,e,t){var I=w3(g,e),n=[],C=0;return I.forEach(function(l){if(e.textDecorationLine.length||l.trim().length>0)if(Sg.SUPPORT_RANGE_BOUNDS){var s=uy(t,C,l.length).getClientRects();if(s.length>1){var i=Xh(l),r=0;i.forEach(function(d){n.push(new Cs(d,Mt.fromDOMRectList(A,uy(t,r+C,d.length).getClientRects()))),r+=d.length})}else n.push(new Cs(l,Mt.fromDOMRectList(A,s)))}else{var c=t.splitText(l.length);n.push(new Cs(l,R3(A,t))),t=c}else Sg.SUPPORT_RANGE_BOUNDS||(t=t.splitText(l.length));C+=l.length}),n},R3=function(A,g){var e=g.ownerDocument;if(e){var t=e.createElement("html2canvaswrapper");t.appendChild(g.cloneNode(!0));var I=g.parentNode;if(I){I.replaceChild(t,g);var n=wr(A,t);return t.firstChild&&I.replaceChild(t.firstChild,t),n}}return Mt.EMPTY},uy=function(A,g,e){var t=A.ownerDocument;if(!t)throw new Error("Node has no owner document");var I=t.createRange();return I.setStart(A,g),I.setEnd(A,g+e),I},Xh=function(A){if(Sg.SUPPORT_NATIVE_TEXT_SEGMENTATION){var g=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(g.segment(A)).map(function(e){return e.segment})}return Z3(A)},v3=function(A,g){if(Sg.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(e.segment(A)).map(function(t){return t.segment})}return J3(A,g)},w3=function(A,g){return g.letterSpacing!==0?Xh(A):v3(A,g)},X3=[32,160,4961,65792,65793,4153,4241],J3=function(A,g){for(var e=nx(A,{lineBreak:g.lineBreak,wordBreak:g.overflowWrap==="break-word"?"break-word":g.wordBreak}),t=[],I,n=function(){if(I.value){var C=I.value.slice(),l=Xr(C),s="";l.forEach(function(i){X3.indexOf(i)===-1?s+=ng(i):(s.length&&t.push(s),t.push(ng(i)),s="")}),s.length&&t.push(s)}};!(I=e.next()).done;)n();return t},F3=function(){function A(g,e,t){this.text=k3(e.data,t.textTransform),this.textBounds=W3(g,this.text,t,e)}return A}(),k3=function(A,g){switch(g){case 1:return A.toLowerCase();case 3:return A.replace(H3,Y3);case 2:return A.toUpperCase();default:return A}},H3=/(^|\s|:|-|\(|\))([a-z])/g,Y3=function(A,g,e){return A.length>0?g+e.toUpperCase():A},zR=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I.src=t.currentSrc||t.src,I.intrinsicWidth=t.naturalWidth,I.intrinsicHeight=t.naturalHeight,I.context.cache.addImage(I.src),I}return g}(ht),TR=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I.canvas=t,I.intrinsicWidth=t.width,I.intrinsicHeight=t.height,I}return g}(ht),jR=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this,n=new XMLSerializer,C=wr(e,t);return t.setAttribute("width",C.width+"px"),t.setAttribute("height",C.height+"px"),I.svg="data:image/svg+xml,"+encodeURIComponent(n.serializeToString(t)),I.intrinsicWidth=t.width.baseVal.value,I.intrinsicHeight=t.height.baseVal.value,I.context.cache.addImage(I.svg),I}return g}(ht),OR=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I.value=t.value,I}return g}(ht),Qm=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I.start=t.start,I.reversed=typeof t.reversed=="boolean"&&t.reversed===!0,I}return g}(ht),Q3=[{type:15,flags:0,unit:"px",number:3}],K3=[{type:16,flags:0,number:50}],N3=function(A){return A.width>A.height?new Mt(A.left+(A.width-A.height)/2,A.top,A.height,A.height):A.width<A.height?new Mt(A.left,A.top+(A.height-A.width)/2,A.width,A.width):A},U3=function(A){var g=A.type===x3?new Array(A.value.length+1).join("•"):A.value;return g.length===0?A.placeholder||"":g},Ha="checkbox",Ya="radio",x3="password",my=707406591,Jh=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;switch(I.type=t.type.toLowerCase(),I.checked=t.checked,I.value=U3(t),(I.type===Ha||I.type===Ya)&&(I.styles.backgroundColor=3739148031,I.styles.borderTopColor=I.styles.borderRightColor=I.styles.borderBottomColor=I.styles.borderLeftColor=2779096575,I.styles.borderTopWidth=I.styles.borderRightWidth=I.styles.borderBottomWidth=I.styles.borderLeftWidth=1,I.styles.borderTopStyle=I.styles.borderRightStyle=I.styles.borderBottomStyle=I.styles.borderLeftStyle=1,I.styles.backgroundClip=[0],I.styles.backgroundOrigin=[0],I.bounds=N3(I.bounds)),I.type){case Ha:I.styles.borderTopRightRadius=I.styles.borderTopLeftRadius=I.styles.borderBottomRightRadius=I.styles.borderBottomLeftRadius=Q3;break;case Ya:I.styles.borderTopRightRadius=I.styles.borderTopLeftRadius=I.styles.borderBottomRightRadius=I.styles.borderBottomLeftRadius=K3;break}return I}return g}(ht),PR=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this,n=t.options[t.selectedIndex||0];return I.value=n&&n.text||"",I}return g}(ht),_R=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I.value=t.value,I}return g}(ht),qR=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;I.src=t.src,I.width=parseInt(t.width,10)||0,I.height=parseInt(t.height,10)||0,I.backgroundColor=I.styles.backgroundColor;try{if(t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.documentElement){I.tree=Av(e,t.contentWindow.document.documentElement);var n=t.contentWindow.document.documentElement?Is(e,getComputedStyle(t.contentWindow.document.documentElement).backgroundColor):Yt.TRANSPARENT,C=t.contentWindow.document.body?Is(e,getComputedStyle(t.contentWindow.document.body).backgroundColor):Yt.TRANSPARENT;I.backgroundColor=vI(n)?vI(C)?I.styles.backgroundColor:C:n}}catch{}return I}return g}(ht),E3=["OL","UL","MENU"],Lo=function(A,g,e,t){for(var I=g.firstChild,n=void 0;I;I=n)if(n=I.nextSibling,gv(I)&&I.data.trim().length>0)e.textNodes.push(new F3(A,I,e.styles));else if(VC(I))if(nv(I)&&I.assignedNodes)I.assignedNodes().forEach(function(l){return Lo(A,l,e,t)});else{var C=$R(A,I);C.styles.isVisible()&&(L3(I,C,t)?C.flags|=4:M3(C.styles)&&(C.flags|=2),E3.indexOf(I.tagName)!==-1&&(C.flags|=8),e.elements.push(C),I.slot,I.shadowRoot?Lo(A,I.shadowRoot,C,t):!Qa(I)&&!ev(I)&&!Ka(I)&&Lo(A,I,C,t))}},$R=function(A,g){return Nm(g)?new zR(A,g):tv(g)?new TR(A,g):ev(g)?new jR(A,g):D3(g)?new OR(A,g):z3(g)?new Qm(A,g):T3(g)?new Jh(A,g):Ka(g)?new PR(A,g):Qa(g)?new _R(A,g):Iv(g)?new qR(A,g):new ht(A,g)},Av=function(A,g){var e=$R(A,g);return e.flags|=4,Lo(A,g,e,e),e},L3=function(A,g,e){return g.styles.isPositionedWithZIndex()||g.styles.opacity<1||g.styles.isTransformed()||Fh(A)&&e.styles.isTransparent()},M3=function(A){return A.isPositioned()||A.isFloating()},gv=function(A){return A.nodeType===Node.TEXT_NODE},VC=function(A){return A.nodeType===Node.ELEMENT_NODE},Km=function(A){return VC(A)&&typeof A.style<"u"&&!Mo(A)},Mo=function(A){return typeof A.className=="object"},D3=function(A){return A.tagName==="LI"},z3=function(A){return A.tagName==="OL"},T3=function(A){return A.tagName==="INPUT"},j3=function(A){return A.tagName==="HTML"},ev=function(A){return A.tagName==="svg"},Fh=function(A){return A.tagName==="BODY"},tv=function(A){return A.tagName==="CANVAS"},By=function(A){return A.tagName==="VIDEO"},Nm=function(A){return A.tagName==="IMG"},Iv=function(A){return A.tagName==="IFRAME"},hy=function(A){return A.tagName==="STYLE"},O3=function(A){return A.tagName==="SCRIPT"},Qa=function(A){return A.tagName==="TEXTAREA"},Ka=function(A){return A.tagName==="SELECT"},nv=function(A){return A.tagName==="SLOT"},by=function(A){return A.tagName.indexOf("-")>0},P3=function(){function A(){this.counters={}}return A.prototype.getCounterValue=function(g){var e=this.counters[g];return e&&e.length?e[e.length-1]:1},A.prototype.getCounterValues=function(g){var e=this.counters[g];return e||[]},A.prototype.pop=function(g){var e=this;g.forEach(function(t){return e.counters[t].pop()})},A.prototype.parse=function(g){var e=this,t=g.counterIncrement,I=g.counterReset,n=!0;t!==null&&t.forEach(function(l){var s=e.counters[l.counter];s&&l.increment!==0&&(n=!1,s.length||s.push(1),s[Math.max(0,s.length-1)]+=l.increment)});var C=[];return n&&I.forEach(function(l){var s=e.counters[l.counter];C.push(l.counter),s||(s=e.counters[l.counter]=[]),s.push(l.reset)}),C},A}(),Zy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},py={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},_3={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},q3={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},CC=function(A,g,e,t,I,n){return A<g||A>e?Qs(A,I,n.length>0):t.integers.reduce(function(C,l,s){for(;A>=l;)A-=l,C+=t.values[s];return C},"")+n},Cv=function(A,g,e,t){var I="";do e||A--,I=t(A)+I,A/=g;while(A*g>=g);return I},Ig=function(A,g,e,t,I){var n=e-g+1;return(A<0?"-":"")+(Cv(Math.abs(A),n,t,function(C){return ng(Math.floor(C%n)+g)})+I)},In=function(A,g,e){e===void 0&&(e=". ");var t=g.length;return Cv(Math.abs(A),t,!1,function(I){return g[Math.floor(I%t)]})+e},iC=1,gI=2,eI=4,xl=8,Vt=function(A,g,e,t,I,n){if(A<-9999||A>9999)return Qs(A,4,I.length>0);var C=Math.abs(A),l=I;if(C===0)return g[0]+l;for(var s=0;C>0&&s<=4;s++){var i=C%10;i===0&&mg(n,iC)&&l!==""?l=g[i]+l:i>1||i===1&&s===0||i===1&&s===1&&mg(n,gI)||i===1&&s===1&&mg(n,eI)&&A>100||i===1&&s>1&&mg(n,xl)?l=g[i]+(s>0?e[s-1]:"")+l:i===1&&s>0&&(l=e[s-1]+l),C=Math.floor(C/10)}return(A<0?t:"")+l},Gy="十百千萬",yy="拾佰仟萬",fy="マイナス",Kd="마이너스",Qs=function(A,g,e){var t=e?". ":"",I=e?"、":"",n=e?", ":"",C=e?" ":"";switch(g){case 0:return"•"+C;case 1:return"◦"+C;case 2:return"◾"+C;case 5:var l=Ig(A,48,57,!0,t);return l.length<4?"0"+l:l;case 4:return In(A,"〇一二三四五六七八九",I);case 6:return CC(A,1,3999,Zy,3,t).toLowerCase();case 7:return CC(A,1,3999,Zy,3,t);case 8:return Ig(A,945,969,!1,t);case 9:return Ig(A,97,122,!1,t);case 10:return Ig(A,65,90,!1,t);case 11:return Ig(A,1632,1641,!0,t);case 12:case 49:return CC(A,1,9999,py,3,t);case 35:return CC(A,1,9999,py,3,t).toLowerCase();case 13:return Ig(A,2534,2543,!0,t);case 14:case 30:return Ig(A,6112,6121,!0,t);case 15:return In(A,"子丑寅卯辰巳午未申酉戌亥",I);case 16:return In(A,"甲乙丙丁戊己庚辛壬癸",I);case 17:case 48:return Vt(A,"零一二三四五六七八九",Gy,"負",I,gI|eI|xl);case 47:return Vt(A,"零壹貳參肆伍陸柒捌玖",yy,"負",I,iC|gI|eI|xl);case 42:return Vt(A,"零一二三四五六七八九",Gy,"负",I,gI|eI|xl);case 41:return Vt(A,"零壹贰叁肆伍陆柒捌玖",yy,"负",I,iC|gI|eI|xl);case 26:return Vt(A,"〇一二三四五六七八九","十百千万",fy,I,0);case 25:return Vt(A,"零壱弐参四伍六七八九","拾百千万",fy,I,iC|gI|eI);case 31:return Vt(A,"영일이삼사오육칠팔구","십백천만",Kd,n,iC|gI|eI);case 33:return Vt(A,"零一二三四五六七八九","十百千萬",Kd,n,0);case 32:return Vt(A,"零壹貳參四五六七八九","拾百千",Kd,n,iC|gI|eI);case 18:return Ig(A,2406,2415,!0,t);case 20:return CC(A,1,19999,q3,3,t);case 21:return Ig(A,2790,2799,!0,t);case 22:return Ig(A,2662,2671,!0,t);case 22:return CC(A,1,10999,_3,3,t);case 23:return In(A,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return In(A,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ig(A,3302,3311,!0,t);case 28:return In(A,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",I);case 29:return In(A,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",I);case 34:return Ig(A,3792,3801,!0,t);case 37:return Ig(A,6160,6169,!0,t);case 38:return Ig(A,4160,4169,!0,t);case 39:return Ig(A,2918,2927,!0,t);case 40:return Ig(A,1776,1785,!0,t);case 43:return Ig(A,3046,3055,!0,t);case 44:return Ig(A,3174,3183,!0,t);case 45:return Ig(A,3664,3673,!0,t);case 46:return Ig(A,3872,3881,!0,t);case 3:default:return Ig(A,48,57,!0,t)}},lv="data-html2canvas-ignore",Sy=function(){function A(g,e,t){if(this.context=g,this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new P3,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return A.prototype.toIFrame=function(g,e){var t=this,I=$3(g,e);if(!I.contentWindow)return Promise.reject("Unable to find iframe window");var n=g.defaultView.pageXOffset,C=g.defaultView.pageYOffset,l=I.contentWindow,s=l.document,i=eL(I).then(function(){return Dg(t,void 0,void 0,function(){var r,c;return kg(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(CL),l&&(l.scrollTo(e.left,e.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==e.top||l.scrollX!==e.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-e.left,l.scrollY-e.top,0,0))),r=this.options.onclone,c=this.clonedReferenceElement,typeof c>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,gL(s)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof r=="function"?[2,Promise.resolve().then(function(){return r(s,c)}).then(function(){return I})]:[2,I]}})})});return s.open(),s.write(IL(document.doctype)+"<html></html>"),nL(this.referenceElement.ownerDocument,n,C),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),i},A.prototype.createElementClone=function(g){if(Hm(g,2))debugger;if(tv(g))return this.createCanvasClone(g);if(By(g))return this.createVideoClone(g);if(hy(g))return this.createStyleClone(g);var e=g.cloneNode(!1);return Nm(e)&&(Nm(g)&&g.currentSrc&&g.currentSrc!==g.src&&(e.src=g.currentSrc,e.srcset=""),e.loading==="lazy"&&(e.loading="eager")),by(e)?this.createCustomElementClone(e):e},A.prototype.createCustomElementClone=function(g){var e=document.createElement("html2canvascustomelement");return Nd(g.style,e),e},A.prototype.createStyleClone=function(g){try{var e=g.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce(function(n,C){return C&&typeof C.cssText=="string"?n+C.cssText:n},""),I=g.cloneNode(!1);return I.textContent=t,I}}catch(n){if(this.context.logger.error("Unable to access cssRules property",n),n.name!=="SecurityError")throw n}return g.cloneNode(!1)},A.prototype.createCanvasClone=function(g){var e;if(this.options.inlineImages&&g.ownerDocument){var t=g.ownerDocument.createElement("img");try{return t.src=g.toDataURL(),t}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",g)}}var I=g.cloneNode(!1);try{I.width=g.width,I.height=g.height;var n=g.getContext("2d"),C=I.getContext("2d");if(C)if(!this.options.allowTaint&&n)C.putImageData(n.getImageData(0,0,g.width,g.height),0,0);else{var l=(e=g.getContext("webgl2"))!==null&&e!==void 0?e:g.getContext("webgl");if(l){var s=l.getContextAttributes();(s==null?void 0:s.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",g)}C.drawImage(g,0,0)}return I}catch{this.context.logger.info("Unable to clone canvas as it is tainted",g)}return I},A.prototype.createVideoClone=function(g){var e=g.ownerDocument.createElement("canvas");e.width=g.offsetWidth,e.height=g.offsetHeight;var t=e.getContext("2d");try{return t&&(t.drawImage(g,0,0,e.width,e.height),this.options.allowTaint||t.getImageData(0,0,e.width,e.height)),e}catch{this.context.logger.info("Unable to clone video as it is tainted",g)}var I=g.ownerDocument.createElement("canvas");return I.width=g.offsetWidth,I.height=g.offsetHeight,I},A.prototype.appendChildNode=function(g,e,t){(!VC(e)||!O3(e)&&!e.hasAttribute(lv)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(e)))&&(!this.options.copyStyles||!VC(e)||!hy(e))&&g.appendChild(this.cloneNode(e,t))},A.prototype.cloneChildNodes=function(g,e,t){for(var I=this,n=g.shadowRoot?g.shadowRoot.firstChild:g.firstChild;n;n=n.nextSibling)if(VC(n)&&nv(n)&&typeof n.assignedNodes=="function"){var C=n.assignedNodes();C.length&&C.forEach(function(l){return I.appendChildNode(e,l,t)})}else this.appendChildNode(e,n,t)},A.prototype.cloneNode=function(g,e){if(gv(g))return document.createTextNode(g.data);if(!g.ownerDocument)return g.cloneNode(!1);var t=g.ownerDocument.defaultView;if(t&&VC(g)&&(Km(g)||Mo(g))){var I=this.createElementClone(g);I.style.transitionProperty="none";var n=t.getComputedStyle(g),C=t.getComputedStyle(g,":before"),l=t.getComputedStyle(g,":after");this.referenceElement===g&&Km(I)&&(this.clonedReferenceElement=I),Fh(I)&&iL(I);var s=this.counters.parse(new ey(this.context,n)),i=this.resolvePseudoContent(g,I,C,ls.BEFORE);by(g)&&(e=!0),By(g)||this.cloneChildNodes(g,I,e),i&&I.insertBefore(i,I.firstChild);var r=this.resolvePseudoContent(g,I,l,ls.AFTER);return r&&I.appendChild(r),this.counters.pop(s),(n&&(this.options.copyStyles||Mo(g))&&!Iv(g)||e)&&Nd(n,I),(g.scrollTop!==0||g.scrollLeft!==0)&&this.scrolledElements.push([I,g.scrollLeft,g.scrollTop]),(Qa(g)||Ka(g))&&(Qa(I)||Ka(I))&&(I.value=g.value),I}return g.cloneNode(!1)},A.prototype.resolvePseudoContent=function(g,e,t,I){var n=this;if(t){var C=t.content,l=e.ownerDocument;if(!(!l||!C||C==="none"||C==="-moz-alt-content"||t.display==="none")){this.counters.parse(new ey(this.context,t));var s=new DE(this.context,t),i=l.createElement("html2canvaspseudoelement");Nd(t,i),s.content.forEach(function(c){if(c.type===0)i.appendChild(l.createTextNode(c.value));else if(c.type===22){var d=l.createElement("img");d.src=c.value,d.style.opacity="1",i.appendChild(d)}else if(c.type===18){if(c.name==="attr"){var h=c.values.filter(QA);h.length&&i.appendChild(l.createTextNode(g.getAttribute(h[0].value)||""))}else if(c.name==="counter"){var Z=c.values.filter(zC),y=Z[0],S=Z[1];if(y&&QA(y)){var b=n.counters.getCounterValue(y.value),m=S&&QA(S)?km.parse(n.context,S.value):3;i.appendChild(l.createTextNode(Qs(b,m,!1)))}}else if(c.name==="counters"){var G=c.values.filter(zC),y=G[0],V=G[1],S=G[2];if(y&&QA(y)){var W=n.counters.getCounterValues(y.value),R=S&&QA(S)?km.parse(n.context,S.value):3,X=V&&V.type===0?V.value:"",F=W.map(function(_){return Qs(_,R,!1)}).join(X);i.appendChild(l.createTextNode(F))}}}else if(c.type===20)switch(c.value){case"open-quote":i.appendChild(l.createTextNode(gy(s.quotes,n.quoteDepth++,!0)));break;case"close-quote":i.appendChild(l.createTextNode(gy(s.quotes,--n.quoteDepth,!1)));break;default:i.appendChild(l.createTextNode(c.value))}}),i.className=Um+" "+xm;var r=I===ls.BEFORE?" "+Um:" "+xm;return Mo(e)?e.className.baseValue+=r:e.className+=r,i}}},A.destroy=function(g){return g.parentNode?(g.parentNode.removeChild(g),!0):!1},A}(),ls;(function(A){A[A.BEFORE=0]="BEFORE",A[A.AFTER=1]="AFTER"})(ls||(ls={}));var $3=function(A,g){var e=A.createElement("iframe");return e.className="html2canvas-container",e.style.visibility="hidden",e.style.position="fixed",e.style.left="-10000px",e.style.top="0px",e.style.border="0",e.width=g.width.toString(),e.height=g.height.toString(),e.scrolling="no",e.setAttribute(lv,"true"),A.body.appendChild(e),e},AL=function(A){return new Promise(function(g){if(A.complete){g();return}if(!A.src){g();return}A.onload=g,A.onerror=g})},gL=function(A){return Promise.all([].slice.call(A.images,0).map(AL))},eL=function(A){return new Promise(function(g,e){var t=A.contentWindow;if(!t)return e("No window assigned for iframe");var I=t.document;t.onload=A.onload=function(){t.onload=A.onload=null;var n=setInterval(function(){I.body.childNodes.length>0&&I.readyState==="complete"&&(clearInterval(n),g(A))},50)}})},tL=["all","d","content"],Nd=function(A,g){for(var e=A.length-1;e>=0;e--){var t=A.item(e);tL.indexOf(t)===-1&&g.style.setProperty(t,A.getPropertyValue(t))}return g},IL=function(A){var g="";return A&&(g+="<!DOCTYPE ",A.name&&(g+=A.name),A.internalSubset&&(g+=A.internalSubset),A.publicId&&(g+='"'+A.publicId+'"'),A.systemId&&(g+='"'+A.systemId+'"'),g+=">"),g},nL=function(A,g,e){A&&A.defaultView&&(g!==A.defaultView.pageXOffset||e!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(g,e)},CL=function(A){var g=A[0],e=A[1],t=A[2];g.scrollLeft=e,g.scrollTop=t},lL=":before",sL=":after",Um="___html2canvas___pseudoelement_before",xm="___html2canvas___pseudoelement_after",Vy=`{
    content: "" !important;
    display: none !important;
}`,iL=function(A){oL(A,"."+Um+lL+Vy+`
         .`+xm+sL+Vy)},oL=function(A,g){var e=A.ownerDocument;if(e){var t=e.createElement("style");t.textContent=g,A.appendChild(t)}},sv=function(){function A(){}return A.getOrigin=function(g){var e=A._link;return e?(e.href=g,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},A.isSameOrigin=function(g){return A.getOrigin(g)===A._origin},A.setContext=function(g){A._link=g.document.createElement("a"),A._origin=A.getOrigin(g.location.href)},A._origin="about:blank",A}(),aL=function(){function A(g,e){this.context=g,this._options=e,this._cache={}}return A.prototype.addImage=function(g){var e=Promise.resolve();return this.has(g)||(xd(g)||uL(g))&&(this._cache[g]=this.loadImage(g)).catch(function(){}),e},A.prototype.match=function(g){return this._cache[g]},A.prototype.loadImage=function(g){return Dg(this,void 0,void 0,function(){var e,t,I,n,C=this;return kg(this,function(l){switch(l.label){case 0:return e=sv.isSameOrigin(g),t=!Ud(g)&&this._options.useCORS===!0&&Sg.SUPPORT_CORS_IMAGES&&!e,I=!Ud(g)&&!e&&!xd(g)&&typeof this._options.proxy=="string"&&Sg.SUPPORT_CORS_XHR&&!t,!e&&this._options.allowTaint===!1&&!Ud(g)&&!xd(g)&&!I&&!t?[2]:(n=g,I?[4,this.proxy(n)]:[3,2]);case 1:n=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+g.substring(0,256)),[4,new Promise(function(s,i){var r=new Image;r.onload=function(){return s(r)},r.onerror=i,(mL(n)||t)&&(r.crossOrigin="anonymous"),r.src=n,r.complete===!0&&setTimeout(function(){return s(r)},500),C._options.imageTimeout>0&&setTimeout(function(){return i("Timed out ("+C._options.imageTimeout+"ms) loading image")},C._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},A.prototype.has=function(g){return typeof this._cache[g]<"u"},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(g){var e=this,t=this._options.proxy;if(!t)throw new Error("No proxy defined");var I=g.substring(0,256);return new Promise(function(n,C){var l=Sg.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(s.status===200)if(l==="text")n(s.response);else{var c=new FileReader;c.addEventListener("load",function(){return n(c.result)},!1),c.addEventListener("error",function(d){return C(d)},!1),c.readAsDataURL(s.response)}else C("Failed to proxy resource "+I+" with status code "+s.status)},s.onerror=C;var i=t.indexOf("?")>-1?"&":"?";if(s.open("GET",""+t+i+"url="+encodeURIComponent(g)+"&responseType="+l),l!=="text"&&s instanceof XMLHttpRequest&&(s.responseType=l),e._options.imageTimeout){var r=e._options.imageTimeout;s.timeout=r,s.ontimeout=function(){return C("Timed out ("+r+"ms) proxying "+I)}}s.send()})},A}(),rL=/^data:image\/svg\+xml/i,cL=/^data:image\/.*;base64,/i,dL=/^data:image\/.*/i,uL=function(A){return Sg.SUPPORT_SVG_DRAWING||!BL(A)},Ud=function(A){return dL.test(A)},mL=function(A){return cL.test(A)},xd=function(A){return A.substr(0,4)==="blob"},BL=function(A){return A.substr(-3).toLowerCase()==="svg"||rL.test(A)},L=function(){function A(g,e){this.type=0,this.x=g,this.y=e}return A.prototype.add=function(g,e){return new A(this.x+g,this.y+e)},A}(),lC=function(A,g,e){return new L(A.x+(g.x-A.x)*e,A.y+(g.y-A.y)*e)},Bo=function(){function A(g,e,t,I){this.type=1,this.start=g,this.startControl=e,this.endControl=t,this.end=I}return A.prototype.subdivide=function(g,e){var t=lC(this.start,this.startControl,g),I=lC(this.startControl,this.endControl,g),n=lC(this.endControl,this.end,g),C=lC(t,I,g),l=lC(I,n,g),s=lC(C,l,g);return e?new A(this.start,t,C,s):new A(s,l,n,this.end)},A.prototype.add=function(g,e){return new A(this.start.add(g,e),this.startControl.add(g,e),this.endControl.add(g,e),this.end.add(g,e))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A}(),Xe=function(A){return A.type===1},hL=function(){function A(g){var e=g.styles,t=g.bounds,I=Nl(e.borderTopLeftRadius,t.width,t.height),n=I[0],C=I[1],l=Nl(e.borderTopRightRadius,t.width,t.height),s=l[0],i=l[1],r=Nl(e.borderBottomRightRadius,t.width,t.height),c=r[0],d=r[1],h=Nl(e.borderBottomLeftRadius,t.width,t.height),Z=h[0],y=h[1],S=[];S.push((n+s)/t.width),S.push((Z+c)/t.width),S.push((C+y)/t.height),S.push((i+d)/t.height);var b=Math.max.apply(Math,S);b>1&&(n/=b,C/=b,s/=b,i/=b,c/=b,d/=b,Z/=b,y/=b);var m=t.width-s,G=t.height-d,V=t.width-c,W=t.height-y,R=e.borderTopWidth,X=e.borderRightWidth,F=e.borderBottomWidth,H=e.borderLeftWidth,K=xA(e.paddingTop,g.bounds.width),_=xA(e.paddingRight,g.bounds.width),gA=xA(e.paddingBottom,g.bounds.width),AA=xA(e.paddingLeft,g.bounds.width);this.topLeftBorderDoubleOuterBox=n>0||C>0?zA(t.left+H/3,t.top+R/3,n-H/3,C-R/3,vA.TOP_LEFT):new L(t.left+H/3,t.top+R/3),this.topRightBorderDoubleOuterBox=n>0||C>0?zA(t.left+m,t.top+R/3,s-X/3,i-R/3,vA.TOP_RIGHT):new L(t.left+t.width-X/3,t.top+R/3),this.bottomRightBorderDoubleOuterBox=c>0||d>0?zA(t.left+V,t.top+G,c-X/3,d-F/3,vA.BOTTOM_RIGHT):new L(t.left+t.width-X/3,t.top+t.height-F/3),this.bottomLeftBorderDoubleOuterBox=Z>0||y>0?zA(t.left+H/3,t.top+W,Z-H/3,y-F/3,vA.BOTTOM_LEFT):new L(t.left+H/3,t.top+t.height-F/3),this.topLeftBorderDoubleInnerBox=n>0||C>0?zA(t.left+H*2/3,t.top+R*2/3,n-H*2/3,C-R*2/3,vA.TOP_LEFT):new L(t.left+H*2/3,t.top+R*2/3),this.topRightBorderDoubleInnerBox=n>0||C>0?zA(t.left+m,t.top+R*2/3,s-X*2/3,i-R*2/3,vA.TOP_RIGHT):new L(t.left+t.width-X*2/3,t.top+R*2/3),this.bottomRightBorderDoubleInnerBox=c>0||d>0?zA(t.left+V,t.top+G,c-X*2/3,d-F*2/3,vA.BOTTOM_RIGHT):new L(t.left+t.width-X*2/3,t.top+t.height-F*2/3),this.bottomLeftBorderDoubleInnerBox=Z>0||y>0?zA(t.left+H*2/3,t.top+W,Z-H*2/3,y-F*2/3,vA.BOTTOM_LEFT):new L(t.left+H*2/3,t.top+t.height-F*2/3),this.topLeftBorderStroke=n>0||C>0?zA(t.left+H/2,t.top+R/2,n-H/2,C-R/2,vA.TOP_LEFT):new L(t.left+H/2,t.top+R/2),this.topRightBorderStroke=n>0||C>0?zA(t.left+m,t.top+R/2,s-X/2,i-R/2,vA.TOP_RIGHT):new L(t.left+t.width-X/2,t.top+R/2),this.bottomRightBorderStroke=c>0||d>0?zA(t.left+V,t.top+G,c-X/2,d-F/2,vA.BOTTOM_RIGHT):new L(t.left+t.width-X/2,t.top+t.height-F/2),this.bottomLeftBorderStroke=Z>0||y>0?zA(t.left+H/2,t.top+W,Z-H/2,y-F/2,vA.BOTTOM_LEFT):new L(t.left+H/2,t.top+t.height-F/2),this.topLeftBorderBox=n>0||C>0?zA(t.left,t.top,n,C,vA.TOP_LEFT):new L(t.left,t.top),this.topRightBorderBox=s>0||i>0?zA(t.left+m,t.top,s,i,vA.TOP_RIGHT):new L(t.left+t.width,t.top),this.bottomRightBorderBox=c>0||d>0?zA(t.left+V,t.top+G,c,d,vA.BOTTOM_RIGHT):new L(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=Z>0||y>0?zA(t.left,t.top+W,Z,y,vA.BOTTOM_LEFT):new L(t.left,t.top+t.height),this.topLeftPaddingBox=n>0||C>0?zA(t.left+H,t.top+R,Math.max(0,n-H),Math.max(0,C-R),vA.TOP_LEFT):new L(t.left+H,t.top+R),this.topRightPaddingBox=s>0||i>0?zA(t.left+Math.min(m,t.width-X),t.top+R,m>t.width+X?0:Math.max(0,s-X),Math.max(0,i-R),vA.TOP_RIGHT):new L(t.left+t.width-X,t.top+R),this.bottomRightPaddingBox=c>0||d>0?zA(t.left+Math.min(V,t.width-H),t.top+Math.min(G,t.height-F),Math.max(0,c-X),Math.max(0,d-F),vA.BOTTOM_RIGHT):new L(t.left+t.width-X,t.top+t.height-F),this.bottomLeftPaddingBox=Z>0||y>0?zA(t.left+H,t.top+Math.min(W,t.height-F),Math.max(0,Z-H),Math.max(0,y-F),vA.BOTTOM_LEFT):new L(t.left+H,t.top+t.height-F),this.topLeftContentBox=n>0||C>0?zA(t.left+H+AA,t.top+R+K,Math.max(0,n-(H+AA)),Math.max(0,C-(R+K)),vA.TOP_LEFT):new L(t.left+H+AA,t.top+R+K),this.topRightContentBox=s>0||i>0?zA(t.left+Math.min(m,t.width+H+AA),t.top+R+K,m>t.width+H+AA?0:s-H+AA,i-(R+K),vA.TOP_RIGHT):new L(t.left+t.width-(X+_),t.top+R+K),this.bottomRightContentBox=c>0||d>0?zA(t.left+Math.min(V,t.width-(H+AA)),t.top+Math.min(G,t.height+R+K),Math.max(0,c-(X+_)),d-(F+gA),vA.BOTTOM_RIGHT):new L(t.left+t.width-(X+_),t.top+t.height-(F+gA)),this.bottomLeftContentBox=Z>0||y>0?zA(t.left+H+AA,t.top+W,Math.max(0,Z-(H+AA)),y-(F+gA),vA.BOTTOM_LEFT):new L(t.left+H+AA,t.top+t.height-(F+gA))}return A}(),vA;(function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vA||(vA={}));var zA=function(A,g,e,t,I){var n=4*((Math.sqrt(2)-1)/3),C=e*n,l=t*n,s=A+e,i=g+t;switch(I){case vA.TOP_LEFT:return new Bo(new L(A,i),new L(A,i-l),new L(s-C,g),new L(s,g));case vA.TOP_RIGHT:return new Bo(new L(A,g),new L(A+C,g),new L(s,i-l),new L(s,i));case vA.BOTTOM_RIGHT:return new Bo(new L(s,g),new L(s,g+l),new L(A+C,i),new L(A,i));case vA.BOTTOM_LEFT:default:return new Bo(new L(s,i),new L(s-C,i),new L(A,g+l),new L(A,g))}},Na=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},bL=function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]},Ua=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},ZL=function(){function A(g,e,t){this.offsetX=g,this.offsetY=e,this.matrix=t,this.type=0,this.target=6}return A}(),ho=function(){function A(g,e){this.path=g,this.target=e,this.type=1}return A}(),pL=function(){function A(g){this.opacity=g,this.type=2,this.target=6}return A}(),GL=function(A){return A.type===0},iv=function(A){return A.type===1},yL=function(A){return A.type===2},Wy=function(A,g){return A.length===g.length?A.some(function(e,t){return e===g[t]}):!1},fL=function(A,g,e,t,I){return A.map(function(n,C){switch(C){case 0:return n.add(g,e);case 1:return n.add(g+t,e);case 2:return n.add(g+t,e+I);case 3:return n.add(g,e+I)}return n})},ov=function(){function A(g){this.element=g,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return A}(),av=function(){function A(g,e){if(this.container=g,this.parent=e,this.effects=[],this.curves=new hL(this.container),this.container.styles.opacity<1&&this.effects.push(new pL(this.container.styles.opacity)),this.container.styles.transform!==null){var t=this.container.bounds.left+this.container.styles.transformOrigin[0].number,I=this.container.bounds.top+this.container.styles.transformOrigin[1].number,n=this.container.styles.transform;this.effects.push(new ZL(t,I,n))}if(this.container.styles.overflowX!==0){var C=Na(this.curves),l=Ua(this.curves);Wy(C,l)?this.effects.push(new ho(C,6)):(this.effects.push(new ho(C,2)),this.effects.push(new ho(l,4)))}}return A.prototype.getEffects=function(g){for(var e=[2,3].indexOf(this.container.styles.position)===-1,t=this.parent,I=this.effects.slice(0);t;){var n=t.effects.filter(function(s){return!iv(s)});if(e||t.container.styles.position!==0||!t.parent){if(I.unshift.apply(I,n),e=[2,3].indexOf(t.container.styles.position)===-1,t.container.styles.overflowX!==0){var C=Na(t.curves),l=Ua(t.curves);Wy(C,l)||I.unshift(new ho(l,6))}}else I.unshift.apply(I,n);t=t.parent}return I.filter(function(s){return mg(s.target,g)})},A}(),Em=function(A,g,e,t){A.container.elements.forEach(function(I){var n=mg(I.flags,4),C=mg(I.flags,2),l=new av(I,A);mg(I.styles.display,2048)&&t.push(l);var s=mg(I.flags,8)?[]:t;if(n||C){var i=n||I.styles.isPositioned()?e:g,r=new ov(l);if(I.styles.isPositioned()||I.styles.opacity<1||I.styles.isTransformed()){var c=I.styles.zIndex.order;if(c<0){var d=0;i.negativeZIndex.some(function(Z,y){return c>Z.element.container.styles.zIndex.order?(d=y,!1):d>0}),i.negativeZIndex.splice(d,0,r)}else if(c>0){var h=0;i.positiveZIndex.some(function(Z,y){return c>=Z.element.container.styles.zIndex.order?(h=y+1,!1):h>0}),i.positiveZIndex.splice(h,0,r)}else i.zeroOrAutoZIndexOrTransformedOrOpacity.push(r)}else I.styles.isFloating()?i.nonPositionedFloats.push(r):i.nonPositionedInlineLevel.push(r);Em(l,r,n?r:e,s)}else I.styles.isInlineLevel()?g.inlineLevel.push(l):g.nonInlineLevel.push(l),Em(l,g,e,s);mg(I.flags,8)&&rv(I,s)})},rv=function(A,g){for(var e=A instanceof Qm?A.start:1,t=A instanceof Qm?A.reversed:!1,I=0;I<g.length;I++){var n=g[I];n.container instanceof OR&&typeof n.container.value=="number"&&n.container.value!==0&&(e=n.container.value),n.listValue=Qs(e,n.container.styles.listStyleType,!0),e+=t?-1:1}},SL=function(A){var g=new av(A,null),e=new ov(g),t=[];return Em(g,e,e,t),rv(g.container,t),e},Ry=function(A,g){switch(g){case 0:return He(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return He(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return He(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);case 3:default:return He(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},VL=function(A,g){switch(g){case 0:return He(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return He(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return He(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);case 3:default:return He(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}},WL=function(A,g){switch(g){case 0:return He(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return He(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return He(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);case 3:default:return He(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}},RL=function(A,g){switch(g){case 0:return bo(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return bo(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return bo(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);case 3:default:return bo(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}},bo=function(A,g){var e=[];return Xe(A)?e.push(A.subdivide(.5,!1)):e.push(A),Xe(g)?e.push(g.subdivide(.5,!0)):e.push(g),e},He=function(A,g,e,t){var I=[];return Xe(A)?I.push(A.subdivide(.5,!1)):I.push(A),Xe(e)?I.push(e.subdivide(.5,!0)):I.push(e),Xe(t)?I.push(t.subdivide(.5,!0).reverse()):I.push(t),Xe(g)?I.push(g.subdivide(.5,!1).reverse()):I.push(g),I},cv=function(A){var g=A.bounds,e=A.styles;return g.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},xa=function(A){var g=A.styles,e=A.bounds,t=xA(g.paddingLeft,e.width),I=xA(g.paddingRight,e.width),n=xA(g.paddingTop,e.width),C=xA(g.paddingBottom,e.width);return e.add(t+g.borderLeftWidth,n+g.borderTopWidth,-(g.borderRightWidth+g.borderLeftWidth+t+I),-(g.borderTopWidth+g.borderBottomWidth+n+C))},vL=function(A,g){return A===0?g.bounds:A===2?xa(g):cv(g)},wL=function(A,g){return A===0?g.bounds:A===2?xa(g):cv(g)},Ed=function(A,g,e){var t=vL(oC(A.styles.backgroundOrigin,g),A),I=wL(oC(A.styles.backgroundClip,g),A),n=XL(oC(A.styles.backgroundSize,g),e,t),C=n[0],l=n[1],s=Nl(oC(A.styles.backgroundPosition,g),t.width-C,t.height-l),i=JL(oC(A.styles.backgroundRepeat,g),s,n,t,I),r=Math.round(t.left+s[0]),c=Math.round(t.top+s[1]);return[i,r,c,C,l]},sC=function(A){return QA(A)&&A.value===HC.AUTO},Zo=function(A){return typeof A=="number"},XL=function(A,g,e){var t=g[0],I=g[1],n=g[2],C=A[0],l=A[1];if(!C)return[0,0];if(ig(C)&&l&&ig(l))return[xA(C,e.width),xA(l,e.height)];var s=Zo(n);if(QA(C)&&(C.value===HC.CONTAIN||C.value===HC.COVER)){if(Zo(n)){var i=e.width/e.height;return i<n!=(C.value===HC.COVER)?[e.width,e.width/n]:[e.height*n,e.height]}return[e.width,e.height]}var r=Zo(t),c=Zo(I),d=r||c;if(sC(C)&&(!l||sC(l))){if(r&&c)return[t,I];if(!s&&!d)return[e.width,e.height];if(d&&s){var h=r?t:I*n,Z=c?I:t/n;return[h,Z]}var y=r?t:e.width,S=c?I:e.height;return[y,S]}if(s){var b=0,m=0;return ig(C)?b=xA(C,e.width):ig(l)&&(m=xA(l,e.height)),sC(C)?b=m*n:(!l||sC(l))&&(m=b/n),[b,m]}var G=null,V=null;if(ig(C)?G=xA(C,e.width):l&&ig(l)&&(V=xA(l,e.height)),G!==null&&(!l||sC(l))&&(V=r&&c?G/t*I:e.height),V!==null&&sC(C)&&(G=r&&c?V/I*t:e.width),G!==null&&V!==null)return[G,V];throw new Error("Unable to calculate background-size for element")},oC=function(A,g){var e=A[g];return typeof e>"u"?A[0]:e},JL=function(A,g,e,t,I){var n=g[0],C=g[1],l=e[0],s=e[1];switch(A){case 2:return[new L(Math.round(t.left),Math.round(t.top+C)),new L(Math.round(t.left+t.width),Math.round(t.top+C)),new L(Math.round(t.left+t.width),Math.round(s+t.top+C)),new L(Math.round(t.left),Math.round(s+t.top+C))];case 3:return[new L(Math.round(t.left+n),Math.round(t.top)),new L(Math.round(t.left+n+l),Math.round(t.top)),new L(Math.round(t.left+n+l),Math.round(t.height+t.top)),new L(Math.round(t.left+n),Math.round(t.height+t.top))];case 1:return[new L(Math.round(t.left+n),Math.round(t.top+C)),new L(Math.round(t.left+n+l),Math.round(t.top+C)),new L(Math.round(t.left+n+l),Math.round(t.top+C+s)),new L(Math.round(t.left+n),Math.round(t.top+C+s))];default:return[new L(Math.round(I.left),Math.round(I.top)),new L(Math.round(I.left+I.width),Math.round(I.top)),new L(Math.round(I.left+I.width),Math.round(I.height+I.top)),new L(Math.round(I.left),Math.round(I.height+I.top))]}},FL="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",vy="Hidden Text",kL=function(){function A(g){this._data={},this._document=g}return A.prototype.parseMetrics=function(g,e){var t=this._document.createElement("div"),I=this._document.createElement("img"),n=this._document.createElement("span"),C=this._document.body;t.style.visibility="hidden",t.style.fontFamily=g,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",C.appendChild(t),I.src=FL,I.width=1,I.height=1,I.style.margin="0",I.style.padding="0",I.style.verticalAlign="baseline",n.style.fontFamily=g,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.appendChild(this._document.createTextNode(vy)),t.appendChild(n),t.appendChild(I);var l=I.offsetTop-n.offsetTop+2;t.removeChild(n),t.appendChild(this._document.createTextNode(vy)),t.style.lineHeight="normal",I.style.verticalAlign="super";var s=I.offsetTop-t.offsetTop+2;return C.removeChild(t),{baseline:l,middle:s}},A.prototype.getMetrics=function(g,e){var t=g+" "+e;return typeof this._data[t]>"u"&&(this._data[t]=this.parseMetrics(g,e)),this._data[t]},A}(),dv=function(){function A(g,e){this.context=g,this.options=e}return A}(),HL=1e4,YL=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I._activeEffects=[],I.canvas=t.canvas?t.canvas:document.createElement("canvas"),I.ctx=I.canvas.getContext("2d"),t.canvas||(I.canvas.width=Math.floor(t.width*t.scale),I.canvas.height=Math.floor(t.height*t.scale),I.canvas.style.width=t.width+"px",I.canvas.style.height=t.height+"px"),I.fontMetrics=new kL(document),I.ctx.scale(I.options.scale,I.options.scale),I.ctx.translate(-t.x,-t.y),I.ctx.textBaseline="bottom",I._activeEffects=[],I.context.logger.debug("Canvas renderer initialized ("+t.width+"x"+t.height+") with scale "+t.scale),I}return g.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(I){return t.applyEffect(I)})},g.prototype.applyEffect=function(e){this.ctx.save(),yL(e)&&(this.ctx.globalAlpha=e.opacity),GL(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),iv(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},g.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},g.prototype.renderStack=function(e){return Dg(this,void 0,void 0,function(){var t;return kg(this,function(I){switch(I.label){case 0:return t=e.element.container.styles,t.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:I.sent(),I.label=2;case 2:return[2]}})})},g.prototype.renderNode=function(e){return Dg(this,void 0,void 0,function(){return kg(this,function(t){switch(t.label){case 0:if(mg(e.container.flags,16))debugger;return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},g.prototype.renderTextWithLetterSpacing=function(e,t,I){var n=this;if(t===0)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+I);else{var C=Xh(e.text);C.reduce(function(l,s){return n.ctx.fillText(s,l,e.bounds.top+I),l+n.ctx.measureText(s).width},e.bounds.left)}},g.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(C){return C==="normal"||C==="small-caps"}).join(""),I=xL(e.fontFamily).join(", "),n=Ps(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,I].join(" "),I,n]},g.prototype.renderTextNode=function(e,t){return Dg(this,void 0,void 0,function(){var I,n,C,l,s,i,r,c,d=this;return kg(this,function(h){return I=this.createFontStyle(t),n=I[0],C=I[1],l=I[2],this.ctx.font=n,this.ctx.direction=t.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(C,l),i=s.baseline,r=s.middle,c=t.paintOrder,e.textBounds.forEach(function(Z){c.forEach(function(y){switch(y){case 0:d.ctx.fillStyle=Zg(t.color),d.renderTextWithLetterSpacing(Z,t.letterSpacing,i);var S=t.textShadow;S.length&&Z.text.trim().length&&(S.slice(0).reverse().forEach(function(b){d.ctx.shadowColor=Zg(b.color),d.ctx.shadowOffsetX=b.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=b.offsetY.number*d.options.scale,d.ctx.shadowBlur=b.blur.number,d.renderTextWithLetterSpacing(Z,t.letterSpacing,i)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),t.textDecorationLine.length&&(d.ctx.fillStyle=Zg(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(b){switch(b){case 1:d.ctx.fillRect(Z.bounds.left,Math.round(Z.bounds.top+i),Z.bounds.width,1);break;case 2:d.ctx.fillRect(Z.bounds.left,Math.round(Z.bounds.top),Z.bounds.width,1);break;case 3:d.ctx.fillRect(Z.bounds.left,Math.ceil(Z.bounds.top+r),Z.bounds.width,1);break}}));break;case 1:t.webkitTextStrokeWidth&&Z.text.trim().length&&(d.ctx.strokeStyle=Zg(t.webkitTextStrokeColor),d.ctx.lineWidth=t.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(Z.text,Z.bounds.left,Z.bounds.top+i)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},g.prototype.renderReplacedElement=function(e,t,I){if(I&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=xa(e),C=Ua(t);this.path(C),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(I,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},g.prototype.renderNodeContent=function(e){return Dg(this,void 0,void 0,function(){var t,I,n,C,l,s,m,m,i,r,c,d,V,h,Z,W,y,S,b,m,G,V,W;return kg(this,function(R){switch(R.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,I=e.curves,n=t.styles,C=0,l=t.textNodes,R.label=1;case 1:return C<l.length?(s=l[C],[4,this.renderTextNode(s,n)]):[3,4];case 2:R.sent(),R.label=3;case 3:return C++,[3,1];case 4:if(!(t instanceof zR))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return m=R.sent(),this.renderReplacedElement(t,I,m),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof TR&&this.renderReplacedElement(t,I,t.canvas),!(t instanceof jR))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return m=R.sent(),this.renderReplacedElement(t,I,m),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof qR&&t.tree?(i=new g(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}),[4,i.render(t.tree)]):[3,14];case 13:r=R.sent(),t.width&&t.height&&this.ctx.drawImage(r,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),R.label=14;case 14:if(t instanceof Jh&&(c=Math.min(t.bounds.width,t.bounds.height),t.type===Ha?t.checked&&(this.ctx.save(),this.path([new L(t.bounds.left+c*.39363,t.bounds.top+c*.79),new L(t.bounds.left+c*.16,t.bounds.top+c*.5549),new L(t.bounds.left+c*.27347,t.bounds.top+c*.44071),new L(t.bounds.left+c*.39694,t.bounds.top+c*.5649),new L(t.bounds.left+c*.72983,t.bounds.top+c*.23),new L(t.bounds.left+c*.84,t.bounds.top+c*.34085),new L(t.bounds.left+c*.39363,t.bounds.top+c*.79)]),this.ctx.fillStyle=Zg(my),this.ctx.fill(),this.ctx.restore()):t.type===Ya&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+c/2,t.bounds.top+c/2,c/4,0,Math.PI*2,!0),this.ctx.fillStyle=Zg(my),this.ctx.fill(),this.ctx.restore())),QL(t)&&t.value.length){switch(d=this.createFontStyle(n),V=d[0],h=d[1],Z=this.fontMetrics.getMetrics(V,h).baseline,this.ctx.font=V,this.ctx.fillStyle=Zg(n.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=NL(t.styles.textAlign),W=xa(t),y=0,t.styles.textAlign){case 1:y+=W.width/2;break;case 2:y+=W.width;break}S=W.add(y,0,0,-W.height/2+1),this.ctx.save(),this.path([new L(W.left,W.top),new L(W.left+W.width,W.top),new L(W.left+W.width,W.top+W.height),new L(W.left,W.top+W.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cs(t.value,S),n.letterSpacing,Z),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mg(t.styles.display,2048))return[3,20];if(t.styles.listStyleImage===null)return[3,19];if(b=t.styles.listStyleImage,b.type!==0)return[3,18];m=void 0,G=b.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(G)];case 16:return m=R.sent(),this.ctx.drawImage(m,t.bounds.left-(m.width+10),t.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+G),[3,18];case 18:return[3,20];case 19:e.listValue&&t.styles.listStyleType!==-1&&(V=this.createFontStyle(n)[0],this.ctx.font=V,this.ctx.fillStyle=Zg(n.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",W=new Mt(t.bounds.left,t.bounds.top+xA(t.styles.paddingTop,t.bounds.width),t.bounds.width,$G(n.lineHeight,n.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cs(e.listValue,W),n.letterSpacing,$G(n.lineHeight,n.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},g.prototype.renderStackContent=function(e){return Dg(this,void 0,void 0,function(){var t,I,b,n,C,b,l,s,b,i,r,b,c,d,b,h,Z,b,y,S,b;return kg(this,function(m){switch(m.label){case 0:if(mg(e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:m.sent(),t=0,I=e.negativeZIndex,m.label=2;case 2:return t<I.length?(b=I[t],[4,this.renderStack(b)]):[3,5];case 3:m.sent(),m.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:m.sent(),n=0,C=e.nonInlineLevel,m.label=7;case 7:return n<C.length?(b=C[n],[4,this.renderNode(b)]):[3,10];case 8:m.sent(),m.label=9;case 9:return n++,[3,7];case 10:l=0,s=e.nonPositionedFloats,m.label=11;case 11:return l<s.length?(b=s[l],[4,this.renderStack(b)]):[3,14];case 12:m.sent(),m.label=13;case 13:return l++,[3,11];case 14:i=0,r=e.nonPositionedInlineLevel,m.label=15;case 15:return i<r.length?(b=r[i],[4,this.renderStack(b)]):[3,18];case 16:m.sent(),m.label=17;case 17:return i++,[3,15];case 18:c=0,d=e.inlineLevel,m.label=19;case 19:return c<d.length?(b=d[c],[4,this.renderNode(b)]):[3,22];case 20:m.sent(),m.label=21;case 21:return c++,[3,19];case 22:h=0,Z=e.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return h<Z.length?(b=Z[h],[4,this.renderStack(b)]):[3,26];case 24:m.sent(),m.label=25;case 25:return h++,[3,23];case 26:y=0,S=e.positiveZIndex,m.label=27;case 27:return y<S.length?(b=S[y],[4,this.renderStack(b)]):[3,30];case 28:m.sent(),m.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},g.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},g.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},g.prototype.formatPath=function(e){var t=this;e.forEach(function(I,n){var C=Xe(I)?I.start:I;n===0?t.ctx.moveTo(C.x,C.y):t.ctx.lineTo(C.x,C.y),Xe(I)&&t.ctx.bezierCurveTo(I.startControl.x,I.startControl.y,I.endControl.x,I.endControl.y,I.end.x,I.end.y)})},g.prototype.renderRepeat=function(e,t,I,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(I,n),this.ctx.fill(),this.ctx.translate(-I,-n)},g.prototype.resizeImage=function(e,t,I){var n;if(e.width===t&&e.height===I)return e;var C=(n=this.canvas.ownerDocument)!==null&&n!==void 0?n:document,l=C.createElement("canvas");l.width=Math.max(1,t),l.height=Math.max(1,I);var s=l.getContext("2d");return s.drawImage(e,0,0,e.width,e.height,0,0,t,I),l},g.prototype.renderBackgroundImage=function(e){return Dg(this,void 0,void 0,function(){var t,I,n,C,l,s;return kg(this,function(i){switch(i.label){case 0:t=e.styles.backgroundImage.length-1,I=function(r){var c,d,h,K,tA,oA,AA,rA,F,Z,K,tA,oA,AA,rA,y,S,b,m,G,V,W,R,X,F,H,K,_,gA,AA,rA,uA,tA,oA,Q,P,J,IA,iA,ZA,aA,SA;return kg(this,function(mA){switch(mA.label){case 0:if(r.type!==0)return[3,5];c=void 0,d=r.url,mA.label=1;case 1:return mA.trys.push([1,3,,4]),[4,n.context.cache.match(d)];case 2:return c=mA.sent(),[3,4];case 3:return mA.sent(),n.context.logger.error("Error loading background-image "+d),[3,4];case 4:return c&&(h=Ed(e,t,[c.width,c.height,c.width/c.height]),K=h[0],tA=h[1],oA=h[2],AA=h[3],rA=h[4],F=n.ctx.createPattern(n.resizeImage(c,AA,rA),"repeat"),n.renderRepeat(K,F,tA,oA)),[3,6];case 5:G5(r)?(Z=Ed(e,t,[null,null,null]),K=Z[0],tA=Z[1],oA=Z[2],AA=Z[3],rA=Z[4],y=B5(r.angle,AA,rA),S=y[0],b=y[1],m=y[2],G=y[3],V=y[4],W=document.createElement("canvas"),W.width=AA,W.height=rA,R=W.getContext("2d"),X=R.createLinearGradient(b,G,m,V),_G(r.stops,S).forEach(function(dg){return X.addColorStop(dg.stop,Zg(dg.color))}),R.fillStyle=X,R.fillRect(0,0,AA,rA),AA>0&&rA>0&&(F=n.ctx.createPattern(W,"repeat"),n.renderRepeat(K,F,tA,oA))):y5(r)&&(H=Ed(e,t,[null,null,null]),K=H[0],_=H[1],gA=H[2],AA=H[3],rA=H[4],uA=r.position.length===0?[Rh]:r.position,tA=xA(uA[0],AA),oA=xA(uA[uA.length-1],rA),Q=h5(r,tA,oA,AA,rA),P=Q[0],J=Q[1],P>0&&J>0&&(IA=n.ctx.createRadialGradient(_+tA,gA+oA,0,_+tA,gA+oA,P),_G(r.stops,P*2).forEach(function(dg){return IA.addColorStop(dg.stop,Zg(dg.color))}),n.path(K),n.ctx.fillStyle=IA,P!==J?(iA=e.bounds.left+.5*e.bounds.width,ZA=e.bounds.top+.5*e.bounds.height,aA=J/P,SA=1/aA,n.ctx.save(),n.ctx.translate(iA,ZA),n.ctx.transform(1,0,0,aA,0,0),n.ctx.translate(-iA,-ZA),n.ctx.fillRect(_,SA*(gA-ZA)+ZA,AA,rA*SA),n.ctx.restore()):n.ctx.fill())),mA.label=6;case 6:return t--,[2]}})},n=this,C=0,l=e.styles.backgroundImage.slice(0).reverse(),i.label=1;case 1:return C<l.length?(s=l[C],[5,I(s)]):[3,4];case 2:i.sent(),i.label=3;case 3:return C++,[3,1];case 4:return[2]}})})},g.prototype.renderSolidBorder=function(e,t,I){return Dg(this,void 0,void 0,function(){return kg(this,function(n){return this.path(Ry(I,t)),this.ctx.fillStyle=Zg(e),this.ctx.fill(),[2]})})},g.prototype.renderDoubleBorder=function(e,t,I,n){return Dg(this,void 0,void 0,function(){var C,l;return kg(this,function(s){switch(s.label){case 0:return t<3?[4,this.renderSolidBorder(e,I,n)]:[3,2];case 1:return s.sent(),[2];case 2:return C=VL(n,I),this.path(C),this.ctx.fillStyle=Zg(e),this.ctx.fill(),l=WL(n,I),this.path(l),this.ctx.fill(),[2]}})})},g.prototype.renderNodeBackgroundAndBorders=function(e){return Dg(this,void 0,void 0,function(){var t,I,n,C,l,s,i,r,c=this;return kg(this,function(d){switch(d.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,I=!vI(t.backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],C=KL(oC(t.backgroundClip,0),e.curves),I||t.boxShadow.length?(this.ctx.save(),this.path(C),this.ctx.clip(),vI(t.backgroundColor)||(this.ctx.fillStyle=Zg(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(h){c.ctx.save();var Z=Na(e.curves),y=h.inset?0:HL,S=fL(Z,-y+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(c.path(Z),c.ctx.clip(),c.mask(S)):(c.mask(Z),c.ctx.clip(),c.path(S)),c.ctx.shadowOffsetX=h.offsetX.number+y,c.ctx.shadowOffsetY=h.offsetY.number,c.ctx.shadowColor=Zg(h.color),c.ctx.shadowBlur=h.blur.number,c.ctx.fillStyle=h.inset?Zg(h.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),d.label=2;case 2:l=0,s=0,i=n,d.label=3;case 3:return s<i.length?(r=i[s],r.style!==0&&!vI(r.color)&&r.width>0?r.style!==2?[3,5]:[4,this.renderDashedDottedBorder(r.color,r.width,l,e.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return r.style!==3?[3,7]:[4,this.renderDashedDottedBorder(r.color,r.width,l,e.curves,3)];case 6:return d.sent(),[3,11];case 7:return r.style!==4?[3,9]:[4,this.renderDoubleBorder(r.color,r.width,l,e.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(r.color,l,e.curves)];case 10:d.sent(),d.label=11;case 11:l++,d.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},g.prototype.renderDashedDottedBorder=function(e,t,I,n,C){return Dg(this,void 0,void 0,function(){var l,s,i,r,c,d,h,Z,y,S,b,m,G,V,W,R,W,R;return kg(this,function(X){return this.ctx.save(),l=RL(n,I),s=Ry(n,I),C===2&&(this.path(s),this.ctx.clip()),Xe(s[0])?(i=s[0].start.x,r=s[0].start.y):(i=s[0].x,r=s[0].y),Xe(s[1])?(c=s[1].end.x,d=s[1].end.y):(c=s[1].x,d=s[1].y),I===0||I===2?h=Math.abs(i-c):h=Math.abs(r-d),this.ctx.beginPath(),C===3?this.formatPath(l):this.formatPath(s.slice(0,2)),Z=t<3?t*3:t*2,y=t<3?t*2:t,C===3&&(Z=t,y=t),S=!0,h<=Z*2?S=!1:h<=Z*2+y?(b=h/(2*Z+y),Z*=b,y*=b):(m=Math.floor((h+y)/(Z+y)),G=(h-m*Z)/(m-1),V=(h-(m+1)*Z)/m,y=V<=0||Math.abs(y-G)<Math.abs(y-V)?G:V),S&&(C===3?this.ctx.setLineDash([0,Z+y]):this.ctx.setLineDash([Z,y])),C===3?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=t*2+1.1,this.ctx.strokeStyle=Zg(e),this.ctx.stroke(),this.ctx.setLineDash([]),C===2&&(Xe(s[0])&&(W=s[3],R=s[0],this.ctx.beginPath(),this.formatPath([new L(W.end.x,W.end.y),new L(R.start.x,R.start.y)]),this.ctx.stroke()),Xe(s[1])&&(W=s[1],R=s[2],this.ctx.beginPath(),this.formatPath([new L(W.end.x,W.end.y),new L(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},g.prototype.render=function(e){return Dg(this,void 0,void 0,function(){var t;return kg(this,function(I){switch(I.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Zg(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=SL(e),[4,this.renderStack(t)];case 1:return I.sent(),this.applyEffects([]),[2,this.canvas]}})})},g}(dv),QL=function(A){return A instanceof _R||A instanceof PR?!0:A instanceof Jh&&A.type!==Ya&&A.type!==Ha},KL=function(A,g){switch(A){case 0:return Na(g);case 2:return bL(g);case 1:default:return Ua(g)}},NL=function(A){switch(A){case 1:return"center";case 2:return"right";case 0:default:return"left"}},UL=["-apple-system","system-ui"],xL=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(g){return UL.indexOf(g)===-1}):A},EL=function(A){$e(g,A);function g(e,t){var I=A.call(this,e,t)||this;return I.canvas=t.canvas?t.canvas:document.createElement("canvas"),I.ctx=I.canvas.getContext("2d"),I.options=t,I.canvas.width=Math.floor(t.width*t.scale),I.canvas.height=Math.floor(t.height*t.scale),I.canvas.style.width=t.width+"px",I.canvas.style.height=t.height+"px",I.ctx.scale(I.options.scale,I.options.scale),I.ctx.translate(-t.x,-t.y),I.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale),I}return g.prototype.render=function(e){return Dg(this,void 0,void 0,function(){var t,I;return kg(this,function(n){switch(n.label){case 0:return t=Ym(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,LL(t)];case 1:return I=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Zg(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(I,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},g}(dv),LL=function(A){return new Promise(function(g,e){var t=new Image;t.onload=function(){g(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},ML=function(){function A(g){var e=g.id,t=g.enabled;this.id=e,this.enabled=t,this.start=Date.now()}return A.prototype.debug=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,_i([this.id,this.getTime()+"ms"],g)):this.info.apply(this,g))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,_i([this.id,this.getTime()+"ms"],g))},A.prototype.warn=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,_i([this.id,this.getTime()+"ms"],g)):this.info.apply(this,g))},A.prototype.error=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,_i([this.id,this.getTime()+"ms"],g)):this.info.apply(this,g))},A.instances={},A}(),DL=function(){function A(g,e){var t;this.windowBounds=e,this.instanceName="#"+A.instanceCount++,this.logger=new ML({id:this.instanceName,enabled:g.logging}),this.cache=(t=g.cache)!==null&&t!==void 0?t:new aL(this,g)}return A.instanceCount=1,A}(),uv=function(A,g){return g===void 0&&(g={}),zL(A,g)};typeof window<"u"&&sv.setContext(window);var zL=function(A,g){return Dg(void 0,void 0,void 0,function(){var e,t,I,n,C,l,s,i,r,c,d,h,Z,y,S,b,m,G,V,W,X,R,X,F,H,K,_,gA,AA,rA,uA,tA,oA,Q,P,J,IA,iA,ZA,aA;return kg(this,function(SA){switch(SA.label){case 0:if(!A||typeof A!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(e=A.ownerDocument,!e)throw new Error("Element is not attached to a Document");if(t=e.defaultView,!t)throw new Error("Document is not attached to a Window");return I={allowTaint:(F=g.allowTaint)!==null&&F!==void 0?F:!1,imageTimeout:(H=g.imageTimeout)!==null&&H!==void 0?H:15e3,proxy:g.proxy,useCORS:(K=g.useCORS)!==null&&K!==void 0?K:!1},n=pm({logging:(_=g.logging)!==null&&_!==void 0?_:!0,cache:g.cache},I),C={windowWidth:(gA=g.windowWidth)!==null&&gA!==void 0?gA:t.innerWidth,windowHeight:(AA=g.windowHeight)!==null&&AA!==void 0?AA:t.innerHeight,scrollX:(rA=g.scrollX)!==null&&rA!==void 0?rA:t.pageXOffset,scrollY:(uA=g.scrollY)!==null&&uA!==void 0?uA:t.pageYOffset},l=new Mt(C.scrollX,C.scrollY,C.windowWidth,C.windowHeight),s=new DL(n,l),i=(tA=g.foreignObjectRendering)!==null&&tA!==void 0?tA:!1,r={allowTaint:(oA=g.allowTaint)!==null&&oA!==void 0?oA:!1,onclone:g.onclone,ignoreElements:g.ignoreElements,inlineImages:i,copyStyles:i},s.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),c=new Sy(s,A,r),d=c.clonedReferenceElement,d?[4,c.toIFrame(e,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=SA.sent(),Z=Fh(d)||j3(d)?f9(d.ownerDocument):wr(s,d),y=Z.width,S=Z.height,b=Z.left,m=Z.top,G=TL(s,d,g.backgroundColor),V={canvas:g.canvas,backgroundColor:G,scale:(P=(Q=g.scale)!==null&&Q!==void 0?Q:t.devicePixelRatio)!==null&&P!==void 0?P:1,x:((J=g.x)!==null&&J!==void 0?J:0)+b,y:((IA=g.y)!==null&&IA!==void 0?IA:0)+m,width:(iA=g.width)!==null&&iA!==void 0?iA:Math.ceil(y),height:(ZA=g.height)!==null&&ZA!==void 0?ZA:Math.ceil(S)},i?(s.logger.debug("Document cloned, using foreign object rendering"),X=new EL(s,V),[4,X.render(d)]):[3,3];case 2:return W=SA.sent(),[3,5];case 3:return s.logger.debug("Document cloned, element located at "+b+","+m+" with size "+y+"x"+S+" using computed rendering"),s.logger.debug("Starting DOM parsing"),R=Av(s,d),G===R.styles.backgroundColor&&(R.styles.backgroundColor=Yt.TRANSPARENT),s.logger.debug("Starting renderer for element at "+V.x+","+V.y+" with size "+V.width+"x"+V.height),X=new YL(s,V),[4,X.render(R)];case 4:W=SA.sent(),SA.label=5;case 5:return(!((aA=g.removeContainer)!==null&&aA!==void 0)||aA)&&(Sy.destroy(h)||s.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),s.logger.debug("Finished rendering"),[2,W]}})})},TL=function(A,g,e){var t=g.ownerDocument,I=t.documentElement?Is(A,getComputedStyle(t.documentElement).backgroundColor):Yt.TRANSPARENT,n=t.body?Is(A,getComputedStyle(t.body).backgroundColor):Yt.TRANSPARENT,C=typeof e=="string"?Is(A,e):e===null?Yt.TRANSPARENT:4294967295;return g===t.documentElement?vI(I)?vI(n)?C:n:I:C};const jL="/SmartparkingV2/assets/TrueMoneyQRCode-2WgJYhZe.png";function OL({}){const A=hg(),g=Ug(),{total:e}=A.state||{},[t,I]=f.useState(15),n=()=>{uv(document.querySelector(".savebilprompt")).then(C=>{const l=document.createElement("a");l.href=C.toDataURL("image/png"),l.download="promptpay-receipt.png",l.click()})};return f.useEffect(()=>{if(t>0){const C=setTimeout(()=>I(t-1),1e3);return()=>clearTimeout(C)}else g("/profile/payment/true/unsuccessful")},[t,g]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content",children:[o.jsxs("div",{className:"receipt-container",children:[o.jsxs("div",{className:"payment-methods",children:[o.jsx("h2",{children:"วิธีการชำระเงิน"}),o.jsxs("button",{className:"payment-btn truemoney",children:[o.jsx("img",{src:oR,alt:"Logo1",className:"btn-logo"})," TrueMoney"]}),o.jsxs("div",{className:"savebilprompt",children:[o.jsx("div",{className:"qrprompt",children:o.jsx("img",{src:jL,alt:"Logo1",className:"logotruemoney"})}),o.jsxs("div",{className:"totaltruemoney",children:[o.jsx("p",{children:"ลานจอดรถ"}),o.jsx("p",{children:"012-XXX-567X"}),o.jsx("div",{className:"total2-truemoney",children:o.jsxs("p",{children:["จำนวนเงิน : ",o.jsxs("span",{children:["฿ ",e]})]})})]})]})]}),o.jsxs("button",{onClick:n,className:"save-image-btn",children:[o.jsx(xV,{size:28})," ",o.jsx("div",{children:"บันทึกรูป"})]}),o.jsx("div",{className:"countdown-timer",children:o.jsxs("p",{children:["กรุณาดำเนินการภายใน: ",o.jsxs("span",{children:[t," วินาที"]})]})}),o.jsx(j,{to:"/profile/payment/true/finished",className:"link-no-underline",children:o.jsx("button",{className:"promptpay-btn operation8"})})]}),o.jsx("div",{className:"form-buttonsP",children:o.jsxs(Vg,{className:"btn2",onClick:()=>g(-1),children:[o.jsx("img",{src:js,alt:"Back Icon",className:"icon33"}),"ย้อนกลับ"]})}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/payment/true"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}const PL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAEGCAYAAACkbmrpAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAcxSURBVHhe7d3Bjtw2EARQb/7/n5MdwEAQBCYzquqh5Lx3sS+SyCZdINzE7tef334AFPzx80+AmEABagQKUCNQgJq3/1P26+vr599+H6sSJPM9+f/dq3GfGteulrtxndp7U/vjzq7uEScUoEagADUCBagRKECNQAFqBApQU20bX201TUvblfwtaZPu6nzHtvDOU/fW1LidUIAagQLUCBSgRqAANQIFqBEoQI1AAWo+eg9l6p5B+t3V85P3DKbqsZPU69SzL6fWaSX97u75qyZrveKEAtQIFKBGoAA1AgWoEShAjUABarSNv62eT8Z8qh4vby7rf3ayHlNzSqRjntoDp2rthALUCBSgRqAANQIFqBEoQI1AAWoEClDjHsq31fNTY955c1mqTs15J1mnqXqm352qdfrdq/VyQgFqBApQI1CAGoEC1AgUoEagADUfbRufMtlSfGI9dpI57Wq9krz7VK0n99akqXE7oQA1AgWoEShAjUABagQKUCNQgBqBAtRU76E81aoESb/+1LMvq+ef+OzLVL0mn32q3Vr9ihMKUCNQgBqBAtQIFKBGoAA1AgWoEShAzdv3UPin5N7FSnI3IjV1t2I35lP3QfwT6HFCAWoEClAjUIAagQLUCBSgRqAANY/58QVJa2+yHfl/azlO1mNybyVrvJKu/9Scd+OaWkcnFKBGoAA1AgWoEShAjUABagQKUCNQgJrf4scXpD311fOTz046db9hZXKdnmqynomr43JCAWoEClAjUIAagQLUCBSgRqAANbdpGyctsMl242R5Ts351Jwm1ylx13HtJOu4m9PVdzuhADUCBagRKECNQAFqBApQI1CAGoEC1Nzm12gkdwGSfvxLMqf027+S1nk1rlPz3X13qpaT0jmtnp+s9c7VbzuhADUCBagRKECNQAFqBApQI1CAmo/++IIntsiSd0+WdjeuqTkldvVI5vRUd91fVzmhADUCBagRKECNQAFqBApQI1CAGoEC1FTvoUz21O/ar3/iPYLkvkcy31QyrqTWq3ef3Fun6rHihALUCBSgRqAANQIFqBEoQI1AAWoEClDz0V+jMdU3T8b0cmpcb5b+Y06t8c6pWq/evXtvOueVU/VYcUIBagQKUCNQgBqBAtQIFKBGoAA1t/k1Gjt3bJG9TLUF0zFP1TqRrtPq+WTMk/tnch2m6pFwQgFqBApQI1CAGoEC1AgUoEagADUCBaj56D2URNLPT5y6gzDpifcbXpJxJWuxevfkGk+u027cV9fZCQWoEShAjUABagQKUCNQgBqBAtRU28aTLbREcYr/MjXntO03JRnX5DrsTI1rtw53rVc67l9xQgFqBApQI1CAGoEC1AgUoEagADUCBah5+x5K0jff9b5Xkp78VM99Z/K7SS13psb1f9wfk3NKaj3FCQWoEShAjUABagQKUCNQgBqBAtR8tG28cqpl+DL17ZNzmrKb0+QeuGOt71qPnal3O6EANQIFqBEoQI1AAWoEClAjUIAagQLUVO+hnLKbQtJzP/XspLvWY9LUuHZreNd67cZ9lRMKUCNQgBqBAtQIFKBGoAA1AgWoEShAzUfvoSQ996m+eWo17pNjvuO40jVO9t5dJWsxWY+r43JCAWoEClAjUIAagQLUCBSgRqAANW+3jRNJm2s1zLR9dsfW3W5Mu++emtPkd6fefXL9k28npmrthALUCBSgRqAANQIFqBEoQI1AAWoEClBTvYcyeY9gJf1ucpdg9e5kXMmYXqZqfVen9l5qNe5kzKfq4YQC1AgUoEagADUCBagRKECNQAFqqj/1/lRrbrLFmrx7sh5JWzCt11W7eiRzSpyqR2pyf13lhALUCBSgRqAANQIFqBEoQI1AAWoEClDz0V+j8USn7kZMeuIdlpdkXFPPppJ63nFOTihAjUABagQKUCNQgBqBAtQIFKCm+uMLnmqqhTbZuptqN76s3j055lP12FmNK53TE2u94oQC1AgUoEagADUCBagRKECNQAFqBApQ81v8Go2dyZ787t0rq++eHPPUu9P98cRa7yT1mnr25eqcnVCAGoEC1AgUoEagADUCBagRKECNQAFqPnoPZdf7vupUz/3ljvXYScaV1Cr1xFonnrhOTihAjUABagQKUCNQgBqBAtQIFKBG2/jb6vlkzMm4TtVy0m5Ok6Zqna7TVE1OfdcJBagRKECNQAFqBApQI1CAGoEC1AgUoMY9lG+r50/183emavmSzOnU/pga87Sp/XNq3zqhADUCBagRKECNQAFqBApQI1CAmo+2jU9JWmiTLcXJek2tU1KP3XdPrVM6rkQyp8l1vPpuJxSgRqAANQIFqBEoQI1AAWoEClAjUICa6j2Up5q6C3Dq2UmTczplV8tk3JPvXjm1P5xQgBqBAtQIFKBGoAA1AgWoEShAjUABat6+hwLwK04oQI1AAWoEClAjUIAagQLUCBSg5MePvwAEluSLyLBR0AAAAABJRU5ErkJggg==";function _L({}){const A=hg(),g=Ug(),{total:e}=A.state||{},[t,I]=f.useState(15),n=()=>{uv(document.querySelector(".savebilprompt")).then(C=>{const l=document.createElement("a");l.href=C.toDataURL("image/png"),l.download="promptpay-receipt.png",l.click()})};return f.useEffect(()=>{if(t>0){const C=setTimeout(()=>I(t-1),1e3);return()=>clearTimeout(C)}else g("/profile/payment/promptpay/unsuccessful")},[t,g]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content",children:[o.jsxs("div",{className:"receipt-container",children:[o.jsxs("div",{className:"payment-methods",children:[o.jsx("h2",{children:"วิธีการชำระเงิน"}),o.jsxs("button",{className:"payment-btn promptpay",children:[o.jsx("img",{src:bm,alt:"Logo1",className:"btn-logo"})," PromptPay"]}),o.jsxs("div",{className:"savebilprompt",children:[o.jsxs("div",{className:"qrprompt",children:[o.jsx("img",{src:bm,alt:"Logo1",className:"logoprompt"})," ",o.jsx("br",{}),o.jsx("img",{src:PL,alt:"Logo1",className:"logoqrprompt"})]}),o.jsxs("div",{className:"totalprompt",children:[o.jsxs("p",{children:["ชื่อ : ",o.jsx("span",{children:"ลานจอดรถ"})]}),o.jsxs("p",{children:["บัญชี : ",o.jsx("span",{children:"xxx-x-x3000-x"})]}),o.jsxs("p",{children:["เลขที่อ้าง : ",o.jsx("span",{children:"123444047957"})]}),o.jsxs("p",{children:["จำนวนเงิน : ",o.jsxs("span",{children:["฿ ",e]})]})]})]})]}),o.jsxs("button",{onClick:n,className:"save-image-btn",children:[o.jsx(xV,{size:28})," ",o.jsx("div",{children:"บันทึกรูป"})]}),o.jsx("div",{className:"countdown-timer",children:o.jsxs("p",{children:["กรุณาดำเนินการภายใน: ",o.jsxs("span",{children:[t," วินาที"]})]})}),o.jsx(j,{to:"/profile/payment/promptpay/finished",className:"link-no-underline",children:o.jsx("button",{className:"promptpay-btn operation8"})})]}),o.jsx("div",{className:"form-buttonsP",children:o.jsxs(Vg,{className:"btn2",onClick:()=>g(-1),children:[o.jsx("img",{src:js,alt:"Back Icon",className:"icon33"}),"ย้อนกลับ"]})}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/payment/promptpay"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}const qL="/SmartparkingV2/Correct.png";function $L({}){const A=hg(),g=Ug(),[e,t]=f.useState(10);return f.useEffect(()=>{if(e>0){sessionStorage.removeItem("paymentData");const I=setTimeout(()=>t(e-1),1e3);return()=>clearTimeout(I)}else g("/home")},[e,g]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content2",children:[o.jsxs("div",{className:"receipt-container",children:[o.jsxs("div",{className:"payment-methods",children:[o.jsx("h2",{children:"การชำระเงิน"}),o.jsx("div",{className:"savebilprompt",children:o.jsx("img",{src:qL,alt:"Logo1",className:"logogreencorrect"})}),o.jsxs("div",{className:"finish",children:[o.jsx("h4",{children:"การชำระเงินเสร็จสิ้น"}),o.jsx("p",{children:"ขอบคุณที่ใช้บริการ"})]})]}),o.jsx(j,{to:"/home",className:"link-no-underline",children:o.jsx("button",{className:"promptpay-btn operation",children:"เสร็จสิ้น"})})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/payment/promptpay/finished"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}function AM({}){const A=hg(),g=Ug(),[e,t]=f.useState(10);return f.useEffect(()=>{if(sessionStorage.removeItem("paymentData"),e>0){const I=setTimeout(()=>t(e-1),1e3);return()=>clearTimeout(I)}else g("/home")},[e,g]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content2",children:[o.jsxs("div",{className:"receipt-container",children:[o.jsxs("div",{className:"payment-methods",children:[o.jsx("h2",{children:"การชำระเงิน"}),o.jsx("div",{className:"savebilprompt",children:o.jsx("img",{src:ar,alt:"Logo1",className:"logogreencorrect"})}),o.jsxs("div",{className:"finish",children:[o.jsx("h4",{children:"การชำระเงินเสร็จสิ้น"}),o.jsx("p",{children:"ขอบคุณที่ใช้บริการ"})]})]}),o.jsx(j,{to:"/home",className:"link-no-underline",children:o.jsx("button",{className:"promptpay-btn operation",children:"เสร็จสิ้น"})})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname==="/profile/payment/true/finished"?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}const gM="/SmartparkingV2/Cancel.png";function wy({}){const A=hg(),g=Ug(),[e,t]=f.useState(10);return f.useEffect(()=>{if(e>0){const I=setTimeout(()=>t(e-1),1e3);return()=>clearTimeout(I)}else g("/profile/payment")},[e,g]),o.jsxs("div",{style:{minHeight:"100%"},children:[o.jsx("div",{children:o.jsx("div",{className:"box3",children:o.jsx("img",{src:qe,alt:"My Logo1",className:"Logo3-image"})})}),o.jsxs("div",{className:"main-content2",children:[o.jsxs("div",{className:"receipt-container",children:[o.jsxs("div",{className:"payment-methods",children:[o.jsx("h2",{children:"การชำระเงิน"}),o.jsx("div",{className:"savebilprompt",children:o.jsx("img",{src:gM,alt:"Logo1",className:"logocancel"})}),o.jsxs("div",{className:"fail",children:[o.jsx("h4",{children:"การชำระเงินล้มเหลว"}),o.jsxs("p",{children:["โปรดกรุณาติดต่อเจ้าหน้าที่หรือ ",o.jsx("br",{}),"ทำการชำระเงินใหม่อีกครั้ง"]})]})]}),o.jsx(j,{to:"/profile/payment",className:"link-no-underline",children:o.jsx("button",{className:"promptpay-btn operation",children:"ลองอีกครั้ง"})})]}),o.jsx("div",{className:"boxnav1",children:o.jsx("div",{className:"boxnav",children:o.jsx("div",{className:"bottom-navbar",children:o.jsxs(M,{className:"justify-content-around",children:[o.jsx(M.Item,{children:o.jsxs(j,{to:"/home",className:`nav-item home-link ${A.pathname==="/home/ScanQRCode"?"active":""}`,children:[o.jsx(Ce,{className:"icon",size:31}),o.jsx("span",{children:" หน้าแรก"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/findparking",className:`nav-item findparking-link ${A.pathname==="/findparking"?"active":""}`,children:[o.jsx(jg,{className:"icon",size:31}),o.jsx("span",{children:" ค้นหาลานจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/record",className:`nav-item record-link ${A.pathname==="/record"?"active":""}`,children:[o.jsx(wA,{icon:Ie,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ประวัติการจอด"})]})}),o.jsx(M.Item,{children:o.jsxs(j,{to:"/profile",className:`nav-item profile-link ${A.pathname.includes("/profile/payment")&&A.pathname.includes("/unsuccessful")?"active":""}`,children:[o.jsx(wA,{icon:ne,className:"icon",style:{fontSize:"31px"}}),o.jsx("span",{children:" ข้อมูลส่วนตัว"})]})})]})})})})]})]})}function eM(){const[A,g]=f.useState(localStorage.getItem("loggedIn")==="true"),e=(I,n)=>{localStorage.setItem("loggedIn","true"),localStorage.setItem("userRole",n),g(!0)},t=()=>{localStorage.removeItem("loggedIn"),g(!1)};return o.jsx(jF,{children:o.jsxs(xF,{children:[o.jsx($A,{path:"/",element:o.jsx(Fi,{to:A?"/home":"/login"})}),o.jsx($A,{path:"/login",element:A?o.jsx(Fi,{to:"/home"}):o.jsx(xH,{onLogin:e})}),o.jsx($A,{path:"/home",element:A?o.jsx(SG,{onLogout:t}):o.jsx(Fi,{to:"/login"})}),o.jsx($A,{path:"/home/ScanQRCode",element:o.jsx(a9,{})}),o.jsx($A,{path:"/signup",element:o.jsx(EH,{})}),o.jsx($A,{path:"/forgot-password",element:o.jsx(LH,{})}),o.jsx($A,{path:"/forgot-password/resetpass",element:o.jsx(MH,{})}),o.jsx($A,{path:"/",element:o.jsx(SG,{})}),o.jsx($A,{path:"/findparking",element:o.jsx(d9,{})}),o.jsx($A,{path:"/record",element:o.jsx(B9,{})}),o.jsx($A,{path:"/profile",element:A?o.jsx(h9,{onLogout:t}):o.jsx(Fi,{to:"/login"})}),o.jsx($A,{path:"/profile/edit-member",element:o.jsx(Z9,{})}),o.jsx($A,{path:"/profile/payment",element:o.jsx(p9,{})}),o.jsx($A,{path:"/profile/payment/promptpay",element:o.jsx(_L,{})}),o.jsx($A,{path:"/profile/appointment",element:o.jsx(G9,{})}),o.jsx($A,{path:"/profile/report",element:o.jsx(y9,{})}),o.jsx($A,{path:"/profile/payment/true",element:o.jsx(OL,{})}),o.jsx($A,{path:"/profile/payment/promptpay/finished",element:o.jsx($L,{})}),o.jsx($A,{path:"/profile/payment/true/finished",element:o.jsx(AM,{})}),o.jsx($A,{path:"/profile/payment/promptpay/unsuccessful",element:o.jsx(wy,{})}),o.jsx($A,{path:"/profile/payment/true/unsuccessful",element:o.jsx(wy,{})})]})})}DS(document.getElementById("root")).render(o.jsx(f.StrictMode,{children:o.jsx(eM,{})}));
